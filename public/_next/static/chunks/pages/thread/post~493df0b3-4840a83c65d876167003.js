_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[56],{"+9CB":function(e,t,n){"use strict";var r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},o=function(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:(t+=i(e,t),o(e,t))},a=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]};e.exports={isLikelyAacData:function(e){var t=o(e,0);return e.length>=t+2&&255===(255&e[t])&&240===(240&e[t+1])&&16===(22&e[t+1])},parseId3TagSize:i,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240===(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240===(246&e[t+1]))return r[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,r;t=10,64&e[5]&&(t+=4,t+=a(e.subarray(10,14)));do{if((n=a(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){r=e.subarray(t+10,t+n+10);for(var i=0;i<r.byteLength;i++)if(0===r[i]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}(r,0,i))){var o=r.subarray(i+1),s=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return s*=4,s+=3&o[7]}break}}t+=10,t+=n}while(t<e.byteLength);return null}}},"+M1K":function(e,t,n){var r=n("ppGB");e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},"+X0y":function(e,t){var n={"":!0,up:!0};function r(e){return"number"===typeof e&&e>=0&&e<=100}e.exports=function(){var e=100,t=3,i=0,o=100,a=0,s=100,c="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!r(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!==typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!r(e))throw new Error("RegionAnchorX must be between 0 and 100.");o=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!r(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!r(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!r(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return c},set:function(e){var t=function(e){return"string"===typeof e&&!!n[e.toLowerCase()]&&e.toLowerCase()}(e);!1===t?console.warn("Scroll: an invalid or illegal string was specified."):c=t}}})}},"+Ycc":function(e,t,n){"use strict";var r=n("284h"),i=n("TqRt");n("ma9I"),n("qePV"),n("zKZe"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("J4zp")),a=r(n("q1tI")),s=i(n("TSYQ")),c=i(n("MCNy")),l=n("VTYn"),u=i(n("XaQo")),d=i(n("MzE4")),f=n("nmBk"),p=i(n("jqTq")),h=i(n("b9ng")),m=function(e){var t=e.imgUrls,n=void 0===t?[]:t,r=e.currentImgIdx,i=void 0===r?0:r,m=(e.visible,e.onClose),v=void 0===m?function(){}:m,b=e.onSwipRight,g=void 0===b?function(){}:b,y=e.onSwipLeft,_=void 0===y?function(){}:y,w=e.onClickLock,O=void 0===w?function(){}:w,x=e.onClickUnLock,S=void 0===x?function(){}:x,j=e.onError,E=void 0===j?function(e){return""}:j,T=!1;"undefined"!==typeof window&&(T=(0,h.default)());var k=(0,l.useConfig)().clsPrefix,C=a.default.useRef(null),A=a.default.useRef(null),M=a.default.useRef(!1),P=a.default.useRef(null),R=a.default.useRef(!1),L=a.default.useRef(null),N=a.default.useRef(!1),D=a.default.useRef(null),I=a.default.useRef(!1),B=a.default.useRef(null),H=a.default.useRef(!1),U=a.default.useRef(null),q=a.default.useRef("normal"),V=a.default.useRef(null),F=a.default.useRef(i),W=a.default.useRef(n),z=a.default.useState(null),X=(0,o.default)(z,2),Y=X[0],K=X[1],G=a.default.useState(null),Q=(0,o.default)(G,2),Z=Q[0],J=Q[1],$=a.default.useState(!1),ee=(0,o.default)($,2),te=ee[0],ne=ee[1],re=a.default.useState(!1),ie=(0,o.default)(re,2),oe=ie[0],ae=ie[1],se=a.default.useState(!1),ce=(0,o.default)(se,2),le=ce[0],ue=ce[1],de=a.default.useState(1),fe=(0,o.default)(de,2),pe=fe[0],he=fe[1],me=a.default.useState(0),ve=(0,o.default)(me,2),be=ve[0],ge=ve[1],ye=a.default.useState(0),_e=(0,o.default)(ye,2),we=_e[0],Oe=_e[1],xe=a.default.useState(0),Se=(0,o.default)(xe,2),je=Se[0],Ee=Se[1],Te=a.default.useState(0),ke=(0,o.default)(Te,2),Ce=ke[0],Ae=ke[1],Me=a.default.useState(!1),Pe=(0,o.default)(Me,2),Re=Pe[0],Le=Pe[1],Ne=a.default.useState(0),De=(0,o.default)(Ne,2),Ie=(De[0],De[1],a.default.useState(0)),Be=(0,o.default)(Ie,2),He=(Be[0],Be[1],a.default.useState(n[i]||"")),Ue=(0,o.default)(He,2),qe=Ue[0],Ve=Ue[1],Fe=a.default.useRef(!0),We=a.default.useRef(null),ze={},Xe=600;"undefined"!==typeof window&&(Xe=window.innerHeight);var Ye=a.default.useCallback((function(e){var t=e.noZoomPositionChange,n=void 0!==t&&t;ue((function(e){var t=!1;if(ae((function(e){return e&&(t=!0),e})),ne((function(e){return e&&(t=!0),e})),!t)return e?(he(1),"long"!==q.current?(Oe(0),ge(0)):Oe(0),n||(Ee(0),Ae(0))):he(2),!e}))}),[]),Ke=a.default.useCallback((function(){P.current&&clearTimeout(P.current),M.current=!0,P.current=setTimeout((function(){M.current=!1}),300)}),[]),Ge=a.default.useCallback((function(){I.current&&clearTimeout(B.current),I.current=!0,B.current=setTimeout((function(){I.current=!1}),300)}),[]),Qe=a.default.useCallback((function(){H.current&&clearTimeout(U.current),H.current=!0,O(),U.current=setTimeout((function(){H.current=!1,S()}),300)}),[]),Ze=a.default.useCallback((function(){clearTimeout(L.current),R.current=!0,L.current=setTimeout((function(){R.current=!1}),500)}),[]),Je=a.default.useCallback((function(){N.current||(N.current=!0,D.current=setTimeout((function(){N.current=!1}),300))}),[]),$e=(0,a.useCallback)((function(e){var t=e.x,n=e.y;if(V.current){var r=null,i=V.current.getBoundingClientRect().left,o=V.current.getBoundingClientRect().top;if(he((function(e){return r=e,e})),Oe((function(e){return e,e})),ge((function(e){return e,e})),"undefined"!==typeof window){var a=(t-i)/r,s=(n-o)/r;Ee((function(){return a})),Ae((function(){return s}))}}}),[]),et=a.default.useCallback((function(){ue((function(e){return e||(F.current+1!==W.current.length&&ne(!0),_(),setTimeout((function(){Oe(0),ge(0)}),300),e)}))}),[_]),tt=a.default.useCallback((function(){ue((function(e){return e||(F.current+1!==1&&ne(!0),g(),setTimeout((function(){Oe(0),ge(0)}),300),e)}))}),[g]);(0,a.useEffect)((function(){return We.current&&(C.current=new u.default(We.current,{singleTap:function(){M.current||v()},doubleTap:function(e){var t=(0,f.get)(e.changedTouches[0],"pageX",0),n=(0,f.get)(e.changedTouches[0],"pageY",0);$e({x:t,y:n}),Ye({noZoomPositionChange:!0})},pinch:function(e){Ke(),Je(),ue(!0),Ge();var t=((0,f.get)(e.touches[0],"pageX",0)+(0,f.get)(e.touches[1],"pageX",0))/2,n=((0,f.get)(e.touches[0],"pageY",0)+(0,f.get)(e.touches[1],"pageY",0))/2;e.zoom>1&&!R.current&&e.zoom<=2.5&&($e({x:t,y:n}),Ze()),Number(e.zoom)<=1?he((function(e){return.85*e<=1?(Oe(0),"long"!==q.current&&ge(0),ue(!1),1):.85*e})):he((function(t){return t>=3?t:e.zoom<t?t+e.zoom/3:(e.zoom-t)/3+t}))},pressMove:function(e){if(Ke(),!I.current){var t=function(){ge((function(t){var n=window.innerHeight;if(V.current){var r=V.current.getBoundingClientRect().top,i=V.current.getBoundingClientRect().bottom-n+89,o=r>=0,a=i<=0;if(e.deltaY>=0){if(o)return e.deltaY>=30&&v(),t;if(r<=0&&-r<=e.deltaY)return t+Math.abs(r)}if(e.deltaY<0){if(a)return t;if(i>=0&&i<=Math.abs(e.deltaY))return t-i}return t+e.deltaY}}))};ue((function(n){return n?(Oe((function(t){var n=window.innerWidth;if(he((function(e){return e})),V.current){var r=V.current.getBoundingClientRect().left,i=V.current.getBoundingClientRect().right-n,o=r>=0,a=i<=0;if(e.deltaX>=0){if(r<=0&&Math.abs(r)<=e.deltaX)return t+Math.abs(r);if(o){if(Math.abs(e.deltaX)>15){if(N.current)return;Je(),ue(!1),tt()}return t}}if(e.deltaX<0){if(i>=0&&i<=Math.abs(e.deltaX))return t+i;if(a){if(Math.abs(e.deltaX)>15){if(N.current)return;Je(),ue(!1),et()}return t}}return t+e.deltaX}})),t(),n):(J((function(n){n>window.innerHeight-89?t():e.deltaY>=30&&v(),J(n)})),n)}))}},swipe:function(e){if(Ke(),Ge(),!N.current)switch(e.direction){case"Left":et();break;case"Right":tt()}}}),A.current=new d.default(We.current,{mouseMove:function(e){if(V.current){var t=window.innerWidth,n=window.innerHeight;V.current.getBoundingClientRect().left,V.current.getBoundingClientRect().right,V.current.getBoundingClientRect().top,V.current.getBoundingClientRect().bottom;Qe(),e.preventDefault(),e.stopPropagation(),ue((function(t){if(t)return Oe((function(t){return t+e.deltaX})),ge((function(t){return t+e.deltaY})),t;J((function(t){t>window.innerHeight-89&&(Le(!0),ge((function(t){return t+e.deltaY}))),J(t)}))}))}},zoomIn:function(e){var t=e.zoom;e.evt;ue(!0),he((function(e){return e-t/10<=1?1:e-t/10}))},zoomOut:function(e){var t=e.zoom,n=e.evt;he((function(e){return e+t/10})),$e({x:n.x,y:n.y}),ue(!0)}})),function(){C.current&&C.current.destroy(),A.current&&A.current.destroy()}}),[]),(0,a.useEffect)((function(){Le(!1);var e,t;return Fe.current||ne(!0),Fe.current=!1,F.current=i,W.current=n,t=setTimeout((function(){Ve(n[i]),ae(!1),ue(!1),Ee(0),Ae(0)}),300),e=setTimeout((function(){if(!V.current)return ae(!0),void ne(!1);V.current&&V.current.complete||oe?ne(!1):ne(!0)}),300),function(){clearTimeout(e),clearTimeout(t)}}),[i]),Y&&Object.assign(ze,{width:Y}),Z&&Object.assign(ze,{height:Z}),te?Object.assign(ze,{visibility:"hidden",opacity:0}):Object.assign(ze,{visibility:"visible",opacity:1}),Xe-89<Z&&Object.assign(ze,{top:"calc(50% + ".concat(be,"px)")}),le&&Object.assign(ze,{transform:"translate(-50%, -50%) scale(".concat(pe,") translateZ(0)"),top:"calc(50% + ".concat(be,"px)"),left:"calc(50% + ".concat(we,"px)")}),je&&Ce&&Object.assign(ze,{transformOrigin:"".concat(je,"px ").concat(Ce,"px")});return a.default.createElement("div",{className:"".concat(k,"-img-previewer__viewer-wrapper"),ref:We},!oe&&a.default.createElement("img",{style:ze,ref:V,draggable:!1,onLoad:function(e){!function(e){var t=e.height,n=e.width;if("undefined"!==typeof window){var r="width",i=1;t>=n&&(r="height");var o=window.innerHeight,a=window.innerWidth;switch(r){case"width":ge(0),Oe(0),n>a?(i=n/a,K(a),J(t/i),q.current="width"):(K(n),J(t),q.current="normal");break;case"height":t>=o?t/n>=2.5?(Le(!0),n<=a?(K(n),J(t),ge(t/2-o/2),q.current="long"):(K(a),J(t/(i=n/a)),ge(t/i/2-o/2),q.current="long")):(Le(!1),ge(0),Oe(0),n>=a?(K(a),J(t/(i=n/a)),q.current="normal"):(i=t/o,J(o),K(n/i),q.current="normal")):(Le(!1),ge(0),Oe(0),n>=a?(K(a),J(t/(i=n/a))):(K(n),J(t)),q.current="normal")}}}({height:e.target.naturalHeight,width:e.target.naturalWidth}),setTimeout((function(){ne(!1)}),300)},onClick:function(e){e.stopPropagation(),e.preventDefault()},onError:function(e){var t=E(i);t&&t!==qe?Ve(t):(ne(!1),ae(!0))},onDoubleTap:function(e){e.stopPropagation(),e.preventDefault()},onTap:function(e){e.stopPropagation(),e.preventDefault()},onDoubleClick:function(){T||Ye({noZoomPositionChange:!1})},className:(0,s.default)("".concat(k,"-img-previewer__viewer-instance"),{"is-hidden":te,"is-movable":le||Re}),src:qe}),te?a.default.createElement("div",{className:"".concat(k,"-img-previewer__viewer-loading")},a.default.createElement(p.default,{type:"spinner"})):oe?a.default.createElement("div",{className:"".concat(k,"-img-previewer__viewer-loading is-error")},a.default.createElement(c.default,{name:"PictureErrorOutlined",size:50}),"\u56fe\u50cf\u52a0\u8f7d\u5931\u8d25"):null)};t.default=m},"+omo":function(e,t,n){"use strict";var r=n("TqRt");n("ma9I"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("lSNA")),o=r(n("q1tI")),a=n("VTYn"),s=r(n("TSYQ")),c=function(e){var t=e.leftChildren,n=e.rightChildren,r=e.isPlay,c=void 0!==r&&r,l=(0,a.useConfig)().clsPrefix;return o.default.createElement("div",{className:"".concat(l,"-audio-bg-view")},o.default.createElement("div",{className:"".concat(l,"-audio-bg-view__left")},t),function(){for(var e=[],t=0;t<20;t++)e.push(o.default.createElement("div",{className:(0,s.default)("".concat(l,"-audio-bg-view__hz-").concat(t+1),(0,i.default)({},"".concat(l,"-audio-bg-view__hz-").concat(t+1,"--animation"),c)),key:t}));return o.default.createElement("div",{className:"".concat(l,"-audio-bg-view__center")},o.default.createElement("div",{className:"".concat(l,"-audio-bg-view__hz")},e))}(),o.default.createElement("div",{className:"".concat(l,"-audio-bg-view__right")},o.default.createElement("div",{className:"".concat(l,"-audio-bg-view__right-text")},n)))};t.default=c},"+pgT":function(e,t,n){"use strict";var r=n("TqRt");n("zKZe"),n("07d7"),n("5s+n"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(n("QILm"));var i=r(n("pVnL")),o=r(n("o0o1"));n("ls82");var a=r(n("yXPU")),s=r(n("W8MJ")),c=r(n("PJYZ")),l=r(n("lSNA")),u=r(n("lwsE")),d=r(n("7W2i")),f=r(n("a1gu")),p=r(n("Nsbk")),h=r(n("q1tI")),m=n("GDuN"),v=n("T6Gt"),b=n("GLpR"),g=n("uScP");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);if(t){var i=(0,p.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var O=new(function(e){(0,d.default)(n,e);var t=w(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return n}(r(n("uhBA")).default)),x=function(e){(0,d.default)(n,e);var t=w(n);function n(e){var r;return(0,u.default)(this,n),r=t.call(this,e),(0,l.default)((0,c.default)(r),"onShow",void 0),(0,l.default)((0,c.default)(r),"onHide",void 0),(0,l.default)((0,c.default)(r),"isControlledComponent",(function(){return void 0!==r.props.visible})),(0,l.default)((0,c.default)(r),"getDefaultState",(function(e){return r.state[e]})),(0,l.default)((0,c.default)(r),"onClose",(function(){r.isControlledComponent()||r.setState({visible:!1}),r.state.options.onClose&&(0,g.isCallable)(r.state.options.onClose)&&r.state.options.onClose()})),(0,l.default)((0,c.default)(r),"onCancel",(0,a.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,g.isCallable)(r.state.options.onCancel)){e.next=3;break}return e.next=3,r.state.options.onCancel();case 3:case"end":return e.stop()}}),e)})))),(0,l.default)((0,c.default)(r),"onConfirm",(0,a.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,g.isCallable)(r.state.options.onConfirm)){e.next=5;break}return r.setState({confirmDisabled:!0}),e.next=4,r.state.options.onConfirm();case 4:r.setState({confirmDisabled:!1});case 5:case"end":return e.stop()}}),e)})))),r.state={visible:!!r.props.defaultVisible&&r.props.defaultVisible,options:_({},r.props),confirmDisabled:r.props.confirmDisabled},r.onShow=function(e){r.setState({visible:!0,options:_(_({},r.props),e)})},r.onHide=function(){r.setState({visible:!1})},r.props.inContext&&(O.on("show",r.onShow),O.on("hide",r.onHide)),r}return(0,s.default)(n,[{key:"componentDidUpdate",value:function(e,t,n){var r=e.visible,i=this.props.visible;i===r||i||this.onClose()}},{key:"componentWillUnmount",value:function(){O.off("show",this.onShow),O.off("hide",this.onHide)}},{key:"render",value:function(){var e=this.RenderComponent;return h.default.createElement(e,(0,i.default)({},this.state.options,{confirmDisabled:this.state.confirmDisabled,visible:this.isControlledComponent()?this.props.visible:this.getDefaultState("visible"),onClose:this.onClose,onCancel:this.onCancel,onConfirm:this.onConfirm}),this.state.options.content||this.props.children)}}]),n}((0,m.baseComponentFactory)({viewAdapter:v.DialogViewAdapter,logicalAdapter:b.DialogLogicalAdapter}));t.default=x,(0,l.default)(x,"confirm",void 0),(0,l.default)(x,"info",void 0),(0,l.default)(x,"waring",void 0),(0,l.default)(x,"success",void 0),(0,l.default)(x,"error",void 0),(0,l.default)(x,"defaultProps",{maskClosable:!0,mask:!0,inContext:!1,width:400,attach:"",title:"",type:"confirm",confirmDisabled:!1,confirmLoading:!1,cancelBtn:"\u53d6\u6d88",confirmBtn:"\u786e\u8ba4",onCancel:function(){},onConfirm:function(){}}),(0,l.default)(x,"show",(function(){O.emit("show")})),(0,l.default)(x,"hide",(function(){O.emit("hide")}));var S=function(e){var t=n("i8i4");return function(n){var r=Object.assign({},n);return new Promise((function(n){var s=document.createElement("div");t.render(h.default.createElement(x,(0,i.default)({},r,{type:e,inContext:!0,onClose:function(){r.onClose&&(0,g.isCallable)(r.onClose)&&r.onClose(),t.unmountComponentAtNode(s)},onConfirm:(0,a.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.onConfirm&&r.onConfirm()instanceof Promise)){e.next=4;break}return e.next=3,r.onConfirm();case 3:n(!0);case 4:t.unmountComponentAtNode(s);case 6:case"end":return e.stop()}}),e)}))),onCancel:(0,a.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.onCancel&&r.onCancel()instanceof Promise)){e.next=4;break}return e.next=3,r.onCancel();case 3:n(!1);case 4:t.unmountComponentAtNode(s);case 5:case"end":return e.stop()}}),e)})))})),s),O.emit("show",{})}))}};x.confirm=S("confirm"),x.info=S("info"),x.success=S("success"),x.waring=S("warning"),x.error=S("error"),x.hide=function(){return O.emit("hide")}},"//rY":function(e,t,n){"use strict";var r=n("284h"),i=n("TqRt");n("sMBO"),n("rB9j"),n("EnZy"),Object.defineProperty(t,"__esModule",{value:!0}),t.useForceUpdate=function(){var e=s.useReducer((function(e){return e+1}),0);return(0,a.default)(e,2)[1]},t.fileToObject=function(e){return l(l({},e),{},{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e})},t.isImageUrl=t.isImageFileType=void 0;var o=i(n("lSNA")),a=i(n("J4zp")),s=r(n("q1tI"));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){return"string"===typeof e&&0===(null===e||void 0===e?void 0:e.indexOf("image"))};t.isImageFileType=u;t.isImageUrl=function(e){if(e.type&&!e.thumbUrl)return u(e.type);var t=e.thumbUrl||e.url,n=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/"),t=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(t)||[""])[0]}(t);return!(!/^data:image\//.test(t)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i.test(n))||!/^data:/.test(t)&&!n}},"/1yQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("ma9I"),n("2B1R");var r=n("nKUr"),i=n("lSNA"),o=n.n(i),a=n("q1tI"),s="_2-vDcdfUbRJE7kONdTwclI",c="_1oqsNAtMUB4zJliRpPsSPj",l="_1aD4RhyYiR_aLU4vbSWq5Z",u="zoyNEvzC9AnYuUGMLvkOH",d="_3Uxt3hNP_AzGm1tgaG8WfQ",f="_1IuYzW6u1HB2ryCPxd76rZ";function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){var t=e.emojis,n=void 0===t?[]:t,i=e.onClick,o=e.show,p=e.pc,m=e.onEmojiBlur,v=void 0===m?function(){}:m,b=e.atTop,g=void 0===b||b,y=e.style,_=Object(a.useState)(!1),w=_[0],O=_[1],x=Object(a.useRef)(),S=function(e){var t;null!==(t=x.current)&&void 0!==t&&t.show&&!x.current.contains(e.currentTarget)&&v()};Object(a.useEffect)((function(){return document.addEventListener("click",S),function(){document.removeEventListener("click",S)}}),[]),Object(a.useEffect)((function(){O(o),x.current.show=o}),[o]);var j=p?u:d;return Object(r.jsx)("div",{ref:x,id:"dzq-toolbar-emoji",className:"".concat(s," ").concat(j," dzq-toolbar-emoji ").concat(g?"":f),style:h(h({},y),{},{display:w?"block":"none"}),onClick:function(e){return e.stopPropagation()},children:Object(r.jsx)("div",{className:c,children:n.map((function(e){return Object(r.jsx)("img",{className:l,src:e.url,onClick:function(t){i(e)}},e.code)}))})})}},"/8xE":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("DH8N").WebLayout}});t.ViewAdapter=r},"/j3c":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.forwardRefWithStatics=function(e,t){return(0,o.default)((0,i.forwardRef)(e),t)};var i=n("q1tI"),o=r(n("2mql"))},"0CxO":function(e,t,n){var r=n("7zRj"),i=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function o(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function a(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function s(){this.values=i(null)}function c(e,t,n,r){var i=r?e.split(r):[e];for(var o in i)if("string"===typeof i[o]){var a=i[o].split(n);if(2===a.length)t(a[0],a[1])}}function l(e,t,n){var r=e;function i(){var t=a(e);if(null===t)throw new o(o.Errors.BadTimeStamp,"Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function l(){e=e.replace(/^\s+/,"")}if(l(),t.startTime=i(),l(),"--\x3e"!==e.substr(0,3))throw new o(o.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),l(),t.endTime=i(),l(),function(e,t){var r=new s;c(e,(function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];r.integer(e,a),r.percent(e,a)&&r.set("snapToLines",!1),r.alt(e,a,["auto"]),2===o.length&&r.alt("lineAlign",o[1],["start","center","end"]);break;case"position":o=t.split(","),r.percent(e,o[0]),2===o.length&&r.alt("positionAlign",o[1],["start","center","end"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");try{t.line=r.get("line","auto")}catch(i){}t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100);try{t.align=r.get("align","center")}catch(i){t.align=r.get("align","middle")}try{t.position=r.get("position","auto")}catch(i){t.position=r.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=r.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}o.prototype=i(Error.prototype),o.prototype.constructor=o,o.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},s.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var u=r.createElement&&r.createElement("textarea"),d={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},f={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},p={v:"title",lang:"lang"},h={rt:"ruby"};function m(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function r(e,t){return!h[t.localName]||h[t.localName]===e.localName}function i(t,n){var r=d[t];if(!r)return null;var i=e.document.createElement(r),o=p[t];return o&&n&&(i[o]=n.trim()),i}for(var o,s,c=e.document.createElement("div"),l=c,m=[];null!==(o=n());)if("<"!==o[0])l.appendChild(e.document.createTextNode((s=o,u.innerHTML=s,s=u.textContent,u.textContent="",s)));else{if("/"===o[1]){m.length&&m[m.length-1]===o.substr(2).replace(">","")&&(m.pop(),l=l.parentNode);continue}var v,b=a(o.substr(1,o.length-2));if(b){v=e.document.createProcessingInstruction("timestamp",b),l.appendChild(v);continue}var g=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!g)continue;if(!(v=i(g[1],g[3])))continue;if(!r(l,v))continue;if(g[2]){var y=g[2].split(".");y.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(f.hasOwnProperty(n)){var r=t?"background-color":"color",i=f[n];v.style[r]=i}})),v.className=y.join(" ")}m.push(g[1]),l.appendChild(v),l=v}return c}var v=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function b(e){for(var t=0;t<v.length;t++){var n=v[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function g(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function i(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var o=n.match(/^.*(\n|\r)/);return o?(e.length=0,o[0]):n}return"ruby"===t.tagName?i(e):t.childNodes?(r(e,t),i(e)):void 0}for(r(t,e);n=i(t);)for(var o=0;o<n.length;o++)if(b(n.charCodeAt(o)))return"rtl";return"ltr"}function y(){}function _(e,t,n){y.call(this),this.cue=t,this.cueDiv=m(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=e.document.createElement("div"),r={direction:g(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":i=t.position;break;case"center":i=t.position-t.size/2;break;case"end":i=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function w(e){var t,n,r,i;if(e.div){n=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop;var o=(o=e.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();e=e.div.getBoundingClientRect(),t=o?Math.max(o[0]&&o[0].height||0,e.height/o.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight}function O(e,t,n,r){var i=new w(t),o=t.cue,a=function(e){if("number"===typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}(o),s=[];if(o.snapToLines){var c;switch(o.vertical){case"":s=["+y","-y"],c="height";break;case"rl":s=["+x","-x"],c="width";break;case"lr":s=["-x","+x"],c="width"}var l=i.lineHeight,u=l*Math.round(a),d=n[c]+l,f=s[0];Math.abs(u)>d&&(u=u<0?-1:1,u*=Math.ceil(d/l)*l),a<0&&(u+=""===o.vertical?n.height:n.width,s=s.reverse()),i.move(f,u)}else{var p=i.lineHeight/n.height*100;switch(o.lineAlign){case"center":a-=p/2;break;case"end":a-=p}switch(o.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")})}s=["+y","-x","+x","-y"],i=new w(t)}var h=function(e,t){for(var i,o=new w(e),a=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(r);)e.move(t[s]);if(e.within(n))return e;var c=e.intersectPercentage(n);a>c&&(i=new w(e),a=c),e=new w(o)}return i||o}(i,s);t.move(h.toCSSCompatValues(n))}function x(){}y.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},y.prototype.formatStyle=function(e,t){return 0===e?0:e+t},_.prototype=i(y.prototype),_.prototype.constructor=_,w.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},w.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},w.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},w.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},w.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},w.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},w.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},w.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},x.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},x.convertCueToDOMTree=function(e,t){return e&&t?m(e,t):null};x.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var i=[],o=w.getSimpleBoxPosition(r),a={font:Math.round(.05*o.height*100)/100+"px sans-serif"};!function(){for(var n,s,c=0;c<t.length;c++)s=t[c],n=new _(e,s,a),r.appendChild(n.div),O(0,n,o,i),s.displayState=n.div,i.push(w.getSimpleBoxPosition(n))}()}else for(var s=0;s<t.length;s++)r.appendChild(t[s].displayState)},x.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},x.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof o))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var r=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),r}function r(e){e.match(/X-TIMESTAMP-MAP/)?c(e,(function(e,n){switch(e){case"X-TIMESTAMP-MAP":!function(e){var n=new s;c(e,(function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",a(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}(n)}}),/=/):c(e,(function(e,n){switch(e){case"Region":!function(e){var n=new s;if(c(e,(function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var r=t.split(",");if(2!==r.length)break;var i=new s;if(i.percent("x",r[0]),i.percent("y",r[1]),!i.has("x")||!i.has("y"))break;n.set(e+"X",i.get("x")),n.set(e+"Y",i.get("y"));break;case"scroll":n.alt(e,t,["up"])}}),/=/,/\s/),n.has("id")){var r=new(t.vttjs.VTTRegion||t.window.VTTRegion);r.width=n.get("width",100),r.lines=n.get("lines",3),r.regionAnchorX=n.get("regionanchorX",0),r.regionAnchorY=n.get("regionanchorY",100),r.viewportAnchorX=n.get("viewportanchorX",0),r.viewportAnchorY=n.get("viewportanchorY",100),r.scroll=n.get("scroll",""),t.onregion&&t.onregion(r),t.regionList.push({id:n.get("id"),region:r})}}(n)}}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var u=(i=n()).match(/^WEBVTT([ \t].*)?$/);if(!u||!u[0])throw new o(o.Errors.BadSignature);t.state="HEADER"}for(var d=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(d?d=!1:i=n(),t.state){case"HEADER":/:/.test(i)?r(i):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(p){t.cue.align="middle"}if(t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{l(i,t.cue,t.regionList)}catch(p){t.reportOrThrowError(p),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var f=-1!==i.indexOf("--\x3e");if(!i||f&&(d=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":i||(t.state="ID");continue}}}catch(p){t.reportOrThrowError(p),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new o(o.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=x},"0Tbm":function(e,t,n){!function(t){var n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,r=/^([^\/?#]*)([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=a.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=a.normalizePath(i.path),a.buildURLFromParts(i)}var o=a.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):t;var s=a.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var c=r.exec(s.path);s.netLoc=c[1],s.path=c[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(l.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var u=s.path,d=u.substring(0,u.lastIndexOf("/")+1)+o.path;l.path=a.normalizePath(d)}else l.path=s.path,o.params||(l.params=s.params,o.query||(l.query=s.query));return null===l.path&&(l.path=n.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(l)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=a}()},"0TkE":function(e,t,n){"use strict";var r=n("67WC"),i=n("tycR").find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},1:function(e,t){},"10ky":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("VbXa"),i=n.n(r),o=n("CCF8"),a=n.n(o),s=n("pVnL"),c=n.n(s),l=n("PJYZ"),u=n.n(l),d=n("hQev"),f=n.n(d),p=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return i()(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(a.a),h=function(e){for(var t,n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r={},i=n.length;i--;)""!==n[i]&&((t=/([^=]*)=(.*)/.exec(n[i]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),r[t[0]]=t[1]);return r},m=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}i()(t,e);var n=t.prototype;return n.push=function(e){var t,n,r=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,n){var r=n(e);return r===e?t:t.concat([r])}),[e]).forEach((function(e){for(var i=0;i<r.customParsers.length;i++)if(r.customParsers[i].call(r,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))r.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void r.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"totalduration"},t[1]&&(n.duration=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void r.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"byterange"},t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),void r.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var o=h(t[1]);if(o.URI&&(n.uri=o.URI),o.BYTERANGE){var a=o.BYTERANGE.split("@"),s=a[0],c=a[1];n.byterange={},s&&(n.byterange.length=parseInt(s,10)),c&&(n.byterange.offset=parseInt(c,10))}}r.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=h(t[1]),n.attributes.RESOLUTION){var l=n.attributes.RESOLUTION.split("x"),u={};l[0]&&(u.width=parseInt(l[0],10)),l[1]&&(u.height=parseInt(l[1],10)),n.attributes.RESOLUTION=u}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}r.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=h(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))r.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))r.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=h(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void r.trigger("data",n);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=h(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void r.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);r.trigger("data",{type:"tag",data:e.slice(4)})}}}else r.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},n.addParser=function(e){var t=this,n=e.expression,r=e.customType,i=e.dataParser,o=e.segment;"function"!==typeof i&&(i=function(e){return e}),this.customParsers.push((function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:i(e),customType:r,segment:o}),!0}))},n.addTagMapper=function(e){var t=e.expression,n=e.map;this.tagMappers.push((function(e){return t.test(e)?n(e):e}))},t}(a.a),v=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new p,t.parseStream=new m,t.lineStream.pipe(t.parseStream);var n,r,i=u()(t),o=[],a={},s=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},d=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var h=0;return t.parseStream.on("data",(function(e){var t,u;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(a.byterange=t,t.length=e.length,"offset"in e||(e.offset=h)),"offset"in e&&(a.byterange=t,t.offset=e.offset),h=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(a.duration=e.duration),0===e.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:f()(e.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},"undefined"!==typeof e.attributes.IV&&(r.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,d=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){n={},e.uri&&(n.uri=e.uri),e.byterange&&(n.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes?(a.attributes||(a.attributes={}),c()(a.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var n=this.manifest.mediaGroups[e.attributes.TYPE];n[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{},t=n[e.attributes["GROUP-ID"]],(u={default:/yes/i.test(e.attributes.DEFAULT)}).default?u.autoselect=!0:u.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(u.language=e.attributes.LANGUAGE),e.attributes.URI&&(u.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(u.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(u.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(u.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=u}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){d+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),a.dateTimeString=e.dateTimeString,a.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){a.cueOut=e.data},"cue-out-cont":function(){a.cueOutCont=e.data},"cue-in":function(){a.cueIn=e.data}}[e.tagType]||s).call(i)},uri:function(){a.uri=e.uri,o.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),r&&(a.key=r),a.timeline=d,n&&(a.map=n),a={}},comment:function(){},custom:function(){e.segment?(a.custom=a.custom||{},a.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(i)})),t}i()(t,e);var n=t.prototype;return n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push("\n")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(a.a)},"1dYe":function(e,t,n){"use strict";var r=n("67WC"),i=n("tycR").forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"1h1e":function(e,t){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$");function o(){}function a(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function s(e,t,n,r,i,o){for(var a,s=++t,c=0;;){var l=e.charAt(s);switch(l){case"=":if(1===c)a=e.slice(t,s),c=3;else{if(2!==c)throw new Error("attribute equal must after attrName");c=3}break;case"'":case'"':if(3===c||1===c){if(1===c&&(o.warning('attribute value must after "="'),a=e.slice(t,s)),t=s+1,!((s=e.indexOf(l,t))>0))throw new Error("attribute value no end '"+l+"' match");u=e.slice(t,s).replace(/&#?\w+;/g,i),n.add(a,u,t-1),c=5}else{if(4!=c)throw new Error('attribute value must after "="');u=e.slice(t,s).replace(/&#?\w+;/g,i),n.add(a,u,t),o.warning('attribute "'+a+'" missed start quot('+l+")!!"),t=s+1,c=5}break;case"/":switch(c){case 0:n.setTagName(e.slice(t,s));case 5:case 6:case 7:c=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),0==c&&n.setTagName(e.slice(t,s)),s;case">":switch(c){case 0:n.setTagName(e.slice(t,s));case 5:case 6:case 7:break;case 4:case 1:"/"===(u=e.slice(t,s)).slice(-1)&&(n.closed=!0,u=u.slice(0,-1));case 2:2===c&&(u=a),4==c?(o.warning('attribute "'+u+'" missed quot(")!!'),n.add(a,u.replace(/&#?\w+;/g,i),t)):("http://www.w3.org/1999/xhtml"===r[""]&&u.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),n.add(u,u,t));break;case 3:throw new Error("attribute value missed!!")}return s;case"\x80":l=" ";default:if(l<=" ")switch(c){case 0:n.setTagName(e.slice(t,s)),c=6;break;case 1:a=e.slice(t,s),c=2;break;case 4:var u=e.slice(t,s).replace(/&#?\w+;/g,i);o.warning('attribute "'+u+'" missed quot(")!!'),n.add(a,u,t);case 5:c=6}else switch(c){case 2:n.tagName;"http://www.w3.org/1999/xhtml"===r[""]&&a.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),n.add(a,a,t),t=s,c=1;break;case 5:o.warning('attribute space is required"'+a+'"!!');case 6:c=1,t=s;break;case 3:c=4,t=s;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}s++}}function c(e,t,n){for(var r=e.tagName,i=null,o=e.length;o--;){var a=e[o],s=a.qName,c=a.value;if((p=s.indexOf(":"))>0)var l=a.prefix=s.slice(0,p),u=s.slice(p+1),f="xmlns"===l&&u;else u=s,l=null,f="xmlns"===s&&"";a.localName=u,!1!==f&&(null==i&&(i={},d(n,n={})),n[f]=i[f]=c,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(f,c))}for(o=e.length;o--;){(l=(a=e[o]).prefix)&&("xml"===l&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(a.uri=n[l||""]))}var p;(p=r.indexOf(":"))>0?(l=e.prefix=r.slice(0,p),u=e.localName=r.slice(p+1)):(l=null,u=e.localName=r);var h=e.uri=n[l||""];if(t.startElement(h,u,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=i,!0;if(t.endElement(h,u,r),i)for(l in i)t.endPrefixMapping(l)}function l(e,t,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var o=e.indexOf("</"+n+">",t),a=e.substring(t+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)?(i.characters(a,0,a.length),o):(a=a.replace(/&#?\w+;/g,r),i.characters(a,0,a.length),o)}return t+1}function u(e,t,n,r){var i=r[n];return null==i&&((i=e.lastIndexOf("</"+n+">"))<t&&(i=e.lastIndexOf("</"+n)),r[n]=i),i<t}function d(e,t){for(var n in e)t[n]=e[n]}function f(e,t,n,r){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(i=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var o=function(e,t){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;i.lastIndex=t,i.exec(e);for(;n=i.exec(e);)if(r.push(n),n[1])return r}(e,t),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var s=o[1][0],c=a>3&&/^public$/i.test(o[2][0])&&o[3][0],l=a>4&&o[4][0],u=o[a-1];return n.startDTD(s,c&&c.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),u.index+u[0].length}}return-1}function p(e,t,n){var r=e.indexOf("?>",t);if(r){var i=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){i[0].length;return n.processingInstruction(i[1],i[2]),r+2}return-1}return-1}function h(e){}function m(e,t){return e.__proto__=t,e}o.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),d(t,t={}),function(e,t,n,r,i){function o(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}function d(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?o(parseInt(t.substr(1).replace("x","0x"))):(i.error("entity not found:"+e),e)}function m(t){if(t>x){var n=e.substring(x,t).replace(/&#?\w+;/g,d);_&&v(x),r.characters(n,0,t-x),x=t}}function v(t,n){for(;t>=g&&(n=y.exec(e));)b=n.index,g=b+n[0].length,_.lineNumber++;_.columnNumber=t-b+1}var b=0,g=0,y=/.*(?:\r\n?|\n)|.*$/g,_=r.locator,w=[{currentNSMap:t}],O={},x=0;for(;;){try{var S=e.indexOf("<",x);if(S<0){if(!e.substr(x).match(/^\s*$/)){var j=r.doc,E=j.createTextNode(e.substr(x));j.appendChild(E),r.currentElement=E}return}switch(S>x&&m(S),e.charAt(S+1)){case"/":var T=e.indexOf(">",S+3),k=e.substring(S+2,T),C=w.pop();T<0?(k=e.substring(S+2).replace(/[\s<].*/,""),i.error("end tag name: "+k+" is not complete:"+C.tagName),T=S+1+k.length):k.match(/\s</)&&(k=k.replace(/[\s<].*/,""),i.error("end tag name: "+k+" maybe not complete"),T=S+1+k.length);var A=C.localNSMap,M=C.tagName==k;if(M||C.tagName&&C.tagName.toLowerCase()==k.toLowerCase()){if(r.endElement(C.uri,C.localName,k),A)for(var P in A)r.endPrefixMapping(P);M||i.fatalError("end tag name: "+k+" is not match the current start tagName:"+C.tagName)}else w.push(C);T++;break;case"?":_&&v(S),T=p(e,S,r);break;case"!":_&&v(S),T=f(e,S,r,i);break;default:_&&v(S);var R=new h,L=w[w.length-1].currentNSMap,N=(T=s(e,S,R,L,d,i),R.length);if(!R.closed&&u(e,T,R.tagName,O)&&(R.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),_&&N){for(var D=a(_,{}),I=0;I<N;I++){var B=R[I];v(B.offset),B.locator=a(_,{})}r.locator=D,c(R,r,L)&&w.push(R),r.locator=_}else c(R,r,L)&&w.push(R);"http://www.w3.org/1999/xhtml"!==R.uri||R.closed?T++:T=l(e,T,R.tagName,d,r)}}catch(H){i.error("element parse error: "+H),T=-1}T>x?x=T:m(Math.max(S,x)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},h.prototype={setTagName:function(e){if(!i.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!i.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},m({},m.prototype)instanceof m||(m=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=o},"29xw":function(e,t,n){var r=n("f+Ey").toUnsigned;e.exports=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:r(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=r(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t}},"2mql":function(e,t,n){"use strict";var r=n("TOwV"),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var l=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var i=p(n);i&&i!==h&&e(t,i,r)}var a=u(n);d&&(a=a.concat(d(n)));for(var s=c(t),m=c(n),v=0;v<a.length;++v){var b=a[v];if(!o[b]&&(!r||!r[b])&&(!m||!m[b])&&(!s||!s[b])){var g=f(n,b);try{l(t,b,g)}catch(y){}}}}return t}},"3D7k":function(e,t,n){"use strict";var r=n("rnXk"),i=n("JW/Y").handleRollover,o={};o.ts=n("Qj6V"),o.aac=n("+9CB");var a=n("NsZL").ONE_SECOND_IN_TS,s=188,c=71,l=function(e,t,n){for(var r,i,a,l,u=0,d=s,f=!1;d<=e.byteLength;)if(e[u]!==c||e[d]!==c&&d!==e.byteLength)u++,d++;else{switch(r=e.subarray(u,d),o.ts.parseType(r,t.pid)){case"pes":i=o.ts.parsePesType(r,t.table),a=o.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&a&&(l=o.ts.parsePesTime(r))&&(l.type="audio",n.audio.push(l),f=!0)}if(f)break;u+=s,d+=s}for(u=(d=e.byteLength)-s,f=!1;u>=0;)if(e[u]!==c||e[d]!==c&&d!==e.byteLength)u--,d--;else{switch(r=e.subarray(u,d),o.ts.parseType(r,t.pid)){case"pes":i=o.ts.parsePesType(r,t.table),a=o.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&a&&(l=o.ts.parsePesTime(r))&&(l.type="audio",n.audio.push(l),f=!0)}if(f)break;u-=s,d-=s}},u=function(e,t,n){for(var r,i,a,l,u,d,f,p=0,h=s,m=!1,v={data:[],size:0};h<e.byteLength;)if(e[p]!==c||e[h]!==c)p++,h++;else{switch(r=e.subarray(p,h),o.ts.parseType(r,t.pid)){case"pes":if(i=o.ts.parsePesType(r,t.table),a=o.ts.parsePayloadUnitStartIndicator(r),"video"===i&&(a&&!m&&(l=o.ts.parsePesTime(r))&&(l.type="video",n.video.push(l),m=!0),!n.firstKeyFrame)){if(a&&0!==v.size){for(u=new Uint8Array(v.size),d=0;v.data.length;)f=v.data.shift(),u.set(f,d),d+=f.byteLength;if(o.ts.videoPacketContainsKeyFrame(u)){var b=o.ts.parsePesTime(u);b?(n.firstKeyFrame=b,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}v.size=0}v.data.push(r),v.size+=r.byteLength}}if(m&&n.firstKeyFrame)break;p+=s,h+=s}for(p=(h=e.byteLength)-s,m=!1;p>=0;)if(e[p]!==c||e[h]!==c)p--,h--;else{switch(r=e.subarray(p,h),o.ts.parseType(r,t.pid)){case"pes":i=o.ts.parsePesType(r,t.table),a=o.ts.parsePayloadUnitStartIndicator(r),"video"===i&&a&&(l=o.ts.parsePesTime(r))&&(l.type="video",n.video.push(l),m=!0)}if(m)break;p-=s,h-=s}},d=function(e){var t={pid:null,table:null},n={};for(var i in function(e,t){for(var n,r=0,i=s;i<e.byteLength;)if(e[r]!==c||e[i]!==c)r++,i++;else{switch(n=e.subarray(r,i),o.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=o.ts.parsePat(n));break;case"pmt":t.table||(t.table=o.ts.parsePmt(n))}if(t.pid&&t.table)return;r+=s,i+=s}}(e,t),t.table){if(t.table.hasOwnProperty(i))switch(t.table[i]){case r.H264_STREAM_TYPE:n.video=[],u(e,t,n),0===n.video.length&&delete n.video;break;case r.ADTS_STREAM_TYPE:n.audio=[],l(e,t,n),0===n.audio.length&&delete n.audio}}return n};e.exports={inspect:function(e,t){var n;return(n=o.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,r=0,i=null,s=null,c=0,l=0;e.length-l>=3;){switch(o.aac.parseType(e,l)){case"timed-metadata":if(e.length-l<10){n=!0;break}if((c=o.aac.parseId3TagSize(e,l))>e.length){n=!0;break}null===s&&(t=e.subarray(l,l+c),s=o.aac.parseAacTimestamp(t)),l+=c;break;case"audio":if(e.length-l<7){n=!0;break}if((c=o.aac.parseAdtsSize(e,l))>e.length){n=!0;break}null===i&&(t=e.subarray(l,l+c),i=o.aac.parseSampleRate(t)),r++,l+=c;break;default:l++}if(n)return null}if(null===i||null===s)return null;var u=a/i;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*r*u,pts:s+1024*r*u}]}}(e):d(e))&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;"undefined"===typeof n&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=i(e.dts,n),e.pts=i(e.pts,n),e.dtsTime=e.dts/a,e.ptsTime=e.pts/a}))}if(e.video&&e.video.length){var r=t;if("undefined"===typeof r&&(r=e.video[0].dts),e.video.forEach((function(e){e.dts=i(e.dts,r),e.pts=i(e.pts,r),e.dtsTime=e.dts/a,e.ptsTime=e.pts/a})),e.firstKeyFrame){var o=e.firstKeyFrame;o.dts=i(o.dts,r),o.pts=i(o.pts,r),o.dtsTime=o.dts/a,o.ptsTime=o.dts/a}}}(n,t),n):null},parseAudioPes_:l}},"3XaU":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){if("undefined"!==typeof window){var e,t,n=(null===(e=window)||void 0===e||null===(t=e.navigator)||void 0===t?void 0:t.userAgent)||"";return["iPhone","iPad"].some((function(e){return~n.indexOf(e)}))}return!1};t.default=r},"3zPy":function(e,t){function n(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"===typeof e)return a[e];var n,o=String(e);return(n=r[o.toLowerCase()])?n:(n=i[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"===typeof e){var n=e.which||e.keyCode||e.charCode;if(null===n||void 0===n)return!1;if("string"===typeof t){var o;if(o=r[t.toLowerCase()])return o===n;if(o=i[t.toLowerCase()])return o===n}else if("number"===typeof t)return t===n;return!1}};var r=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)r[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)r[o-48]=o;for(o=1;o<13;o++)r["f"+o]=o+111;for(o=0;o<10;o++)r["numpad "+o]=o+96;var a=t.names=t.title={};for(o in r)a[r[o]]=o;for(var s in i)r[s]=i[s]},"40Bt":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("lwsE")),o=r(n("W8MJ")),a=r(n("7W2i")),s=r(n("a1gu")),c=r(n("Nsbk")),l=r(n("lSNA")),u=r(n("q1tI")),d=n("GDuN"),f=n("q1fC"),p=n("isGe"),h=n("AItd");function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var v=function(e){(0,a.default)(n,e);var t=m(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.RenderComponent;return u.default.createElement(e,this.props,this.props.children)}}]),n}((0,d.baseComponentFactory)({viewAdapter:f.SliderViewAdapter,logicalAdapter:p.SliderLogicalAdapter}));t.default=v,(0,l.default)(v,"defaultProps",{onChange:h.noop,min:0,max:100,step:1,disabled:!1,formatter:function(e){return e}})},"4Vs1":function(e,t,n){"use strict";var r=n("TqRt");n("ma9I"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.createInnerAudioContext=void 0;var i=r(n("J4zp")),o=n("TGR9");t.createInnerAudioContext=function(){var e=new Audio,t={},n={error:(0,o.createCallbackManager)(),stop:(0,o.createCallbackManager)()};t.play=function(){return e.play()},t.pause=function(){return e.pause()},t.stop=function(){t.pause(),t.seek(0),n.stop.trigger()},t.seek=function(t){e.currentTime=t},t.destroy=function(){t.stop(),e=null};["src","autoplay","loop","volume","duration","currentTime","buffered","paused"].forEach((function(n){Object.defineProperty(t,n,{get:function(){return e?e[n]:""},set:function(t){e[n]=t}})})),Object.defineProperty(t,"startTime",{value:0}),Object.defineProperty(t,"obeyMuteSwitch",{value:!0});var r=[["on",e.addEventListener],["off",e.removeEventListener]];return["Canplay","Ended","Pause","Play","Seeked","Seeking","TimeUpdate","Waiting","Error","Loadedmetadata"].forEach((function(n){r.forEach((function(r){var o=(0,i.default)(r,2),a=o[0],s=o[1];Object.defineProperty(t,"".concat(a).concat(n),{get:function(){return function(t){return s.call(e,n.toLowerCase(),t)}}})}))})),t}},"4Y/G":function(e,t,n){"use strict";var r=n("TqRt");n("sMBO"),Object.defineProperty(t,"__esModule",{value:!0}),t.RadioGroup=function(e){var t=e.value,n=e.defaultValue,r=e.onChange,i=void 0===r?c.noop:r,d=e.disabled,p=void 0!==d&&d,h=e.type,m=e.block,v=e.className,b=e.style,g=e.children,y=(0,l.useDefault)(t,n,i),_=(0,o.default)(y,2),w=_[0],O=_[1],x={inject:function(e){if(!e.radio)return e;if("boolean"===typeof e.checked)return e;var t=e.name;return"undefined"===typeof t?(console.warn('<Radio> managed by <RadioGroup> must include the "name" prop'),e):f(f({},e),{},{type:h,block:m,checked:w===e.name,disabled:e.disabled||p,onChange:function(n,r){"function"!==typeof e.onChange?"function"===typeof O&&O(t,r):e.onChange(n,r)}})}};return a.default.createElement("div",{className:(0,s.default)("tea-checkbox-group",v,{"tea-checkbox-group--outline":"button"===h}),style:b},a.default.createElement(u.CheckContext.Provider,{value:x},g))};var i=r(n("lSNA")),o=r(n("J4zp")),a=r(n("q1tI")),s=r(n("TSYQ")),c=n("AItd"),l=n("0UJW"),u=n("uafh");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},"4hN0":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("q1tI")),o=r(n("TSYQ")),a=n("VTYn"),s=r(n("b9ng")),c=function(e){var t=e.imgUrls,n=void 0===t?[]:t,r=e.currentImgIdx,c=(0,a.useConfig)().clsPrefix,l=!1;return"undefined"!==typeof window&&(l=(0,s.default)()),0!==n.length&&l?i.default.createElement("div",{className:(0,o.default)("".concat(c,"-img-previewer__mobile-cursor"))},r+1," / ",n.length):null};t.default=c},"4x5+":function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(n("q1tI")),o=c(n("EmTJ")),a=c(n("HzKk")),s=c(n("MCxF"));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=new(function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(c,e);var t,n,r,o=f(c);function c(){var e;l(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(h(e=o.call.apply(o,[this].concat(n))),"PLUGIN_TARGET_CONST",["plugin_index","plugin_detail","plugin_post"]),v(h(e),"DEFAULT_PLATFORM",["pc","h5","mini"]),e}return t=c,(n=[{key:"register",value:function(e){this.validationPlugin(e)&&this.setStore(e)}},{key:"injection",value:function(e,t){try{for(var n=this.getStore(e,t)||[],r=[],i=0;i<n.length;i++){var o=(0,s.default)("".concat(e,"@").concat(n[i].hookName));o&&r.push(o(n[i]))}return r}catch(a){return console.log(a),[]}}},{key:"validationPlugin",value:function(e){var t=!0,n=e.pluginName,r=void 0===n?null:n,o=e.version,s=void 0===o?null:o,c=e.target,l=void 0===c?null:c,u=e.hookName,d=void 0===u?null:u,f=e.component,p=void 0===f?null:f,h=e.platform,m=void 0===h?[]:h;if(r&&""!=r||(console.warn("\u63d2\u4ef6\u540d\u4e0d\u5408\u6cd5\uff0c\u5f53\u524d\u63d2\u4ef6\u540d\uff1a".concat(r)),t=!1),s&&""!=s&&/^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/.test(s)||(console.warn("".concat(r," -> \u63d2\u4ef6\u7248\u672c\u53f7\u4e0d\u5408\u6cd5\uff0c\u5f53\u524d\u63d2\u4ef6\u7248\u672c\uff1a").concat(s)),t=!1),l)if("[object String]"===Object.prototype.toString.call(l)&&""!==l&&-1!==this.PLUGIN_TARGET_CONST.indexOf(l))t=!0;else if(Array.isArray(l)&&0!==l.length){for(var v=0;v<l.length;v++)if(-1===this.PLUGIN_TARGET_CONST.indexOf(l[v])){t=!1,console.warn("".concat(r," -> \u63d2\u4ef6\u76ee\u7684\u6807\u8bc6\u4e0d\u5408\u6cd5\uff0c\u5f53\u524d\u63d2\u4ef6\u76ee\u6807\u6807\u8bc6\uff1a").concat(l));break}}else console.warn("".concat(r," -> \u63d2\u4ef6\u76ee\u7684\u6807\u8bc6\u4e0d\u5408\u6cd5\uff0c\u5f53\u524d\u63d2\u4ef6\u76ee\u6807\u6807\u8bc6\uff1a").concat(l)),t=!1;else console.warn("".concat(r," -> \u63d2\u4ef6\u76ee\u7684\u6807\u8bc6\u4e0d\u5408\u6cd5\uff0c\u5f53\u524d\u63d2\u4ef6\u76ee\u6807\u6807\u8bc6\uff1a").concat(l)),t=!1;if(d||(console.warn("".concat(r," -> \u63d2\u4ef6\u94a9\u5b50\u540d\u4e0d\u5408\u6cd5\uff0c\u5f53\u524d\u94a9\u5b50\u540d\u79f0\uff1a").concat(d)),t=!1),""==d&&(console.warn("".concat(r," -> \u63d2\u4ef6\u94a9\u5b50\u540d\u4e0d\u5408\u6cd5\uff0c\u5f53\u524d\u94a9\u5b50\u540d\u79f0\uff1a").concat(d)),t=!1),p&&i.default.isValidElement(p)||(console.warn("".concat(r," -> \u63d2\u4ef6\u7ec4\u4ef6\u4e0d\u5408\u6cd5")),t=!1),m&&0!==m.length)if(-1===m.indexOf("pc")&&-1===m.indexOf("h5")&&-1===m.indexOf("mini"))console.warn("".concat(r," -> \u5e73\u53f0\u5fc5\u987b\u5305\u542b\u4ee5\u4e0b\u9009\u4e2d\u4e2d\u4e00\u4e2a\uff1a").concat(this.DEFAULT_PLATFORM)),t=!1;else{var b=a.default.env("mobile")?"h5":"pc";-1===m.indexOf(b)&&(console.info("".concat(r," -> \u5f53\u524d\u5e73\u53f0\u4e0d\u80fd\u6ce8\u518c\u6b64\u63d2\u4ef6\uff0c\u5f53\u524d\u63d2\u4ef6\u53ef\u4ee5\u7528\u8303\u56f4\uff1a").concat(m)),t=!1)}else console.warn("".concat(r," -> \u5e73\u53f0\u5fc5\u987b\u81f3\u5c11\u6307\u5b9a\u4e00\u4e2a\uff0c").concat(this.DEFAULT_PLATFORM)),t=!1;return t}}])&&u(t.prototype,n),r&&u(t,r),c}(o.default));t.default=b},"4zmG":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.RadioWebLayout=void 0;var i=r(n("pVnL")),o=r(n("q1tI")),a=n("/j3c"),s=r(n("T4r6")),c=n("4Y/G"),l=(0,a.forwardRefWithStatics)((function(e,t){return o.default.createElement(s.default,(0,i.default)({ref:t,radio:!0},e))}),{Group:c.RadioGroup});t.RadioWebLayout=l},"5LZQ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UploadViewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("lGLX").UploadWebLayout}});t.UploadViewAdapter=r},"5Yz+":function(e,t,n){"use strict";var r=n("/GqU"),i=n("ppGB"),o=n("UMSQ"),a=n("pkCn"),s=n("rkAj"),c=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,d=a("lastIndexOf"),f=s("indexOf",{ACCESSORS:!0,1:0}),p=u||!d||!f;e.exports=p?function(e){if(u)return l.apply(this,arguments)||0;var t=r(this),n=o(t.length),a=n-1;for(arguments.length>1&&(a=c(a,i(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:l},"5h7R":function(e,t,n){"use strict";var r=n("284h"),i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.AudioWebLayout=void 0;var o=i(n("o0o1"));n("ls82");var a=i(n("yXPU")),s=i(n("lwsE")),c=i(n("W8MJ")),l=i(n("PJYZ")),u=i(n("7W2i")),d=i(n("a1gu")),f=i(n("Nsbk")),p=i(n("lSNA")),h=r(n("q1tI")),m=i(n("TSYQ")),v=n("4Vs1"),b=n("VTYn"),g=i(n("MCNy")),y=i(n("9p2j")),_=i(n("jqTq")),w=i(n("+omo")),O=i(n("3XaU"));function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var i=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}var S=function(e){(0,u.default)(n,e);var t=x(n);function n(e){var r;if((0,s.default)(this,n),r=t.call(this,e),(0,p.default)((0,l.default)(r),"eventListenerPlayImpl",(function(e){if(e!==(0,l.default)(r)&&r.props.singleton){var t=r.state.audioCtx;t&&t.pause&&(t.pause(),r.setState({audioCtx:t}))}})),(0,p.default)((0,l.default)(r),"playOrStopAudio",(0,a.default)(o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.props.emitter.emit("play",(0,l.default)(r)),t=r.state.audioImg,r.setAudioImg("iconLoading"),e.next=5,r.props.beforePlay();case 5:if(!1!==e.sent){e.next=9;break}return r.setAudioImg(t),e.abrupt("return");case 9:(n=r.state.audioCtx).paused&&!r.props.disabled?n.play():n.pause();case 11:case"end":return e.stop()}}),e)})))),(0,p.default)((0,l.default)(r),"audioMount",(function(e){var t=r.state.audioImg;e.src=r.props.src,e.loop=!!r.props.loop,e.onTimeUpdate((function(){e.currentTime>0&&e.currentTime<=1?r.setState({currentTime:0}):e.currentTime!==Math.floor(e.currentTime)&&r.setState({currentTime:Math.floor(e.currentTime)});var t=Math.floor(e.duration);r.state.duration!==t&&r.setState({duration:t})})),e.onLoadedmetadata((function(){"iconLoading"===t&&(!(0,O.default)()&&r.setAudioImg("PlayOutlined"),setTimeout((function(){r.setState({duration:e.duration})}),10))})),e.onWaiting((function(){"iconLoading"!==t&&r.setAudioImg("iconLoading")})),e.onPlay((function(){r.setAudioImg("PauseOutlined"),r.props.onPlay()})),e.onPause((function(){r.setAudioImg("PlayOutlined");var e=r.props.onPause;(void 0===e?function(){}:e)()})),e.onEnded((function(){"iconPaused"!==t&&r.setAudioImg("PlayOutlined"),r.setState({currentTime:0});var e=r.props.onEnded;(void 0===e?function(){}:e)()})),e.onError((function(e){"CloseOutlined"!==t&&r.setAudioImg("CloseOutlined");var n=r.props.onError;(void 0===n?function(){}:n)(),console.error(e.errMsg)}))})),(0,p.default)((0,l.default)(r),"audioTime",(function(){var e=r.state,t=e.audioImg,n=e.duration,i=void 0===n?0:n;return r.props.disabled?"\u52a0\u8f7d\u5931\u8d25":"iconLoading"===t?"\u52a0\u8f7d\u4e2d":"CloseOutlined"===t?"\u52a0\u8f7d\u5931\u8d25":0===i||i===1/0?"\u672a\u77e5\u957f\u5ea6":i>60?"\u7ea6".concat(Math.floor(i/60),"\u5206\u949f"):"\u7ea6".concat(Math.floor(i),"\u79d2")})),(0,p.default)((0,l.default)(r),"renderAudioIcon",(function(){var e=r.context.clsPrefix,t=r.props.disabled,n=r.state.audioImg,i=(0,m.default)("".concat(e,"-audio__wrapper-inner-btn"),{"is-disabled":t||"CloseOutlined"===n});return t?h.default.createElement(g.default,{name:"CloseOutlined",className:i}):"iconLoading"===n?h.default.createElement(_.default,{className:i,type:"spinner"}):h.default.createElement(g.default,{onClick:r.playOrStopAudio,name:n,className:i})})),(0,p.default)((0,l.default)(r),"renderContent",(function(){var e=r.context.clsPrefix,t=r.state,n=100*t.currentTime/t.duration||0;return h.default.createElement("div",{className:"".concat(e,"-audio__wrapper")},h.default.createElement(y.default,{type:"circle",percent:n,lineWidth:3,isShowText:!1}),h.default.createElement("div",{className:"".concat(e,"-audio__wrapper-inner")},r.renderAudioIcon()))})),(0,p.default)((0,l.default)(r),"renderText",(function(){var e=r.context.clsPrefix,t=r.props.onDelete;return h.default.createElement("div",{className:"".concat(e,"-audio__right")},h.default.createElement("span",{className:"".concat(e,"-audio__tip")},r.audioTime()),t&&h.default.createElement(g.default,{name:"DeleteOutlined",className:"".concat(e,"-audio__delete"),onClick:function(){t()}}))})),r.state={audioCtx:null,audioImg:"iconLoading",currentTime:0,duration:0,childrenRef:null},(0,O.default)())var i=setTimeout((function(){r.setAudioImg("PlayOutlined"),clearTimeout(i)}));return r}return(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=(0,v.createInnerAudioContext)();this.audioMount(e),this.setState({audioCtx:e}),this.props.emitter.on("play",this.eventListenerPlayImpl)}},{key:"componentWillReceiveProps",value:function(e){var t=e.src||"";if(this.props.src!==t&&""!==t){var n=this.state.audioCtx;n.paused||n.stop(),n.src=e.src,this.setState({currentTime:0,duration:0})}}},{key:"componentWillUnmount",value:function(){var e=this.state.audioCtx;this.props.emitter.removeListener("play",this.eventListenerPlayImpl),e?(e.stop(),e.destroy()):this.setState=function(){}}},{key:"setAudioImg",value:function(e){this.setState({audioImg:e})}},{key:"render",value:function(){var e=this.context.clsPrefix,t=this.state.audioImg;return h.default.createElement("div",{className:(0,m.default)("".concat(e,"-audio"))},h.default.createElement(w.default,{leftChildren:this.renderContent(),rightChildren:this.renderText(),isPlay:"PauseOutlined"===t}))}}]),n}(h.Component);t.AudioWebLayout=S,(0,p.default)(S,"contextType",b.ConfigContext)},"6+00":function(e,t,n){},"64aw":function(e,t,n){"use strict";var r=n("TqRt");n("ma9I"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("pVnL")),o=r(n("lwsE")),a=r(n("W8MJ")),s=r(n("PJYZ")),c=r(n("7W2i")),l=r(n("a1gu")),u=r(n("Nsbk")),d=r(n("lSNA")),f=r(n("q1tI")),p=n("GDuN"),h=n("kGPg"),m=n("kPfF"),v=r(n("mkfw"));function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var g=function(e){(0,c.default)(n,e);var t=b(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),(0,d.default)((0,s.default)(e),"setChildrenRef",(function(t){e.setState({childrenRef:t})})),(0,d.default)((0,s.default)(e),"getState",(function(){return e.state.childrenRef.state})),e}return(0,a.default)(n,[{key:"render",value:function(){var e=this.RenderComponent;return f.default.createElement(e,(0,i.default)({ref:this.setChildrenRef},this.props),this.props.children)}}]),n}((0,p.baseComponentFactory)({viewAdapter:h.ViewAdapter,logicalAdapter:m.LogicalAdapter}));t.default=g,(0,d.default)(g,"defaultProps",{beforePlay:function(){},onError:function(){},onPlay:function(){},onPause:function(){},onEnded:function(){},onRef:function(){},loop:!1,singleton:!0,emitter:v.default})},"67WC":function(e,t,n){"use strict";var r,i=n("qYE9"),o=n("g6v/"),a=n("2oRo"),s=n("hh1v"),c=n("UTVS"),l=n("9d/t"),u=n("kRJp"),d=n("busE"),f=n("m/L8").f,p=n("4WOD"),h=n("0rvr"),m=n("tiKp"),v=n("kOOl"),b=a.Int8Array,g=b&&b.prototype,y=a.Uint8ClampedArray,_=y&&y.prototype,w=b&&p(b),O=g&&p(g),x=Object.prototype,S=x.isPrototypeOf,j=m("toStringTag"),E=v("TYPED_ARRAY_TAG"),T=i&&!!h&&"Opera"!==l(a.opera),k=!1,C={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},A={BigInt64Array:8,BigUint64Array:8},M=function(e){if(!s(e))return!1;var t=l(e);return c(C,t)||c(A,t)};for(r in C)a[r]||(T=!1);if((!T||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},T))for(r in C)a[r]&&h(a[r],w);if((!T||!O||O===x)&&(O=w.prototype,T))for(r in C)a[r]&&h(a[r].prototype,O);if(T&&p(_)!==O&&h(_,O),o&&!c(O,j))for(r in k=!0,f(O,j,{get:function(){return s(this)?this[E]:void 0}}),C)a[r]&&u(a[r],E,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:k&&E,aTypedArray:function(e){if(M(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(h){if(S.call(w,e))return e}else for(var t in C)if(c(C,r)){var n=a[t];if(n&&(e===n||S.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(o){if(n)for(var r in C){var i=a[r];i&&c(i.prototype,e)&&delete i.prototype[e]}O[e]&&!n||d(O,e,n?t:T&&g[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(o){if(h){if(n)for(r in C)(i=a[r])&&c(i,e)&&delete i[e];if(w[e]&&!n)return;try{return d(w,e,n?t:T&&b[e]||t)}catch(s){}}for(r in C)!(i=a[r])||i[e]&&!n||d(i,e,t)}},isView:function(e){if(!s(e))return!1;var t=l(e);return"DataView"===t||c(C,t)||c(A,t)},isTypedArray:M,TypedArray:w,TypedArrayPrototype:O}},"6R/c":function(e,t,n){"use strict";var r=n("67WC"),i=n("TWQb").indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"6z+b":function(e,t,n){"use strict";var r=n("TqRt");n("ma9I"),Object.defineProperty(t,"__esModule",{value:!0}),t.TagWebLayout=function(e){var t=e.type,n=void 0===t?"default":t,r=e.closeable,d=e.size,f=e.onClick,p=e.onClose,h=e.children,m=(0,a.default)(e,["type","closeable","size","onClick","onClose","children"]),v=(0,u.useConfig)().clsPrefix;return s.default.createElement("div",(0,i.default)({onClick:f},m,{className:(0,c.default)("".concat(m.className||""),"".concat(v,"-tag"),"".concat(v,"-tag--").concat(n),(0,o.default)({},"size-".concat(d),d))}),s.default.createElement("span",{className:"".concat(v,"-tag-text")},h),r&&s.default.createElement(l.default,{className:"".concat(v,"-tag-delete"),name:"CloseOutlined",size:8,onClick:function(e){p(),e.stopPropagation()}}))};var i=r(n("pVnL")),o=r(n("lSNA")),a=r(n("QILm")),s=r(n("q1tI")),c=r(n("TSYQ")),l=r(n("MCNy")),u=n("VTYn")},"7zRj":function(e,t,n){(function(t){var r,i="undefined"!==typeof t?t:"undefined"!==typeof window?window:{},o=n(1);"undefined"!==typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=o),e.exports=r}).call(this,n("ntbh"))},"83zQ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useWebAdapter=void 0;var r=n("q1tI");t.useWebAdapter=function(){return{abc:(0,r.useCallback)((function(){console.log("test")}),[])}}},"882Z":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("lwsE")),o=r(n("W8MJ")),a=r(n("7W2i")),s=r(n("a1gu")),c=r(n("Nsbk")),l=r(n("lSNA")),u=r(n("q1tI")),d=n("GDuN"),f=n("KHaC"),p=n("IzT1");function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var m=function(e){(0,a.default)(n,e);var t=h(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.RenderComponent;return u.default.createElement(e,this.props,this.props.children)}}]),n}((0,d.baseComponentFactory)({viewAdapter:f.TagViewAdapter,logicalAdapter:p.LogicalAdapter}));t.default=m,(0,l.default)(m,"defaultProps",{type:"default",closeable:!1,onClose:function(){},onClick:function(){}})},"8YOa":function(e,t,n){var r=n("0BK2"),i=n("hh1v"),o=n("UTVS"),a=n("m/L8").f,s=n("kOOl"),c=n("uy83"),l=s("meta"),u=0,d=Object.isExtensible||function(){return!0},f=function(e){a(e,l,{value:{objectID:"O"+ ++u,weakData:{}}})},p=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,l)){if(!d(e))return"F";if(!t)return"E";f(e)}return e[l].objectID},getWeakData:function(e,t){if(!o(e,l)){if(!d(e))return!0;if(!t)return!1;f(e)}return e[l].weakData},onFreeze:function(e){return c&&p.REQUIRED&&d(e)&&!o(e,l)&&f(e),e}};r[l]=!0},"9LVR":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebAdapter=void 0;t.WebAdapter={}},"9Xmw":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r;n("07d7"),n("5s+n");function i(){return new Promise((function(e){if(void 0===r){var t=new Image;t.onload=function(){r=1===t.width&&2===t.height,e(r)},t.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="}else e(r)}))}},"9p2j":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("lwsE")),o=r(n("W8MJ")),a=r(n("7W2i")),s=r(n("a1gu")),c=r(n("Nsbk")),l=r(n("lSNA")),u=r(n("q1tI")),d=n("GDuN"),f=n("gzjk"),p=n("CObF");function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var m=function(e){(0,a.default)(n,e);var t=h(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.RenderComponent;return u.default.createElement(e,this.props,this.props.children)}}]),n}((0,d.baseComponentFactory)({viewAdapter:f.ProgressViewAdapter,logicalAdapter:p.ProgressLogicalAdapter}));t.default=m,(0,l.default)(m,"defaultProps",{style:{},percent:0,theme:"default",lineWidth:2,width:160,className:"",text:"",isShowText:!0})},AJmO:function(e,t,n){"use strict";var r=n("TqRt"),i=n("284h");n("ma9I"),Object.defineProperty(t,"__esModule",{value:!0}),t.DividerWebLayout=c;var o=i(n("q1tI")),a=n("VTYn"),s=r(n("TSYQ"));function c(e){var t=e.mode,n=e.children,r=e.dashed,i=e.orientation,c=e.className,l=e.style,u=(0,o.useContext)(a.ConfigContext).clsPrefix,d="".concat(u,"-divider"),f=(0,s.default)(c,d,"".concat(d,"--").concat(t),{"is-dashed":r}),p=(0,s.default)("".concat(d,"__text"),"is-".concat(i));return o.default.createElement("div",{className:f,style:l},n&&"horizontal"===t&&o.default.createElement("div",{className:p},n))}c.defaultProps={mode:"horizontal",dashed:!1,orientation:"center"}},ApgV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{render:function(t){if(!(0,o.default)(t))return console.warn("".concat(e.pluginName," -> \u7f3a\u5931\u63d2\u4ef6\u5fc5\u987b\u63d0\u4f9b\u53c2\u6570\uff01")),null;var n=t.renderData,a=t.site,s=null;return n&&n[e.pluginName]&&(s=n[e.pluginName]),r.default.createElement(i.default,{renderData:s,siteData:a,_pluginInfo:c({},e)})},pluginInfo:c({},e)}};var r=a(n("q1tI")),i=a(n("I1Go")),o=(a(n("WDfI")),a(n("IUnV")));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},AwrB:function(e,t,n){"use strict";var r=n("284h"),i=n("TqRt");n("ma9I"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("o0o1"));n("ls82");var a=i(n("yXPU")),s=i(n("J4zp")),c=r(n("q1tI")),l=n("VTYn"),u=n("TJTF"),d=n("vNgL"),f=function(e){var t=e.style,n=void 0===t?{}:t,r=e.percent,i=void 0===r?0:r,f=e.theme,p=void 0===f?"default":f,h=e.lineWidth,m=void 0===h?2:h,v=(e.width,e.className),b=void 0===v?"":v,g=e.text,y=void 0===g?"":g,_=e.isShowText,w=void 0===_||_,O=e.tips,x=void 0===O?"":O,S=e.children,j=e.lineCap,E=void 0===j?"butt":j,T=(0,l.useConfig)().clsPrefix,k=(0,c.useState)({canvas:null,ctx:null,width:0,height:0}),C=(0,s.default)(k,2),A=C[0],M=C[1],P=(0,c.useRef)(null),R=(0,c.useRef)(null);(0,c.useEffect)((function(){L()}),[]),(0,c.useEffect)((function(){A.ctx&&N()}),[i,A]);var L=function(){var e=(0,a.default)(o.default.mark((function e(){var t,n,r,i,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=P.current,n=P.current.getContext("2d"),r=R.current.getBoundingClientRect(),i=r.width,a=r.height,3,t.width=3*i,t.height=3*a,n.scale(3,3),M({canvas:t,ctx:n,width:i,height:a});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=A.ctx,t=A.height,n=A.width,r=function(){var e=A.width,t=A.height,n=(0,u.toFixed)(.5*Math.min(e,t));return n>m&&(n-=m),{radius:n,range:i/100*2*Math.PI,offsetRadian:-.5*Math.PI}}(),o=r.radius,a=r.range,s=r.offsetRadian;e.clearRect(0,0,n,t),e.lineWidth=m,e.lineCap=E,e.beginPath(),e.strokeStyle="#F6F7F9",e.arc((0,u.toFixed)(n/2),(0,u.toFixed)(t/2),o,0,2*Math.PI),e.stroke(),0!==a&&(e.beginPath(),e.strokeStyle=D(),e.arc((0,u.toFixed)(n/2),(0,u.toFixed)(t/2),o,s,a+s),e.stroke())},D=function(){return"default"===p?"#FEC32D":"success"===p?"#57BD6A":"danger"===p?"#E54545":"#FEC32D"};return c.default.createElement("div",{className:"".concat(T,"-progress-circle")},c.default.createElement("div",{ref:R,className:"".concat(T,"-progress-circle__area ").concat(b),style:n},c.default.createElement("canvas",{ref:P,className:"".concat(T,"-progress-circle__canvas")}),!S&&w&&c.default.createElement("div",{className:"".concat(T,"-progress-circle__current-text"),id:"progress-num"},y?c.default.createElement("span",{className:"text--chinese"},(0,d.injectValue)(y)(i)):c.default.createElement(c.default.Fragment,null,i,c.default.createElement("span",{className:"text--symbol"},"%"))),S&&c.default.createElement("div",{className:"".concat(T,"-progress-circle__children")},S)),c.default.createElement("div",{className:"".concat(T,"-progress-circle__tips")},x))};t.default=f},BF8C:function(e,t,n){"use strict";var r=n("vgmO"),i=n("pVnL"),o=n("g2LC");function a(e,t,n){var r=e;return o(t)?(n=t,"string"===typeof e&&(r={uri:e})):r=i({},t,{uri:e}),r.callback=n,r}function s(e,t,n){return c(t=a(e,t,n))}function c(e){if("undefined"===typeof e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,r,i){t||(t=!0,e.callback(n,r,i))};function r(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(n){}return null}(l),v)try{e=JSON.parse(e)}catch(t){}return e}function i(e){return clearTimeout(u),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,b)}function o(){if(!c){var t;clearTimeout(u),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var i=b,o=null;return 0!==t?(i={body:r(),statusCode:t,method:f,headers:{},url:d,rawRequest:l},l.getAllResponseHeaders&&(i.headers=function(e){var t={};return e?(e.trim().split("\n").forEach((function(e){var n=e.indexOf(":"),r=e.slice(0,n).trim().toLowerCase(),i=e.slice(n+1).trim();"undefined"===typeof t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]})),t):t}(l.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),n(o,i,i.body)}}var a,c,l=e.xhr||null;l||(l=e.cors||e.useXDR?new s.XDomainRequest:new s.XMLHttpRequest);var u,d=l.url=e.uri||e.url,f=l.method=e.method||"GET",p=e.body||e.data,h=l.headers=e.headers||{},m=!!e.sync,v=!1,b={body:void 0,headers:{},statusCode:0,method:f,url:d,rawRequest:l};if("json"in e&&!1!==e.json&&(v=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==f&&"HEAD"!==f&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),p=JSON.stringify(!0===e.json?p:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(o,0)},l.onload=o,l.onerror=i,l.onprogress=function(){},l.onabort=function(){c=!0},l.ontimeout=i,l.open(f,d,!m,e.username,e.password),m||(l.withCredentials=!!e.withCredentials),!m&&e.timeout>0&&(u=setTimeout((function(){if(!c){c=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}}),e.timeout)),l.setRequestHeader)for(a in h)h.hasOwnProperty(a)&&l.setRequestHeader(a,h[a]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"===typeof e.beforeSend&&e.beforeSend(l),l.send(p||null),l}e.exports=s,e.exports.default=s,s.XMLHttpRequest=r.XMLHttpRequest||function(){},s.XDomainRequest="withCredentials"in new s.XMLHttpRequest?s.XMLHttpRequest:r.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){s["delete"===e?"del":e]=function(t,n,r){return(n=a(t,n,r)).method=e.toUpperCase(),c(n)}}))},BGqZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n("dhkc").RadioViewAdapter)();t.default=r},BNbG:function(e,t,n){},C3nd:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));n("ma9I"),n("07d7"),n("5s+n");var r=n("lSNA"),i=n.n(r),o=n("nKUr"),a=n("lwsE"),s=n.n(a),c=n("W8MJ"),l=n.n(c),u=n("7W2i"),d=n.n(u),f=n("a1gu"),p=n.n(f),h=n("Nsbk"),m=n.n(h),v=n("q1tI"),b=n.n(v),g=n("kMSe");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var i=m()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}function O(e){var t;return Object(g.c)("site")(t=function(t){d()(r,t);var n=w(r);function r(){var e;s()(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).tcaptcha=null,e.qcloudCaptcha=!1,e.loadTencentCaptcha=function(){var t,n=e.props.site.webConfig;if(e.qcloudCaptcha=null===n||void 0===n||null===(t=n.qcloud)||void 0===t?void 0:t.qcloudCaptcha,e.qcloudCaptcha&&!window.TencentCaptcha){var r=window.document.createElement("script");r.src="https://ssl.captcha.qq.com/TCaptcha.js",r.async=!0,window.document.body.append(r)}},e.showCaptcha=function(){return new Promise((function(t,n){var r,i,o;if(e.qcloudCaptcha)if(window.TencentCaptcha){var a=null===(r=e.props.site)||void 0===r||null===(i=r.webConfig)||void 0===i||null===(o=i.qcloud)||void 0===o?void 0:o.qcloudCaptchaAppId;e.tcaptcha=new window.TencentCaptcha(a,(function(e){if(0===e.ret)return t({captchaRandStr:e.randstr,captchaTicket:e.ticket})})),e.tcaptcha.show()}else n({Code:"captcha_not_available",Message:"\u56fe\u5f62\u9a8c\u8bc1\u7801\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762"});else t({captchaRandStr:"",captchaTicket:""})}))},e}return l()(r,[{key:"componentDidMount",value:function(){this.loadTencentCaptcha()}},{key:"render",value:function(){return Object(o.jsx)(e,_(_({},this.props),{},{showCaptcha:this.showCaptcha}))}}]),r}(b.a.Component))||t}},CCF8:function(e,t,n){"use strict";var r=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),o=t.length,a=0;a<o;++a)t[a].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}();e.exports=r},CObF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressLogicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("LveU").ProgressWebAdapter}});t.ProgressLogicalAdapter=r},CyXQ:function(e,t,n){var r=n("ppGB"),i=n("UMSQ");e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length or index");return n}},DH8N:function(e,t,n){"use strict";var r=n("284h"),i=n("TqRt");n("ma9I"),n("yyme"),n("2B1R"),n("07d7"),n("5s+n"),Object.defineProperty(t,"__esModule",{value:!0}),t.WebLayout=void 0;var o=i(n("o0o1")),a=i(n("284h"));n("ls82");var s=i(n("yXPU")),c=i(n("lwsE")),l=i(n("W8MJ")),u=i(n("PJYZ")),d=i(n("7W2i")),f=i(n("a1gu")),p=i(n("Nsbk")),h=i(n("lSNA")),m=i(n("TSYQ")),v=r(n("q1tI")),b=n("VTYn"),g=i(n("MCNy")),y=i(n("9p2j")),_=i(n("wdT/"));function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);if(t){var i=(0,p.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var O=function(e){(0,d.default)(r,e);var t=w(r);function r(e){var n;return(0,c.default)(this,r),n=t.call(this,e),(0,h.default)((0,u.default)(n),"nativeRecorder",null),(0,h.default)((0,u.default)(n),"recorder",null),(0,h.default)((0,u.default)(n),"intervalId",null),(0,h.default)((0,u.default)(n),"needToUpload",!1),(0,h.default)((0,u.default)(n),"needToCancel",!1),(0,h.default)((0,u.default)(n),"isWechat",!1),n.state={isRecording:!1,precent:0,second:0,file:null,isIosWechat:!1},n}return(0,l.default)(r,[{key:"componentDidMount",value:function(){var e=(0,s.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=navigator.userAgent).indexOf("MicroMessenger")>-1&&(t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1))){e.next=5;break}this.setState({isIosWechat:!0}),e.next=8;break;case 5:return e.next=7,Promise.resolve().then((function(){return(0,a.default)(n("DU6A"))}));case 7:this.nativeRecorder=e.sent.default;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startRecord",value:function(){var e=(0,s.default)(o.default.mark((function e(){var t,n,r,i,a,s=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.isRecording,r=t.file,i=this.props.onRecordBegan,a=void 0===i?function(){}:i,!n&&!r){e.next=4;break}return e.abrupt("return");case 4:this.recorder=this.nativeRecorder({type:"mp3",sampleRate:16e3,bitRate:16,onProcess:function(){s.state.isRecording||(s.setState({isRecording:!0}),s.onRecordStart(),a())}}),this.recorder.open((function(){s.recorder.start()}),(function(e,t){t&&_.default.info({content:"\u60a8\u7981\u7528\u4e86\u5f55\u97f3\u6743\u9650\uff0c\u5982\u9700\u4f7f\u7528\u5f55\u97f3\u8bf7\u91cd\u542f\u6d4f\u89c8\u5668\u6216\u5230\u7f51\u7ad9\u8bbe\u7f6e\u91cc\u6388\u6743\u7f51\u9875\u4f7f\u7528\u5f55\u97f3",duration:3e3})}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopRecord",value:function(){var e=this;clearInterval(this.intervalId),this.recorder.stop((function(t){var n=e.props.onRecordCompleted,r=void 0===n?function(){}:n;if(e.recorder=null,e.needToCancel)return e.resetRecord(),void(e.needToCancel=!1);r(),e.setState({file:t,isRecording:!1}),e.needToUpload&&e.props.onUpload(t),e.needToUpload=!1}),(function(){}))}},{key:"cancelRecord",value:function(){var e=this.state.file,t=this.props.onRecordReset,n=void 0===t?function(){}:t;this.recorder&&this.stopRecord(),n(),e?this.resetRecord():this.needToCancel=!0}},{key:"resetRecord",value:function(){this.setState({isRecording:!1,precent:0,second:0,file:null})}},{key:"uploadRecord",value:function(){var e=this.state.file;this.recorder&&this.stopRecord(),e?this.props.onUpload(e):this.needToUpload=!0}},{key:"onRecordStart",value:function(){var e=this,t=this.props.duration,n=void 0===t?60:t;n*=1e3;var r=(new Date).getTime(),i=r+n;this.intervalId=setInterval((function(){var t=(new Date).getTime();e.setState({precent:Math.floor((t-r)/n*100),second:Math.floor((t-r)/1e3)}),t>=i&&e.stopRecord()}),500)}},{key:"render",value:function(){var e=this.context.clsPrefix,t=this.state,n=t.isRecording,r=t.precent,i=t.second,o=t.file,a=t.isIosWechat,s="".concat(e,"-audio-record"),c=Array(9).fill("").map((function(e,t){var r="".concat(s,"-area-hz-").concat(t+1),i="".concat(s,"-area-hz-").concat(t+1,"--animation");return v.default.createElement("div",{key:t,className:(0,m.default)(r,(0,h.default)({},i,n))})}));return a?null:v.default.createElement("div",{className:s},(n||o)&&v.default.createElement("span",{className:"".concat(s,"-duration")},"".concat(i,"S")),v.default.createElement("div",{className:"".concat(s,"-area")},v.default.createElement("div",{className:"".concat(s,"-area-hz")},c),v.default.createElement("div",{className:"".concat(s,"-area-btn"),onClick:this.startRecord.bind(this)},v.default.createElement(y.default,{type:"circle",percent:r,lineWidth:3,isShowText:!1,className:"progress-circle-width"},v.default.createElement("div",{className:"".concat(s,"-area-btn-status")},n||o?v.default.createElement("div",{className:"".concat(s,"-area-btn-status-icon")}):v.default.createElement(g.default,{name:"MicroOutlined",size:20})))),v.default.createElement("div",{className:"".concat(s,"-area-hz")},[].concat(c).reverse())),v.default.createElement("div",{className:"".concat(s,"-toolbar")},n||o?v.default.createElement(v.default.Fragment,null,v.default.createElement(g.default,{className:"".concat(s,"-toolbar-text"),name:"ReturnOutlined",size:16,onClick:this.cancelRecord.bind(this)}),v.default.createElement("span",{className:"".concat(s,"-toolbar-tips")},o?"\u5f55\u5236\u5b8c\u6210":"\u5f55\u5236\u4e2d"),v.default.createElement(g.default,{className:"".concat(s,"-toolbar-text"),name:"CheckOutlined",size:16,onClick:this.uploadRecord.bind(this)})):v.default.createElement("span",{className:"".concat(s,"-toolbar-tips")},"\u70b9\u51fb\u5f55\u97f3")))}}]),r}(v.Component);t.WebLayout=O,(0,h.default)(O,"contextType",b.ConfigContext)},DU6A:function(e,t,n){var r;!function(e){"use strict";var t=function(){},n=function(e){return new a(e)};n.IsOpen=function(){var e=n.Stream;if(e){var t=(e.getTracks&&e.getTracks()||e.audioTracks||[])[0];if(t){var r=t.readyState;return"live"==r||r==t.LIVE}}return!1},n.BufferSize=4096,n.Destroy=function(){for(var e in i("Recorder Destroy"),r)r[e]()};var r={};n.BindDestroy=function(e,t){r[e]=t},n.Support=function(){var t=e.AudioContext;if(t||(t=e.webkitAudioContext),!t)return!1;var r=navigator.mediaDevices||{};return r.getUserMedia||(r=navigator).getUserMedia||(r.getUserMedia=r.webkitGetUserMedia||r.mozGetUserMedia||r.msGetUserMedia),!!r.getUserMedia&&(n.Scope=r,n.Ctx&&"closed"!=n.Ctx.state||(n.Ctx=new t,n.BindDestroy("Ctx",(function(){var e=n.Ctx;e&&e.close&&e.close()}))),!0)},n.SampleData=function(e,t,n,r,i){r||(r={});var o=r.index||0,a=r.offset||0,s=r.frameNext||[];i||(i={});var c=i.frameSize||1;i.frameType&&(c="mp3"==i.frameType?1152:1);for(var l=0,u=o;u<e.length;u++)l+=e[u].length;l=Math.max(0,l-Math.floor(a));var d=t/n;1<d?l=Math.floor(l/d):(d=1,n=t),l+=s.length;var f=new Int16Array(l),p=0;for(u=0;u<s.length;u++)f[p]=s[u],p++;for(var h=e.length;o<h;o++){for(var m=e[o],v=(u=a,m.length);u<v;){var b=Math.floor(u),g=Math.ceil(u),y=u-b,_=m[b],w=g<v?m[g]:(e[o+1]||[_])[0]||0;f[p]=_+(w-_)*y,p++,u+=d}a=u-v}s=null;var O=f.length%c;if(0<O){var x=2*(f.length-O);s=new Int16Array(f.buffer.slice(x)),f=new Int16Array(f.buffer.slice(0,x))}return{index:o,offset:a,frameNext:s,sampleRate:n,data:f}},n.PowerLevel=function(e,t){var n=e/t||0;return n<1251?Math.round(n/1250*10):Math.round(Math.min(100,Math.max(0,100*(1+Math.log(n/1e4)/Math.log(10)))))};var i=function(e,t){var n=new Date,r=("0"+n.getMinutes()).substr(-2)+":"+("0"+n.getSeconds()).substr(-2)+"."+("00"+n.getMilliseconds()).substr(-3),i=["["+r+" Recorder]"+e],o=arguments,a=2,s=console.log;for("number"==typeof t?s=1==t?console.error:3==t?console.warn:s:a=1;a<o.length;a++)i.push(o[a]);s.apply(console,i)};n.CLog=i;var o=0;function a(e){this.id=++o,n.Traffic&&n.Traffic();var r={type:"mp3",bitRate:16,sampleRate:16e3,onProcess:t};for(var i in e)r[i]=e[i];this.set=r,this._S=9}n.Sync={O:9,C:9},n.prototype=a.prototype={open:function(r,o){var a=this;r=r||t;var s=function(e,t){i("\u5f55\u97f3open\u5931\u8d25\uff1a"+e+",isUserNotAllow:"+(t=!!t),1),o&&o(e,t)},c=function(){i("open\u6210\u529f"),r(),a._SO=0},l=function(t,n){try{e.top.a}catch(t){return void s('\u65e0\u6743\u5f55\u97f3(\u8de8\u57df\uff0c\u8bf7\u5c1d\u8bd5\u7ed9iframe\u6dfb\u52a0\u9ea6\u514b\u98ce\u8bbf\u95ee\u7b56\u7565\uff0c\u5982allow="camera;microphone")')}/Permission|Allow/i.test(t)?s("\u7528\u6237\u62d2\u7edd\u4e86\u5f55\u97f3\u6743\u9650",!0):!1===e.isSecureContext?s("\u65e0\u6743\u5f55\u97f3(\u9700https)"):/Found/i.test(t)?s(n+"\uff0c\u65e0\u53ef\u7528\u9ea6\u514b\u98ce"):s(n)},u=n.Sync,d=++u.O,f=u.C;a._O=a._O_=d,a._SO=a._S;var p=function(){if(f!=u.C||!a._O){var e="open\u88ab\u53d6\u6d88";return d==u.O?a.close():e="open\u88ab\u4e2d\u65ad",s(e),!0}};if(n.IsOpen())c();else if(n.Support()){var h=a.envCheck({envName:"H5",canProcess:!0});if(h)s("\u4e0d\u80fd\u5f55\u97f3\uff1a"+h);else{var m=function(e){(n.Stream=e)._call={},p()||setTimeout((function(){p()||(n.IsOpen()?(function(){var e=n.Ctx,t=n.Stream,r=t._m=e.createMediaStreamSource(t),i=t._p=(e.createScriptProcessor||e.createJavaScriptNode).call(e,n.BufferSize,1,1);r.connect(i),i.connect(e.destination);var o=t._call;i.onaudioprocess=function(e){for(var t in o){for(var n=e.inputBuffer.getChannelData(0),r=n.length,i=new Int16Array(r),a=0,s=0;s<r;s++){var c=Math.max(-1,Math.min(1,n[s]));c=c<0?32768*c:32767*c,i[s]=c,a+=Math.abs(c)}for(var l in o)o[l](i,a);return}}}(),c()):s("\u5f55\u97f3\u529f\u80fd\u65e0\u6548\uff1a\u65e0\u97f3\u9891\u6d41"))}),100)},v=function(e){var t=e.name||e.message||e.code+":"+e;i("\u8bf7\u6c42\u5f55\u97f3\u6743\u9650\u9519\u8bef",1,e),l(t,"\u65e0\u6cd5\u5f55\u97f3\uff1a"+t)},b=n.Scope.getUserMedia({audio:!0},m,v);b&&b.then&&b.then(m)[r&&"catch"](v)}}else l("","\u6b64\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u5f55\u97f3")},close:function(e){e=e||t,this._stop();var r=n.Sync;if(this._O=0,this._O_!=r.O)return i("close\u88ab\u5ffd\u7565",3),void e();r.C++;var o,a=n.Stream;if(a){(o=n.Stream)._m&&(o._m.disconnect(),o._p.disconnect(),o._p.onaudioprocess=o._p=o._m=null);for(var s=a.getTracks&&a.getTracks()||a.audioTracks||[],c=0;c<s.length;c++){var l=s[c];l.stop&&l.stop()}a.stop&&a.stop()}n.Stream=0,i("close"),e()},mock:function(e,t){var n=this;return n._stop(),n.isMock=1,n.mockEnvInfo=null,n.buffers=[e],n.recSize=e.length,n.srcSampleRate=t,n},envCheck:function(e){var t,n=this.set;return t||(this[n.type+"_envCheck"]?t=this[n.type+"_envCheck"](e,n):n.takeoffEncodeChunk&&(t=n.type+"\u7c7b\u578b\u4e0d\u652f\u6301\u8bbe\u7f6etakeoffEncodeChunk")),t||""},envStart:function(e,t){var n=this,r=n.set;if(n.isMock=e?1:0,n.mockEnvInfo=e,n.buffers=[],n.recSize=0,n.envInLast=0,n.envInFirst=0,n.envInFix=0,n.envInFixTs=[],r.sampleRate=Math.min(t,r.sampleRate),n.srcSampleRate=t,n.engineCtx=0,n[r.type+"_start"]){var i=n.engineCtx=n[r.type+"_start"](r);i&&(i.pcmDatas=[],i.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(e,t){var r=this,o=r.set,a=r.engineCtx,s=r.srcSampleRate,c=e.length,l=n.PowerLevel(t,c),u=r.buffers,d=u.length;u.push(e);var f=u,p=d,h=Date.now(),m=Math.round(c/s*1e3);r.envInLast=h,1==r.buffers.length&&(r.envInFirst=h-m);var v=r.envInFixTs;v.splice(0,0,{t:h,d:m});for(var b=h,g=0,y=0;y<v.length;y++){var _=v[y];if(3e3<h-_.t){v.length=y;break}b=_.t,g+=_.d}var w=v[1],O=h-b;if(O/3<O-g&&(w&&1e3<O||6<=v.length)){var x=h-w.t-m;if(m/5<x){var S=!o.disableEnvInFix;if(i("["+h+"]"+(S?"":"\u672a")+"\u8865\u507f"+x+"ms",3),r.envInFix+=x,S){var j=new Int16Array(x*s/1e3);c+=j.length,u.push(j)}}}var E=r.recSize,T=c,k=E+T;if(r.recSize=k,a){var C=n.SampleData(u,s,o.sampleRate,a.chunkInfo);a.chunkInfo=C,k=(E=a.pcmSize)+(T=C.data.length),a.pcmSize=k,u=a.pcmDatas,d=u.length,u.push(C.data),s=C.sampleRate}var A=Math.round(k/s*1e3),M=u.length,P=f.length,R=function(){for(var e=L?0:-T,t=null==u[0],n=d;n<M;n++){var i=u[n];null==i?t=1:(e+=i.length,a&&i.length&&r[o.type+"_encode"](a,i))}if(t&&a)for(n=p,f[0]&&(n=0);n<P;n++)f[n]=null;t&&(e=L?T:0,u[0]=null),a?a.pcmSize+=e:r.recSize+=e},L=o.onProcess(u,l,A,s,d,R);if(!0===L){var N=0;for(y=d;y<M;y++)null==u[y]?N=1:u[y]=new Int16Array(0);N?i("\u672a\u8fdb\u5165\u5f02\u6b65\u524d\u4e0d\u80fd\u6e05\u9664buffers",3):a?a.pcmSize-=T:r.recSize-=T}else R()},start:function(){if(n.IsOpen()){i("\u5f00\u59cb\u5f55\u97f3");var e=this,t=(e.set,n.Ctx);if(e._stop(),e.state=0,e.envStart(null,t.sampleRate),e._SO&&e._SO+1!=e._S)i("start\u88ab\u4e2d\u65ad",3);else{e._SO=0;var r=function(){e.state=1,e.resume()};"suspended"==t.state?t.resume().then((function(){i("ctx resume"),r()})):r()}}else i("\u672aopen",1)},pause:function(){this.state&&(this.state=2,i("pause"),delete n.Stream._call[this.id])},resume:function(){var e=this;e.state&&(e.state=1,i("resume"),e.envResume(),n.Stream._call[e.id]=function(t,n){1==e.state&&e.envIn(t,n)})},_stop:function(e){var t=this,n=t.set;t.isMock||t._S++,t.state&&(t.pause(),t.state=0),!e&&t[n.type+"_stop"]&&(t[n.type+"_stop"](t.engineCtx),t.engineCtx=0)},stop:function(e,t,r){var o,a=this,s=a.set;i("Stop "+(a.envInLast?a.envInLast-a.envInFirst+"ms \u8865"+a.envInFix+"ms":"-"));var c=function(){a._stop(),r&&a.close()},l=function(e){i("\u7ed3\u675f\u5f55\u97f3\u5931\u8d25\uff1a"+e,1),t&&t(e),c()},u=function(t,n){if(i("\u7ed3\u675f\u5f55\u97f3 \u7f16\u7801"+(Date.now()-o)+"ms \u97f3\u9891"+n+"ms/"+t.size+"b"),s.takeoffEncodeChunk)i("\u542f\u7528takeoffEncodeChunk\u540estop\u8fd4\u56de\u7684blob\u957f\u5ea6\u4e3a0\u4e0d\u63d0\u4f9b\u97f3\u9891\u6570\u636e",3);else if(t.size<Math.max(100,n/2))return void l("\u751f\u6210\u7684"+s.type+"\u65e0\u6548");e&&e(t,n),c()};if(!a.isMock){if(!a.state)return void l("\u672a\u5f00\u59cb\u5f55\u97f3");a._stop(!0)}var d=a.recSize;if(d)if(a.buffers[0])if(a[s.type]){if(a.isMock){var f=a.envCheck(a.mockEnvInfo||{envName:"mock",canProcess:!1});if(f)return void l("\u5f55\u97f3\u9519\u8bef\uff1a"+f)}var p=a.engineCtx;if(a[s.type+"_complete"]&&p){var h=Math.round(p.pcmSize/s.sampleRate*1e3);return o=Date.now(),void a[s.type+"_complete"](p,(function(e){u(e,h)}),l)}o=Date.now();var m=n.SampleData(a.buffers,a.srcSampleRate,s.sampleRate);s.sampleRate=m.sampleRate;var v=m.data;h=Math.round(v.length/s.sampleRate*1e3),i("\u91c7\u6837"+d+"->"+v.length+" \u82b1:"+(Date.now()-o)+"ms"),setTimeout((function(){o=Date.now(),a[s.type](v,(function(e){u(e,h)}),(function(e){l(e)}))}))}else l("\u672a\u52a0\u8f7d"+s.type+"\u7f16\u7801\u5668");else l("\u97f3\u9891\u88ab\u91ca\u653e");else l("\u672a\u91c7\u96c6\u5230\u5f55\u97f3")}},e.Recorder&&e.Recorder.Destroy(),(e.Recorder=n).LM="2020-11-15 21:36:11",n.TrafficImgUrl="//ia.51.la/go1?id=20469973&pvFlag=1",n.Traffic=function(){var e=n.TrafficImgUrl;if(e){var t=n.Traffic,r=location.href.replace(/#.*/,"");if(0==e.indexOf("//")&&(e=/^https:/i.test(r)?"https:"+e:"http:"+e),!t[r])t[r]=1,(new Image).src=e,i("Traffic Analysis Image: Recorder.TrafficImgUrl="+n.TrafficImgUrl)}}}(window),void 0!==(r=function(){return Recorder}.call(t,n,t,e))&&(e.exports=r),e.exports&&(e.exports=Recorder),function(){"use strict";var e;Recorder.prototype.enc_mp3={stable:!0,testmsg:"\u91c7\u6837\u7387\u8303\u56f448000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000"},Recorder.prototype.mp3=function(e,t,n){var o=this.set,a=e.length,s=this.mp3_start(o);if(s)return this.mp3_encode(s,e),void this.mp3_complete(s,t,n,1);var c=new Recorder.lamejs.Mp3Encoder(1,o.sampleRate,o.bitRate),l=[],u=0,d=0,f=function(){if(u<a)0<(n=c.encodeBuffer(e.subarray(u,u+57600))).length&&(d+=n.buffer.byteLength,l.push(n.buffer)),u+=57600,setTimeout(f);else{var n;0<(n=c.flush()).length&&(d+=n.buffer.byteLength,l.push(n.buffer));var s=r.fn(l,d,a,o.sampleRate);i(s,o),t(new Blob(l,{type:"audio/mp3"}))}};f()},Recorder.BindDestroy("mp3Worker",(function(){console.log("mp3Worker Destroy"),e&&e.terminate(),e=null})),Recorder.prototype.mp3_envCheck=function(e,t){var r="";return t.takeoffEncodeChunk&&(e.canProcess?n()||(r="\u5f53\u524d\u6d4f\u89c8\u5668\u7248\u672c\u592a\u4f4e\uff0c\u65e0\u6cd5\u5b9e\u65f6\u5904\u7406"):r=e.envName+"\u73af\u5883\u4e0d\u652f\u6301\u5b9e\u65f6\u5904\u7406"),r},Recorder.prototype.mp3_start=function(e){return n(e)};var t={id:0},n=function(n){var i=e;try{if(!i){var o=");wk_lame();var wk_ctxs={};self.onmessage="+function(e){var t=e.data,n=wk_ctxs[t.id];if("init"==t.action)wk_ctxs[t.id]={sampleRate:t.sampleRate,bitRate:t.bitRate,takeoff:t.takeoff,mp3Size:0,pcmSize:0,encArr:[],encObj:new wk_lame.Mp3Encoder(1,t.sampleRate,t.bitRate)};else if(!n)return;switch(t.action){case"stop":n.encObj=null,delete wk_ctxs[t.id];break;case"encode":n.pcmSize+=t.pcm.length,0<(r=n.encObj.encodeBuffer(t.pcm)).length&&(n.takeoff?self.postMessage({action:"takeoff",id:t.id,chunk:r}):(n.mp3Size+=r.buffer.byteLength,n.encArr.push(r.buffer)));break;case"complete":var r;0<(r=n.encObj.flush()).length&&(n.takeoff?self.postMessage({action:"takeoff",id:t.id,chunk:r}):(n.mp3Size+=r.buffer.byteLength,n.encArr.push(r.buffer)));var i=wk_mp3TrimFix.fn(n.encArr,n.mp3Size,n.pcmSize,n.sampleRate);self.postMessage({action:t.action,id:t.id,blob:new Blob(n.encArr,{type:"audio/mp3"}),meta:i})}};o+=";var wk_mp3TrimFix={rm:"+r.rm+",fn:"+r.fn+"}";var a=Recorder.lamejs.toString(),s=(window.URL||webkitURL).createObjectURL(new Blob(["var wk_lame=(",a,o],{type:"text/javascript"}));i=new Worker(s),setTimeout((function(){(window.URL||webkitURL).revokeObjectURL(s)}),1e4),i.onmessage=function(e){var n=e.data,r=t[n.id];r&&("takeoff"==n.action?r.set.takeoffEncodeChunk(new Uint8Array(n.chunk.buffer)):(r.call&&r.call(n),r.call=null))}}var c={worker:i,set:n,takeoffQueue:[]};return n?(c.id=++t.id,t[c.id]=c,i.postMessage({action:"init",id:c.id,sampleRate:n.sampleRate,bitRate:n.bitRate,takeoff:!!n.takeoffEncodeChunk,x:new Int16Array(5)})):i.postMessage({x:new Int16Array(5)}),e=i,c}catch(n){return i&&i.terminate(),console.error(n),null}};Recorder.prototype.mp3_stop=function(e){if(e&&e.worker){e.worker.postMessage({action:"stop",id:e.id}),e.worker=null,delete t[e.id];var n=-1;for(var r in t)n++;n&&console.warn("mp3 worker\u5269"+n+"\u4e2a\u5728\u4e32\u884c\u7b49\u5f85")}},Recorder.prototype.mp3_encode=function(e,t){e&&e.worker&&e.worker.postMessage({action:"encode",id:e.id,pcm:t})},Recorder.prototype.mp3_complete=function(e,t,n,r){var o=this;e&&e.worker?(e.call=function(n){i(n.meta,e.set),t(n.blob),r&&o.mp3_stop(e)},e.worker.postMessage({action:"complete",id:e.id})):n("mp3\u7f16\u7801\u5668\u672a\u6253\u5f00")},Recorder.mp3ReadMeta=function(e,t){var n="object"==typeof window?window.parseInt:self.parseInt,r=new Uint8Array(e[0]||[]);if(r.length<4)return null;var i=function(e,t){return("0000000"+((t||r)[e]||0).toString(2)).substr(-8)},o=i(0)+i(1),a=i(2)+i(3);if(!/^1{11}/.test(o))return null;var s={"00":2.5,10:2,11:1}[o.substr(11,2)],c={"01":3}[o.substr(13,2)],l={1:[44100,48e3,32e3],2:[22050,24e3,16e3],2.5:[11025,12e3,8e3]}[s];l&&(l=l[n(a.substr(4,2),2)]);var u=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320]][1==s?1:0][n(a.substr(0,4),2)];if(!(s&&c&&u&&l))return null;for(var d=Math.round(8*t/u),f=1==c?384:2==c||1==s?1152:576,p=f/l*1e3,h=Math.floor(f*u/8/l*1e3),m=0,v=0,b=0;b<e.length;b++){var g=e[b];if(h+3<=(v+=g.byteLength)){var y=new Uint8Array(g);m="1"==i(g.byteLength-(v-(h+3)+1),y).charAt(6);break}}return m&&h++,{version:s,layer:c,sampleRate:l,bitRate:u,duration:d,size:t,hasPadding:m,frameSize:h,frameDurationFloat:p}};var r={rm:Recorder.mp3ReadMeta,fn:function(e,t,n,r){var i=this.rm(e,t);if(!i)return{err:"mp3\u975e\u9884\u5b9a\u683c\u5f0f"};var o=Math.round(n/r*1e3),a=Math.floor((i.duration-o)/i.frameDurationFloat);if(0<a){var s=a*i.frameSize-(i.hasPadding?1:0);t-=s;for(var c=0,l=[],u=0;u<e.length;u++){var d=e[u];if(s<=0)break;s>=d.byteLength?(s-=d.byteLength,l.push(d),e.splice(u,1),u--):(e[u]=d.slice(s),c=d,s=0)}if(!this.rm(e,t)){for(c&&(e[0]=c),u=0;u<l.length;u++)e.splice(u,0,l[u]);i.err="fix\u540e\u6570\u636e\u9519\u8bef\uff0c\u5df2\u8fd8\u539f\uff0c\u9519\u8bef\u539f\u56e0\u4e0d\u660e"}var f=i.trimFix={};f.remove=a,f.removeDuration=Math.round(a*i.frameDurationFloat),f.duration=Math.round(8*t/i.bitRate)}return i}},i=function(e,t){var n="MP3\u4fe1\u606f ";(e.sampleRate&&e.sampleRate!=t.sampleRate||e.bitRate&&e.bitRate!=t.bitRate)&&(console.warn(n+"\u548c\u8bbe\u7f6e\u7684\u4e0d\u5339\u914dset:"+t.bitRate+"kbps "+t.sampleRate+"hz\uff0c\u5df2\u66f4\u65b0set:"+e.bitRate+"kbps "+e.sampleRate+"hz",t),t.sampleRate=e.sampleRate,t.bitRate=e.bitRate);var r=e.trimFix;r?(n+="Fix\u79fb\u9664"+r.remove+"\u5e27"+r.removeDuration+"ms -> "+r.duration+"ms",2<r.remove&&(e.err=(e.err?e.err+", ":"")+"\u79fb\u9664\u5e27\u6570\u8fc7\u591a")):n+=(e.duration||"-")+"ms",e.err?console.error(n,e.err,e):console.log(n,e)}}(),function(){"use strict";function e(){var t=function(e){return Math.log(e)/Math.log(10)};function n(e){return new Int8Array(e)}function r(e){return new Int32Array(e)}function i(e){return new Float32Array(e)}function o(e){if(1==e.length)return i(e[0]);var t=e[0];e=e.slice(1);for(var n=[],r=0;r<t;r++)n.push(o(e));return n}function a(e){if(1==e.length)return r(e[0]);var t=e[0];e=e.slice(1);for(var n=[],i=0;i<t;i++)n.push(a(e));return n}function s(e){if(1==e.length)return function(e){return new Int16Array(e)}(e[0]);var t=e[0];e=e.slice(1);for(var n=[],r=0;r<t;r++)n.push(s(e));return n}function c(e){if(1==e.length)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var n=[],r=0;r<t;r++)n.push(c(e));return n}var l={fill:function(e,t,n,r){if(2==arguments.length)for(var i=0;i<e.length;i++)e[i]=t;else for(i=t;i<n;i++)e[i]=r}},u={arraycopy:function(e,t,n,r,i){for(var o=t+i;t<o;)n[r++]=e[t++]}},d={};function f(e){this.ordinal=e}d.SQRT2=1.4142135623730951,d.FAST_LOG10=function(e){return t(e)},d.FAST_LOG10_X=function(e,n){return t(e)*n},f.short_block_allowed=new f(0),f.short_block_coupled=new f(1),f.short_block_dispensed=new f(2),f.short_block_forced=new f(3);var p={};function h(e){this.ordinal=e}function m(e){var t=e;this.ordinal=function(){return t}}function v(){var e=null;function t(e){this.bits=0|e}this.qupvt=null,this.setModules=function(t){this.qupvt=t,e=t};var n=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function i(e,t,n,r,i,o){var a=.5946/t;for(e>>=1;0!=e--;)i[o++]=a>n[r++]?0:1,i[o++]=a>n[r++]?0:1}function o(t,n,r,i,o,a){var s=(t>>=1)%2;for(t>>=1;0!=t--;){var c,l,u,d,f,p,h,m;c=r[i++]*n,l=r[i++]*n,f=0|c,u=r[i++]*n,p=0|l,d=r[i++]*n,h=0|u,c+=e.adj43[f],m=0|d,l+=e.adj43[p],o[a++]=0|c,u+=e.adj43[h],o[a++]=0|l,d+=e.adj43[m],o[a++]=0|u,o[a++]=0|d}0!=s&&(f=0|(c=r[i++]*n),p=0|(l=r[i++]*n),c+=e.adj43[f],l+=e.adj43[p],o[a++]=0|c,o[a++]=0|l)}var a=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function s(e,t,n,r){var i=function(e,t,n){var r=0,i=0;do{var o=e[t++],a=e[t++];r<o&&(r=o),i<a&&(i=a)}while(t<n);return r<i&&(r=i),r}(e,t,n);switch(i){case 0:return i;case 1:return function(e,t,n,r){var i=0,o=w.ht[1].hlen;do{var a=2*e[t+0]+e[t+1];t+=2,i+=o[a]}while(t<n);return r.bits+=i,1}(e,t,n,r);case 2:case 3:return function(e,t,n,r,i){var o,a,s=0,c=w.ht[r].xlen;a=2==r?w.table23:w.table56;do{var l=e[t+0]*c+e[t+1];t+=2,s+=a[l]}while(t<n);return(o=65535&s)<(s>>=16)&&(s=o,r++),i.bits+=s,r}(e,t,n,a[i-1],r);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return function(e,t,n,r,i){var o=0,a=0,s=0,c=w.ht[r].xlen,l=w.ht[r].hlen,u=w.ht[r+1].hlen,d=w.ht[r+2].hlen;do{var f=e[t+0]*c+e[t+1];t+=2,o+=l[f],a+=u[f],s+=d[f]}while(t<n);var p=r;return a<o&&(o=a,p++),s<o&&(o=s,p=r+2),i.bits+=o,p}(e,t,n,a[i-1],r);default:if(j.IXMAX_VAL<i)return r.bits=j.LARGE_BITS,-1;var o,s;for(i-=15,o=24;o<32&&!(w.ht[o].linmax>=i);o++);for(s=o-8;s<24&&!(w.ht[s].linmax>=i);s++);return function(e,t,n,r,i,o){var a,s=65536*w.ht[r].xlen+w.ht[i].xlen,c=0;do{var l=e[t++],u=e[t++];0!=l&&(14<l&&(l=15,c+=s),l*=16),0!=u&&(14<u&&(u=15,c+=s),l+=u),c+=w.largetbl[l]}while(t<n);return(a=65535&c)<(c>>=16)&&(c=a,r=i),o.bits+=c,r}(e,t,n,s,o,r)}}function c(e,n,r,i,o,a,c,l){for(var u=n.big_values,d=2;d<A.SBMAX_l+1;d++){var f=e.scalefac_band.l[d];if(u<=f)break;var p=o[d-2]+n.count1bits;if(r.part2_3_length<=p)break;var h=new t(p),m=s(i,f,u,h);p=h.bits,r.part2_3_length<=p||(r.assign(n),r.part2_3_length=p,r.region0_count=a[d-2],r.region1_count=d-2-a[d-2],r.table_select[0]=c[d-2],r.table_select[1]=l[d-2],r.table_select[2]=m)}}this.noquant_count_bits=function(e,n,r){var i=n.l3_enc,o=Math.min(576,n.max_nonzero_coeff+2>>1<<1);for(null!=r&&(r.sfb_count1=0);1<o&&0==(i[o-1]|i[o-2]);o-=2);n.count1=o;for(var a=0,c=0;3<o;o-=4){var l;if(1<(2147483647&(i[o-1]|i[o-2]|i[o-3]|i[o-4])))break;l=2*(2*(2*i[o-4]+i[o-3])+i[o-2])+i[o-1],a+=w.t32l[l],c+=w.t33l[l]}var u=a;if(n.count1table_select=0,c<a&&(u=c,n.count1table_select=1),n.count1bits=u,0==(n.big_values=o))return u;if(n.block_type==A.SHORT_TYPE)(a=3*e.scalefac_band.s[3])>n.big_values&&(a=n.big_values),c=n.big_values;else if(n.block_type==A.NORM_TYPE){if(a=n.region0_count=e.bv_scf[o-2],c=n.region1_count=e.bv_scf[o-1],c=e.scalefac_band.l[a+c+2],a=e.scalefac_band.l[a+1],c<o){var d=new t(u);n.table_select[2]=s(i,c,o,d),u=d.bits}}else n.region0_count=7,n.region1_count=A.SBMAX_l-1-7-1,(c=o)<(a=e.scalefac_band.l[8])&&(a=c);if(a=Math.min(a,o),c=Math.min(c,o),0<a&&(d=new t(u),n.table_select[0]=s(i,0,a,d),u=d.bits),a<c&&(d=new t(u),n.table_select[1]=s(i,a,c,d),u=d.bits),2==e.use_best_huffman&&(n.part2_3_length=u,best_huffman_divide(e,n),u=n.part2_3_length),null!=r&&n.block_type==A.NORM_TYPE){for(var f=0;e.scalefac_band.l[f]<n.big_values;)f++;r.sfb_count1=f}return u},this.count_bits=function(t,n,r,a){var s=r.l3_enc,c=j.IXMAX_VAL/e.IPOW20(r.global_gain);if(r.xrpow_max>c)return j.LARGE_BITS;if(function(t,n,r,a,s){var c,u,d,f=0,p=0,h=0,m=0,v=n,b=0,g=v,y=0,_=t,w=0;for(d=null!=s&&a.global_gain==s.global_gain,u=a.block_type==A.SHORT_TYPE?38:21,c=0;c<=u;c++){var O=-1;if((d||a.block_type==A.NORM_TYPE)&&(O=a.global_gain-(a.scalefac[c]+(0!=a.preflag?e.pretab[c]:0)<<a.scalefac_scale+1)-8*a.subblock_gain[a.window[c]]),d&&s.step[c]==O)0!=p&&(o(p,r,_,w,g,y),p=0),0!=h&&(i(h,r,_,w,g,y),h=0);else{var x,S=a.width[c];if(f+a.width[c]>a.max_nonzero_coeff&&(x=a.max_nonzero_coeff-f+1,l.fill(n,a.max_nonzero_coeff,576,0),(S=x)<0&&(S=0),c=u+1),0==p&&0==h&&(g=v,y=b,_=t,w=m),null!=s&&0<s.sfb_count1&&c>=s.sfb_count1&&0<s.step[c]&&O>=s.step[c]?(0!=p&&(o(p,r,_,w,g,y),p=0,g=v,y=b,_=t,w=m),h+=S):(0!=h&&(i(h,r,_,w,g,y),h=0,g=v,y=b,_=t,w=m),p+=S),S<=0){0!=h&&(i(h,r,_,w,g,y),h=0),0!=p&&(o(p,r,_,w,g,y),p=0);break}}c<=u&&(b+=a.width[c],m+=a.width[c],f+=a.width[c])}0!=p&&(o(p,r,_,w,g,y),p=0),0!=h&&(i(h,r,_,w,g,y),h=0)}(n,s,e.IPOW20(r.global_gain),r,a),0!=(2&t.substep_shaping))for(var u=0,d=r.global_gain+r.scalefac_scale,f=.634521682242439/e.IPOW20(d),p=0;p<r.sfbmax;p++){var h,m=r.width[p];if(0==t.pseudohalf[p])u+=m;else for(h=u,u+=m;h<u;++h)s[h]=n[h]>=f?s[h]:0}return this.noquant_count_bits(t,r,a)},this.best_huffman_divide=function(e,n){var i=new E,o=n.l3_enc,a=r(23),l=r(23),u=r(23),d=r(23);if(n.block_type!=A.SHORT_TYPE||1!=e.mode_gr){i.assign(n),n.block_type==A.NORM_TYPE&&(function(e,n,r,i,o,a,c){for(var l=n.big_values,u=0;u<=22;u++)i[u]=j.LARGE_BITS;for(u=0;u<16;u++){var d=e.scalefac_band.l[u+1];if(l<=d)break;var f=0,p=new t(f),h=s(r,0,d,p);f=p.bits;for(var m=0;m<8;m++){var v=e.scalefac_band.l[u+m+2];if(l<=v)break;var b=f,g=s(r,d,v,p=new t(b));b=p.bits,i[u+m]>b&&(i[u+m]=b,a[(o[u+m]=u)+m]=h,c[u+m]=g)}}}(e,n,o,a,l,u,d),c(e,i,n,o,a,l,u,d));var f=i.big_values;if(!(0==f||1<(o[f-2]|o[f-1])||576<(f=n.count1+2))){i.assign(n),i.count1=f;for(var p=0,h=0;f>i.big_values;f-=4){var m=2*(2*(2*o[f-4]+o[f-3])+o[f-2])+o[f-1];p+=w.t32l[m],h+=w.t33l[m]}if(i.big_values=f,i.count1table_select=0,h<p&&(p=h,i.count1table_select=1),i.count1bits=p,i.block_type==A.NORM_TYPE)c(e,i,n,o,a,l,u,d);else{if(i.part2_3_length=p,f<(p=e.scalefac_band.l[8])&&(p=f),0<p){var v=new t(i.part2_3_length);i.table_select[0]=s(o,0,p,v),i.part2_3_length=v.bits}p<f&&(v=new t(i.part2_3_length),i.table_select[1]=s(o,p,f,v),i.part2_3_length=v.bits),n.part2_3_length>i.part2_3_length&&n.assign(i)}}}};var d=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],f=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],p=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],h=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];v.slen1_tab=p,v.slen2_tab=h,this.best_scalefac_store=function(t,n,r,i){var o,a,s,c,l=i.tt[n][r],u=0;for(o=s=0;o<l.sfbmax;o++){var m=l.width[o];for(s+=m,c=-m;c<0&&0==l.l3_enc[c+s];c++);0==c&&(l.scalefac[o]=u=-2)}if(0==l.scalefac_scale&&0==l.preflag){var v=0;for(o=0;o<l.sfbmax;o++)0<l.scalefac[o]&&(v|=l.scalefac[o]);if(0==(1&v)&&0!=v){for(o=0;o<l.sfbmax;o++)0<l.scalefac[o]&&(l.scalefac[o]>>=1);l.scalefac_scale=u=1}}if(0==l.preflag&&l.block_type!=A.SHORT_TYPE&&2==t.mode_gr){for(o=11;o<A.SBPSY_l&&!(l.scalefac[o]<e.pretab[o]&&-2!=l.scalefac[o]);o++);if(o==A.SBPSY_l){for(o=11;o<A.SBPSY_l;o++)0<l.scalefac[o]&&(l.scalefac[o]-=e.pretab[o]);l.preflag=u=1}}for(a=0;a<4;a++)i.scfsi[r][a]=0;for(2==t.mode_gr&&1==n&&i.tt[0][r].block_type!=A.SHORT_TYPE&&i.tt[1][r].block_type!=A.SHORT_TYPE&&(function(e,t){for(var n,r=t.tt[1][e],i=t.tt[0][e],o=0;o<w.scfsi_band.length-1;o++){for(n=w.scfsi_band[o];n<w.scfsi_band[o+1]&&!(i.scalefac[n]!=r.scalefac[n]&&0<=r.scalefac[n]);n++);if(n==w.scfsi_band[o+1]){for(n=w.scfsi_band[o];n<w.scfsi_band[o+1];n++)r.scalefac[n]=-1;t.scfsi[e][o]=1}}var a=0,s=0;for(n=0;n<11;n++)-1!=r.scalefac[n]&&(s++,a<r.scalefac[n]&&(a=r.scalefac[n]));for(var c=0,l=0;n<A.SBPSY_l;n++)-1!=r.scalefac[n]&&(l++,c<r.scalefac[n]&&(c=r.scalefac[n]));for(o=0;o<16;o++)if(a<d[o]&&c<f[o]){var u=p[o]*s+h[o]*l;r.part2_length>u&&(r.part2_length=u,r.scalefac_compress=o)}}(r,i),u=0),o=0;o<l.sfbmax;o++)-2==l.scalefac[o]&&(l.scalefac[o]=0);0!=u&&(2==t.mode_gr?this.scale_bitcount(l):this.scale_bitcount_lsf(t,l))};var m=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],b=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],g=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(t){var n,r,i,o=0,a=0,s=t.scalefac;if(t.block_type==A.SHORT_TYPE)i=m,0!=t.mixed_block_flag&&(i=b);else if(i=g,0==t.preflag){for(r=11;r<A.SBPSY_l&&!(s[r]<e.pretab[r]);r++);if(r==A.SBPSY_l)for(t.preflag=1,r=11;r<A.SBPSY_l;r++)s[r]-=e.pretab[r]}for(r=0;r<t.sfbdivide;r++)o<s[r]&&(o=s[r]);for(;r<t.sfbmax;r++)a<s[r]&&(a=s[r]);for(t.part2_length=j.LARGE_BITS,n=0;n<16;n++)o<d[n]&&a<f[n]&&t.part2_length>i[n]&&(t.part2_length=i[n],t.scalefac_compress=n);return t.part2_length==j.LARGE_BITS};var y=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(t,n){var i,o,a,s,c,l,d,f,p=r(4),h=n.scalefac;for(i=0!=n.preflag?2:0,d=0;d<4;d++)p[d]=0;if(n.block_type==A.SHORT_TYPE){o=1;var m=e.nr_of_sfb_block[i][o];for(a=f=0;a<4;a++)for(s=m[a]/3,d=0;d<s;d++,f++)for(c=0;c<3;c++)h[3*f+c]>p[a]&&(p[a]=h[3*f+c])}else for(o=0,m=e.nr_of_sfb_block[i][o],a=f=0;a<4;a++)for(s=m[a],d=0;d<s;d++,f++)h[f]>p[a]&&(p[a]=h[f]);for(l=!1,a=0;a<4;a++)p[a]>y[i][a]&&(l=!0);if(!l){var v,b,g,w;for(n.sfb_partition_table=e.nr_of_sfb_block[i][o],a=0;a<4;a++)n.slen[a]=_[p[a]];switch(v=n.slen[0],b=n.slen[1],g=n.slen[2],w=n.slen[3],i){case 0:n.scalefac_compress=(5*v+b<<4)+(g<<2)+w;break;case 1:n.scalefac_compress=400+(5*v+b<<2)+g;break;case 2:n.scalefac_compress=500+3*v+b;break;default:u.err.printf("intensity stereo not implemented yet\n")}}if(!l)for(a=n.part2_length=0;a<4;a++)n.part2_length+=n.slen[a]*n.sfb_partition_table[a];return l};var _=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(e){for(var t=2;t<=576;t+=2){for(var r,i=0;e.scalefac_band.l[++i]<t;);for(r=n[i][0];e.scalefac_band.l[r+1]>t;)r--;for(r<0&&(r=n[i][0]),e.bv_scf[t-2]=r,r=n[i][1];e.scalefac_band.l[r+e.bv_scf[t-2]+2]>t;)r--;r<0&&(r=n[i][1]),e.bv_scf[t-1]=r}}}function b(){}function g(){this.setModules=function(e,t,n){};var e=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];this.updateMusicCRC=function(t,n,r,i){for(var o=0;o<i;++o)t[0]=(a=n[r+o],s=(s=t[0])>>8^e[255&(s^a)]);var a,s}}function y(){var e=this,i=null,a=null,s=null,c=null;this.setModules=function(e,t,n,r){i=e,a=t,s=n,c=r};var d=null,f=0,p=0,h=0;function m(e,t,n){for(;0<n;){var r;0==h&&(h=8,p++,e.header[e.w_ptr].write_timing==f&&(i=e,u.arraycopy(i.header[i.w_ptr].buf,0,d,p,i.sideinfo_len),p+=i.sideinfo_len,f+=8*i.sideinfo_len,i.w_ptr=i.w_ptr+1&P.MAX_HEADER_BUF-1),d[p]=0),n-=r=Math.min(n,h),h-=r,d[p]|=t>>n<<h,f+=r}var i}function g(e,t,n){for(;0<n;){var r;0==h&&(h=8,d[++p]=0),n-=r=Math.min(n,h),h-=r,d[p]|=t>>n<<h,f+=r}}function y(e,t){var n,r=e.internal_flags;if(8<=t&&(m(r,76,8),t-=8),8<=t&&(m(r,65,8),t-=8),8<=t&&(m(r,77,8),t-=8),8<=t&&(m(r,69,8),t-=8),32<=t){var i=s.getLameShortVersion();if(32<=t)for(n=0;n<i.length&&8<=t;++n)t-=8,m(r,i.charCodeAt(n),8)}for(;1<=t;t-=1)m(r,r.ancillary_flag,1),r.ancillary_flag^=e.disable_reservoir?0:1}function _(e,t,n){for(var r=e.header[e.h_ptr].ptr;0<n;){var i=Math.min(n,8-(7&r));n-=i,e.header[e.h_ptr].buf[r>>3]|=t>>n<<8-(7&r)-i,r+=i}e.header[e.h_ptr].ptr=r}function O(e,t){e<<=8;for(var n=0;n<8;n++)0!=(65536&((t<<=1)^(e<<=1)))&&(t^=32773);return t}function x(e,t){var n,r=w.ht[t.count1table_select+32],i=0,o=t.big_values,a=t.big_values;for(n=(t.count1-t.big_values)/4;0<n;--n){var s=0,c=0;0!=t.l3_enc[o+0]&&(c+=8,t.xr[a+0]<0&&s++),0!=t.l3_enc[o+1]&&(c+=4,s*=2,t.xr[a+1]<0&&s++),0!=t.l3_enc[o+2]&&(c+=2,s*=2,t.xr[a+2]<0&&s++),0!=t.l3_enc[o+3]&&(c++,s*=2,t.xr[a+3]<0&&s++),o+=4,a+=4,m(e,s+r.table[c],r.hlen[c]),i+=r.hlen[c]}return i}function S(e,t,n,r,i){var o=w.ht[t],a=0;if(0==t)return a;for(var s=n;s<r;s+=2){var c=0,l=0,u=o.xlen,d=o.xlen,f=0,p=i.l3_enc[s],h=i.l3_enc[s+1];0!=p&&(i.xr[s]<0&&f++,c--),15<t&&(14<p&&(f|=p-15<<1,l=u,p=15),14<h&&(f<<=u,f|=h-15,l+=u,h=15),d=16),0!=h&&(f<<=1,i.xr[s+1]<0&&f++,c--),p=p*d+h,l-=c,c+=o.hlen[p],m(e,o.table[p],c),m(e,f,l),a+=c+l}return a}function j(e,t){var n=3*e.scalefac_band.s[3];return n>t.big_values&&(n=t.big_values),S(e,t.table_select[0],0,n,t)+S(e,t.table_select[1],n,t.big_values,t)}function E(e,t){var n,r,i,o;n=t.big_values;var a=t.region0_count+1;return i=e.scalefac_band.l[a],a+=t.region1_count+1,n<i&&(i=n),n<(o=e.scalefac_band.l[a])&&(o=n),r=S(e,t.table_select[0],0,i,t),(r+=S(e,t.table_select[1],i,o,t))+S(e,t.table_select[2],o,n,t)}function T(){this.total=0}function k(t,n){var r,i,o,a,s,c=t.internal_flags;return s=c.w_ptr,-1==(a=c.h_ptr-1)&&(a=P.MAX_HEADER_BUF-1),r=c.header[a].write_timing-f,0<=(n.total=r)&&(i=1+a-s,a<s&&(i=1+a-s+P.MAX_HEADER_BUF),r-=8*i*c.sideinfo_len),r+=o=e.getframebits(t),n.total+=o,n.total%8!=0?n.total=1+n.total/8:n.total=n.total/8,n.total+=p+1,r<0&&u.err.println("strange error flushing buffer ... \n"),r}this.getframebits=function(e){var t,n=e.internal_flags;return t=0!=n.bitrate_index?w.bitrate_table[e.version][n.bitrate_index]:e.brate,8*(0|72e3*(e.version+1)*t/e.out_samplerate+n.padding)},this.CRC_writeheader=function(e,t){var n=65535;n=O(255&t[2],n),n=O(255&t[3],n);for(var r=6;r<e.sideinfo_len;r++)n=O(255&t[r],n);t[4]=byte(n>>8),t[5]=byte(255&n)},this.flush_bitstream=function(e){var n,r,o=e.internal_flags,a=o.h_ptr-1;if(-1==a&&(a=P.MAX_HEADER_BUF-1),n=o.l3_side,!((r=k(e,new T))<0)){if(y(e,r),o.ResvSize=0,n.main_data_begin=0,o.findReplayGain){var s=i.GetTitleGain(o.rgdata);o.RadioGain=0|Math.floor(10*s+.5)}o.findPeakSample&&(o.noclipGainChange=0|Math.ceil(20*t(o.PeakSample/32767)*10),0<o.noclipGainChange&&(EQ(e.scale,1)||EQ(e.scale,0))?o.noclipScale=Math.floor(32767/o.PeakSample*100)/100:o.noclipScale=-1)}},this.add_dummy_byte=function(e,t,n){for(var r,i=e.internal_flags;0<n--;)for(g(0,t,8),r=0;r<P.MAX_HEADER_BUF;++r)i.header[r].write_timing+=8},this.format_bitstream=function(e){var t,n=e.internal_flags;t=n.l3_side;var r=this.getframebits(e);y(e,t.resvDrain_pre),function(e,t){var n,r,i,o=e.internal_flags;if(n=o.l3_side,o.header[o.h_ptr].ptr=0,l.fill(o.header[o.h_ptr].buf,0,o.sideinfo_len,0),e.out_samplerate<16e3?_(o,4094,12):_(o,4095,12),_(o,e.version,1),_(o,1,2),_(o,e.error_protection?0:1,1),_(o,o.bitrate_index,4),_(o,o.samplerate_index,2),_(o,o.padding,1),_(o,e.extension,1),_(o,e.mode.ordinal(),2),_(o,o.mode_ext,2),_(o,e.copyright,1),_(o,e.original,1),_(o,e.emphasis,2),e.error_protection&&_(o,0,16),1==e.version){for(_(o,n.main_data_begin,9),2==o.channels_out?_(o,n.private_bits,3):_(o,n.private_bits,5),i=0;i<o.channels_out;i++){var a;for(a=0;a<4;a++)_(o,n.scfsi[i][a],1)}for(r=0;r<2;r++)for(i=0;i<o.channels_out;i++)_(o,(s=n.tt[r][i]).part2_3_length+s.part2_length,12),_(o,s.big_values/2,9),_(o,s.global_gain,8),_(o,s.scalefac_compress,4),s.block_type!=A.NORM_TYPE?(_(o,1,1),_(o,s.block_type,2),_(o,s.mixed_block_flag,1),14==s.table_select[0]&&(s.table_select[0]=16),_(o,s.table_select[0],5),14==s.table_select[1]&&(s.table_select[1]=16),_(o,s.table_select[1],5),_(o,s.subblock_gain[0],3),_(o,s.subblock_gain[1],3),_(o,s.subblock_gain[2],3)):(_(o,0,1),14==s.table_select[0]&&(s.table_select[0]=16),_(o,s.table_select[0],5),14==s.table_select[1]&&(s.table_select[1]=16),_(o,s.table_select[1],5),14==s.table_select[2]&&(s.table_select[2]=16),_(o,s.table_select[2],5),_(o,s.region0_count,4),_(o,s.region1_count,3)),_(o,s.preflag,1),_(o,s.scalefac_scale,1),_(o,s.count1table_select,1)}else for(_(o,n.main_data_begin,8),_(o,n.private_bits,o.channels_out),i=r=0;i<o.channels_out;i++){var s;_(o,(s=n.tt[r][i]).part2_3_length+s.part2_length,12),_(o,s.big_values/2,9),_(o,s.global_gain,8),_(o,s.scalefac_compress,9),s.block_type!=A.NORM_TYPE?(_(o,1,1),_(o,s.block_type,2),_(o,s.mixed_block_flag,1),14==s.table_select[0]&&(s.table_select[0]=16),_(o,s.table_select[0],5),14==s.table_select[1]&&(s.table_select[1]=16),_(o,s.table_select[1],5),_(o,s.subblock_gain[0],3),_(o,s.subblock_gain[1],3),_(o,s.subblock_gain[2],3)):(_(o,0,1),14==s.table_select[0]&&(s.table_select[0]=16),_(o,s.table_select[0],5),14==s.table_select[1]&&(s.table_select[1]=16),_(o,s.table_select[1],5),14==s.table_select[2]&&(s.table_select[2]=16),_(o,s.table_select[2],5),_(o,s.region0_count,4),_(o,s.region1_count,3)),_(o,s.scalefac_scale,1),_(o,s.count1table_select,1)}e.error_protection&&CRC_writeheader(o,o.header[o.h_ptr].buf);var c=o.h_ptr;o.h_ptr=c+1&P.MAX_HEADER_BUF-1,o.header[o.h_ptr].write_timing=o.header[c].write_timing+t,o.h_ptr==o.w_ptr&&u.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n")}(e,r);var i=8*n.sideinfo_len;if(i+=function(e){var t,n,r,i,o=0,a=e.internal_flags,s=a.l3_side;if(1==e.version)for(t=0;t<2;t++)for(n=0;n<a.channels_out;n++){var c=s.tt[t][n],l=v.slen1_tab[c.scalefac_compress],u=v.slen2_tab[c.scalefac_compress];for(r=i=0;r<c.sfbdivide;r++)-1!=c.scalefac[r]&&(m(a,c.scalefac[r],l),i+=l);for(;r<c.sfbmax;r++)-1!=c.scalefac[r]&&(m(a,c.scalefac[r],u),i+=u);c.block_type==A.SHORT_TYPE?i+=j(a,c):i+=E(a,c),o+=i+=x(a,c)}else for(n=t=0;n<a.channels_out;n++){var d,f,p=0;if(f=r=i=0,(c=s.tt[t][n]).block_type==A.SHORT_TYPE){for(;f<4;f++){var h=c.sfb_partition_table[f]/3,b=c.slen[f];for(d=0;d<h;d++,r++)m(a,Math.max(c.scalefac[3*r+0],0),b),m(a,Math.max(c.scalefac[3*r+1],0),b),m(a,Math.max(c.scalefac[3*r+2],0),b),p+=3*b}i+=j(a,c)}else{for(;f<4;f++)for(h=c.sfb_partition_table[f],b=c.slen[f],d=0;d<h;d++,r++)m(a,Math.max(c.scalefac[r],0),b),p+=b;i+=E(a,c)}o+=p+(i+=x(a,c))}return o}(e),y(e,t.resvDrain_post),i+=t.resvDrain_post,t.main_data_begin+=(r-i)/8,k(e,new T)!=n.ResvSize&&u.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),8*t.main_data_begin!=n.ResvSize&&(u.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",8*t.main_data_begin,n.ResvSize,t.resvDrain_post,t.resvDrain_pre,8*n.sideinfo_len,i-t.resvDrain_post-8*n.sideinfo_len,i,i%8,r),u.err.println("This is a fatal error.  It has several possible causes:"),u.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),u.err.println(" 9%%  Your system is overclocked"),u.err.println(" 1%%  bug in LAME encoding library"),n.ResvSize=8*t.main_data_begin),1e9<f){var o;for(o=0;o<P.MAX_HEADER_BUF;++o)n.header[o].write_timing-=f;f=0}return 0},this.copy_buffer=function(e,t,n,s,l){var f=p+1;if(f<=0)return 0;if(0!=s&&s<f)return-1;if(u.arraycopy(d,0,t,n,f),p=-1,(h=0)!=l){var m=r(1);if(m[0]=e.nMusicCRC,c.updateMusicCRC(m,t,n,f),e.nMusicCRC=m[0],0<f&&(e.VBR_seek_table.nBytesWritten+=f),e.decode_on_the_fly)for(var v,g=o([2,1152]),y=f,_=-1;0!=_;)if(_=a.hip_decode1_unclipped(e.hip,t,n,y,g[0],g[1]),y=0,-1==_&&(_=0),0<_){if(e.findPeakSample){for(v=0;v<_;v++)g[0][v]>e.PeakSample?e.PeakSample=g[0][v]:-g[0][v]>e.PeakSample&&(e.PeakSample=-g[0][v]);if(1<e.channels_out)for(v=0;v<_;v++)g[1][v]>e.PeakSample?e.PeakSample=g[1][v]:-g[1][v]>e.PeakSample&&(e.PeakSample=-g[1][v])}if(e.findReplayGain&&i.AnalyzeSamples(e.rgdata,g[0],0,g[1],0,_,e.channels_out)==b.GAIN_ANALYSIS_ERROR)return-6}}return f},this.init_bit_stream_w=function(e){d=n(L.LAME_MAXMP3BUFFER),e.h_ptr=e.w_ptr=0,e.header[e.h_ptr].write_timing=0,p=-1,f=h=0}}function _(e,t,n,r){this.xlen=e,this.linmax=t,this.table=n,this.hlen=r}p.MAX_VALUE=34028235e31,h.vbr_off=new h(0),h.vbr_mt=new h(1),h.vbr_rh=new h(2),h.vbr_abr=new h(3),h.vbr_mtrh=new h(4),h.vbr_default=h.vbr_mtrh,m.STEREO=new m(0),m.JOINT_STEREO=new m(1),m.DUAL_CHANNEL=new m(2),m.MONO=new m(3),m.NOT_SET=new m(4),b.STEPS_per_dB=100,b.MAX_dB=120,b.GAIN_NOT_ENOUGH_SAMPLES=-24601,b.GAIN_ANALYSIS_ERROR=0,b.GAIN_ANALYSIS_OK=1,b.INIT_GAIN_ANALYSIS_ERROR=0,b.INIT_GAIN_ANALYSIS_OK=1,b.MAX_ORDER=b.YULE_ORDER=10,b.MAX_SAMPLES_PER_WINDOW=(b.MAX_SAMP_FREQ=48e3)*(b.RMS_WINDOW_TIME_NUMERATOR=1)/(b.RMS_WINDOW_TIME_DENOMINATOR=20)+1,g.NUMTOCENTRIES=100,g.MAXFRAMESIZE=2880,y.EQ=function(e,t){return Math.abs(e)>Math.abs(t)?Math.abs(e-t)<=1e-6*Math.abs(e):Math.abs(e-t)<=1e-6*Math.abs(t)},y.NEQ=function(e,t){return!y.EQ(e,t)};var w={};function O(e){this.bits=e}function x(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}function S(e,t,n,i){this.l=r(1+A.SBMAX_l),this.s=r(1+A.SBMAX_s),this.psfb21=r(1+A.PSFB21),this.psfb12=r(1+A.PSFB12);var o=this.l,a=this.s;4==arguments.length&&(this.arrL=e,this.arrS=t,this.arr21=n,this.arr12=i,u.arraycopy(this.arrL,0,o,0,Math.min(this.arrL.length,this.l.length)),u.arraycopy(this.arrS,0,a,0,Math.min(this.arrS.length,this.s.length)),u.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),u.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}function j(){var e=null,n=null,o=null;this.setModules=function(t,r,i){e=t,n=r,o=i},this.IPOW20=function(e){return m[e]};var a=2220446049250313e-31,s=j.IXMAX_VAL+2,c=j.Q_MAX,l=j.Q_MAX2;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var u=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=u,this.sfBandIndex=[new S([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new S([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new S([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new S([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new S([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new S([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new S([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new S([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new S([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var f=i(c+l+1),m=i(c),v=i(s),b=i(s);function g(e,t){var n=o.ATHformula(t,e);return n-=100,Math.pow(10,n/10+e.ATHlower)}function _(e){this.s=e}this.adj43=b,this.iteration_init=function(n){var r,i=n.internal_flags,o=i.l3_side;if(0==i.iteration_init_init){for(i.iteration_init_init=1,o.main_data_begin=0,function(e){for(var n=e.internal_flags.ATH.l,r=e.internal_flags.ATH.psfb21,i=e.internal_flags.ATH.s,o=e.internal_flags.ATH.psfb12,a=e.internal_flags,s=e.out_samplerate,c=0;c<A.SBMAX_l;c++){var l=a.scalefac_band.l[c],u=a.scalefac_band.l[c+1];n[c]=p.MAX_VALUE;for(var d=l;d<u;d++){var f=g(e,d*s/1152);n[c]=Math.min(n[c],f)}}for(c=0;c<A.PSFB21;c++)for(l=a.scalefac_band.psfb21[c],u=a.scalefac_band.psfb21[c+1],r[c]=p.MAX_VALUE,d=l;d<u;d++)f=g(e,d*s/1152),r[c]=Math.min(r[c],f);for(c=0;c<A.SBMAX_s;c++){for(l=a.scalefac_band.s[c],u=a.scalefac_band.s[c+1],i[c]=p.MAX_VALUE,d=l;d<u;d++)f=g(e,d*s/384),i[c]=Math.min(i[c],f);i[c]*=a.scalefac_band.s[c+1]-a.scalefac_band.s[c]}for(c=0;c<A.PSFB12;c++){for(l=a.scalefac_band.psfb12[c],u=a.scalefac_band.psfb12[c+1],o[c]=p.MAX_VALUE,d=l;d<u;d++)f=g(e,d*s/384),o[c]=Math.min(o[c],f);o[c]*=a.scalefac_band.s[13]-a.scalefac_band.s[12]}if(e.noATH){for(c=0;c<A.SBMAX_l;c++)n[c]=1e-20;for(c=0;c<A.PSFB21;c++)r[c]=1e-20;for(c=0;c<A.SBMAX_s;c++)i[c]=1e-20;for(c=0;c<A.PSFB12;c++)o[c]=1e-20}a.ATH.floor=10*t(g(e,-1))}(n),v[0]=0,r=1;r<s;r++)v[r]=Math.pow(r,4/3);for(r=0;r<s-1;r++)b[r]=r+1-Math.pow(.5*(v[r]+v[r+1]),.75);for(b[r]=.5,r=0;r<c;r++)m[r]=Math.pow(2,-.1875*(r-210));for(r=0;r<=c+l;r++)f[r]=Math.pow(2,.25*(r-210-l));var a,u,d,h;for(e.huffman_init(i),32<=(r=n.exp_nspsytune>>2&63)&&(r-=64),a=Math.pow(10,r/4/10),32<=(r=n.exp_nspsytune>>8&63)&&(r-=64),u=Math.pow(10,r/4/10),32<=(r=n.exp_nspsytune>>14&63)&&(r-=64),d=Math.pow(10,r/4/10),32<=(r=n.exp_nspsytune>>20&63)&&(r-=64),h=d*Math.pow(10,r/4/10),r=0;r<A.SBMAX_l;r++)y=r<=6?a:r<=13?u:r<=20?d:h,i.nsPsy.longfact[r]=y;for(r=0;r<A.SBMAX_s;r++){var y;y=r<=5?a:r<=10?u:r<=11?d:h,i.nsPsy.shortfact[r]=y}}},this.on_pe=function(e,t,i,o,a,s){var c,l,u=e.internal_flags,d=0,f=r(2),p=new O(d),h=n.ResvMaxBits(e,o,p,s),m=(d=p.bits)+h;for(P.MAX_BITS_PER_GRANULE<m&&(m=P.MAX_BITS_PER_GRANULE),l=c=0;l<u.channels_out;++l)i[l]=Math.min(P.MAX_BITS_PER_CHANNEL,d/u.channels_out),f[l]=0|i[l]*t[a][l]/700-i[l],f[l]>3*o/4&&(f[l]=3*o/4),f[l]<0&&(f[l]=0),f[l]+i[l]>P.MAX_BITS_PER_CHANNEL&&(f[l]=Math.max(0,P.MAX_BITS_PER_CHANNEL-i[l])),c+=f[l];if(h<c)for(l=0;l<u.channels_out;++l)f[l]=h*f[l]/c;for(l=0;l<u.channels_out;++l)i[l]+=f[l],h-=f[l];for(l=c=0;l<u.channels_out;++l)c+=i[l];if(P.MAX_BITS_PER_GRANULE<c)for(l=0;l<u.channels_out;++l)i[l]*=P.MAX_BITS_PER_GRANULE,i[l]/=c,i[l];return m},this.reduce_side=function(e,t,n,r){var i=.33*(.5-t)/.5;i<0&&(i=0),.5<i&&(i=.5);var o=0|.5*i*(e[0]+e[1]);o>P.MAX_BITS_PER_CHANNEL-e[0]&&(o=P.MAX_BITS_PER_CHANNEL-e[0]),o<0&&(o=0),125<=e[1]&&(125<e[1]-o?(e[0]<n&&(e[0]+=o),e[1]-=o):(e[0]+=e[1]-125,e[1]=125)),r<(o=e[0]+e[1])&&(e[0]=r*e[0]/o,e[1]=r*e[1]/o)},this.athAdjust=function(e,t,n){var r=90.30873362,i=d.FAST_LOG10_X(t,10),o=e*e,a=0;return i-=n,1e-20<o&&(a=1+d.FAST_LOG10_X(o,10/r)),a<0&&(a=0),i*=a,i+=n+r-94.82444863,Math.pow(10,.1*i)},this.calc_xmin=function(e,t,n,r){var i,o=0,s=e.internal_flags,c=0,l=0,u=s.ATH,d=n.xr,f=e.VBR==h.vbr_mtrh?1:0,p=s.masking_lower;for(e.VBR!=h.vbr_mtrh&&e.VBR!=h.vbr_mt||(p=1),i=0;i<n.psy_lmax;i++){x=(O=e.VBR==h.vbr_rh||e.VBR==h.vbr_mtrh?athAdjust(u.adjust,u.l[i],u.floor):u.adjust*u.l[i])/(g=n.width[i]),S=a,k=g>>1,T=0;do{T+=C=d[c]*d[c],S+=C<x?C:x,T+=M=d[++c]*d[c],S+=M<x?M:x,c++}while(0<--k);O<T&&l++,i==A.SBPSY_l&&S<(E=O*s.nsPsy.longfact[i])&&(S=E),0!=f&&(O=S),e.ATHonly||0<(j=t.en.l[i])&&(E=T*t.thm.l[i]*p/j,0!=f&&(E*=s.nsPsy.longfact[i]),O<E&&(O=E)),r[o++]=0!=f?O:O*s.nsPsy.longfact[i]}var m=575;if(n.block_type!=A.SHORT_TYPE)for(var v=576;0!=v--&&y.EQ(d[v],0);)m=v;n.max_nonzero_coeff=m;for(var b=n.sfb_smin;i<n.psymax;b++,i+=3){var g,_,w;for(w=e.VBR==h.vbr_rh||e.VBR==h.vbr_mtrh?athAdjust(u.adjust,u.s[b],u.floor):u.adjust*u.s[b],g=n.width[i],_=0;_<3;_++){var O,x,S,j,E,T=0,k=g>>1;x=w/g,S=a;do{var C,M;T+=C=d[c]*d[c],S+=C<x?C:x,T+=M=d[++c]*d[c],S+=M<x?M:x,c++}while(0<--k);w<T&&l++,b==A.SBPSY_s&&S<(E=w*s.nsPsy.shortfact[b])&&(S=E),O=0!=f?S:w,e.ATHonly||e.ATHshort||0<(j=t.en.s[b][_])&&(E=T*t.thm.s[b][_]*p/j,0!=f&&(E*=s.nsPsy.shortfact[b]),O<E&&(O=E)),r[o++]=0!=f?O:O*s.nsPsy.shortfact[b]}e.useTemporal&&(r[o-3]>r[o-3+1]&&(r[o-3+1]+=(r[o-3]-r[o-3+1])*s.decay),r[o-3+1]>r[o-3+2]&&(r[o-3+2]+=(r[o-3+1]-r[o-3+2])*s.decay))}return l},this.calc_noise_core=function(e,t,n,r){var o=0,a=t.s,s=e.l3_enc;if(a>e.count1)for(;0!=n--;)l=e.xr[a],a++,o+=l*l,l=e.xr[a],a++,o+=l*l;else if(a>e.big_values){var c=i(2);for(c[0]=0,c[1]=r;0!=n--;)l=Math.abs(e.xr[a])-c[s[a]],a++,o+=l*l,l=Math.abs(e.xr[a])-c[s[a]],a++,o+=l*l}else for(;0!=n--;){var l;l=Math.abs(e.xr[a])-v[s[a]]*r,a++,o+=l*l,l=Math.abs(e.xr[a])-v[s[a]]*r,a++,o+=l*l}return t.s=a,o},this.calc_noise=function(e,t,n,r,i){var o,a,s=0,c=0,l=0,p=0,h=0,m=-20,v=0,b=e.scalefac,g=0;for(o=r.over_SSD=0;o<e.psymax;o++){var y,w=e.global_gain-(b[g++]+(0!=e.preflag?u[o]:0)<<e.scalefac_scale+1)-8*e.subblock_gain[e.window[o]],O=0;if(null!=i&&i.step[o]==w)O=i.noise[o],v+=e.width[o],n[s++]=O/t[c++],O=i.noise_log[o];else{var x,S=f[w+j.Q_MAX2];a=e.width[o]>>1,v+e.width[o]>e.max_nonzero_coeff&&(a=0<(x=e.max_nonzero_coeff-v+1)?x>>1:0);var E=new _(v);O=this.calc_noise_core(e,E,a,S),v=E.s,null!=i&&(i.step[o]=w,i.noise[o]=O),O=n[s++]=O/t[c++],O=d.FAST_LOG10(Math.max(O,1e-20)),null!=i&&(i.noise_log[o]=O)}null!=i&&(i.global_gain=e.global_gain),h+=O,0<O&&(y=Math.max(0|10*O+.5,1),r.over_SSD+=y*y,l++,p+=O),m=Math.max(m,O)}return r.over_count=l,r.tot_noise=h,r.over_noise=p,r.max_noise=m,l},this.set_pinfo=function(e,t,n,r,o){var a,s,c,l,d,f=e.internal_flags,p=0==t.scalefac_scale?.5:1,h=t.scalefac,m=i(T.SFBMAX),v=i(T.SFBMAX),b=new x;calc_xmin(e,n,t,m),calc_noise(t,m,v,b,null);var g=0;for(s=t.sfb_lmax,t.block_type!=A.SHORT_TYPE&&0==t.mixed_block_flag&&(s=22),a=0;a<s;a++){var y=f.scalefac_band.l[a],_=(w=f.scalefac_band.l[a+1])-y;for(l=0;g<w;g++)l+=t.xr[g]*t.xr[g];l/=_,d=1e15,f.pinfo.en[r][o][a]=d*l,f.pinfo.xfsf[r][o][a]=d*m[a]*v[a]/_,0<n.en.l[a]&&!e.ATHonly?l/=n.en.l[a]:l=0,f.pinfo.thr[r][o][a]=d*Math.max(l*n.thm.l[a],f.ATH.l[a]),(f.pinfo.LAMEsfb[r][o][a]=0)!=t.preflag&&11<=a&&(f.pinfo.LAMEsfb[r][o][a]=-p*u[a]),a<A.SBPSY_l&&(f.pinfo.LAMEsfb[r][o][a]-=p*h[a])}if(t.block_type==A.SHORT_TYPE)for(s=a,a=t.sfb_smin;a<A.SBMAX_s;a++){y=f.scalefac_band.s[a],_=(w=f.scalefac_band.s[a+1])-y;for(var w,O=0;O<3;O++){for(l=0,c=y;c<w;c++)l+=t.xr[g]*t.xr[g],g++;l=Math.max(l/_,1e-20),d=1e15,f.pinfo.en_s[r][o][3*a+O]=d*l,f.pinfo.xfsf_s[r][o][3*a+O]=d*m[s]*v[s]/_,0<n.en.s[a][O]?l/=n.en.s[a][O]:l=0,(e.ATHonly||e.ATHshort)&&(l=0),f.pinfo.thr_s[r][o][3*a+O]=d*Math.max(l*n.thm.s[a][O],f.ATH.s[a]),f.pinfo.LAMEsfb_s[r][o][3*a+O]=-2*t.subblock_gain[O],a<A.SBPSY_s&&(f.pinfo.LAMEsfb_s[r][o][3*a+O]-=p*h[s]),s++}}f.pinfo.LAMEqss[r][o]=t.global_gain,f.pinfo.LAMEmainbits[r][o]=t.part2_3_length+t.part2_length,f.pinfo.LAMEsfbits[r][o]=t.part2_length,f.pinfo.over[r][o]=b.over_count,f.pinfo.max_noise[r][o]=10*b.max_noise,f.pinfo.over_noise[r][o]=10*b.over_noise,f.pinfo.tot_noise[r][o]=10*b.tot_noise,f.pinfo.over_SSD[r][o]=b.over_SSD}}function E(){this.xr=i(576),this.l3_enc=r(576),this.scalefac=r(T.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=r(3),this.subblock_gain=r(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=r(T.SFBMAX),this.window=r(T.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=r(4),this.max_nonzero_coeff=0;var e=this;function t(e){return new Int32Array(e)}this.assign=function(n){var r;e.xr=(r=n.xr,new Float32Array(r)),e.l3_enc=t(n.l3_enc),e.scalefac=t(n.scalefac),e.xrpow_max=n.xrpow_max,e.part2_3_length=n.part2_3_length,e.big_values=n.big_values,e.count1=n.count1,e.global_gain=n.global_gain,e.scalefac_compress=n.scalefac_compress,e.block_type=n.block_type,e.mixed_block_flag=n.mixed_block_flag,e.table_select=t(n.table_select),e.subblock_gain=t(n.subblock_gain),e.region0_count=n.region0_count,e.region1_count=n.region1_count,e.preflag=n.preflag,e.scalefac_scale=n.scalefac_scale,e.count1table_select=n.count1table_select,e.part2_length=n.part2_length,e.sfb_lmax=n.sfb_lmax,e.sfb_smin=n.sfb_smin,e.psy_lmax=n.psy_lmax,e.sfbmax=n.sfbmax,e.psymax=n.psymax,e.sfbdivide=n.sfbdivide,e.width=t(n.width),e.window=t(n.window),e.count1bits=n.count1bits,e.sfb_partition_table=n.sfb_partition_table.slice(0),e.slen=t(n.slen),e.max_nonzero_coeff=n.max_nonzero_coeff}}w.t1HB=[1,1,1,0],w.t2HB=[1,2,1,3,1,1,3,2,0],w.t3HB=[3,2,1,1,1,1,3,2,0],w.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],w.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],w.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],w.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],w.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],w.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],w.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],w.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],w.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],w.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],w.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],w.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],w.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],w.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],w.t1l=[1,4,3,5],w.t2l=[1,4,7,4,5,7,6,7,8],w.t3l=[2,3,7,4,4,7,6,7,8],w.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],w.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],w.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],w.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],w.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],w.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],w.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],w.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],w.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],w.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],w.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],w.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],w.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],w.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],w.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],w.ht=[new _(0,0,null,null),new _(2,0,w.t1HB,w.t1l),new _(3,0,w.t2HB,w.t2l),new _(3,0,w.t3HB,w.t3l),new _(0,0,null,null),new _(4,0,w.t5HB,w.t5l),new _(4,0,w.t6HB,w.t6l),new _(6,0,w.t7HB,w.t7l),new _(6,0,w.t8HB,w.t8l),new _(6,0,w.t9HB,w.t9l),new _(8,0,w.t10HB,w.t10l),new _(8,0,w.t11HB,w.t11l),new _(8,0,w.t12HB,w.t12l),new _(16,0,w.t13HB,w.t13l),new _(0,0,null,w.t16_5l),new _(16,0,w.t15HB,w.t15l),new _(1,1,w.t16HB,w.t16l),new _(2,3,w.t16HB,w.t16l),new _(3,7,w.t16HB,w.t16l),new _(4,15,w.t16HB,w.t16l),new _(6,63,w.t16HB,w.t16l),new _(8,255,w.t16HB,w.t16l),new _(10,1023,w.t16HB,w.t16l),new _(13,8191,w.t16HB,w.t16l),new _(4,15,w.t24HB,w.t24l),new _(5,31,w.t24HB,w.t24l),new _(6,63,w.t24HB,w.t24l),new _(7,127,w.t24HB,w.t24l),new _(8,255,w.t24HB,w.t24l),new _(9,511,w.t24HB,w.t24l),new _(11,2047,w.t24HB,w.t24l),new _(13,8191,w.t24HB,w.t24l),new _(0,0,w.t32HB,w.t32l),new _(0,0,w.t33HB,w.t33l)],w.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],w.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],w.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],w.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],w.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],w.scfsi_band=[0,6,11,16,21],j.Q_MAX=257,j.Q_MAX2=116,j.LARGE_BITS=1e5,j.IXMAX_VAL=8206;var T={};function k(){var e,t,n;this.rv=null,this.qupvt=null;var o,a=new function(){this.setModules=function(e,t){}};function s(e){this.ordinal=e}function c(e){for(var t=0;t<e.sfbmax;t++)if(e.scalefac[t]+e.subblock_gain[e.window[t]]==0)return!1;return!0}function f(e,t,n,r,i){var o;switch(e){default:case 9:0<t.over_count?(o=n.over_SSD<=t.over_SSD,n.over_SSD==t.over_SSD&&(o=n.bits<t.bits)):o=n.max_noise<0&&10*n.max_noise+n.bits<=10*t.max_noise+t.bits;break;case 0:o=n.over_count<t.over_count||n.over_count==t.over_count&&n.over_noise<t.over_noise||n.over_count==t.over_count&&y.EQ(n.over_noise,t.over_noise)&&n.tot_noise<t.tot_noise;break;case 8:n.max_noise=function(e,t){for(var n,r=1e-37,i=0;i<t.psymax;i++)r+=(n=e[i],d.FAST_LOG10(.368+.632*n*n*n));return Math.max(1e-20,r)}(i,r);case 1:o=n.max_noise<t.max_noise;break;case 2:o=n.tot_noise<t.tot_noise;break;case 3:o=n.tot_noise<t.tot_noise&&n.max_noise<t.max_noise;break;case 4:o=n.max_noise<=0&&.2<t.max_noise||n.max_noise<=0&&t.max_noise<0&&t.max_noise>n.max_noise-.2&&n.tot_noise<t.tot_noise||n.max_noise<=0&&0<t.max_noise&&t.max_noise>n.max_noise-.2&&n.tot_noise<t.tot_noise+t.over_noise||0<n.max_noise&&-.05<t.max_noise&&t.max_noise>n.max_noise-.1&&n.tot_noise+n.over_noise<t.tot_noise+t.over_noise||0<n.max_noise&&-.1<t.max_noise&&t.max_noise>n.max_noise-.15&&n.tot_noise+n.over_noise+n.over_noise<t.tot_noise+t.over_noise+t.over_noise;break;case 5:o=n.over_noise<t.over_noise||y.EQ(n.over_noise,t.over_noise)&&n.tot_noise<t.tot_noise;break;case 6:o=n.over_noise<t.over_noise||y.EQ(n.over_noise,t.over_noise)&&(n.max_noise<t.max_noise||y.EQ(n.max_noise,t.max_noise)&&n.tot_noise<=t.tot_noise);break;case 7:o=n.over_count<t.over_count||n.over_noise<t.over_noise}return 0==t.over_count&&(o=o&&n.bits<t.bits),o}function p(e,t,r,i,a){var s=e.internal_flags;!function(e,t,n,r,i){var o,a=e.internal_flags;o=0==t.scalefac_scale?1.2968395546510096:1.6817928305074292;for(var s=0,c=0;c<t.sfbmax;c++)s<n[c]&&(s=n[c]);var l=a.noise_shaping_amp;switch(3==l&&(l=i?2:1),l){case 2:break;case 1:1<s?s=Math.pow(s,.5):s*=.95;break;case 0:default:1<s?s=1:s*=.95}var u=0;for(c=0;c<t.sfbmax;c++){var d,f=t.width[c];if(u+=f,!(n[c]<s)){if(0!=(2&a.substep_shaping)&&(a.pseudohalf[c]=0==a.pseudohalf[c]?1:0,0==a.pseudohalf[c]&&2==a.noise_shaping_amp))return;for(t.scalefac[c]++,d=-f;d<0;d++)r[u+d]*=o,r[u+d]>t.xrpow_max&&(t.xrpow_max=r[u+d]);if(2==a.noise_shaping_amp)return}}}(e,t,r,i,a);var u=c(t);return!u&&(!(u=2==s.mode_gr?o.scale_bitcount(t):o.scale_bitcount_lsf(s,t))||(1<s.noise_shaping&&(l.fill(s.pseudohalf,0),0==t.scalefac_scale?(function(e,t){for(var r=0,i=0;i<e.sfbmax;i++){var o=e.width[i],a=e.scalefac[i];if(0!=e.preflag&&(a+=n.pretab[i]),r+=o,0!=(1&a)){a++;for(var s=-o;s<0;s++)t[r+s]*=1.2968395546510096,t[r+s]>e.xrpow_max&&(e.xrpow_max=t[r+s])}e.scalefac[i]=a>>1}e.preflag=0,e.scalefac_scale=1}(t,i),u=!1):t.block_type==A.SHORT_TYPE&&0<s.subblock_gain&&(u=function(e,t,r){var i,o=t.scalefac;for(i=0;i<t.sfb_lmax;i++)if(16<=o[i])return!0;for(var a=0;a<3;a++){var s=0,c=0;for(i=t.sfb_lmax+a;i<t.sfbdivide;i+=3)s<o[i]&&(s=o[i]);for(;i<t.sfbmax;i+=3)c<o[i]&&(c=o[i]);if(!(s<16&&c<8)){if(7<=t.subblock_gain[a])return!0;t.subblock_gain[a]++;var l=e.scalefac_band.l[t.sfb_lmax];for(i=t.sfb_lmax+a;i<t.sfbmax;i+=3){var u=t.width[i],d=o[i];if(0<=(d-=4>>t.scalefac_scale))o[i]=d,l+=3*u;else{o[i]=0;var f=210+(d<<t.scalefac_scale+1);h=n.IPOW20(f),l+=u*(a+1);for(var p=-u;p<0;p++)r[l+p]*=h,r[l+p]>t.xrpow_max&&(t.xrpow_max=r[l+p]);l+=u*(3-a-1)}}var h=n.IPOW20(202);for(l+=t.width[i]*(a+1),p=-t.width[i];p<0;p++)r[l+p]*=h,r[l+p]>t.xrpow_max&&(t.xrpow_max=r[l+p])}}return!1}(s,t,i)||c(t))),u||(u=2==s.mode_gr?o.scale_bitcount(t):o.scale_bitcount_lsf(s,t)),!u))}this.setModules=function(r,i,s,c){e=r,t=i,this.rv=i,n=s,this.qupvt=s,o=c,a.setModules(n,o)},this.ms_convert=function(e,t){for(var n=0;n<576;++n){var r=e.tt[t][0].xr[n],i=e.tt[t][1].xr[n];e.tt[t][0].xr[n]=(r+i)*(.5*d.SQRT2),e.tt[t][1].xr[n]=(r-i)*(.5*d.SQRT2)}},this.init_xrpow=function(e,t,n){var r=0,i=0|t.max_nonzero_coeff;if(t.xrpow_max=0,l.fill(n,i,576,0),1e-20<(r=function(e,t,n,r){for(var i=r=0;i<=n;++i){var o=Math.abs(e.xr[i]);r+=o,t[i]=Math.sqrt(o*Math.sqrt(o)),t[i]>e.xrpow_max&&(e.xrpow_max=t[i])}return r}(t,n,i,r))){var o=0;0!=(2&e.substep_shaping)&&(o=1);for(var a=0;a<t.psymax;a++)e.pseudohalf[a]=o;return!0}return l.fill(t.l3_enc,0,576,0),!1},this.init_outer_loop=function(e,t){t.part2_3_length=0,t.big_values=0,t.count1=0,t.global_gain=210,t.scalefac_compress=0,t.table_select[0]=0,t.table_select[1]=0,t.table_select[2]=0,t.subblock_gain[0]=0,t.subblock_gain[1]=0,t.subblock_gain[2]=0,t.subblock_gain[3]=0,t.region0_count=0,t.region1_count=0,t.preflag=0,t.scalefac_scale=0,t.count1table_select=0,t.part2_length=0,t.sfb_lmax=A.SBPSY_l,t.sfb_smin=A.SBPSY_s,t.psy_lmax=e.sfb21_extra?A.SBMAX_l:A.SBPSY_l,t.psymax=t.psy_lmax,t.sfbmax=t.sfb_lmax,t.sfbdivide=11;for(var r=0;r<A.SBMAX_l;r++)t.width[r]=e.scalefac_band.l[r+1]-e.scalefac_band.l[r],t.window[r]=3;if(t.block_type==A.SHORT_TYPE){var o=i(576);t.sfb_smin=0,(t.sfb_lmax=0)!=t.mixed_block_flag&&(t.sfb_smin=3,t.sfb_lmax=2*e.mode_gr+4),t.psymax=t.sfb_lmax+3*((e.sfb21_extra?A.SBMAX_s:A.SBPSY_s)-t.sfb_smin),t.sfbmax=t.sfb_lmax+3*(A.SBPSY_s-t.sfb_smin),t.sfbdivide=t.sfbmax-18,t.psy_lmax=t.sfb_lmax;var a=e.scalefac_band.l[t.sfb_lmax];for(u.arraycopy(t.xr,0,o,0,576),r=t.sfb_smin;r<A.SBMAX_s;r++)for(var s=e.scalefac_band.s[r],c=e.scalefac_band.s[r+1],d=0;d<3;d++)for(var f=s;f<c;f++)t.xr[a++]=o[3*f+d];var p=t.sfb_lmax;for(r=t.sfb_smin;r<A.SBMAX_s;r++)t.width[p]=t.width[p+1]=t.width[p+2]=e.scalefac_band.s[r+1]-e.scalefac_band.s[r],t.window[p]=0,t.window[p+1]=1,t.window[p+2]=2,p+=3}t.count1bits=0,t.sfb_partition_table=n.nr_of_sfb_block[0][0],t.slen[0]=0,t.slen[1]=0,t.slen[2]=0,t.slen[3]=0,t.max_nonzero_coeff=575,l.fill(t.scalefac,0),function(e,t){var r=e.ATH,i=t.xr;if(t.block_type!=A.SHORT_TYPE)for(var o=!1,a=A.PSFB21-1;0<=a&&!o;a--){var s=e.scalefac_band.psfb21[a],c=e.scalefac_band.psfb21[a+1],l=n.athAdjust(r.adjust,r.psfb21[a],r.floor);1e-12<e.nsPsy.longfact[21]&&(l*=e.nsPsy.longfact[21]);for(var u=c-1;s<=u;u--){if(!(Math.abs(i[u])<l)){o=!0;break}i[u]=0}}else for(var d=0;d<3;d++)for(o=!1,a=A.PSFB12-1;0<=a&&!o;a--){c=(s=3*e.scalefac_band.s[12]+(e.scalefac_band.s[13]-e.scalefac_band.s[12])*d+(e.scalefac_band.psfb12[a]-e.scalefac_band.psfb12[0]))+(e.scalefac_band.psfb12[a+1]-e.scalefac_band.psfb12[a]);var f=n.athAdjust(r.adjust,r.psfb12[a],r.floor);for(1e-12<e.nsPsy.shortfact[12]&&(f*=e.nsPsy.shortfact[12]),u=c-1;s<=u;u--){if(!(Math.abs(i[u])<f)){o=!0;break}i[u]=0}}}(e,t)},s.BINSEARCH_NONE=new s(0),s.BINSEARCH_UP=new s(1),s.BINSEARCH_DOWN=new s(2),this.trancate_smallspectrums=function(e,t,r,a){var s=i(T.SFBMAX);if((0!=(4&e.substep_shaping)||t.block_type!=A.SHORT_TYPE)&&0==(128&e.substep_shaping)){n.calc_noise(t,r,s,new x,null);for(var c=0;c<576;c++){var u=0;0!=t.l3_enc[c]&&(u=Math.abs(t.xr[c])),a[c]=u}c=0;var d=8;t.block_type==A.SHORT_TYPE&&(d=6);do{var f,p,h,m,v=t.width[d];if(c+=v,!(1<=s[d]||(l.sort(a,c-v,v),y.EQ(a[c-1],0)))){f=(1-s[d])*r[d],m=p=0;do{var b;for(h=1;m+h<v&&!y.NEQ(a[m+c-v],a[m+c+h-v]);h++);if(f<(b=a[m+c-v]*a[m+c-v]*h)){0!=m&&(p=a[m+c-v-1]);break}f-=b,m+=h}while(m<v);if(!y.EQ(p,0))for(;Math.abs(t.xr[c-v])<=p&&(t.l3_enc[c-v]=0),0<--v;);}}while(++d<t.psymax);t.part2_3_length=o.noquant_count_bits(e,t,null)}},this.outer_loop=function(e,t,a,c,l,d){var m=e.internal_flags,v=new E,b=i(576),g=i(T.SFBMAX),y=new x,_=new function(){this.global_gain=0,this.sfb_count1=0,this.step=r(39),this.noise=i(39),this.noise_log=i(39)},w=9999999,O=!1,S=!1,j=0;if(function(e,t,n,r,i){var a,c=e.CurrentStep[r],l=!1,u=e.OldValue[r],d=s.BINSEARCH_NONE;for(t.global_gain=u,n-=t.part2_length;;){var f;if(a=o.count_bits(e,i,t,null),1==c||a==n)break;n<a?(d==s.BINSEARCH_DOWN&&(l=!0),l&&(c/=2),d=s.BINSEARCH_UP,f=c):(d==s.BINSEARCH_UP&&(l=!0),l&&(c/=2),d=s.BINSEARCH_DOWN,f=-c),t.global_gain+=f,t.global_gain<0&&(l=!(t.global_gain=0)),255<t.global_gain&&(t.global_gain=255,l=!0)}for(;n<a&&t.global_gain<255;)t.global_gain++,a=o.count_bits(e,i,t,null);e.CurrentStep[r]=4<=u-t.global_gain?4:2,e.OldValue[r]=t.global_gain,t.part2_3_length=a}(m,t,d,l,c),0==m.noise_shaping)return 100;n.calc_noise(t,a,g,y,_),y.bits=t.part2_3_length,v.assign(t);var k=0;for(u.arraycopy(c,0,b,0,576);!O;){do{var C,M=new x,P=255;if(C=0!=(2&m.substep_shaping)?20:3,m.sfb21_extra){if(1<g[v.sfbmax])break;if(v.block_type==A.SHORT_TYPE&&(1<g[v.sfbmax+1]||1<g[v.sfbmax+2]))break}if(!p(e,v,g,c,S))break;0!=v.scalefac_scale&&(P=254);var R=d-v.part2_length;if(R<=0)break;for(;(v.part2_3_length=o.count_bits(m,c,v,_))>R&&v.global_gain<=P;)v.global_gain++;if(v.global_gain>P)break;if(0==y.over_count){for(;(v.part2_3_length=o.count_bits(m,c,v,_))>w&&v.global_gain<=P;)v.global_gain++;if(v.global_gain>P)break}if(n.calc_noise(v,a,g,M,_),M.bits=v.part2_3_length,0!=(f(t.block_type!=A.SHORT_TYPE?e.quant_comp:e.quant_comp_short,y,M,v,g)?1:0))w=t.part2_3_length,y=M,t.assign(v),k=0,u.arraycopy(c,0,b,0,576);else if(0==m.full_outer_loop){if(++k>C&&0==y.over_count)break;if(3==m.noise_shaping_amp&&S&&30<k)break;if(3==m.noise_shaping_amp&&S&&15<v.global_gain-j)break}}while(v.global_gain+v.scalefac_scale<255);3==m.noise_shaping_amp?S?O=!0:(v.assign(t),u.arraycopy(b,0,c,0,576),k=0,j=v.global_gain,S=!0):O=!0}return e.VBR==h.vbr_rh||e.VBR==h.vbr_mtrh?u.arraycopy(b,0,c,0,576):0!=(1&m.substep_shaping)&&trancate_smallspectrums(m,t,a,c),y.over_count},this.iteration_finish_one=function(e,n,r){var i=e.l3_side,a=i.tt[n][r];o.best_scalefac_store(e,n,r,i),1==e.use_best_huffman&&o.best_huffman_divide(e,a),t.ResvAdjust(e,a)},this.VBR_encode_granule=function(e,t,n,r,o,a,s){var c,d=e.internal_flags,f=new E,p=i(576),h=s,m=s+1,v=(s+a)/2,b=0,g=d.sfb21_extra;for(l.fill(f.l3_enc,0);d.sfb21_extra=!(h-42<v)&&g,outer_loop(e,t,n,r,o,v)<=0?(b=1,m=t.part2_3_length,f.assign(t),u.arraycopy(r,0,p,0,576),c=(s=m-32)-a,v=(s+a)/2):(c=s-(a=v+32),v=(s+a)/2,0!=b&&(b=2,t.assign(f),u.arraycopy(p,0,r,0,576))),12<c;);d.sfb21_extra=g,2==b&&u.arraycopy(f.l3_enc,0,t.l3_enc,0,576)},this.get_framebits=function(n,r){var i=n.internal_flags;i.bitrate_index=i.VBR_min_bitrate;var o=e.getframebits(n);i.bitrate_index=1,o=e.getframebits(n);for(var a=1;a<=i.VBR_max_bitrate;a++){i.bitrate_index=a;var s=new O(o);r[a]=t.ResvFrameBegin(n,s),o=s.bits}},this.VBR_old_prepare=function(e,r,i,o,a,s,c,l,u){var d,f=e.internal_flags,p=0,h=1,m=0;f.bitrate_index=f.VBR_max_bitrate;var v=t.ResvFrameBegin(e,new O(0))/f.mode_gr;get_framebits(e,s);for(var b=0;b<f.mode_gr;b++){var g=n.on_pe(e,r,l[b],v,b,0);f.mode_ext==A.MPG_MD_MS_LR&&(ms_convert(f.l3_side,b),n.reduce_side(l[b],i[b],v,g));for(var y=0;y<f.channels_out;++y){var _=f.l3_side.tt[b][y];_.block_type!=A.SHORT_TYPE?(p=1.28/(1+Math.exp(3.5-r[b][y]/300))-.05,d=f.PSY.mask_adjust-p):(p=2.56/(1+Math.exp(3.5-r[b][y]/300))-.14,d=f.PSY.mask_adjust_short-p),f.masking_lower=Math.pow(10,.1*d),init_outer_loop(f,_),u[b][y]=n.calc_xmin(e,o[b][y],_,a[b][y]),0!=u[b][y]&&(h=0),c[b][y]=126,m+=l[b][y]}}for(b=0;b<f.mode_gr;b++)for(y=0;y<f.channels_out;y++)m>s[f.VBR_max_bitrate]&&(l[b][y]*=s[f.VBR_max_bitrate],l[b][y]/=m),c[b][y]>l[b][y]&&(c[b][y]=l[b][y]);return h},this.bitpressure_strategy=function(e,t,n,r){for(var i=0;i<e.mode_gr;i++)for(var o=0;o<e.channels_out;o++){for(var a=e.l3_side.tt[i][o],s=t[i][o],c=0,l=0;l<a.psy_lmax;l++)s[c++]*=1+.029*l*l/A.SBMAX_l/A.SBMAX_l;if(a.block_type==A.SHORT_TYPE)for(l=a.sfb_smin;l<A.SBMAX_s;l++)s[c++]*=1+.029*l*l/A.SBMAX_s/A.SBMAX_s,s[c++]*=1+.029*l*l/A.SBMAX_s/A.SBMAX_s,s[c++]*=1+.029*l*l/A.SBMAX_s/A.SBMAX_s;r[i][o]=0|Math.max(n[i][o],.9*r[i][o])}},this.VBR_new_prepare=function(e,r,i,o,a,s){var c,l=e.internal_flags,u=1,d=0,f=0;if(e.free_format)l.bitrate_index=0,p=new O(d),c=t.ResvFrameBegin(e,p),d=p.bits,a[0]=c;else{l.bitrate_index=l.VBR_max_bitrate;var p=new O(d);t.ResvFrameBegin(e,p),d=p.bits,get_framebits(e,a),c=a[l.VBR_max_bitrate]}for(var h=0;h<l.mode_gr;h++){n.on_pe(e,r,s[h],d,h,0),l.mode_ext==A.MPG_MD_MS_LR&&ms_convert(l.l3_side,h);for(var m=0;m<l.channels_out;++m){var v=l.l3_side.tt[h][m];l.masking_lower=Math.pow(10,.1*l.PSY.mask_adjust),init_outer_loop(l,v),0!=n.calc_xmin(e,i[h][m],v,o[h][m])&&(u=0),f+=s[h][m]}}for(h=0;h<l.mode_gr;h++)for(m=0;m<l.channels_out;m++)c<f&&(s[h][m]*=c,s[h][m]/=f);return u},this.calc_target_bits=function(r,i,o,a,s,c){var l,u,d,f,p=r.internal_flags,h=p.l3_side,m=0;p.bitrate_index=p.VBR_max_bitrate;var v=new O(m);for(c[0]=t.ResvFrameBegin(r,v),m=v.bits,p.bitrate_index=1,m=e.getframebits(r)-8*p.sideinfo_len,s[0]=m/(p.mode_gr*p.channels_out),m=r.VBR_mean_bitrate_kbps*r.framesize*1e3,0!=(1&p.substep_shaping)&&(m*=1.09),m/=r.out_samplerate,m-=8*p.sideinfo_len,m/=p.mode_gr*p.channels_out,(l=.93+.07*(11-r.compression_ratio)/5.5)<.9&&(l=.9),1<l&&(l=1),u=0;u<p.mode_gr;u++){var b=0;for(d=0;d<p.channels_out;d++){if(a[u][d]=int(l*m),700<i[u][d]){var g=int((i[u][d]-700)/1.4),y=h.tt[u][d];a[u][d]=int(l*m),y.block_type==A.SHORT_TYPE&&g<m/2&&(g=m/2),3*m/2<g?g=3*m/2:g<0&&(g=0),a[u][d]+=g}a[u][d]>P.MAX_BITS_PER_CHANNEL&&(a[u][d]=P.MAX_BITS_PER_CHANNEL),b+=a[u][d]}if(P.MAX_BITS_PER_GRANULE<b)for(d=0;d<p.channels_out;++d)a[u][d]*=P.MAX_BITS_PER_GRANULE,a[u][d]/=b}if(p.mode_ext==A.MPG_MD_MS_LR)for(u=0;u<p.mode_gr;u++)n.reduce_side(a[u],o[u],m*p.channels_out,P.MAX_BITS_PER_GRANULE);for(u=f=0;u<p.mode_gr;u++)for(d=0;d<p.channels_out;d++)a[u][d]>P.MAX_BITS_PER_CHANNEL&&(a[u][d]=P.MAX_BITS_PER_CHANNEL),f+=a[u][d];if(f>c[0])for(u=0;u<p.mode_gr;u++)for(d=0;d<p.channels_out;d++)a[u][d]*=c[0],a[u][d]/=f}}function C(){this.thm=new M,this.en=new M}function A(){var e=A.FFTOFFSET,t=A.MPG_MD_MS_LR,n=null,a=this.psy=null,s=null,f=null;this.setModules=function(e,t,r,i){n=e,this.psy=t,a=t,s=i,f=r};var p=new function(){var e=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*d.SQRT2*.5/2384e-9,.017876148*d.SQRT2*.5/2384e-9,.003134727*d.SQRT2*.5/2384e-9,.002457142*d.SQRT2*.5/2384e-9,971317e-9*d.SQRT2*.5/2384e-9,218868e-9*d.SQRT2*.5/2384e-9,101566e-9*d.SQRT2*.5/2384e-9,13828e-9*d.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],t=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],n=t[A.SHORT_TYPE],r=t[A.SHORT_TYPE],o=t[A.SHORT_TYPE],a=t[A.SHORT_TYPE],s=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function c(t,n,r){for(var i,o,a,s=10,c=n+238-14-286,l=-15;l<0;l++){var u,f,p;u=e[s+-10],f=t[c+-224]*u,p=t[n+224]*u,u=e[s+-9],f+=t[c+-160]*u,p+=t[n+160]*u,u=e[s+-8],f+=t[c+-96]*u,p+=t[n+96]*u,u=e[s+-7],f+=t[c+-32]*u,p+=t[n+32]*u,u=e[s+-6],f+=t[c+32]*u,p+=t[n+-32]*u,u=e[s+-5],f+=t[c+96]*u,p+=t[n+-96]*u,u=e[s+-4],f+=t[c+160]*u,p+=t[n+-160]*u,u=e[s+-3],f+=t[c+224]*u,p+=t[n+-224]*u,u=e[s+-2],f+=t[n+-256]*u,p-=t[c+256]*u,u=e[s+-1],f+=t[n+-192]*u,p-=t[c+192]*u,u=e[s+0],f+=t[n+-128]*u,p-=t[c+128]*u,u=e[s+1],f+=t[n+-64]*u,p-=t[c+64]*u,u=e[s+2],f+=t[n+0]*u,p-=t[c+0]*u,u=e[s+3],f+=t[n+64]*u,p-=t[c+-64]*u,u=e[s+4],f+=t[n+128]*u,p-=t[c+-128]*u,u=e[s+5],f+=t[n+192]*u,u=(p-=t[c+-192]*u)-(f*=e[s+6]),r[30+2*l]=p+f,r[31+2*l]=e[s+7]*u,s+=18,n--,c++}p=t[n+-16]*e[s+-10],f=t[n+-32]*e[s+-2],p+=(t[n+-48]-t[n+16])*e[s+-9],f+=t[n+-96]*e[s+-1],p+=(t[n+-80]+t[n+48])*e[s+-8],f+=t[n+-160]*e[s+0],p+=(t[n+-112]-t[n+80])*e[s+-7],f+=t[n+-224]*e[s+1],p+=(t[n+-144]+t[n+112])*e[s+-6],f-=t[n+32]*e[s+2],p+=(t[n+-176]-t[n+144])*e[s+-5],f-=t[n+96]*e[s+3],p+=(t[n+-208]+t[n+176])*e[s+-4],f-=t[n+160]*e[s+4],p+=(t[n+-240]-t[n+208])*e[s+-3],i=(f-=t[n+224])-p,o=f+p,p=r[14],f=r[15]-p,r[31]=o+p,r[30]=i+f,r[15]=i-f,r[14]=o-p,a=r[28]-r[0],r[0]+=r[28],r[28]=a*e[s+-36+7],a=r[29]-r[1],r[1]+=r[29],r[29]=a*e[s+-36+7],a=r[26]-r[2],r[2]+=r[26],r[26]=a*e[s+-72+7],a=r[27]-r[3],r[3]+=r[27],r[27]=a*e[s+-72+7],a=r[24]-r[4],r[4]+=r[24],r[24]=a*e[s+-108+7],a=r[25]-r[5],r[5]+=r[25],r[25]=a*e[s+-108+7],a=r[22]-r[6],r[6]+=r[22],r[22]=a*d.SQRT2,a=r[23]-r[7],r[7]+=r[23],r[23]=a*d.SQRT2-r[7],r[7]-=r[6],r[22]-=r[7],r[23]-=r[22],a=r[6],r[6]=r[31]-a,r[31]=r[31]+a,a=r[7],r[7]=r[30]-a,r[30]=r[30]+a,a=r[22],r[22]=r[15]-a,r[15]=r[15]+a,a=r[23],r[23]=r[14]-a,r[14]=r[14]+a,a=r[20]-r[8],r[8]+=r[20],r[20]=a*e[s+-180+7],a=r[21]-r[9],r[9]+=r[21],r[21]=a*e[s+-180+7],a=r[18]-r[10],r[10]+=r[18],r[18]=a*e[s+-216+7],a=r[19]-r[11],r[11]+=r[19],r[19]=a*e[s+-216+7],a=r[16]-r[12],r[12]+=r[16],r[16]=a*e[s+-252+7],a=r[17]-r[13],r[13]+=r[17],r[17]=a*e[s+-252+7],a=-r[20]+r[24],r[20]+=r[24],r[24]=a*e[s+-216+7],a=-r[21]+r[25],r[21]+=r[25],r[25]=a*e[s+-216+7],a=r[4]-r[8],r[4]+=r[8],r[8]=a*e[s+-216+7],a=r[5]-r[9],r[5]+=r[9],r[9]=a*e[s+-216+7],a=r[0]-r[12],r[0]+=r[12],r[12]=a*e[s+-72+7],a=r[1]-r[13],r[1]+=r[13],r[13]=a*e[s+-72+7],a=r[16]-r[28],r[16]+=r[28],r[28]=a*e[s+-72+7],a=-r[17]+r[29],r[17]+=r[29],r[29]=a*e[s+-72+7],a=d.SQRT2*(r[2]-r[10]),r[2]+=r[10],r[10]=a,a=d.SQRT2*(r[3]-r[11]),r[3]+=r[11],r[11]=a,a=d.SQRT2*(-r[18]+r[26]),r[18]+=r[26],r[26]=a-r[18],a=d.SQRT2*(-r[19]+r[27]),r[19]+=r[27],r[27]=a-r[19],a=r[2],r[19]-=r[3],r[3]-=a,r[2]=r[31]-a,r[31]+=a,a=r[3],r[11]-=r[19],r[18]-=a,r[3]=r[30]-a,r[30]+=a,a=r[18],r[27]-=r[11],r[19]-=a,r[18]=r[15]-a,r[15]+=a,a=r[19],r[10]-=a,r[19]=r[14]-a,r[14]+=a,a=r[10],r[11]-=a,r[10]=r[23]-a,r[23]+=a,a=r[11],r[26]-=a,r[11]=r[22]-a,r[22]+=a,a=r[26],r[27]-=a,r[26]=r[7]-a,r[7]+=a,a=r[27],r[27]=r[6]-a,r[6]+=a,a=d.SQRT2*(r[0]-r[4]),r[0]+=r[4],r[4]=a,a=d.SQRT2*(r[1]-r[5]),r[1]+=r[5],r[5]=a,a=d.SQRT2*(r[16]-r[20]),r[16]+=r[20],r[20]=a,a=d.SQRT2*(r[17]-r[21]),r[17]+=r[21],r[21]=a,a=-d.SQRT2*(r[8]-r[12]),r[8]+=r[12],r[12]=a-r[8],a=-d.SQRT2*(r[9]-r[13]),r[9]+=r[13],r[13]=a-r[9],a=-d.SQRT2*(r[25]-r[29]),r[25]+=r[29],r[29]=a-r[25],a=-d.SQRT2*(r[24]+r[28]),r[24]-=r[28],r[28]=a-r[24],a=r[24]-r[16],r[24]=a,a=r[20]-a,r[20]=a,a=r[28]-a,r[28]=a,a=r[25]-r[17],r[25]=a,a=r[21]-a,r[21]=a,a=r[29]-a,r[29]=a,a=r[17]-r[1],r[17]=a,a=r[9]-a,r[9]=a,a=r[25]-a,r[25]=a,a=r[5]-a,r[5]=a,a=r[21]-a,r[21]=a,a=r[13]-a,r[13]=a,a=r[29]-a,r[29]=a,a=r[1]-r[0],r[1]=a,a=r[16]-a,r[16]=a,a=r[17]-a,r[17]=a,a=r[8]-a,r[8]=a,a=r[9]-a,r[9]=a,a=r[24]-a,r[24]=a,a=r[25]-a,r[25]=a,a=r[4]-a,r[4]=a,a=r[5]-a,r[5]=a,a=r[20]-a,r[20]=a,a=r[21]-a,r[21]=a,a=r[12]-a,r[12]=a,a=r[13]-a,r[13]=a,a=r[28]-a,r[28]=a,a=r[29]-a,r[29]=a,a=r[0],r[0]+=r[31],r[31]-=a,a=r[1],r[1]+=r[30],r[30]-=a,a=r[16],r[16]+=r[15],r[15]-=a,a=r[17],r[17]+=r[14],r[14]-=a,a=r[8],r[8]+=r[23],r[23]-=a,a=r[9],r[9]+=r[22],r[22]-=a,a=r[24],r[24]+=r[7],r[7]-=a,a=r[25],r[25]+=r[6],r[6]-=a,a=r[4],r[4]+=r[27],r[27]-=a,a=r[5],r[5]+=r[26],r[26]-=a,a=r[20],r[20]+=r[11],r[11]-=a,a=r[21],r[21]+=r[10],r[10]-=a,a=r[12],r[12]+=r[19],r[19]-=a,a=r[13],r[13]+=r[18],r[18]-=a,a=r[28],r[28]+=r[3],r[3]-=a,a=r[29],r[29]+=r[2],r[2]-=a}function f(e,n){for(var r=0;r<3;r++){var i,o,a,s,c,l;o=(s=e[n+6]*t[A.SHORT_TYPE][0]-e[n+15])+(i=e[n+0]*t[A.SHORT_TYPE][2]-e[n+9]),a=s-i,c=(s=e[n+15]*t[A.SHORT_TYPE][0]+e[n+6])+(i=e[n+9]*t[A.SHORT_TYPE][2]+e[n+0]),l=-s+i,i=2069978111953089e-26*(e[n+3]*t[A.SHORT_TYPE][1]-e[n+12]),s=2069978111953089e-26*(e[n+12]*t[A.SHORT_TYPE][1]+e[n+3]),e[n+0]=190752519173728e-25*o+i,e[n+15]=190752519173728e-25*-c+s,a=.8660254037844387*a*1907525191737281e-26,c=.5*c*1907525191737281e-26+s,e[n+3]=a-c,e[n+6]=a+c,o=.5*o*1907525191737281e-26-i,l=.8660254037844387*l*1907525191737281e-26,e[n+9]=o+l,e[n+12]=o-l,n++}}this.mdct_sub48=function(e,d,p){for(var h,m,v,b,g,y,_,w,O,x,S,j,E,T,k,C,M,P,R,L,N,D=d,I=286,B=0;B<e.channels_out;B++){for(var H=0;H<e.mode_gr;H++){for(var U,q=e.l3_side.tt[H][B],V=q.xr,F=0,W=e.sb_sample[B][1-H],z=0,X=0;X<9;X++)for(c(D,I,W[z]),c(D,I+32,W[z+1]),z+=2,I+=64,U=1;U<32;U+=2)W[z-1][U]*=-1;for(U=0;U<32;U++,F+=18){var Y=q.block_type,K=e.sb_sample[B][H],G=e.sb_sample[B][1-H];if(0!=q.mixed_block_flag&&U<2&&(Y=0),e.amp_filter[U]<1e-12)l.fill(V,F+0,F+18,0);else{if(e.amp_filter[U]<1)for(X=0;X<18;X++)G[X][s[U]]*=e.amp_filter[U];if(Y==A.SHORT_TYPE){for(X=-3;X<0;X++){var Q=t[A.SHORT_TYPE][X+3];V[F+3*X+9]=K[9+X][s[U]]*Q-K[8-X][s[U]],V[F+3*X+18]=K[14-X][s[U]]*Q+K[15+X][s[U]],V[F+3*X+10]=K[15+X][s[U]]*Q-K[14-X][s[U]],V[F+3*X+19]=G[2-X][s[U]]*Q+G[3+X][s[U]],V[F+3*X+11]=G[3+X][s[U]]*Q-G[2-X][s[U]],V[F+3*X+20]=G[8-X][s[U]]*Q+G[9+X][s[U]]}f(V,F)}else{var Z=i(18);for(X=-9;X<0;X++){var J,$;J=t[Y][X+27]*G[X+9][s[U]]+t[Y][X+36]*G[8-X][s[U]],$=t[Y][X+9]*K[X+9][s[U]]-t[Y][X+18]*K[8-X][s[U]],Z[X+9]=J-$*n[3+X+9],Z[X+18]=J*n[3+X+9]+$}h=V,m=F,R=S=g=b=void 0,y=(v=Z)[17]-v[9],w=v[15]-v[11],O=v[14]-v[12],x=v[0]+v[8],S=v[1]+v[7],j=v[2]+v[6],E=v[3]+v[5],h[m+17]=x+j-E-(S-v[4]),g=(x+j-E)*r[19]+(S-v[4]),b=(y-w-O)*r[18],h[m+5]=b+g,h[m+6]=b-g,_=(v[16]-v[10])*r[18],S=S*r[19]+v[4],b=y*r[12]+_+w*r[13]+O*r[14],g=-x*r[16]+S-j*r[17]+E*r[15],h[m+1]=b+g,h[m+2]=b-g,b=y*r[13]-_-w*r[14]+O*r[12],g=-x*r[17]+S-j*r[15]+E*r[16],h[m+9]=b+g,h[m+10]=b-g,b=y*r[14]-_+w*r[12]-O*r[13],g=x*r[15]-S+j*r[16]-E*r[17],h[m+13]=b+g,h[m+14]=b-g,T=v[8]-v[0],C=v[6]-v[2],M=v[5]-v[3],P=v[17]+v[9],R=v[16]+v[10],L=v[15]+v[11],N=v[14]+v[12],h[m+0]=P+L+N+(R+v[13]),b=(P+L+N)*r[19]-(R+v[13]),g=(T-C+M)*r[18],h[m+11]=b+g,h[m+12]=b-g,k=(v[7]-v[1])*r[18],R=v[13]-R*r[19],b=P*r[15]-R+L*r[16]+N*r[17],g=T*r[14]+k+C*r[12]+M*r[13],h[m+3]=b+g,h[m+4]=b-g,b=-P*r[17]+R-L*r[15]-N*r[16],g=T*r[13]+k-C*r[14]-M*r[12],h[m+7]=b+g,h[m+8]=b-g,b=-P*r[16]+R-L*r[17]-N*r[15],g=T*r[12]-k+C*r[13]-M*r[14],h[m+15]=b+g,h[m+16]=b-g}}if(Y!=A.SHORT_TYPE&&0!=U)for(X=7;0<=X;--X){var ee,te;ee=V[F+X]*o[20+X]+V[F+-1-X]*a[28+X],te=V[F+X]*a[28+X]-V[F+-1-X]*o[20+X],V[F+-1-X]=ee,V[F+X]=te}}}if(D=p,I=286,1==e.mode_gr)for(var ne=0;ne<18;ne++)u.arraycopy(e.sb_sample[B][1][ne],0,e.sb_sample[B][0][ne],0,32)}}};this.lame_encode_mp3_frame=function(l,d,v,b,g,y){var _,w=c([2,2]);w[0][0]=new C,w[0][1]=new C,w[1][0]=new C,w[1][1]=new C;var O,x=c([2,2]);x[0][0]=new C,x[0][1]=new C,x[1][0]=new C,x[1][1]=new C;var S,j,E,T=[null,null],k=l.internal_flags,M=o([2,4]),P=[.5,.5],R=[[0,0],[0,0]],L=[[0,0],[0,0]];if(T[0]=d,T[1]=v,0==k.lame_encode_frame_init&&function(e,t){var n,r,o=e.internal_flags;if(0==o.lame_encode_frame_init){var a,s,c=i(2014),l=i(2014);for(o.lame_encode_frame_init=1,s=a=0;a<286+576*(1+o.mode_gr);++a)a<576*o.mode_gr?(c[a]=0,2==o.channels_out&&(l[a]=0)):(c[a]=t[0][s],2==o.channels_out&&(l[a]=t[1][s]),++s);for(r=0;r<o.mode_gr;r++)for(n=0;n<o.channels_out;n++)o.l3_side.tt[r][n].block_type=A.SHORT_TYPE;p.mdct_sub48(o,c,l)}}(l,T),k.padding=0,(k.slot_lag-=k.frac_SpF)<0&&(k.slot_lag+=l.out_samplerate,k.padding=1),0!=k.psymodel){var N=[null,null],D=0,I=r(2);for(E=0;E<k.mode_gr;E++){for(j=0;j<k.channels_out;j++)N[j]=T[j],D=576+576*E-A.FFTOFFSET;if(0!=(l.VBR==h.vbr_mtrh||l.VBR==h.vbr_mt?a.L3psycho_anal_vbr(l,N,D,E,w,x,R[E],L[E],M[E],I):a.L3psycho_anal_ns(l,N,D,E,w,x,R[E],L[E],M[E],I)))return-4;for(l.mode==m.JOINT_STEREO&&(P[E]=M[E][2]+M[E][3],0<P[E]&&(P[E]=M[E][3]/P[E])),j=0;j<k.channels_out;j++){var B=k.l3_side.tt[E][j];B.block_type=I[j],B.mixed_block_flag=0}}}else for(E=0;E<k.mode_gr;E++)for(j=0;j<k.channels_out;j++)k.l3_side.tt[E][j].block_type=A.NORM_TYPE,k.l3_side.tt[E][j].mixed_block_flag=0,L[E][j]=R[E][j]=700;if(function(e){var t,n;if(0!=e.ATH.useAdjust)if(n=e.loudness_sq[0][0],t=e.loudness_sq[1][0],2==e.channels_out?(n+=e.loudness_sq[0][1],t+=e.loudness_sq[1][1]):(n+=n,t+=t),2==e.mode_gr&&(n=Math.max(n,t)),n*=.5,.03125<(n*=e.ATH.aaSensitivityP))1<=e.ATH.adjust?e.ATH.adjust=1:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=1;else{var r=31.98*n+625e-6;e.ATH.adjust>=r?(e.ATH.adjust*=.075*r+.925,e.ATH.adjust<r&&(e.ATH.adjust=r)):e.ATH.adjustLimit>=r?e.ATH.adjust=r:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=r}else e.ATH.adjust=1}(k),p.mdct_sub48(k,T[0],T[1]),k.mode_ext=A.MPG_MD_LR_LR,l.force_ms)k.mode_ext=A.MPG_MD_MS_LR;else if(l.mode==m.JOINT_STEREO){var H=0,U=0;for(E=0;E<k.mode_gr;E++)for(j=0;j<k.channels_out;j++)H+=L[E][j],U+=R[E][j];if(H<=1*U){var q=k.l3_side.tt[0],V=k.l3_side.tt[k.mode_gr-1];q[0].block_type==q[1].block_type&&V[0].block_type==V[1].block_type&&(k.mode_ext=A.MPG_MD_MS_LR)}}if(k.mode_ext==t?(O=x,S=L):(O=w,S=R),l.analysis&&null!=k.pinfo)for(E=0;E<k.mode_gr;E++)for(j=0;j<k.channels_out;j++)k.pinfo.ms_ratio[E]=k.ms_ratio[E],k.pinfo.ms_ener_ratio[E]=P[E],k.pinfo.blocktype[E][j]=k.l3_side.tt[E][j].block_type,k.pinfo.pe[E][j]=S[E][j],u.arraycopy(k.l3_side.tt[E][j].xr,0,k.pinfo.xr[E][j],0,576),k.mode_ext==t&&(k.pinfo.ers[E][j]=k.pinfo.ers[E][j+2],u.arraycopy(k.pinfo.energy[E][j+2],0,k.pinfo.energy[E][j],0,k.pinfo.energy[E][j].length));if(l.VBR==h.vbr_off||l.VBR==h.vbr_abr){var F,W;for(F=0;F<18;F++)k.nsPsy.pefirbuf[F]=k.nsPsy.pefirbuf[F+1];for(E=W=0;E<k.mode_gr;E++)for(j=0;j<k.channels_out;j++)W+=S[E][j];for(k.nsPsy.pefirbuf[18]=W,W=k.nsPsy.pefirbuf[9],F=0;F<9;F++)W+=(k.nsPsy.pefirbuf[F]+k.nsPsy.pefirbuf[18-F])*A.fircoef[F];for(W=3350*k.mode_gr*k.channels_out/W,E=0;E<k.mode_gr;E++)for(j=0;j<k.channels_out;j++)S[E][j]*=W}if(k.iteration_loop.iteration_loop(l,S,P,O),n.format_bitstream(l),_=n.copy_buffer(k,b,g,y,1),l.bWriteVbrTag&&s.addVbrFrame(l),l.analysis&&null!=k.pinfo){for(j=0;j<k.channels_out;j++){var z;for(z=0;z<e;z++)k.pinfo.pcmdata[j][z]=k.pinfo.pcmdata[j][z+l.framesize];for(z=e;z<1600;z++)k.pinfo.pcmdata[j][z]=T[j][z-e]}f.set_frame_pinfo(l,O)}return function(e){var t,n;for(e.bitrate_stereoMode_Hist[e.bitrate_index][4]++,e.bitrate_stereoMode_Hist[15][4]++,2==e.channels_out&&(e.bitrate_stereoMode_Hist[e.bitrate_index][e.mode_ext]++,e.bitrate_stereoMode_Hist[15][e.mode_ext]++),t=0;t<e.mode_gr;++t)for(n=0;n<e.channels_out;++n){var r=0|e.l3_side.tt[t][n].block_type;0!=e.l3_side.tt[t][n].mixed_block_flag&&(r=4),e.bitrate_blockType_Hist[e.bitrate_index][r]++,e.bitrate_blockType_Hist[e.bitrate_index][5]++,e.bitrate_blockType_Hist[15][r]++,e.bitrate_blockType_Hist[15][5]++}}(k),_}}function M(){this.l=i(A.SBMAX_l),this.s=o([A.SBMAX_s,3]);var e=this;this.assign=function(t){u.arraycopy(t.l,0,e.l,0,A.SBMAX_l);for(var n=0;n<A.SBMAX_s;n++)for(var r=0;r<3;r++)e.s[n][r]=t.s[n][r]}}function P(){function e(){this.write_timing=0,this.ptr=0,this.buf=n(40)}this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=o([2,P.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new function(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[r(4),r(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new E},this.ms_ratio=i(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=r(2),this.CurrentStep=r(2),this.masking_lower=0,this.bv_scf=r(576),this.pseudohalf=r(T.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*P.BPC+1),this.itime=function(e){return new Float64Array(e)}(2),this.sideinfo_len=0,this.sb_sample=o([2,2,18,A.SBLIMIT]),this.amp_filter=i(32),this.header=new Array(P.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new S,this.minval_l=i(A.CBANDS),this.minval_s=i(A.CBANDS),this.nb_1=o([4,A.CBANDS]),this.nb_2=o([4,A.CBANDS]),this.nb_s1=o([4,A.CBANDS]),this.nb_s2=o([4,A.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=i(4),this.loudness_sq=o([2,2]),this.loudness_sq_save=i(2),this.mld_l=i(A.SBMAX_l),this.mld_s=i(A.SBMAX_s),this.bm_l=r(A.SBMAX_l),this.bo_l=r(A.SBMAX_l),this.bm_s=r(A.SBMAX_s),this.bo_s=r(A.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=a([A.CBANDS,2]),this.s3ind_s=a([A.CBANDS,2]),this.numlines_s=r(A.CBANDS),this.numlines_l=r(A.CBANDS),this.rnumlines_l=i(A.CBANDS),this.mld_cb_l=i(A.CBANDS),this.mld_cb_s=i(A.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=i(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=r(2),this.nsPsy=new function(){this.last_en_subshort=o([4,9]),this.lastAttacks=r(4),this.pefirbuf=i(19),this.longfact=i(A.SBMAX_l),this.shortfact=i(A.SBMAX_s),this.attackthre=0,this.attackthre_s=0},this.VBR_seek_table=new function(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0},this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=a([16,5]),this.bitrate_blockType_Hist=a([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var t=0;t<this.en.length;t++)this.en[t]=new M;for(t=0;t<this.thm.length;t++)this.thm[t]=new M;for(t=0;t<this.header.length;t++)this.header[t]=new e}function R(){var e=new function(){var e=i(A.BLKSIZE),t=i(A.BLKSIZE_s/2),n=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function r(e,t,r){var i,o,a,s=0,c=t+(r<<=1);i=4;do{var l,u,f,p,h,m,v;for(v=i>>1,m=(h=(p=i)<<1)+p,i=h<<1,a=(o=t)+v;x=e[o+0]-e[o+p],O=e[o+0]+e[o+p],T=e[o+h]-e[o+m],j=e[o+h]+e[o+m],e[o+h]=O-j,e[o+0]=O+j,e[o+m]=x-T,e[o+p]=x+T,x=e[a+0]-e[a+p],O=e[a+0]+e[a+p],T=d.SQRT2*e[a+m],j=d.SQRT2*e[a+h],e[a+h]=O-j,e[a+0]=O+j,e[a+m]=x-T,e[a+p]=x+T,a+=i,(o+=i)<c;);for(u=n[s+0],l=n[s+1],f=1;f<v;f++){var b,g;b=1-2*l*l,g=2*l*u,o=t+f,a=t+p-f;do{var y,_,w,O,x,S,j,E,T,k;_=g*e[o+p]-b*e[a+p],y=b*e[o+p]+g*e[a+p],x=e[o+0]-y,O=e[o+0]+y,S=e[a+0]-_,w=e[a+0]+_,_=g*e[o+m]-b*e[a+m],y=b*e[o+m]+g*e[a+m],T=e[o+h]-y,j=e[o+h]+y,k=e[a+h]-_,E=e[a+h]+_,_=l*j-u*k,y=u*j+l*k,e[o+h]=O-y,e[o+0]=O+y,e[a+m]=S-_,e[a+p]=S+_,_=u*E-l*T,y=l*E+u*T,e[a+h]=w-y,e[a+0]=w+y,e[o+m]=x-_,e[o+p]=x+_,a+=i,o+=i}while(o<c);u=(b=u)*n[s+0]-l*n[s+1],l=b*n[s+1]+l*n[s+0]}s+=2}while(i<r)}var o=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(e,n,i,a,s){for(var c=0;c<3;c++){var l=A.BLKSIZE_s/2,u=65535&192*(c+1),d=A.BLKSIZE_s/8-1;do{var f,p,h,m,v,b=255&o[d<<2];p=(f=t[b]*a[i][s+b+u])-(v=t[127-b]*a[i][s+b+u+128]),f+=v,m=(h=t[b+64]*a[i][s+b+u+64])-(v=t[63-b]*a[i][s+b+u+192]),h+=v,l-=4,n[c][l+0]=f+h,n[c][l+2]=f-h,n[c][l+1]=p+m,n[c][l+3]=p-m,p=(f=t[b+1]*a[i][s+b+u+1])-(v=t[126-b]*a[i][s+b+u+129]),f+=v,m=(h=t[b+65]*a[i][s+b+u+65])-(v=t[62-b]*a[i][s+b+u+193]),h+=v,n[c][l+A.BLKSIZE_s/2+0]=f+h,n[c][l+A.BLKSIZE_s/2+2]=f-h,n[c][l+A.BLKSIZE_s/2+1]=p+m,n[c][l+A.BLKSIZE_s/2+3]=p-m}while(0<=--d);r(n[c],l,A.BLKSIZE_s/2)}},this.fft_long=function(t,n,i,a,s){var c=A.BLKSIZE/8-1,l=A.BLKSIZE/2;do{var u,d,f,p,h,m=255&o[c];d=(u=e[m]*a[i][s+m])-(h=e[m+512]*a[i][s+m+512]),u+=h,p=(f=e[m+256]*a[i][s+m+256])-(h=e[m+768]*a[i][s+m+768]),f+=h,n[0+(l-=4)]=u+f,n[l+2]=u-f,n[l+1]=d+p,n[l+3]=d-p,d=(u=e[m+1]*a[i][s+m+1])-(h=e[m+513]*a[i][s+m+513]),u+=h,p=(f=e[m+257]*a[i][s+m+257])-(h=e[m+769]*a[i][s+m+769]),f+=h,n[l+A.BLKSIZE/2+0]=u+f,n[l+A.BLKSIZE/2+2]=u-f,n[l+A.BLKSIZE/2+1]=d+p,n[l+A.BLKSIZE/2+3]=d-p}while(0<=--c);r(n,l,A.BLKSIZE/2)},this.init_fft=function(n){for(var r=0;r<A.BLKSIZE;r++)e[r]=.42-.5*Math.cos(2*Math.PI*(r+.5)/A.BLKSIZE)+.08*Math.cos(4*Math.PI*(r+.5)/A.BLKSIZE);for(r=0;r<A.BLKSIZE_s/2;r++)t[r]=.5*(1-Math.cos(2*Math.PI*(r+.5)/A.BLKSIZE_s))}},t=2.302585092994046,n=1/217621504/(A.BLKSIZE/2),a=.3,s=21,c=.2302585093;function u(e,t){for(var r=0,i=0;i<A.BLKSIZE/2;++i)r+=e[i]*t.ATH.eql_w[i];return r*n}function v(t,n,r,i,o,a,s,c,l,f,p){var h=t.internal_flags;if(l<2)e.fft_long(h,i[o],l,f,p),e.fft_short(h,a[s],l,f,p);else if(2==l){for(var m=A.BLKSIZE-1;0<=m;--m){var v=i[o+0][m],b=i[o+1][m];i[o+0][m]=(v+b)*d.SQRT2*.5,i[o+1][m]=(v-b)*d.SQRT2*.5}for(var g=2;0<=g;--g)for(m=A.BLKSIZE_s-1;0<=m;--m)v=a[s+0][g][m],b=a[s+1][g][m],a[s+0][g][m]=(v+b)*d.SQRT2*.5,a[s+1][g][m]=(v-b)*d.SQRT2*.5}for(n[0]=i[o+0][0],n[0]*=n[0],m=A.BLKSIZE/2-1;0<=m;--m){var y=i[o+0][A.BLKSIZE/2-m],_=i[o+0][A.BLKSIZE/2+m];n[A.BLKSIZE/2-m]=.5*(y*y+_*_)}for(g=2;0<=g;--g)for(r[g][0]=a[s+0][g][0],r[g][0]*=r[g][0],m=A.BLKSIZE_s/2-1;0<=m;--m)y=a[s+0][g][A.BLKSIZE_s/2-m],_=a[s+0][g][A.BLKSIZE_s/2+m],r[g][A.BLKSIZE_s/2-m]=.5*(y*y+_*_);var w=0;for(m=11;m<A.HBLKSIZE;m++)w+=n[m];if(h.tot_ener[l]=w,t.analysis){for(m=0;m<A.HBLKSIZE;m++)h.pinfo.energy[c][l][m]=h.pinfo.energy_save[l][m],h.pinfo.energy_save[l][m]=n[m];h.pinfo.pe[c][l]=h.pe[l]}2==t.athaa_loudapprox&&l<2&&(h.loudness_sq[c][l]=h.loudness_sq_save[l],h.loudness_sq_save[l]=u(n,h))}var b,g,y,_=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],w=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],O=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],x=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276];function S(e,t,n,r,i,o){var a,s,c;if(e<t){if(!(t<e*g))return e+t;a=t/e}else{if(t*g<=e)return e+t;a=e/t}if(e+=t,r+3<=6){if(b<=a)return e;var l=0|d.FAST_LOG10_X(a,16);return e*O[l]}return l=0|d.FAST_LOG10_X(a,16),t=0!=o?i.ATH.cb_s[n]*i.ATH.adjust:i.ATH.cb_l[n]*i.ATH.adjust,e<y*t?t<e?(s=1,l<=13&&(s=x[l]),c=d.FAST_LOG10_X(e/t,10/15),e*((w[l]-s)*c+s)):13<l?e:e*x[l]:e*w[l]}var j=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1];function E(e,t,n){var r;if(e<0&&(e=0),t<0&&(t=0),e<=0)return t;if(t<=0)return e;if(r=e<t?t/e:e/t,-2<=n&&n<=2){if(b<=r)return e+t;var i=0|d.FAST_LOG10_X(r,16);return(e+t)*j[i]}return r<g?e+t:(e<t&&(e=t),e)}function T(e,t,n,r,i){var o,a,s=0,c=0;for(o=a=0;o<A.SBMAX_s;++a,++o){for(var l=e.bo_s[o],u=e.npart_s,d=l<u?l:u;a<d;)s+=t[a],c+=n[a],a++;if(e.en[r].s[o][i]=s,e.thm[r].s[o][i]=c,u<=a){++o;break}var f=e.PSY.bo_s_weight[o],p=1-f;s=f*t[a],c=f*n[a],e.en[r].s[o][i]+=s,e.thm[r].s[o][i]+=c,s=p*t[a],c=p*n[a]}for(;o<A.SBMAX_s;++o)e.en[r].s[o][i]=0,e.thm[r].s[o][i]=0}function k(e,t,n,r){var i,o,a=0,s=0;for(i=o=0;i<A.SBMAX_l;++o,++i){for(var c=e.bo_l[i],l=e.npart_l,u=c<l?c:l;o<u;)a+=t[o],s+=n[o],o++;if(e.en[r].l[i]=a,e.thm[r].l[i]=s,l<=o){++i;break}var d=e.PSY.bo_l_weight[i],f=1-d;a=d*t[o],s=d*n[o],e.en[r].l[i]+=a,e.thm[r].l[i]+=s,a=f*t[o],s=f*n[o]}for(;i<A.SBMAX_l;++i)e.en[r].l[i]=0,e.thm[r].l[i]=0}function C(e,t,n,r,i,o){var a,s,c=e.internal_flags;for(s=a=0;s<c.npart_s;++s){for(var l=0,u=0,d=c.numlines_s[s],f=0;f<d;++f,++a){var p=t[o][a];l+=p,u<p&&(u=p)}n[s]=l}for(a=s=0;s<c.npart_s;s++){var h=c.s3ind_s[s][0],m=c.s3_ss[a++]*n[h];for(++h;h<=c.s3ind_s[s][1];)m+=c.s3_ss[a]*n[h],++a,++h;var v=2*c.nb_s1[i][s];if(r[s]=Math.min(m,v),c.blocktype_old[1&i]==A.SHORT_TYPE){v=16*c.nb_s2[i][s];var b=r[s];r[s]=Math.min(v,b)}c.nb_s2[i][s]=c.nb_s1[i][s],c.nb_s1[i][s]=m}for(;s<=A.CBANDS;++s)n[s]=0,r[s]=0}function M(e,t,n){return 1<=n?e:n<=0?t:0<t?Math.pow(e/t,n)*t:0}var P=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function R(e,n){for(var r=309.07,i=0;i<A.SBMAX_s-1;i++)for(var o=0;o<3;o++){var a=e.thm.s[i][o];if(0<a){var s=a*n,c=e.en.s[i][o];s<c&&(r+=1e10*s<c?P[i]*(10*t):P[i]*d.FAST_LOG10(c/s))}}return r}var L=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function N(e,n){for(var r=281.0575,i=0;i<A.SBMAX_l-1;i++){var o=e.thm.l[i];if(0<o){var a=o*n,s=e.en.l[i];a<s&&(r+=1e10*a<s?L[i]*(10*t):L[i]*d.FAST_LOG10(s/a))}}return r}function D(e,t,n,r,i){var o,a;for(o=a=0;o<e.npart_l;++o){var s,c=0,l=0;for(s=0;s<e.numlines_l[o];++s,++a){var u=t[a];c+=u,l<u&&(l=u)}n[o]=c,r[o]=l,i[o]=c*e.rnumlines_l[o]}}function I(e,t,n,r){var i=_.length-1,o=0,a=n[o]+n[o+1];for(0<a?((s=t[o])<t[o+1]&&(s=t[o+1]),i<(c=0|(a=20*(2*s-a)/(a*(e.numlines_l[o]+e.numlines_l[o+1]-1))))&&(c=i),r[o]=c):r[o]=0,o=1;o<e.npart_l-1;o++){var s,c;0<(a=n[o-1]+n[o]+n[o+1])?((s=t[o-1])<t[o]&&(s=t[o]),s<t[o+1]&&(s=t[o+1]),i<(c=0|(a=20*(3*s-a)/(a*(e.numlines_l[o-1]+e.numlines_l[o]+e.numlines_l[o+1]-1))))&&(c=i),r[o]=c):r[o]=0}0<(a=n[o-1]+n[o])?((s=t[o-1])<t[o]&&(s=t[o]),i<(c=0|(a=20*(2*s-a)/(a*(e.numlines_l[o-1]+e.numlines_l[o]-1))))&&(c=i),r[o]=c):r[o]=0}var B=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function H(t,n,r,i,o,a,s,c){var l=t.internal_flags;if(i<2)e.fft_long(l,s[c],i,n,r);else if(2==i)for(var u=A.BLKSIZE-1;0<=u;--u){var f=s[c+0][u],p=s[c+1][u];s[c+0][u]=(f+p)*d.SQRT2*.5,s[c+1][u]=(f-p)*d.SQRT2*.5}for(a[0]=s[c+0][0],a[0]*=a[0],u=A.BLKSIZE/2-1;0<=u;--u){var h=s[c+0][A.BLKSIZE/2-u],m=s[c+0][A.BLKSIZE/2+u];a[A.BLKSIZE/2-u]=.5*(h*h+m*m)}var v=0;for(u=11;u<A.HBLKSIZE;u++)v+=a[u];if(l.tot_ener[i]=v,t.analysis){for(u=0;u<A.HBLKSIZE;u++)l.pinfo.energy[o][i][u]=l.pinfo.energy_save[i][u],l.pinfo.energy_save[i][u]=a[u];l.pinfo.pe[o][i]=l.pe[i]}}function U(t,n,r,i,o,a,s,c){var l=t.internal_flags;if(0==o&&i<2&&e.fft_short(l,s[c],i,n,r),2==i)for(var u=A.BLKSIZE_s-1;0<=u;--u){var f=s[c+0][o][u],p=s[c+1][o][u];s[c+0][o][u]=(f+p)*d.SQRT2*.5,s[c+1][o][u]=(f-p)*d.SQRT2*.5}for(a[o][0]=s[c+0][o][0],a[o][0]*=a[o][0],u=A.BLKSIZE_s/2-1;0<=u;--u){var h=s[c+0][o][A.BLKSIZE_s/2-u],m=s[c+0][o][A.BLKSIZE_s/2+u];a[o][A.BLKSIZE_s/2-u]=.5*(h*h+m*m)}}this.L3psycho_anal_ns=function(e,t,n,c,u,d,p,b,g,y){var w,O,x,j,E,P,L,H,U,q,V=e.internal_flags,F=o([2,A.BLKSIZE]),W=o([2,3,A.BLKSIZE_s]),z=i(A.CBANDS+1),X=i(A.CBANDS+1),Y=i(A.CBANDS+2),K=r(2),G=r(2),Q=o([2,576]),Z=r(A.CBANDS+2),J=r(A.CBANDS+2);for(l.fill(J,0),w=V.channels_out,e.mode==m.JOINT_STEREO&&(w=4),U=e.VBR==h.vbr_off?0==V.ResvMax?0:V.ResvSize/V.ResvMax*.5:e.VBR==h.vbr_rh||e.VBR==h.vbr_mtrh||e.VBR==h.vbr_mt?.6:1,O=0;O<V.channels_out;O++){var $=t[O],ee=n+576-350-s+192;for(j=0;j<576;j++){var te,ne;for(te=$[ee+j+10],E=ne=0;E<9;E+=2)te+=B[E]*($[ee+j+E]+$[ee+j+s-E]),ne+=B[E+1]*($[ee+j+E+1]+$[ee+j+s-E-1]);Q[O][j]=te+ne}u[c][O].en.assign(V.en[O]),u[c][O].thm.assign(V.thm[O]),2<w&&(d[c][O].en.assign(V.en[O+2]),d[c][O].thm.assign(V.thm[O+2]))}for(O=0;O<w;O++){var re,ie=i(12),oe=[0,0,0,0],ae=i(12),se=1,ce=i(A.CBANDS),le=i(A.CBANDS),ue=[0,0,0,0],de=i(A.HBLKSIZE),fe=o([3,A.HBLKSIZE_s]);for(j=0;j<3;j++)ie[j]=V.nsPsy.last_en_subshort[O][j+6],ae[j]=ie[j]/V.nsPsy.last_en_subshort[O][j+4],oe[0]+=ie[j];if(2==O)for(j=0;j<576;j++){var pe,he;pe=Q[0][j],he=Q[1][j],Q[0][j]=pe+he,Q[1][j]=pe-he}var me=Q[1&O],ve=0;for(j=0;j<9;j++){for(var be=ve+64,ge=1;ve<be;ve++)ge<Math.abs(me[ve])&&(ge=Math.abs(me[ve]));V.nsPsy.last_en_subshort[O][j]=ie[j+3]=ge,oe[1+j/3]+=ge,ge>ie[j+3-2]?ge/=ie[j+3-2]:ge=ie[j+3-2]>10*ge?ie[j+3-2]/(10*ge):0,ae[j+3]=ge}if(e.analysis){var ye=ae[0];for(j=1;j<12;j++)ye<ae[j]&&(ye=ae[j]);V.pinfo.ers[c][O]=V.pinfo.ers_save[O],V.pinfo.ers_save[O]=ye}for(re=3==O?V.nsPsy.attackthre_s:V.nsPsy.attackthre,j=0;j<12;j++)0==ue[j/3]&&ae[j]>re&&(ue[j/3]=j%3+1);for(j=1;j<4;j++)(oe[j-1]>oe[j]?oe[j-1]/oe[j]:oe[j]/oe[j-1])<1.7&&(ue[j]=0,1==j&&(ue[0]=0));for(0!=ue[0]&&0!=V.nsPsy.lastAttacks[O]&&(ue[0]=0),3!=V.nsPsy.lastAttacks[O]&&ue[0]+ue[1]+ue[2]+ue[3]==0||((se=0)!=ue[1]&&0!=ue[0]&&(ue[1]=0),0!=ue[2]&&0!=ue[1]&&(ue[2]=0),0!=ue[3]&&0!=ue[2]&&(ue[3]=0)),O<2?G[O]=se:0==se&&(G[0]=G[1]=0),g[O]=V.tot_ener[O],v(e,de,fe,F,1&O,W,1&O,c,O,t,n),D(V,de,z,ce,le),I(V,ce,le,Z),H=0;H<3;H++){var _e,we;for(C(e,fe,X,Y,O,H),T(V,X,Y,O,H),L=0;L<A.SBMAX_s;L++){if(we=V.thm[O].s[L][H],we*=.8,2<=ue[H]||1==ue[H+1]){var Oe=0!=H?H-1:2;ge=M(V.thm[O].s[L][Oe],we,.6*U),we=Math.min(we,ge)}1==ue[H]?(Oe=0!=H?H-1:2,ge=M(V.thm[O].s[L][Oe],we,a*U),we=Math.min(we,ge)):(0!=H&&3==ue[H-1]||0==H&&3==V.nsPsy.lastAttacks[O])&&(Oe=2!=H?H+1:0,ge=M(V.thm[O].s[L][Oe],we,a*U),we=Math.min(we,ge)),_e=ie[3*H+3]+ie[3*H+4]+ie[3*H+5],6*ie[3*H+5]<_e&&(we*=.5,6*ie[3*H+4]<_e&&(we*=.5)),V.thm[O].s[L][H]=we}}for(V.nsPsy.lastAttacks[O]=ue[2],x=P=0;x<V.npart_l;x++){for(var xe=V.s3ind[x][0],Se=z[xe]*_[Z[xe]],je=V.s3_ll[P++]*Se;++xe<=V.s3ind[x][1];)Se=z[xe]*_[Z[xe]],je=S(je,V.s3_ll[P++]*Se,xe,xe-x,V,0);je*=.158489319246111,V.blocktype_old[1&O]==A.SHORT_TYPE?Y[x]=je:Y[x]=M(Math.min(je,Math.min(2*V.nb_1[O][x],16*V.nb_2[O][x])),je,U),V.nb_2[O][x]=V.nb_1[O][x],V.nb_1[O][x]=je}for(;x<=A.CBANDS;++x)z[x]=0,Y[x]=0;k(V,z,Y,O)}for(e.mode!=m.STEREO&&e.mode!=m.JOINT_STEREO||0<e.interChRatio&&function(e,t){var n=e.internal_flags;if(1<n.channels_out){for(var r=0;r<A.SBMAX_l;r++){var i=n.thm[0].l[r],o=n.thm[1].l[r];n.thm[0].l[r]+=o*t,n.thm[1].l[r]+=i*t}for(r=0;r<A.SBMAX_s;r++)for(var a=0;a<3;a++)i=n.thm[0].s[r][a],o=n.thm[1].s[r][a],n.thm[0].s[r][a]+=o*t,n.thm[1].s[r][a]+=i*t}}(e,e.interChRatio),e.mode==m.JOINT_STEREO&&(function(e){for(var t=0;t<A.SBMAX_l;t++)if(!(e.thm[0].l[t]>1.58*e.thm[1].l[t]||e.thm[1].l[t]>1.58*e.thm[0].l[t])){var n=e.mld_l[t]*e.en[3].l[t],r=Math.max(e.thm[2].l[t],Math.min(e.thm[3].l[t],n));n=e.mld_l[t]*e.en[2].l[t];var i=Math.max(e.thm[3].l[t],Math.min(e.thm[2].l[t],n));e.thm[2].l[t]=r,e.thm[3].l[t]=i}for(t=0;t<A.SBMAX_s;t++)for(var o=0;o<3;o++)e.thm[0].s[t][o]>1.58*e.thm[1].s[t][o]||e.thm[1].s[t][o]>1.58*e.thm[0].s[t][o]||(n=e.mld_s[t]*e.en[3].s[t][o],r=Math.max(e.thm[2].s[t][o],Math.min(e.thm[3].s[t][o],n)),n=e.mld_s[t]*e.en[2].s[t][o],i=Math.max(e.thm[3].s[t][o],Math.min(e.thm[2].s[t][o],n)),e.thm[2].s[t][o]=r,e.thm[3].s[t][o]=i)}(V),q=e.msfix,0<Math.abs(q)&&function(e,t,n){var r=t,i=Math.pow(10,n);t*=2,r*=2;for(var o=0;o<A.SBMAX_l;o++)u=e.ATH.cb_l[e.bm_l[o]]*i,(s=Math.min(Math.max(e.thm[0].l[o],u),Math.max(e.thm[1].l[o],u)))*t<(c=Math.max(e.thm[2].l[o],u))+(l=Math.max(e.thm[3].l[o],u))&&(c*=d=s*r/(c+l),l*=d),e.thm[2].l[o]=Math.min(c,e.thm[2].l[o]),e.thm[3].l[o]=Math.min(l,e.thm[3].l[o]);for(i*=A.BLKSIZE_s/A.BLKSIZE,o=0;o<A.SBMAX_s;o++)for(var a=0;a<3;a++){var s,c,l,u,d;u=e.ATH.cb_s[e.bm_s[o]]*i,(s=Math.min(Math.max(e.thm[0].s[o][a],u),Math.max(e.thm[1].s[o][a],u)))*t<(c=Math.max(e.thm[2].s[o][a],u))+(l=Math.max(e.thm[3].s[o][a],u))&&(c*=d=s*t/(c+l),l*=d),e.thm[2].s[o][a]=Math.min(e.thm[2].s[o][a],c),e.thm[3].s[o][a]=Math.min(e.thm[3].s[o][a],l)}}(V,q,e.ATHlower*V.ATH.adjust)),function(e,t,n,r){var i=e.internal_flags;e.short_blocks!=f.short_block_coupled||0!=t[0]&&0!=t[1]||(t[0]=t[1]=0);for(var o=0;o<i.channels_out;o++)r[o]=A.NORM_TYPE,e.short_blocks==f.short_block_dispensed&&(t[o]=1),e.short_blocks==f.short_block_forced&&(t[o]=0),0!=t[o]?i.blocktype_old[o]==A.SHORT_TYPE&&(r[o]=A.STOP_TYPE):(r[o]=A.SHORT_TYPE,i.blocktype_old[o]==A.NORM_TYPE&&(i.blocktype_old[o]=A.START_TYPE),i.blocktype_old[o]==A.STOP_TYPE&&(i.blocktype_old[o]=A.SHORT_TYPE)),n[o]=i.blocktype_old[o],i.blocktype_old[o]=r[o]}(e,G,y,K),O=0;O<w;O++){var Ee,Te,ke,Ce=0;1<O?(Ee=b,Ce=-2,Te=A.NORM_TYPE,y[0]!=A.SHORT_TYPE&&y[1]!=A.SHORT_TYPE||(Te=A.SHORT_TYPE),ke=d[c][O-2]):(Ee=p,Ce=0,Te=y[O],ke=u[c][O]),Ee[Ce+O]=Te==A.SHORT_TYPE?R(ke,V.masking_lower):N(ke,V.masking_lower),e.analysis&&(V.pinfo.pe[c][O]=Ee[Ce+O])}return 0};var q=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function V(e,t,n){if(0==n)for(var r=0;r<e.npart_s;r++)e.nb_s2[t][r]=e.nb_s1[t][r],e.nb_s1[t][r]=0}function F(e,t){for(var n=0;n<e.npart_l;n++)e.nb_2[t][n]=e.nb_1[t][n],e.nb_1[t][n]=0}function W(e,t,n,r,o,a){var s,c,l,u=e.internal_flags,d=new float[A.CBANDS],f=i(A.CBANDS),p=new int[A.CBANDS];for(l=c=0;l<u.npart_s;++l){var h=0,m=0,v=u.numlines_s[l];for(s=0;s<v;++s,++c){var b=t[a][c];h+=b,m<b&&(m=b)}n[l]=h,d[l]=m,f[l]=h/v}for(;l<A.CBANDS;++l)d[l]=0,f[l]=0;for(function(e,t,n,r){var i=_.length-1,o=0,a=n[o]+n[o+1];for(0<a?((s=t[o])<t[o+1]&&(s=t[o+1]),i<(c=0|(a=20*(2*s-a)/(a*(e.numlines_s[o]+e.numlines_s[o+1]-1))))&&(c=i),r[o]=c):r[o]=0,o=1;o<e.npart_s-1;o++){var s,c;0<(a=n[o-1]+n[o]+n[o+1])?((s=t[o-1])<t[o]&&(s=t[o]),s<t[o+1]&&(s=t[o+1]),i<(c=0|(a=20*(3*s-a)/(a*(e.numlines_s[o-1]+e.numlines_s[o]+e.numlines_s[o+1]-1))))&&(c=i),r[o]=c):r[o]=0}0<(a=n[o-1]+n[o])?((s=t[o-1])<t[o]&&(s=t[o]),i<(c=0|(a=20*(2*s-a)/(a*(e.numlines_s[o-1]+e.numlines_s[o]-1))))&&(c=i),r[o]=c):r[o]=0}(u,d,f,p),c=l=0;l<u.npart_s;l++){var g,y,w,O,x,S=u.s3ind_s[l][0],j=u.s3ind_s[l][1];for(g=p[S],y=1,O=u.s3_ss[c]*n[S]*_[p[S]],++c,++S;S<=j;)g+=p[S],y+=1,O=E(O,w=u.s3_ss[c]*n[S]*_[p[S]],S-l),++c,++S;O*=x=.5*_[g=(1+2*g)/(2*y)],r[l]=O,u.nb_s2[o][l]=u.nb_s1[o][l],u.nb_s1[o][l]=O,w=d[l],w*=u.minval_s[l],w*=x,r[l]>w&&(r[l]=w),1<u.masking_lower&&(r[l]*=u.masking_lower),r[l]>n[l]&&(r[l]=n[l]),u.masking_lower<1&&(r[l]*=u.masking_lower)}for(;l<A.CBANDS;++l)n[l]=0,r[l]=0}function z(e,t,n,o,s){var c,l=i(A.CBANDS),u=i(A.CBANDS),d=r(A.CBANDS+2);D(e,t,n,l,u),I(e,l,u,d);var f=0;for(c=0;c<e.npart_l;c++){var p,h,m,v=e.s3ind[c][0],b=e.s3ind[c][1],g=0,y=0;for(g=d[v],y+=1,h=e.s3_ll[f]*n[v]*_[d[v]],++f,++v;v<=b;)g+=d[v],y+=1,h=E(h,p=e.s3_ll[f]*n[v]*_[d[v]],v-c),++f,++v;if(h*=m=.5*_[g=(1+2*g)/(2*y)],e.blocktype_old[1&s]==A.SHORT_TYPE){var w=2*e.nb_1[s][c];o[c]=0<w?Math.min(h,w):Math.min(h,n[c]*a)}else{var O=16*e.nb_2[s][c],x=2*e.nb_1[s][c];O<=0&&(O=h),x<=0&&(x=h),w=e.blocktype_old[1&s]==A.NORM_TYPE?Math.min(x,O):x,o[c]=Math.min(h,w)}e.nb_2[s][c]=e.nb_1[s][c],e.nb_1[s][c]=h,p=l[c],p*=e.minval_l[c],p*=m,o[c]>p&&(o[c]=p),1<e.masking_lower&&(o[c]*=e.masking_lower),o[c]>n[c]&&(o[c]=n[c]),e.masking_lower<1&&(o[c]*=e.masking_lower)}for(;c<A.CBANDS;++c)n[c]=0,o[c]=0}function X(e,t,n,r,i,o,a){for(var s,c,l=2*o,u=0<o?Math.pow(10,i):1,d=0;d<a;++d){var f=e[2][d],p=e[3][d],h=t[0][d],m=t[1][d],v=t[2][d],b=t[3][d];if(h<=1.58*m&&m<=1.58*h){var g=n[d]*p,y=n[d]*f;c=Math.max(v,Math.min(b,g)),s=Math.max(b,Math.min(v,y))}else c=v,s=b;if(0<o){var _,w,O=r[d]*u;if(_=Math.min(Math.max(h,O),Math.max(m,O)),0<(w=(v=Math.max(c,O))+(b=Math.max(s,O)))&&_*l<w){var x=_*l/w;v*=x,b*=x}c=Math.min(v,c),s=Math.min(b,s)}f<c&&(c=f),p<s&&(s=p),t[2][d]=c,t[3][d]=s}}function Y(e,t){var n;return(n=0<=e?27*-e:e*t)<=-72?0:Math.exp(n*c)}function K(e){var t,n,r,i,o=0;for(o=0;1e-20<Y(o,e);o-=1);for(r=o,i=0;1e-12<Math.abs(i-r);)0<Y(o=(i+r)/2,e)?i=o:r=o;for(t=r,o=0,o=0;1e-20<Y(o,e);o+=1);for(r=0,i=o;1e-12<Math.abs(i-r);)0<Y(o=(i+r)/2,e)?r=o:i=o;n=i;var a,s=0;for(a=0;a<=1e3;++a)s+=Y(o=t+a*(n-t)/1e3,e);return 1001/(s*(n-t))}function G(e){return e<0&&(e=0),e*=.001,13*Math.atan(.76*e)+3.5*Math.atan(e*e/56.25)}function Q(e,t,n,o,a,s,c,l,u,d,f,p){var h,m=i(A.CBANDS+1),v=l/(15<p?1152:384),b=r(A.HBLKSIZE);l/=u;var g=0,y=0;for(h=0;h<A.CBANDS;h++){var _;for(C=G(l*g),m[h]=l*g,_=g;G(l*_)-C<.34&&_<=u/2;_++);for(e[h]=_-g,y=h+1;g<_;)b[g++]=h;if(u/2<g){g=u/2,++h;break}}m[h]=l*g;for(var w=0;w<p;w++){var O,x,S,j,E;S=d[w],j=d[w+1],(O=0|Math.floor(.5+f*(S-.5)))<0&&(O=0),u/2<(x=0|Math.floor(.5+f*(j-.5)))&&(x=u/2),n[w]=(b[O]+b[x])/2,t[w]=b[x];var T=v*j;c[w]=(T-m[t[w]])/(m[t[w]+1]-m[t[w]]),c[w]<0?c[w]=0:1<c[w]&&(c[w]=1),E=G(l*d[w]*f),E=Math.min(E,15.5)/15.5,s[w]=Math.pow(10,1.25*(1-Math.cos(Math.PI*E))-2.5)}for(var k=g=0;k<y;k++){var C,M,P=e[k];C=G(l*g),M=G(l*(g+P-1)),o[k]=.5*(C+M),C=G(l*(g-.5)),M=G(l*(g+P-.5)),a[k]=M-C,g+=P}return y}function Z(e,t,n,r,a,s){var l,u,d,f,p,h=o([A.CBANDS,A.CBANDS]),m=0;if(s)for(var v=0;v<t;v++)for(l=0;l<t;l++){var b=(p=u=void 0,u=n[v]-n[l],d=.5<=(u*=0<=u?3:1.5)&&u<=2.5?8*((p=u-.5)*p-2*p):0,((f=15.811389+7.5*(u+=.474)-17.5*Math.sqrt(1+u*u))<=-60?0:(u=Math.exp((d+f)*c),u/=.6609193))*r[l]);h[v][l]=b*a[v]}else for(l=0;l<t;l++){var g=15+Math.min(21/n[l],12),y=K(g);for(v=0;v<t;v++)b=y*Y(n[v]-n[l],g)*r[l],h[v][l]=b*a[v]}for(v=0;v<t;v++){for(l=0;l<t&&!(0<h[v][l]);l++);for(e[v][0]=l,l=t-1;0<l&&!(0<h[v][l]);l--);e[v][1]=l,m+=e[v][1]-e[v][0]+1}var _=i(m),w=0;for(v=0;v<t;v++)for(l=e[v][0];l<=e[v][1];l++)_[w++]=h[v][l];return _}function J(e){var t=G(e);return t=Math.min(t,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*t))-2.5)}function $(e,t){return e<-.3&&(e=3410),e/=1e3,e=Math.max(.1,e),3.64*Math.pow(e,-.8)-6.8*Math.exp(-.6*Math.pow(e-3.4,2))+6*Math.exp(-.15*Math.pow(e-8.7,2))+.001*(.6+.04*t)*Math.pow(e,4)}this.L3psycho_anal_vbr=function(e,t,n,a,c,l,d,p,h,v){var b,g,y,_,w,O=e.internal_flags,x=i(A.HBLKSIZE),S=o([3,A.HBLKSIZE_s]),j=o([2,A.BLKSIZE]),E=o([2,3,A.BLKSIZE_s]),C=o([4,A.CBANDS]),P=o([4,A.CBANDS]),L=o([4,3]),D=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],I=r(2),B=e.mode==m.JOINT_STEREO?4:O.channels_out;!function(e,t,n,r,a,c,l,u,d,f){for(var p=o([2,576]),h=e.internal_flags,v=h.channels_out,b=e.mode==m.JOINT_STEREO?4:v,g=0;g<v;g++){firbuf=t[g];for(var y=n+576-350-s+192,_=0;_<576;_++){var w,O;w=firbuf[y+_+10];for(var x=O=0;x<9;x+=2)w+=q[x]*(firbuf[y+_+x]+firbuf[y+_+s-x]),O+=q[x+1]*(firbuf[y+_+x+1]+firbuf[y+_+s-x-1]);p[g][_]=w+O}a[r][g].en.assign(h.en[g]),a[r][g].thm.assign(h.thm[g]),2<b&&(c[r][g].en.assign(h.en[g+2]),c[r][g].thm.assign(h.thm[g+2]))}for(g=0;g<b;g++){var S=i(12),j=i(12),E=[0,0,0,0],T=p[1&g],k=0,C=3==g?h.nsPsy.attackthre_s:h.nsPsy.attackthre,A=1;if(2==g)for(_=0,x=576;0<x;++_,--x){var M=p[0][_],P=p[1][_];p[0][_]=M+P,p[1][_]=M-P}for(_=0;_<3;_++)j[_]=h.nsPsy.last_en_subshort[g][_+6],S[_]=j[_]/h.nsPsy.last_en_subshort[g][_+4],E[0]+=j[_];for(_=0;_<9;_++){for(var R=k+64,L=1;k<R;k++)L<Math.abs(T[k])&&(L=Math.abs(T[k]));h.nsPsy.last_en_subshort[g][_]=j[_+3]=L,E[1+_/3]+=L,L>j[_+3-2]?L/=j[_+3-2]:L=j[_+3-2]>10*L?j[_+3-2]/(10*L):0,S[_+3]=L}for(_=0;_<3;++_){var N=j[3*_+3]+j[3*_+4]+j[3*_+5],D=1;6*j[3*_+5]<N&&(D*=.5,6*j[3*_+4]<N&&(D*=.5)),u[g][_]=D}if(e.analysis){var I=S[0];for(_=1;_<12;_++)I<S[_]&&(I=S[_]);h.pinfo.ers[r][g]=h.pinfo.ers_save[g],h.pinfo.ers_save[g]=I}for(_=0;_<12;_++)0==d[g][_/3]&&S[_]>C&&(d[g][_/3]=_%3+1);for(_=1;_<4;_++){var B=E[_-1],H=E[_];Math.max(B,H)<4e4&&B<1.7*H&&H<1.7*B&&(1==_&&d[g][0]<=d[g][_]&&(d[g][0]=0),d[g][_]=0)}d[g][0]<=h.nsPsy.lastAttacks[g]&&(d[g][0]=0),3!=h.nsPsy.lastAttacks[g]&&d[g][0]+d[g][1]+d[g][2]+d[g][3]==0||((A=0)!=d[g][1]&&0!=d[g][0]&&(d[g][1]=0),0!=d[g][2]&&0!=d[g][1]&&(d[g][2]=0),0!=d[g][3]&&0!=d[g][2]&&(d[g][3]=0)),g<2?f[g]=A:0==A&&(f[0]=f[1]=0),l[g]=h.tot_ener[g]}}(e,t,n,a,c,l,h,L,D,I),function(e,t){var n=e.internal_flags;e.short_blocks!=f.short_block_coupled||0!=t[0]&&0!=t[1]||(t[0]=t[1]=0);for(var r=0;r<n.channels_out;r++)e.short_blocks==f.short_block_dispensed&&(t[r]=1),e.short_blocks==f.short_block_forced&&(t[r]=0)}(e,I);for(var Y=0;Y<B;Y++)H(e,t,n,Y,a,x,j,G=1&Y),g=a,y=Y,_=x,w=void 0,w=(b=e).internal_flags,2==b.athaa_loudapprox&&y<2&&(w.loudness_sq[g][y]=w.loudness_sq_save[y],w.loudness_sq_save[y]=u(_,w)),0!=I[G]?z(O,x,C[Y],P[Y],Y):F(O,Y);for(I[0]+I[1]==2&&e.mode==m.JOINT_STEREO&&X(C,P,O.mld_cb_l,O.ATH.cb_l,e.ATHlower*O.ATH.adjust,e.msfix,O.npart_l),Y=0;Y<B;Y++)0!=I[G=1&Y]&&k(O,C[Y],P[Y],Y);for(var K=0;K<3;K++){for(Y=0;Y<B;++Y)0!=I[G=1&Y]?V(O,Y,K):(U(e,t,n,Y,K,S,E,G),W(e,S,C[Y],P[Y],Y,K));for(I[0]+I[1]==0&&e.mode==m.JOINT_STEREO&&X(C,P,O.mld_cb_s,O.ATH.cb_s,e.ATHlower*O.ATH.adjust,e.msfix,O.npart_s),Y=0;Y<B;++Y)0==I[G=1&Y]&&T(O,C[Y],P[Y],Y,K)}for(Y=0;Y<B;Y++){var G;if(0==I[G=1&Y])for(var Q=0;Q<A.SBMAX_s;Q++){var Z=i(3);for(K=0;K<3;K++){var J=O.thm[Y].s[Q][K];if(J*=.8,2<=D[Y][K]||1==D[Y][K+1]){var $=0!=K?K-1:2,ee=M(O.thm[Y].s[Q][$],J,.36);J=Math.min(J,ee)}else 1==D[Y][K]?($=0!=K?K-1:2,ee=M(O.thm[Y].s[Q][$],J,.18),J=Math.min(J,ee)):(0!=K&&3==D[Y][K-1]||0==K&&3==O.nsPsy.lastAttacks[Y])&&($=2!=K?K+1:0,ee=M(O.thm[Y].s[Q][$],J,.18),J=Math.min(J,ee));J*=L[Y][K],Z[K]=J}for(K=0;K<3;K++)O.thm[Y].s[Q][K]=Z[K]}}for(Y=0;Y<B;Y++)O.nsPsy.lastAttacks[Y]=D[Y][2];for(function(e,t,n){for(var r=e.internal_flags,i=0;i<r.channels_out;i++){var o=A.NORM_TYPE;0!=t[i]?r.blocktype_old[i]==A.SHORT_TYPE&&(o=A.STOP_TYPE):(o=A.SHORT_TYPE,r.blocktype_old[i]==A.NORM_TYPE&&(r.blocktype_old[i]=A.START_TYPE),r.blocktype_old[i]==A.STOP_TYPE&&(r.blocktype_old[i]=A.SHORT_TYPE)),n[i]=r.blocktype_old[i],r.blocktype_old[i]=o}}(e,I,v),Y=0;Y<B;Y++){var te,ne,re,ie;1<Y?(te=p,ne=-2,re=A.NORM_TYPE,v[0]!=A.SHORT_TYPE&&v[1]!=A.SHORT_TYPE||(re=A.SHORT_TYPE),ie=l[a][Y-2]):(te=d,ne=0,re=v[Y],ie=c[a][Y]),te[ne+Y]=re==A.SHORT_TYPE?R(ie,O.masking_lower):N(ie,O.masking_lower),e.analysis&&(O.pinfo.pe[a][Y]=te[ne+Y])}return 0},this.psymodel_init=function(n){var r,o,a=n.internal_flags,s=!0,c=13,l=0,u=0,d=-8.25,f=-4.5,m=i(A.CBANDS),v=i(A.CBANDS),_=i(A.CBANDS),w=n.out_samplerate;switch(n.experimentalZ){default:case 0:s=!0;break;case 1:s=n.VBR!=h.vbr_mtrh&&n.VBR!=h.vbr_mt;break;case 2:s=!1;break;case 3:c=8,l=-1.75,u=-.0125,d=-8.25,f=-2.25}for(a.ms_ener_ratio_old=.25,a.blocktype_old[0]=a.blocktype_old[1]=A.NORM_TYPE,r=0;r<4;++r){for(var O=0;O<A.CBANDS;++O)a.nb_1[r][O]=1e20,a.nb_2[r][O]=1e20,a.nb_s1[r][O]=a.nb_s2[r][O]=1;for(var x=0;x<A.SBMAX_l;x++)a.en[r].l[x]=1e20,a.thm[r].l[x]=1e20;for(O=0;O<3;++O){for(x=0;x<A.SBMAX_s;x++)a.en[r].s[x][O]=1e20,a.thm[r].s[x][O]=1e20;a.nsPsy.lastAttacks[r]=0}for(O=0;O<9;O++)a.nsPsy.last_en_subshort[r][O]=10}for(a.loudness_sq_save[0]=a.loudness_sq_save[1]=0,a.npart_l=Q(a.numlines_l,a.bo_l,a.bm_l,m,v,a.mld_l,a.PSY.bo_l_weight,w,A.BLKSIZE,a.scalefac_band.l,A.BLKSIZE/1152,A.SBMAX_l),r=0;r<a.npart_l;r++){var S=l;m[r]>=c&&(S=u*(m[r]-c)/(24-c)+l*(24-m[r])/(24-c)),_[r]=Math.pow(10,S/10),0<a.numlines_l[r]?a.rnumlines_l[r]=1/a.numlines_l[r]:a.rnumlines_l[r]=0}for(a.s3_ll=Z(a.s3ind,a.npart_l,m,v,_,s),O=0,r=0;r<a.npart_l;r++){T=p.MAX_VALUE;for(var j=0;j<a.numlines_l[r];j++,O++){var E=w*O/(1e3*A.BLKSIZE);k=this.ATHformula(1e3*E,n)-20,k=Math.pow(10,.1*k),(k*=a.numlines_l[r])<T&&(T=k)}a.ATH.cb_l[r]=T,6<(T=20*m[r]/10-20)&&(T=100),T<-15&&(T=-15),T-=8,a.minval_l[r]=Math.pow(10,T/10)*a.numlines_l[r]}for(a.npart_s=Q(a.numlines_s,a.bo_s,a.bm_s,m,v,a.mld_s,a.PSY.bo_s_weight,w,A.BLKSIZE_s,a.scalefac_band.s,A.BLKSIZE_s/384,A.SBMAX_s),r=O=0;r<a.npart_s;r++){var T;for(S=d,m[r]>=c&&(S=f*(m[r]-c)/(24-c)+d*(24-m[r])/(24-c)),_[r]=Math.pow(10,S/10),T=p.MAX_VALUE,j=0;j<a.numlines_s[r];j++,O++){var k;E=w*O/(1e3*A.BLKSIZE_s),k=this.ATHformula(1e3*E,n)-20,k=Math.pow(10,.1*k),(k*=a.numlines_s[r])<T&&(T=k)}a.ATH.cb_s[r]=T,T=7*m[r]/12-7,12<m[r]&&(T*=1+3.1*Math.log(1+T)),m[r]<12&&(T*=1+2.3*Math.log(1-T)),T<-15&&(T=-15),T-=8,a.minval_s[r]=Math.pow(10,T/10)*a.numlines_s[r]}a.s3_ss=Z(a.s3ind_s,a.npart_s,m,v,_,s),b=Math.pow(10,9/16),g=Math.pow(10,1.5),y=Math.pow(10,1.5),e.init_fft(a),a.decay=Math.exp(-1*t/(.01*w/192)),o=3.5,0!=(2&n.exp_nspsytune)&&(o=1),0<Math.abs(n.msfix)&&(o=n.msfix),n.msfix=o;for(var C=0;C<a.npart_l;C++)a.s3ind[C][1]>a.npart_l-1&&(a.s3ind[C][1]=a.npart_l-1);var M=576*a.mode_gr/w;if(a.ATH.decay=Math.pow(10,-1.2*M),a.ATH.adjust=.01,-(a.ATH.adjustLimit=1)!=n.ATHtype){var P=n.out_samplerate/A.BLKSIZE,R=0;for(r=E=0;r<A.BLKSIZE/2;++r)E+=P,a.ATH.eql_w[r]=1/Math.pow(10,this.ATHformula(E,n)/10),R+=a.ATH.eql_w[r];for(R=1/R,r=A.BLKSIZE/2;0<=--r;)a.ATH.eql_w[r]*=R}for(C=O=0;C<a.npart_s;++C)for(r=0;r<a.numlines_s[C];++r)++O;for(C=O=0;C<a.npart_l;++C)for(r=0;r<a.numlines_l[C];++r)++O;for(r=O=0;r<a.npart_l;r++)E=w*(O+a.numlines_l[r]/2)/(1*A.BLKSIZE),a.mld_cb_l[r]=J(E),O+=a.numlines_l[r];for(;r<A.CBANDS;++r)a.mld_cb_l[r]=1;for(r=O=0;r<a.npart_s;r++)E=w*(O+a.numlines_s[r]/2)/(1*A.BLKSIZE_s),a.mld_cb_s[r]=J(E),O+=a.numlines_s[r];for(;r<A.CBANDS;++r)a.mld_cb_s[r]=1;return 0},this.ATHformula=function(e,t){var n;switch(t.ATHtype){case 0:n=$(e,9);break;case 1:n=$(e,-1);break;case 2:n=$(e,0);break;case 3:n=$(e,1)+6;break;case 4:n=$(e,t.ATHcurve);break;default:n=$(e,0)}return n}}function L(){var e,t,n,o,c,l=this;L.V9=410,L.V8=420,L.V7=430,L.V6=440,L.V5=450,L.V4=460,L.V3=470,L.V2=480,L.V1=490,L.V0=500,L.R3MIX=1e3,L.STANDARD=1001,L.EXTREME=1002,L.INSANE=1003,L.STANDARD_FAST=1004,L.EXTREME_FAST=1005,L.MEDIUM=1006,L.MEDIUM_FAST=1007,L.LAME_MAXMP3BUFFER=147456;var d,p,v,g=new R;function _(){this.lowerlimit=0}function x(e,t){this.lowpass=t}this.enc=new A,this.setModules=function(r,i,a,s,l,u,f,h,m){e=r,t=i,n=a,o=s,c=l,d=u,p=h,v=m,this.enc.setModules(t,g,o,d)};var S=4294479419;function j(e){return 1<e?0:e<=0?1:Math.cos(Math.PI/2*e)}function E(e,t){switch(e){case 44100:return t.version=1,0;case 48e3:return t.version=1;case 32e3:return t.version=1,2;case 22050:return t.version=0;case 24e3:return t.version=0,1;case 16e3:return t.version=0,2;case 11025:return t.version=0;case 12e3:return t.version=0,1;case 8e3:return t.version=0,2;default:return t.version=0,-1}}function k(e,t,n){n<16e3&&(t=2);for(var r=w.bitrate_table[t][1],i=2;i<=14;i++)0<w.bitrate_table[t][i]&&Math.abs(w.bitrate_table[t][i]-e)<Math.abs(r-e)&&(r=w.bitrate_table[t][i]);return r}function C(e,t,n){n<16e3&&(t=2);for(var r=0;r<=14;r++)if(0<w.bitrate_table[t][r]&&w.bitrate_table[t][r]==e)return r;return-1}function M(e,t){var n=[new x(8,2e3),new x(16,3700),new x(24,3900),new x(32,5500),new x(40,7e3),new x(48,7500),new x(56,1e4),new x(64,11e3),new x(80,13500),new x(96,15100),new x(112,15600),new x(128,17e3),new x(160,17500),new x(192,18600),new x(224,19400),new x(256,19700),new x(320,20500)],r=l.nearestBitrateFullIndex(t);e.lowerlimit=n[r].lowpass}function N(e){var t=A.BLKSIZE+e.framesize-A.FFTOFFSET;return Math.max(t,512+e.framesize-32)}function D(e,t,n,r,i,o){var a=l.enc.lame_encode_mp3_frame(e,t,n,r,i,o);return e.frameNum++,a}function I(){this.n_in=0,this.n_out=0}function B(){this.num_used=0}function H(e,t,n){var r=Math.PI*t;(e/=n)<0&&(e=0),1<e&&(e=1);var i=e-.5,o=.42-.5*Math.cos(2*e*Math.PI)+.08*Math.cos(4*e*Math.PI);return Math.abs(i)<1e-9?r/Math.PI:o*Math.sin(n*r*i)/(Math.PI*n*i)}function U(e,t,n,r,o,a,s,c,l){var u,d,f=e.internal_flags,p=0,h=e.out_samplerate/function e(t,n){return 0!=n?e(n,t%n):t}(e.out_samplerate,e.in_samplerate);P.BPC<h&&(h=P.BPC);var m=Math.abs(f.resample_ratio-Math.floor(.5+f.resample_ratio))<1e-4?1:0,v=1/f.resample_ratio;1<v&&(v=1);var b=31;0==b%2&&--b;var g=(b+=m)+1;if(0==f.fill_buffer_resample_init){for(f.inbuf_old[0]=i(g),f.inbuf_old[1]=i(g),u=0;u<=2*h;++u)f.blackfilt[u]=i(g);for(f.itime[0]=0,p=f.itime[1]=0;p<=2*h;p++){var y=0,_=(p-h)/(2*h);for(u=0;u<=b;u++)y+=f.blackfilt[p][u]=H(u-_,v,b);for(u=0;u<=b;u++)f.blackfilt[p][u]/=y}f.fill_buffer_resample_init=1}var w=f.inbuf_old[l];for(d=0;d<r;d++){var O,x;if(O=d*f.resample_ratio,s<=b+(p=0|Math.floor(O-f.itime[l]))-b/2)break;_=O-f.itime[l]-(p+b%2*.5),x=0|Math.floor(2*_*h+h+.5);var S=0;for(u=0;u<=b;++u){var j=u+p-b/2;S+=(j<0?w[g+j]:o[a+j])*f.blackfilt[x][u]}t[n+d]=S}if(c.num_used=Math.min(s,b+p-b/2),f.itime[l]+=c.num_used-d*f.resample_ratio,c.num_used>=g)for(u=0;u<g;u++)w[u]=o[a+c.num_used+u-g];else{var E=g-c.num_used;for(u=0;u<E;++u)w[u]=w[u+c.num_used];for(p=0;u<g;++u,++p)w[u]=o[a+p]}return d}function q(e,t,n,r,i,o){var a=e.internal_flags;if(a.resample_ratio<.9999||1.0001<a.resample_ratio)for(var s=0;s<a.channels_out;s++){var c=new B;o.n_out=U(e,t[s],a.mf_size,e.framesize,n[s],r,i,c,s),o.n_in=c.num_used}else{o.n_out=Math.min(e.framesize,i),o.n_in=o.n_out;for(var l=0;l<o.n_out;++l)t[0][a.mf_size+l]=n[0][r+l],2==a.channels_out&&(t[1][a.mf_size+l]=n[1][r+l])}}this.lame_init=function(){var e,t,n=new function(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=m.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null};return 0!=((e=n).class_id=S,t=e.internal_flags=new P,e.mode=m.NOT_SET,e.original=1,e.in_samplerate=44100,e.num_channels=2,e.num_samples=-1,e.bWriteVbrTag=!0,e.quality=-1,e.short_blocks=null,t.subblock_gain=-1,e.lowpassfreq=0,e.highpassfreq=0,e.lowpasswidth=-1,e.highpasswidth=-1,e.VBR=h.vbr_off,e.VBR_q=4,e.ATHcurve=-1,e.VBR_mean_bitrate_kbps=128,e.VBR_min_bitrate_kbps=0,e.VBR_max_bitrate_kbps=0,e.VBR_hard_min=0,t.VBR_min_bitrate=1,t.VBR_max_bitrate=13,e.quant_comp=-1,e.quant_comp_short=-1,e.msfix=-1,t.resample_ratio=1,t.OldValue[0]=180,t.OldValue[1]=180,t.CurrentStep[0]=4,t.CurrentStep[1]=4,t.masking_lower=1,t.nsPsy.attackthre=-1,t.nsPsy.attackthre_s=-1,e.scale=-1,e.athaa_type=-1,e.ATHtype=-1,e.athaa_loudapprox=-1,e.athaa_sensitivity=0,e.useTemporal=null,e.interChRatio=-1,t.mf_samples_to_encode=A.ENCDELAY+A.POSTDELAY,e.encoder_padding=0,t.mf_size=A.ENCDELAY-A.MDCTDELAY,e.findReplayGain=!1,e.decode_on_the_fly=!1,t.decode_on_the_fly=!1,t.findReplayGain=!1,t.findPeakSample=!1,t.RadioGain=0,t.AudiophileGain=0,t.noclipGainChange=0,t.noclipScale=-1,e.preset=0,e.write_id3tag_automatic=!0,0)?null:(n.lame_allocated_gfp=1,n)},this.nearestBitrateFullIndex=function(e){var t=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],n=0,r=0,i=0,o=0;o=t[16],r=t[i=16],n=16;for(var a=0;a<16;a++)if(Math.max(e,t[a+1])!=e){o=t[a+1],i=a+1,r=t[a],n=a;break}return e-r<o-e?n:i},this.lame_init_params=function(s){var l,x,P,L=s.internal_flags;if(L.Class_ID=0,null==L.ATH&&(L.ATH=new function(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=i(A.SBMAX_l),this.s=i(A.SBMAX_s),this.psfb21=i(A.PSFB21),this.psfb12=i(A.PSFB12),this.cb_l=i(A.CBANDS),this.cb_s=i(A.CBANDS),this.eql_w=i(A.BLKSIZE/2)}),null==L.PSY&&(L.PSY=new function(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=i(A.SBMAX_l),this.bo_s_weight=i(A.SBMAX_s)}),null==L.rgdata&&(L.rgdata=new function(){}),L.channels_in=s.num_channels,1==L.channels_in&&(s.mode=m.MONO),L.channels_out=s.mode==m.MONO?1:2,L.mode_ext=A.MPG_MD_MS_LR,s.mode==m.MONO&&(s.force_ms=!1),s.VBR==h.vbr_off&&128!=s.VBR_mean_bitrate_kbps&&0==s.brate&&(s.brate=s.VBR_mean_bitrate_kbps),s.VBR==h.vbr_off||s.VBR==h.vbr_mtrh||s.VBR==h.vbr_mt||(s.free_format=!1),s.VBR==h.vbr_off&&0==s.brate&&y.EQ(s.compression_ratio,0)&&(s.compression_ratio=11.025),s.VBR==h.vbr_off&&0<s.compression_ratio&&(0==s.out_samplerate&&(s.out_samplerate=map2MP3Frequency(int(.97*s.in_samplerate))),s.brate=0|16*s.out_samplerate*L.channels_out/(1e3*s.compression_ratio),L.samplerate_index=E(s.out_samplerate,s),s.free_format||(s.brate=k(s.brate,s.version,s.out_samplerate))),0!=s.out_samplerate&&(s.out_samplerate<16e3?(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,8),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,64)):s.out_samplerate<32e3?(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,8),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,160)):(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,32),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,320))),0==s.lowpassfreq){var N=16e3;switch(s.VBR){case h.vbr_off:M(D=new _,s.brate),N=D.lowerlimit;break;case h.vbr_abr:var D;M(D=new _,s.VBR_mean_bitrate_kbps),N=D.lowerlimit;break;case h.vbr_rh:var I=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=s.VBR_q&&s.VBR_q<=9){var B=I[s.VBR_q],H=I[s.VBR_q+1],U=s.VBR_q_frac;N=linear_int(B,H,U)}else N=19500;break;default:I=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950],0<=s.VBR_q&&s.VBR_q<=9?(B=I[s.VBR_q],H=I[s.VBR_q+1],U=s.VBR_q_frac,N=linear_int(B,H,U)):N=19500}s.mode!=m.MONO||s.VBR!=h.vbr_off&&s.VBR!=h.vbr_abr||(N*=1.5),s.lowpassfreq=0|N}if(0==s.out_samplerate&&(2*s.lowpassfreq>s.in_samplerate&&(s.lowpassfreq=s.in_samplerate/2),s.out_samplerate=(l=0|s.lowpassfreq,P=44100,48e3<=(x=s.in_samplerate)?P=48e3:44100<=x?P=44100:32e3<=x?P=32e3:24e3<=x?P=24e3:22050<=x?P=22050:16e3<=x?P=16e3:12e3<=x?P=12e3:11025<=x?P=11025:8e3<=x&&(P=8e3),-1==l?P:(l<=15960&&(P=44100),l<=15250&&(P=32e3),l<=11220&&(P=24e3),l<=9970&&(P=22050),l<=7230&&(P=16e3),l<=5420&&(P=12e3),l<=4510&&(P=11025),l<=3970&&(P=8e3),x<P?44100<x?48e3:32e3<x?44100:24e3<x?32e3:22050<x?24e3:16e3<x?22050:12e3<x?16e3:11025<x?12e3:8e3<x?11025:8e3:P))),s.lowpassfreq=Math.min(20500,s.lowpassfreq),s.lowpassfreq=Math.min(s.out_samplerate/2,s.lowpassfreq),s.VBR==h.vbr_off&&(s.compression_ratio=16*s.out_samplerate*L.channels_out/(1e3*s.brate)),s.VBR==h.vbr_abr&&(s.compression_ratio=16*s.out_samplerate*L.channels_out/(1e3*s.VBR_mean_bitrate_kbps)),s.bWriteVbrTag||(s.findReplayGain=!1,s.decode_on_the_fly=!1,L.findPeakSample=!1),L.findReplayGain=s.findReplayGain,L.decode_on_the_fly=s.decode_on_the_fly,L.decode_on_the_fly&&(L.findPeakSample=!0),L.findReplayGain&&e.InitGainAnalysis(L.rgdata,s.out_samplerate)==b.INIT_GAIN_ANALYSIS_ERROR)return s.internal_flags=null,-6;switch(L.decode_on_the_fly&&!s.decode_only&&(null!=L.hip&&v.hip_decode_exit(L.hip),L.hip=v.hip_decode_init()),L.mode_gr=s.out_samplerate<=24e3?1:2,s.framesize=576*L.mode_gr,s.encoder_delay=A.ENCDELAY,L.resample_ratio=s.in_samplerate/s.out_samplerate,s.VBR){case h.vbr_mt:case h.vbr_rh:case h.vbr_mtrh:s.compression_ratio=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5][s.VBR_q];break;case h.vbr_abr:s.compression_ratio=16*s.out_samplerate*L.channels_out/(1e3*s.VBR_mean_bitrate_kbps);break;default:s.compression_ratio=16*s.out_samplerate*L.channels_out/(1e3*s.brate)}if(s.mode==m.NOT_SET&&(s.mode=m.JOINT_STEREO),0<s.highpassfreq?(L.highpass1=2*s.highpassfreq,0<=s.highpasswidth?L.highpass2=2*(s.highpassfreq+s.highpasswidth):L.highpass2=2*s.highpassfreq,L.highpass1/=s.out_samplerate,L.highpass2/=s.out_samplerate):(L.highpass1=0,L.highpass2=0),0<s.lowpassfreq?(L.lowpass2=2*s.lowpassfreq,0<=s.lowpasswidth?(L.lowpass1=2*(s.lowpassfreq-s.lowpasswidth),L.lowpass1<0&&(L.lowpass1=0)):L.lowpass1=2*s.lowpassfreq,L.lowpass1/=s.out_samplerate,L.lowpass2/=s.out_samplerate):(L.lowpass1=0,L.lowpass2=0),function(e){var t=e.internal_flags,n=32,r=-1;if(0<t.lowpass1){for(var i=999,o=0;o<=31;o++)(l=o/31)>=t.lowpass2&&(n=Math.min(n,o)),t.lowpass1<l&&l<t.lowpass2&&(i=Math.min(i,o));t.lowpass1=999==i?(n-.75)/31:(i-.75)/31,t.lowpass2=n/31}if(0<t.highpass2&&t.highpass2<.75/31*.9&&(t.highpass1=0,t.highpass2=0,u.err.println("Warning: highpass filter disabled.  highpass frequency too small\n")),0<t.highpass2){var a=-1;for(o=0;o<=31;o++)(l=o/31)<=t.highpass1&&(r=Math.max(r,o)),t.highpass1<l&&l<t.highpass2&&(a=Math.max(a,o));t.highpass1=r/31,t.highpass2=-1==a?(r+.75)/31:(a+.75)/31}for(o=0;o<32;o++){var s,c,l=o/31;s=t.highpass2>t.highpass1?j((t.highpass2-l)/(t.highpass2-t.highpass1+1e-20)):1,c=t.lowpass2>t.lowpass1?j((l-t.lowpass1)/(t.lowpass2-t.lowpass1+1e-20)):1,t.amp_filter[o]=s*c}}(s),L.samplerate_index=E(s.out_samplerate,s),L.samplerate_index<0)return s.internal_flags=null,-1;if(s.VBR==h.vbr_off){if(s.free_format)L.bitrate_index=0;else if(s.brate=k(s.brate,s.version,s.out_samplerate),L.bitrate_index=C(s.brate,s.version,s.out_samplerate),L.bitrate_index<=0)return s.internal_flags=null,-1}else L.bitrate_index=1;s.analysis&&(s.bWriteVbrTag=!1),null!=L.pinfo&&(s.bWriteVbrTag=!1),t.init_bit_stream_w(L);for(var q,V,F,W=L.samplerate_index+3*s.version+6*(s.out_samplerate<16e3?1:0),z=0;z<A.SBMAX_l+1;z++)L.scalefac_band.l[z]=o.sfBandIndex[W].l[z];for(z=0;z<A.PSFB21+1;z++){var X=(L.scalefac_band.l[22]-L.scalefac_band.l[21])/A.PSFB21,Y=L.scalefac_band.l[21]+z*X;L.scalefac_band.psfb21[z]=Y}for(L.scalefac_band.psfb21[A.PSFB21]=576,z=0;z<A.SBMAX_s+1;z++)L.scalefac_band.s[z]=o.sfBandIndex[W].s[z];for(z=0;z<A.PSFB12+1;z++)X=(L.scalefac_band.s[13]-L.scalefac_band.s[12])/A.PSFB12,Y=L.scalefac_band.s[12]+z*X,L.scalefac_band.psfb12[z]=Y;for(L.scalefac_band.psfb12[A.PSFB12]=192,1==s.version?L.sideinfo_len=1==L.channels_out?21:36:L.sideinfo_len=1==L.channels_out?13:21,s.error_protection&&(L.sideinfo_len+=2),V=(q=s).internal_flags,q.frameNum=0,q.write_id3tag_automatic&&p.id3tag_write_v2(q),V.bitrate_stereoMode_Hist=a([16,5]),V.bitrate_blockType_Hist=a([16,6]),V.PeakSample=0,q.bWriteVbrTag&&d.InitVbrTag(q),L.Class_ID=S,F=0;F<19;F++)L.nsPsy.pefirbuf[F]=700*L.mode_gr*L.channels_out;switch(-1==s.ATHtype&&(s.ATHtype=4),s.VBR){case h.vbr_mt:s.VBR=h.vbr_mtrh;case h.vbr_mtrh:null==s.useTemporal&&(s.useTemporal=!1),n.apply_preset(s,500-10*s.VBR_q,0),s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),s.quality<5&&(s.quality=0),5<s.quality&&(s.quality=5),L.PSY.mask_adjust=s.maskingadjust,L.PSY.mask_adjust_short=s.maskingadjust_short,s.experimentalY?L.sfb21_extra=!1:L.sfb21_extra=44e3<s.out_samplerate,L.iteration_loop=new VBRNewIterationLoop(c);break;case h.vbr_rh:n.apply_preset(s,500-10*s.VBR_q,0),L.PSY.mask_adjust=s.maskingadjust,L.PSY.mask_adjust_short=s.maskingadjust_short,s.experimentalY?L.sfb21_extra=!1:L.sfb21_extra=44e3<s.out_samplerate,6<s.quality&&(s.quality=6),s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),L.iteration_loop=new VBROldIterationLoop(c);break;default:var K;L.sfb21_extra=!1,s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),(K=s.VBR)==h.vbr_off&&(s.VBR_mean_bitrate_kbps=s.brate),n.apply_preset(s,s.VBR_mean_bitrate_kbps,0),s.VBR=K,L.PSY.mask_adjust=s.maskingadjust,L.PSY.mask_adjust_short=s.maskingadjust_short,L.iteration_loop=K==h.vbr_off?new function(e){var t=e;this.quantize=t,this.iteration_loop=function(e,t,n,o){var a,s=e.internal_flags,c=i(T.SFBMAX),l=i(576),u=r(2),d=0,f=s.l3_side,p=new O(d);this.quantize.rv.ResvFrameBegin(e,p),d=p.bits;for(var h=0;h<s.mode_gr;h++){a=this.quantize.qupvt.on_pe(e,t,u,d,h,h),s.mode_ext==A.MPG_MD_MS_LR&&(this.quantize.ms_convert(s.l3_side,h),this.quantize.qupvt.reduce_side(u,n[h],d,a));for(var m=0;m<s.channels_out;m++){var v,b,g=f.tt[h][m];g.block_type!=A.SHORT_TYPE?(v=0,b=s.PSY.mask_adjust-v):(v=0,b=s.PSY.mask_adjust_short-v),s.masking_lower=Math.pow(10,.1*b),this.quantize.init_outer_loop(s,g),this.quantize.init_xrpow(s,g,l)&&(this.quantize.qupvt.calc_xmin(e,o[h][m],g,c),this.quantize.outer_loop(e,g,c,l,m,u[m])),this.quantize.iteration_finish_one(s,h,m)}}this.quantize.rv.ResvFrameEnd(s,d)}}(c):new ABRIterationLoop(c)}if(s.VBR!=h.vbr_off){if(L.VBR_min_bitrate=1,L.VBR_max_bitrate=14,s.out_samplerate<16e3&&(L.VBR_max_bitrate=8),0!=s.VBR_min_bitrate_kbps&&(s.VBR_min_bitrate_kbps=k(s.VBR_min_bitrate_kbps,s.version,s.out_samplerate),L.VBR_min_bitrate=C(s.VBR_min_bitrate_kbps,s.version,s.out_samplerate),L.VBR_min_bitrate<0))return-1;if(0!=s.VBR_max_bitrate_kbps&&(s.VBR_max_bitrate_kbps=k(s.VBR_max_bitrate_kbps,s.version,s.out_samplerate),L.VBR_max_bitrate=C(s.VBR_max_bitrate_kbps,s.version,s.out_samplerate),L.VBR_max_bitrate<0))return-1;s.VBR_min_bitrate_kbps=w.bitrate_table[s.version][L.VBR_min_bitrate],s.VBR_max_bitrate_kbps=w.bitrate_table[s.version][L.VBR_max_bitrate],s.VBR_mean_bitrate_kbps=Math.min(w.bitrate_table[s.version][L.VBR_max_bitrate],s.VBR_mean_bitrate_kbps),s.VBR_mean_bitrate_kbps=Math.max(w.bitrate_table[s.version][L.VBR_min_bitrate],s.VBR_mean_bitrate_kbps)}return s.tune&&(L.PSY.mask_adjust+=s.tune_value_a,L.PSY.mask_adjust_short+=s.tune_value_a),function(e){var t=e.internal_flags;switch(e.quality){default:case 9:t.psymodel=0,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 8:e.quality=7;case 7:t.psymodel=1,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 6:case 5:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=0,t.full_outer_loop=0;break;case 4:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 3:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=1,-(t.noise_shaping_stop=1)==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 2:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),0==t.substep_shaping&&(t.substep_shaping=2),t.noise_shaping_amp=1,-(t.noise_shaping_stop=1)==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 1:case 0:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),0==t.substep_shaping&&(t.substep_shaping=2),t.noise_shaping_amp=2,-(t.noise_shaping_stop=1)==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0}}(s),s.athaa_type<0?L.ATH.useAdjust=3:L.ATH.useAdjust=s.athaa_type,L.ATH.aaSensitivityP=Math.pow(10,s.athaa_sensitivity/-10),null==s.short_blocks&&(s.short_blocks=f.short_block_allowed),s.short_blocks!=f.short_block_allowed||s.mode!=m.JOINT_STEREO&&s.mode!=m.STEREO||(s.short_blocks=f.short_block_coupled),s.quant_comp<0&&(s.quant_comp=1),s.quant_comp_short<0&&(s.quant_comp_short=0),s.msfix<0&&(s.msfix=0),s.exp_nspsytune=1|s.exp_nspsytune,s.internal_flags.nsPsy.attackthre<0&&(s.internal_flags.nsPsy.attackthre=R.NSATTACKTHRE),s.internal_flags.nsPsy.attackthre_s<0&&(s.internal_flags.nsPsy.attackthre_s=R.NSATTACKTHRE_S),s.scale<0&&(s.scale=1),s.ATHtype<0&&(s.ATHtype=4),s.ATHcurve<0&&(s.ATHcurve=4),s.athaa_loudapprox<0&&(s.athaa_loudapprox=2),s.interChRatio<0&&(s.interChRatio=0),null==s.useTemporal&&(s.useTemporal=!0),L.slot_lag=L.frac_SpF=0,s.VBR==h.vbr_off&&(L.slot_lag=L.frac_SpF=72e3*(s.version+1)*s.brate%s.out_samplerate|0),o.iteration_init(s),g.psymodel_init(s),0},this.lame_encode_flush=function(e,n,r,i){var o,a,c,l,u=e.internal_flags,d=s([2,1152]),f=0,h=u.mf_samples_to_encode-A.POSTDELAY,m=N(e);if(u.mf_samples_to_encode<1)return 0;for(o=0,e.in_samplerate!=e.out_samplerate&&(h+=16*e.out_samplerate/e.in_samplerate),(c=e.framesize-h%e.framesize)<576&&(c+=e.framesize),l=(h+(e.encoder_padding=c))/e.framesize;0<l&&0<=f;){var v=m-u.mf_size,b=e.frameNum;v*=e.in_samplerate,1152<(v/=e.out_samplerate)&&(v=1152),v<1&&(v=1),a=i-o,0==i&&(a=0),r+=f=this.lame_encode_buffer(e,d[0],d[1],v,n,r,a),o+=f,l-=b!=e.frameNum?1:0}if(f<(u.mf_samples_to_encode=0))return f;if(a=i-o,0==i&&(a=0),t.flush_bitstream(e),(f=t.copy_buffer(u,n,r,a,1))<0)return f;if(r+=f,a=i-(o+=f),0==i&&(a=0),e.write_id3tag_automatic){if(p.id3tag_write_v1(e),(f=t.copy_buffer(u,n,r,a,0))<0)return f;o+=f}return o},this.lame_encode_buffer=function(n,r,o,a,s,c,l){var u,d,f=n.internal_flags,p=[null,null];if(f.Class_ID!=S)return-3;if(0==a)return 0;d=a,(null==(u=f).in_buffer_0||u.in_buffer_nsamples<d)&&(u.in_buffer_0=i(d),u.in_buffer_1=i(d),u.in_buffer_nsamples=d),p[0]=f.in_buffer_0,p[1]=f.in_buffer_1;for(var h=0;h<a;h++)p[0][h]=r[h],1<f.channels_in&&(p[1][h]=o[h]);return function(n,r,i,o,a,s,c){var l,u,d,f,p,h=n.internal_flags,m=0,v=[null,null],g=[null,null];if(h.Class_ID!=S)return-3;if(0==o)return 0;if((p=t.copy_buffer(h,a,s,c,0))<0)return p;if(s+=p,m+=p,g[0]=r,g[1]=i,y.NEQ(n.scale,0)&&y.NEQ(n.scale,1))for(u=0;u<o;++u)g[0][u]*=n.scale,2==h.channels_out&&(g[1][u]*=n.scale);if(y.NEQ(n.scale_left,0)&&y.NEQ(n.scale_left,1))for(u=0;u<o;++u)g[0][u]*=n.scale_left;if(y.NEQ(n.scale_right,0)&&y.NEQ(n.scale_right,1))for(u=0;u<o;++u)g[1][u]*=n.scale_right;if(2==n.num_channels&&1==h.channels_out)for(u=0;u<o;++u)g[0][u]=.5*(g[0][u]+g[1][u]),g[1][u]=0;f=N(n),v[0]=h.mfbuf[0],v[1]=h.mfbuf[1];for(var _=0;0<o;){var w,O,x=[null,null];x[0]=g[0],x[1]=g[1];var j=new I;if(q(n,v,x,_,o,j),w=j.n_in,O=j.n_out,h.findReplayGain&&!h.decode_on_the_fly&&e.AnalyzeSamples(h.rgdata,v[0],h.mf_size,v[1],h.mf_size,O,h.channels_out)==b.GAIN_ANALYSIS_ERROR)return-6;if(o-=w,_+=w,h.channels_out,h.mf_size+=O,h.mf_samples_to_encode<1&&(h.mf_samples_to_encode=A.ENCDELAY+A.POSTDELAY),h.mf_samples_to_encode+=O,h.mf_size>=f){var E=c-m;if(0==c&&(E=0),(l=D(n,v[0],v[1],a,s,E))<0)return l;for(s+=l,m+=l,h.mf_size-=n.framesize,h.mf_samples_to_encode-=n.framesize,d=0;d<h.channels_out;d++)for(u=0;u<h.mf_size;u++)v[d][u]=v[d][u+n.framesize]}}return m}(n,p[0],p[1],a,s,c,l)}}T.SFBMAX=3*A.SBMAX_s,A.ENCDELAY=576,A.POSTDELAY=1152,A.FFTOFFSET=224+(A.MDCTDELAY=48),A.DECDELAY=528,A.SBLIMIT=32,A.CBANDS=64,A.SBPSY_l=21,A.SBPSY_s=12,A.SBMAX_l=22,A.SBMAX_s=13,A.PSFB21=6,A.PSFB12=6,A.HBLKSIZE=(A.BLKSIZE=1024)/2+1,A.HBLKSIZE_s=(A.BLKSIZE_s=256)/2+1,A.NORM_TYPE=0,A.START_TYPE=1,A.SHORT_TYPE=2,A.STOP_TYPE=3,A.MPG_MD_LR_LR=0,A.MPG_MD_LR_I=1,A.MPG_MD_MS_LR=2,A.MPG_MD_MS_I=3,A.fircoef=[-.1039435,-.1892065,5*-.0432472,-.155915,3898045e-23,.0467745*5,.50455,.756825,.187098*5],P.MFSIZE=3456+A.ENCDELAY-A.MDCTDELAY,P.MAX_HEADER_BUF=256,P.MAX_BITS_PER_CHANNEL=4095,P.MAX_BITS_PER_GRANULE=7680,P.BPC=320,T.SFBMAX=3*A.SBMAX_s,e.Mp3Encoder=function(e,t,r){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),e=1,t=44100,r=128);var i=new L,o=new function(){this.setModules=function(e,t){}},a=new b,s=new y,c=new function(){function e(e,t,n,r,i,o,a,s,c,l,u,d,f,p,h){this.vbr_q=e,this.quant_comp=t,this.quant_comp_s=n,this.expY=r,this.st_lrm=i,this.st_s=o,this.masking_adj=a,this.masking_adj_short=s,this.ath_lower=c,this.ath_curve=l,this.ath_sensitivity=u,this.interch=d,this.safejoint=f,this.sfb21mod=p,this.msfix=h}function t(e,t,n,r,i,o,a,s,c,l,u,d,f,p){this.quant_comp=t,this.quant_comp_s=n,this.safejoint=r,this.nsmsfix=i,this.st_lrm=o,this.st_s=a,this.nsbass=s,this.scale=c,this.masking_adj=l,this.ath_lower=u,this.ath_curve=d,this.interch=f,this.sfscale=p}var n;this.setModules=function(e){n=e};var r=[new e(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new e(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new e(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new e(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new e(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new e(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new e(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new e(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new e(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],i=[new e(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new e(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new e(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new e(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new e(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new e(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new e(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new e(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new e(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function o(e,t,n){var o,a,s=e.VBR==h.vbr_rh?r:i,c=e.VBR_q_frac,l=s[t],u=s[t+1],d=l;l.st_lrm=l.st_lrm+c*(u.st_lrm-l.st_lrm),l.st_s=l.st_s+c*(u.st_s-l.st_s),l.masking_adj=l.masking_adj+c*(u.masking_adj-l.masking_adj),l.masking_adj_short=l.masking_adj_short+c*(u.masking_adj_short-l.masking_adj_short),l.ath_lower=l.ath_lower+c*(u.ath_lower-l.ath_lower),l.ath_curve=l.ath_curve+c*(u.ath_curve-l.ath_curve),l.ath_sensitivity=l.ath_sensitivity+c*(u.ath_sensitivity-l.ath_sensitivity),l.interch=l.interch+c*(u.interch-l.interch),l.msfix=l.msfix+c*(u.msfix-l.msfix),o=e,(a=d.vbr_q)<0&&(a=0),9<a&&(a=9),o.VBR_q=a,(o.VBR_q_frac=0)!=n?e.quant_comp=d.quant_comp:0<Math.abs(e.quant_comp- -1)||(e.quant_comp=d.quant_comp),0!=n?e.quant_comp_short=d.quant_comp_s:0<Math.abs(e.quant_comp_short- -1)||(e.quant_comp_short=d.quant_comp_s),0!=d.expY&&(e.experimentalY=0!=d.expY),0!=n?e.internal_flags.nsPsy.attackthre=d.st_lrm:0<Math.abs(e.internal_flags.nsPsy.attackthre- -1)||(e.internal_flags.nsPsy.attackthre=d.st_lrm),0!=n?e.internal_flags.nsPsy.attackthre_s=d.st_s:0<Math.abs(e.internal_flags.nsPsy.attackthre_s- -1)||(e.internal_flags.nsPsy.attackthre_s=d.st_s),0!=n?e.maskingadjust=d.masking_adj:0<Math.abs(e.maskingadjust-0)||(e.maskingadjust=d.masking_adj),0!=n?e.maskingadjust_short=d.masking_adj_short:0<Math.abs(e.maskingadjust_short-0)||(e.maskingadjust_short=d.masking_adj_short),0!=n?e.ATHlower=-d.ath_lower/10:0<Math.abs(10*-e.ATHlower-0)||(e.ATHlower=-d.ath_lower/10),0!=n?e.ATHcurve=d.ath_curve:0<Math.abs(e.ATHcurve- -1)||(e.ATHcurve=d.ath_curve),0!=n?e.athaa_sensitivity=d.ath_sensitivity:0<Math.abs(e.athaa_sensitivity- -1)||(e.athaa_sensitivity=d.ath_sensitivity),0<d.interch&&(0!=n?e.interChRatio=d.interch:0<Math.abs(e.interChRatio- -1)||(e.interChRatio=d.interch)),0<d.safejoint&&(e.exp_nspsytune=e.exp_nspsytune|d.safejoint),0<d.sfb21mod&&(e.exp_nspsytune=e.exp_nspsytune|d.sfb21mod<<20),0!=n?e.msfix=d.msfix:0<Math.abs(e.msfix- -1)||(e.msfix=d.msfix),0==n&&(e.VBR_q=t,e.VBR_q_frac=c)}var a=[new t(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new t(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new t(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new t(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new t(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new t(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new t(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new t(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new t(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new t(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new t(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new t(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new t(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new t(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new t(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function s(e,t,r){var i=t,o=n.nearestBitrateFullIndex(t);if(e.VBR=h.vbr_abr,e.VBR_mean_bitrate_kbps=i,e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,320),e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,8),e.brate=e.VBR_mean_bitrate_kbps,320<e.VBR_mean_bitrate_kbps&&(e.disable_reservoir=!0),0<a[o].safejoint&&(e.exp_nspsytune=2|e.exp_nspsytune),0<a[o].sfscale&&(e.internal_flags.noise_shaping=2),0<Math.abs(a[o].nsbass)){var s=int(4*a[o].nsbass);s<0&&(s+=64),e.exp_nspsytune=e.exp_nspsytune|s<<2}return 0!=r?e.quant_comp=a[o].quant_comp:0<Math.abs(e.quant_comp- -1)||(e.quant_comp=a[o].quant_comp),0!=r?e.quant_comp_short=a[o].quant_comp_s:0<Math.abs(e.quant_comp_short- -1)||(e.quant_comp_short=a[o].quant_comp_s),0!=r?e.msfix=a[o].nsmsfix:0<Math.abs(e.msfix- -1)||(e.msfix=a[o].nsmsfix),0!=r?e.internal_flags.nsPsy.attackthre=a[o].st_lrm:0<Math.abs(e.internal_flags.nsPsy.attackthre- -1)||(e.internal_flags.nsPsy.attackthre=a[o].st_lrm),0!=r?e.internal_flags.nsPsy.attackthre_s=a[o].st_s:0<Math.abs(e.internal_flags.nsPsy.attackthre_s- -1)||(e.internal_flags.nsPsy.attackthre_s=a[o].st_s),0!=r?e.scale=a[o].scale:0<Math.abs(e.scale- -1)||(e.scale=a[o].scale),0!=r?e.maskingadjust=a[o].masking_adj:0<Math.abs(e.maskingadjust-0)||(e.maskingadjust=a[o].masking_adj),0<a[o].masking_adj?0!=r?e.maskingadjust_short=.9*a[o].masking_adj:0<Math.abs(e.maskingadjust_short-0)||(e.maskingadjust_short=.9*a[o].masking_adj):0!=r?e.maskingadjust_short=1.1*a[o].masking_adj:0<Math.abs(e.maskingadjust_short-0)||(e.maskingadjust_short=1.1*a[o].masking_adj),0!=r?e.ATHlower=-a[o].ath_lower/10:0<Math.abs(10*-e.ATHlower-0)||(e.ATHlower=-a[o].ath_lower/10),0!=r?e.ATHcurve=a[o].ath_curve:0<Math.abs(e.ATHcurve- -1)||(e.ATHcurve=a[o].ath_curve),0!=r?e.interChRatio=a[o].interch:0<Math.abs(e.interChRatio- -1)||(e.interChRatio=a[o].interch),t}this.apply_preset=function(e,t,n){switch(t){case L.R3MIX:t=L.V3,e.VBR=h.vbr_mtrh;break;case L.MEDIUM:t=L.V4,e.VBR=h.vbr_rh;break;case L.MEDIUM_FAST:t=L.V4,e.VBR=h.vbr_mtrh;break;case L.STANDARD:t=L.V2,e.VBR=h.vbr_rh;break;case L.STANDARD_FAST:t=L.V2,e.VBR=h.vbr_mtrh;break;case L.EXTREME:t=L.V0,e.VBR=h.vbr_rh;break;case L.EXTREME_FAST:t=L.V0,e.VBR=h.vbr_mtrh;break;case L.INSANE:return t=320,e.preset=t,s(e,t,n),e.VBR=h.vbr_off,t}switch(e.preset=t){case L.V9:return o(e,9,n),t;case L.V8:return o(e,8,n),t;case L.V7:return o(e,7,n),t;case L.V6:return o(e,6,n),t;case L.V5:return o(e,5,n),t;case L.V4:return o(e,4,n),t;case L.V3:return o(e,3,n),t;case L.V2:return o(e,2,n),t;case L.V1:return o(e,1,n),t;case L.V0:return o(e,0,n),t}return 8<=t&&t<=320?s(e,t,n):(e.preset=0,t)}},l=new j,u=new k,d=new g,f=new function(){this.getLameVersion=function(){return"3.98.4"},this.getLameShortVersion=function(){return"3.98.4"},this.getLameVeryShortVersion=function(){return"LAME3.98r"},this.getPsyVersion=function(){return"0.93"},this.getLameUrl=function(){return"http://www.mp3dev.org/"},this.getLameOsBitness=function(){return"32bits"}},p=new function(){this.setModules=function(e,t){}},_=new function(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,n){var r,i=t.internal_flags,o=i.l3_side,a=e.getframebits(t);n.bits=(a-8*i.sideinfo_len)/i.mode_gr;var s=2048*i.mode_gr-8;320<t.brate?r=8*int(1e3*t.brate/(t.out_samplerate/1152)/8+.5):(r=11520,t.strict_ISO&&(r=8*int(32e4/(t.out_samplerate/1152)/8+.5))),i.ResvMax=r-a,i.ResvMax>s&&(i.ResvMax=s),(i.ResvMax<0||t.disable_reservoir)&&(i.ResvMax=0);var c=n.bits*i.mode_gr+Math.min(i.ResvSize,i.ResvMax);return r<c&&(c=r),o.resvDrain_pre=0,null!=i.pinfo&&(i.pinfo.mean_bits=n.bits/2,i.pinfo.resvsize=i.ResvSize),c},this.ResvMaxBits=function(e,t,n,r){var i,o=e.internal_flags,a=o.ResvSize,s=o.ResvMax;0!=r&&(a+=t),0!=(1&o.substep_shaping)&&(s*=.9),n.bits=t,9*s<10*a?(i=a-9*s/10,n.bits+=i,o.substep_shaping|=128):(i=0,o.substep_shaping&=127,e.disable_reservoir||0!=(1&o.substep_shaping)||(n.bits-=.1*t));var c=a<6*o.ResvMax/10?a:6*o.ResvMax/10;return(c-=i)<0&&(c=0),c},this.ResvAdjust=function(e,t){e.ResvSize-=t.part2_3_length+t.part2_length},this.ResvFrameEnd=function(e,t){var n,r=e.l3_side;e.ResvSize+=t*e.mode_gr;var i=0;r.resvDrain_post=0,(r.resvDrain_pre=0)!=(n=e.ResvSize%8)&&(i+=n),0<(n=e.ResvSize-i-e.ResvMax)&&(i+=n);var o=Math.min(8*r.main_data_begin,i)/8;r.resvDrain_pre+=8*o,i-=8*o,e.ResvSize-=8*o,r.main_data_begin-=o,r.resvDrain_post+=i,e.ResvSize-=i}},w=new v,O=new function(){this.setModules=function(e,t,n){}},x=new function(){};i.setModules(a,s,c,l,u,d,f,p,x),s.setModules(a,x,f,d),p.setModules(s,f),c.setModules(i),u.setModules(s,_,l,w),l.setModules(w,_,i.enc.psy),_.setModules(s),w.setModules(l),d.setModules(i,s,f),o.setModules(O,x),O.setModules(f,p,c);var S=i.lame_init();S.num_channels=e,S.in_samplerate=t,S.out_samplerate=t,S.brate=r,S.mode=m.STEREO,S.quality=3,S.bWriteVbrTag=!1,S.disable_reservoir=!0,S.write_id3tag_automatic=!1,i.lame_init_params(S);var E=1152,T=0|1.25*E+7200,C=n(T);this.encodeBuffer=function(t,r){1==e&&(r=t),t.length>E&&(E=t.length,C=n(T=0|1.25*E+7200));var o=i.lame_encode_buffer(S,t,r,t.length,C,0,T);return new Int8Array(C.subarray(0,o))},this.flush=function(){var e=i.lame_encode_flush(S,C,0,T);return new Int8Array(C.subarray(0,e))}}}e(),Recorder.lamejs=e}()},DxNY:function(e,t,n){"use strict";var r=n("284h"),i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("J4zp")),a=r(n("q1tI")),s=i(n("TSYQ")),c=i(n("MCNy")),l=n("VTYn"),u=i(n("b9ng")),d=function(e){var t=e.onSwipRight,n=void 0===t?function(){}:t,r=e.onSwipLeft,i=void 0===r?function(){}:r,d=e.onClose,f=void 0===d?function(){}:d,p=e.imgUrls,h=void 0===p?[]:p,m=e.currentImgIdx,v=void 0===m?0:m,b=(0,l.useConfig)().clsPrefix,g=a.default.useState(!1),y=(0,o.default)(g,2),_=y[0],w=y[1],O=a.default.useState(!1),x=(0,o.default)(O,2),S=x[0],j=x[1],E=a.default.useState(!1),T=(0,o.default)(E,2),k=T[0],C=T[1],A=a.default.useRef(null),M=a.default.useRef(null),P=a.default.useRef(null),R=!1;return"undefined"!==typeof window&&(R=(0,u.default)()),(0,a.useEffect)((function(){if(0===h.length)return j(!0),void C(!0);j(0===v),v+1===h.length?C(!0):C(!1)}),[h,v]),(0,a.useEffect)((function(){var e=function(){P.current||(w(!0),A.current&&clearTimeout(A.current),A.current=setTimeout((function(){w(!1)}),2e3))},t=function(){w(!0),P.current=!0,"undefined"!==typeof window&&document.removeEventListener("mousemove",e),A.current&&clearTimeout(A.current)},n=function(){P.current=null,"undefined"!==typeof window&&document.addEventListener("mousemove",e,!1)};return"undefined"!==typeof window&&document.addEventListener("mousemove",e,!1),M.current&&(R||(M.current.addEventListener("mouseenter",t,!1),M.current.addEventListener("mouseleave",n,!1))),function(){"undefined"!==typeof window&&document.removeEventListener("mousemove",e),M.current&&(M.current.removeEventListener("mouseenter",t),M.current.removeEventListener("mouseleave",n))}}),[]),(0,a.useEffect)((function(){var e=function(e){"ArrowLeft"===e.key&&n(),"ArrowRight"===e.key&&i()};return"undefined"!==typeof window&&document.addEventListener("keydown",e),function(){"undefined"!==typeof window&&document.removeEventListener("keydown",e)}}),[]),!R&&a.default.createElement("div",{className:(0,s.default)("".concat(b,"-img-previewer__pc-controller-wrapper"),{"is-active":_}),onClick:function(e){e.stopPropagation(),e.preventDefault()},ref:M},a.default.createElement("div",{className:(0,s.default)("".concat(b,"-img-previewer__pc-controller-close")),onClick:f},a.default.createElement(c.default,{name:"CloseOutlined",size:8,color:"white"})),a.default.createElement("div",{className:(0,s.default)("".concat(b,"-img-previewer__pc-controller-swiper"))},a.default.createElement("div",{className:(0,s.default)("".concat(b,"-img-previewer__pc-controller-left-swiper"),{"is-disabled":S}),onClick:n},a.default.createElement(c.default,{name:"RightOutlined",size:16})),a.default.createElement("div",{className:(0,s.default)("".concat(b,"-img-previewer__pc-controller-right-swiper"),{"is-disabled":k}),onClick:i},a.default.createElement(c.default,{name:"RightOutlined",size:16}))))};t.default=d},EQtc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return"undefined"===typeof window}},EeQS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("K3My").WebAdapter}});t.LogicalAdapter=r},EmTJ:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"store",{})}var t,n,r;return t=e,(n=[{key:"setStore",value:function(e){var t=e.pluginName,n=e.target,r=e.hookName;if("[object String]"===Object.prototype.toString.call(n))if(this.store[n]||this.createTargetObject(n),this.store[n][r]||this.createHookObject(n,r),this.store[n][r][t]){var i=this.store[n][r][t].plugin,o=this.compareVersion(i,e);this.store[n][r][t]=this.createPluginInfo(o)}else this.store[n][r][t]=this.createPluginInfo(e);else for(var a=0;a<n.length;a++)if(this.store[n[a]]||this.createTargetObject(n[a]),this.store[n[a]][r]||this.createHookObject(n[a],r),this.store[n[a]][r][t]){var s=this.store[n[a]][r][t].plugin,c=this.compareVersion(s,e);this.store[n[a]][r][t]=this.createPluginInfo(c)}else this.store[n[a]][r][t]=this.createPluginInfo(e)}},{key:"getStore",value:function(e,t){var n=[];if(this.store[e]&&this.store[e][t])for(var r in this.store[e][t])n.push(i({},this.store[e][t][r]));return n}},{key:"createPluginInfo",value:function(e){var t=e.pluginName,n=e.version,r=e.target,i=e.hookName,o=e.component,a=e.platform,s=e.options;return{version:n,pluginName:t,target:r,hookName:i,plugin:e,Component:o,platform:a,options:void 0===s?{}:s}}},{key:"createTargetObject",value:function(e){this.store[e]={}}},{key:"createHookObject",value:function(e,t){this.store[e][t]={}}},{key:"compareVersion",value:function(e,t){var n=e.version,r=t.version;return n.split(".").join("")>r.split(".").join("")?e:t}}])&&o(t.prototype,n),r&&o(t,r),e}();t.default=s},FF6l:function(e,t,n){"use strict";var r=n("ewvW"),i=n("I8vh"),o=n("UMSQ"),a=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),s=o(n.length),c=i(e,s),l=i(t,s),u=arguments.length>2?arguments[2]:void 0,d=a((void 0===u?s:i(u,s))-l,s-c),f=1;for(l<c&&c<l+d&&(f=-1,l+=d-1,c+=d-1);d-- >0;)l in n?n[c]=n[l]:delete n[c],c+=f,l+=f;return n}},FflX:function(e,t,n){var r=n("f+Ey").toUnsigned,i=n("jv9p"),o=function(e,t){var n,a,s,c,l,u=[];if(!t.length)return null;for(n=0;n<e.byteLength;)a=r(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),s=i(e.subarray(n+4,n+8)),c=a>1?n+a:e.byteLength,s===t[0]&&(1===t.length?u.push(e.subarray(n+8,c)):(l=o(e.subarray(n+8,c),t.slice(1))).length&&(u=u.concat(l))),n=c;return u};e.exports=o},FhbE:function(e,t,n){"use strict";n("2B1R"),n("rB9j"),n("hByQ"),n("R5XZ");var r,i=n("nKUr"),o=n("o0o1"),a=n.n(o),s=(n("ls82"),n("yXPU")),c=n.n(s),l=n("lwsE"),u=n.n(l),d=n("W8MJ"),f=n.n(d),p=n("7W2i"),h=n.n(p),m=n("a1gu"),v=n.n(m),b=n("Nsbk"),g=n.n(b),y=n("q1tI"),_=n("k8W2"),w=n.n(_),O=n("DetZ"),x=n.n(O),S=n("V+Sr"),j=n.n(S),E=n("85EP"),T=n.n(E),k=n("5f2u"),C=n.n(k),A=n("MCNy"),M=n.n(A),P=n("wdT/"),R=n.n(P),L="_3PQ7POuwRRpjOKdFSQbt1L",N="_1D75Pfcex5RVGN6QiUHq5Z",D="_1ruhpxxUevPMfq9Ybu8dK_",I="_3kKUVwNpxTZzHCDjKcz18f",B="_2nVlE-8tBiMBI4MebuUDxw",H="LRe3IF4gmnZQjy_W-k2iK",U="_1OohdGxghWEWdsSxP8xlOu",q="_3chg5eVkLkkyfsiVjjzpOW",V="_2HnMlK6OEMSZUpATeOBJRG",F="_378qHbonUYvd0WmTWz7n0W",W="_3dTSgvSf_nr9TO8jQFh_yH",z="_20KgsEu-s2wLrE2dDHNXgy",X="_1F824IItqOq6WU6sit-7cn",Y="_3BKKFHIrvsgPObcJDniz2h",K="g-X7siGhYyBueVPUtNNg1",G="_1IKQCrFaaiCUQYI8-Jo0FR",Q="_20Ci34_plidg4eYeHUilNv",Z="_33cOHojJnATN53eIcvqqg6",J="Joa7SpvCFG0yPczb_eSvp",$="_2J77hnFjNfVKPFDl2tfCFW",ee="_1013VgCyrsW1zEhBwfGSs3",te=n("kMSe"),ne=n("VVxn");n("07d7"),n("JfAA");function re(e){for(var t=0,n=0;n<e.length;n++)t+=e.charCodeAt(n);var r=function(e,t,n){var r,i,o,a=Math.floor(6*e),s=6*e-a,c=n*(1-t),l=n*(1-s*t),u=n*(1-(1-s)*t);switch(a%6){case 0:r=n,i=u,o=c;break;case 1:r=l,i=n,o=c;break;case 2:r=c,i=n,o=u;break;case 3:r=c,i=l,o=n;break;case 4:r=u,i=c,o=n;break;case 5:r=n,i=c,o=l}return{r:Math.floor(255*r),g:Math.floor(255*i),b:Math.floor(255*o)}}(t%360/360,.3,.9);return"#"+r.r.toString(16)+r.g.toString(16)+r.b.toString(16)}function ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var oe=Object(te.c)("threadPost")(r=Object(te.c)("search")(r=Object(te.d)(r=function(e){h()(n,e);var t=ie(n);function n(e){var r;return u()(this,n),(r=t.call(this,e)).onScrollBottom=function(){return r.getSearchKeyword()?r.fetchAllUser():r.fetchFollow()},r.handleCancel=function(){r.props.onCancel()},r.getBackgroundColor=function(e){return re(e?e.charAt(0).toUpperCase():"")},r.getSearchKeyword=function(){return r.state.keywords||r.props.threadPost.editorHintAtKey},r.formatData=function(e){var t,n,i,o,a,s=!r.getSearchKeyword(),c=s?null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.avatar:e.avatar,l=s?null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.userName:e.username,u=s?null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.nickName:e.nickname;return{avatar:c,username:l,groupName:s?null===e||void 0===e||null===(o=e.group)||void 0===o?void 0:o.groupName:e.groupName,userId:s?null===(a=e.user)||void 0===a?void 0:a.pid:e.userId,nickname:u}},r.state={keywords:"",checkUser:[],page:1,perPage:10,finish:!1},r.timer=null,r}return f()(n,[{key:"componentDidMount",value:function(){this.onScrollBottom()}},{key:"fetchFollow",value:function(){var e=c()(a.a.mark((function e(){var t,n,r,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.threadPost,n=this.state,r=n.page,i=n.perPage,e.next=4,t.fetchFollow({page:r,perPage:i});case 4:0===(null===(o=e.sent)||void 0===o?void 0:o.code)?this.setState({page:r+1,finish:r*i>t.followsTotalCount}):(this.setState({finish:!0}),R.a.error({content:o.msg}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAllUser",value:function(){var e=c()(a.a.mark((function e(){var t,n,r,i,o,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.search,n=this.state,r=n.page,i=n.perPage,e.next=4,t.getUsersList({search:this.getSearchKeyword(),type:"nickname",page:r,perPage:i});case 4:o=e.sent,s=o.code,c=o.data,0===s?this.setState({page:r+1,finish:r*i>=(null===c||void 0===c?void 0:c.totalCount)}):(this.setState({finish:!0}),R.a.error({content:o.msg}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateKeywords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setState({keywords:e,page:1,finish:!1}),this.searchInput()}},{key:"searchInput",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.onScrollBottom()}),300)}},{key:"submitSelect",value:function(){0!==this.state.checkUser.length&&(this.props.getAtList(this.state.checkUser),this.props.threadPost.setEditorHintAtKey(""),this.props.onCancel())}},{key:"renderItem",value:function(){var e,t=this,n=this.props,r=n.threadPost,o=n.search,a=this.getSearchKeyword()?(null===(e=o.users)||void 0===e?void 0:e.pageData)||[]:r.follows||[];return 0===a.length?null:a.map((function(e){var n=t.formatData(e),r=n.avatar,o=n.nickname,a=n.groupName,s=n.userId;return Object(i.jsx)("div",{className:F,children:Object(i.jsx)("div",{className:W,children:Object(i.jsxs)(j.a,{name:o,children:[Object(i.jsx)("div",{className:z,children:r?Object(i.jsx)(T.a,{image:r}):Object(i.jsx)(T.a,{text:o.toUpperCase(),style:{backgroundColor:"#".concat(t.getBackgroundColor(o))}})}),Object(i.jsxs)("div",{className:X,children:[Object(i.jsx)("div",{className:Y,children:o}),Object(i.jsx)("div",{className:K,children:a})]})]})})},s)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.pc,r=t.visible,o=t.style,a=void 0===o?{}:o,s=t.threadPost,c=this.state,l=c.keywords,u=c.checkUser,d=c.finish,f=n?"pc":"h5",p=l||s.editorHintAtKey,h=Object(i.jsxs)("div",{className:N,onClick:function(e){return e.stopPropagation()},children:[Object(i.jsxs)("div",{className:D,children:[Object(i.jsxs)("div",{className:I,children:[!n&&Object(i.jsx)("div",{className:B,children:Object(i.jsx)(M.a,{className:H,name:"SearchOutlined",size:16})}),Object(i.jsx)(x.a,{value:p,placeholder:"\u9009\u62e9\u597d\u53cb\u6216\u76f4\u63a5\u8f93\u5165\u5708\u53cb",onChange:function(t){return e.updateKeywords(t.target.value)}}),!n&&p&&Object(i.jsx)("div",{className:B,onClick:function(){return e.updateKeywords()},children:Object(i.jsx)(M.a,{className:U,name:"WrongOutlined",size:16})})]}),!n&&Object(i.jsx)("div",{className:q,onClick:this.handleCancel,children:"\u53d6\u6d88"})]}),Object(i.jsx)(j.a.Group,{className:V,value:u,onChange:function(t){return e.setState({checkUser:t})},children:Object(i.jsx)(ne.a,{showLoadingInCenter:!0,className:$,wrapperClass:ee,height:n?"auto":"calc(100vh - 120px)",noMore:d,onRefresh:this.onScrollBottom,immediateCheck:!1,platform:f,children:this.renderItem()})}),Object(i.jsx)("div",{className:G,children:Object(i.jsx)(C.a,{className:u.length>0?Q:"",onClick:function(){return e.submitSelect()},children:u.length?"@ \u5df2\u9009(".concat(u.length,")"):"\u5c1a\u672a\u9009"})})]});return n?Object(i.jsxs)("div",{className:Z,style:a,id:"dzq-toolbar-at",children:[Object(i.jsx)("div",{className:J,children:"@\u5708\u53cb"}),h]}):Object(i.jsx)(w.a,{className:"".concat(L),position:"center",visible:r,children:h})}}]),n}(y.Component))||r)||r)||r;oe.defaultProps={visible:!1,onCancel:function(){},getAtList:function(){}};t.a=oe},"Fwt+":function(e,t,n){"use strict";var r=n("67WC"),i=n("UMSQ"),o=n("I8vh"),a=n("SEBh"),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=s(this),r=n.length,c=o(e,r);return new(a(n,n.constructor))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,i((void 0===t?r:o(t,r))-c))}))},GC2F:function(e,t,n){var r=n("+M1K");e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},GLpR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogLogicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("BNbG").DialogWebAdapter}});t.DialogLogicalAdapter=r},HzKk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.constants=void 0;var r,i=(r=n("EQtc"))&&r.__esModule?r:{default:r};var o={IE:"ie",OPERA:"opera",WEBKIT:"webKit",GECKO:"gecko",MOBILE:"mobile",IOS:"ios",ANDROID:"android",IPHONE:"iPhone",IPAD:"iPad",WEBAPP:"webApp",WEIXIN:"weixin",QQ:"qq",UC:"uc",SAFARI:"safari"};t.constants=o;var a={env:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((0,i.default)())return!1;var n=t||navigator?navigator.userAgent:"";switch(e){case o.IE:return n.indexOf("Trident")>-1;case o.OPERA:return n.indexOf("Presto")>-1;case o.WEBKIT:return n.indexOf("AppleWebKit")>-1;case o.GECKO:return n.indexOf("Gecko")>-1&&-1==n.indexOf("KHTML");case o.MOBILE:return!!n.match(/AppleWebKit.*Mobile.*/);case o.IOS:return!!n.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);case o.ANDROID:return n.indexOf("Android")>-1||n.indexOf("Adr")>-1;case o.IPHONE:return n.indexOf("iPhone")>-1;case o.IPAD:return n.indexOf("iPad")>-1;case o.WEBAPP:return-1==n.indexOf("Safari");case o.WEIXIN:return n.indexOf("MicroMessenger")>-1;case o.QQ:return" qq"==n.match(/\sQQ/i);case o.UC:return n.indexOf("UCBrowser")>-1;case o.SAFARI:return/Safari/.test(n)&&!/Chrome/.test(n);default:return!1}}};t.default=a},I1Go:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(i,s,c):i[s]=e[s]}i.default=e,n&&n.set(e,i);return i}(n("q1tI"));function o(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(l,e);var t,n,r,o=c(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),o.call(this,e)}return t=l,(n=[{key:"componentDidCatch",value:function(e){console.error(e)}},{key:"render",value:function(){var e=this.props._pluginInfo;return i.default.cloneElement(e.Component,this.props)}}])&&a(t.prototype,n),r&&a(t,r),l}(i.Component);t.default=d},IRph:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{render:function(t){var n=t.renderData,s=t.site,c=t.deletePlugin,u=void 0===c?function(){}:c,d=t.updatePlugin,f=void 0===d?function(){}:d,p=t.showPluginDialog,h=void 0===p?function(){}:p,m=t.closePluginDialog,v=void 0===m?function(){}:m;if(!(0,a.default)(t))return console.warn("".concat(e.pluginName," -> \u7f3a\u5931\u63d2\u4ef6\u5fc5\u987b\u63d0\u4f9b\u53c2\u6570\uff01")),null;var b=null;return n&&n[e.pluginName]&&(b=n[e.pluginName]),r.default.createElement(i.default,{renderData:b,siteData:s,deletePlugin:(0,o.default)(e,u),updatePlugin:(0,o.default)(e,f),showPluginDialog:(0,o.default)(e,h),closePluginDialog:(0,o.default)(e,v),_pluginInfo:l({},e)})},pluginInfo:l({},e)}};var r=s(n("q1tI")),i=s(n("I1Go")),o=s(n("WDfI")),a=s(n("IUnV"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},ISD9:function(e,t,n){"use strict";function r(){var e;return window.innerHeight?e=window.innerHeight:document.body&&document.body.clientHeight?e=document.body.clientHeight:document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth&&(e=document.documentElement.clientHeight),e}function i(){return window.visualViewport?window.visualViewport.height:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))},IUnV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e||!e.site||!e.site.webConfig)return!1;return!0}},IZzc:function(e,t,n){"use strict";var r=n("67WC"),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].sort;o("sort",(function(e){return a.call(i(this),e)}))},IzT1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("9LVR").WebAdapter}});t.LogicalAdapter=r},"JW/Y":function(e,t,n){"use strict";var r=n("QykG"),i="shared",o=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},a=function(e){var t,n;a.prototype.init.call(this),this.type_=e||i,this.push=function(e){this.type_!==i&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=o(e.dts,n),e.pts=o(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,t=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};a.prototype=new r,e.exports={TimestampRolloverStream:a,handleRollover:o}},JaFt:function(e,t,n){"use strict";var r=n("67WC"),i=n("1Y/n").right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){return i(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},"Jw8/":function(e,t,n){"use strict";var r=n("284h"),i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("pVnL")),a=i(n("QILm")),s=r(n("q1tI")),c=i(n("Wgwo")),l=i(n("qMd1")),u=(0,c.default)(),d=((0,l.default)(),(0,s.forwardRef)((function(e,t){var n=e.imgUrls,r=void 0===n?[]:n,i=e.visible,c=void 0!==i&&i,l=e.current,d=void 0===l?"":l,f=e.onClose,p=void 0===f?function(){}:f,h=(0,a.default)(e,["imgUrls","visible","current","onClose"]);return s.default.createElement(u,(0,o.default)({ref:t,imgs:r,visible:c,currentUrl:d,onClose:p},h))})));t.default=d},K3My:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebAdapter=void 0;t.WebAdapter={}},K4wu:function(e,t,n){var r=n("vgmO"),i=e.exports={WebVTT:n("0CxO"),VTTCue:n("sDzi"),VTTRegion:n("+X0y")};r.vttjs=i,r.WebVTT=i.WebVTT;var o=i.VTTCue,a=i.VTTRegion,s=r.VTTCue,c=r.VTTRegion;i.shim=function(){r.VTTCue=o,r.VTTRegion=a},i.restore=function(){r.VTTCue=s,r.VTTRegion=c},r.VTTCue||i.shim()},KAYj:function(e,t,n){"use strict";var r,i,o,a,s,c,l=n("f+Ey").toUnsigned,u=n("f+Ey").toHexString,d=n("FflX"),f=n("jv9p"),p=n("yqws"),h=n("ii1t"),m=n("29xw");r=function(e){return d(e,["moov","trak"]).reduce((function(e,t){var n,r,i,o,a;return(n=d(t,["tkhd"])[0])?(r=n[0],o=l(n[i=0===r?12:20]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3]),(a=d(t,["mdia","mdhd"])[0])?(i=0===(r=a[0])?12:20,e[o]=l(a[i]<<24|a[i+1]<<16|a[i+2]<<8|a[i+3]),e):null):null}),{})},i=function(e,t){var n,r,i;return n=d(t,["moof","traf"]),r=[].concat.apply([],n.map((function(t){return d(t,["tfhd"]).map((function(n){var r,i,o;return r=l(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),i=e[r]||9e4,(o="number"!==typeof(o=d(t,["tfdt"]).map((function(e){var t,n;return t=e[0],n=l(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(n*=Math.pow(2,32),n+=l(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n}))[0])||isNaN(o)?1/0:o)/i}))}))),i=Math.min.apply(null,r),isFinite(i)?i:0},o=function(e,t){var n,r=d(t,["moof","traf"]),i=0,o=0;if(r&&r.length){var a=d(r[0],["tfhd"])[0],s=d(r[0],["trun"])[0],c=d(r[0],["tfdt"])[0];if(a)n=p(a).trackId;if(c)i=m(c).baseMediaDecodeTime;if(s){var l=h(s);l.samples&&l.samples.length&&(o=l.samples[0].compositionTimeOffset||0)}}return(i+o)/(e[n]||9e4)},a=function(e){var t=d(e,["moov","trak"]),n=[];return t.forEach((function(e){var t=d(e,["mdia","hdlr"]),r=d(e,["tkhd"]);t.forEach((function(e,t){var i,o,a=f(e.subarray(8,12)),s=r[t];"vide"===a&&(o=0===(i=new DataView(s.buffer,s.byteOffset,s.byteLength)).getUint8(0)?i.getUint32(12):i.getUint32(20),n.push(o))}))})),n},c=function(e){var t=0===e[0]?12:20;return l(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},s=function(e){var t=d(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,r,i={},o=d(e,["tkhd"])[0];o&&(r=(t=new DataView(o.buffer,o.byteOffset,o.byteLength)).getUint8(0),i.id=0===r?t.getUint32(12):t.getUint32(20));var a=d(e,["mdia","hdlr"])[0];if(a){var s=f(a.subarray(8,12));i.type="vide"===s?"video":"soun"===s?"audio":s}var l=d(e,["mdia","minf","stbl","stsd"])[0];if(l){var p=l.subarray(8);i.codec=f(p.subarray(4,8));var h,m=d(p,[i.codec])[0];m&&(/^[a-z]vc[1-9]$/i.test(i.codec)?(h=m.subarray(78),"avcC"===f(h.subarray(4,8))&&h.length>11?(i.codec+=".",i.codec+=u(h[9]),i.codec+=u(h[10]),i.codec+=u(h[11])):i.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(i.codec)?(h=m.subarray(28),"esds"===f(h.subarray(4,8))&&h.length>20&&0!==h[19]?(i.codec+="."+u(h[19]),i.codec+="."+u(h[20]>>>2&63).replace(/^0/,"")):i.codec="mp4a.40.2"):i.codec=i.codec.toLowerCase())}var v=d(e,["mdia","mdhd"])[0];v&&(i.timescale=c(v)),n.push(i)})),n},e.exports={findBox:d,parseType:f,timescale:r,startTime:i,compositionStartTime:o,videoTrackIds:a,tracks:s,getTimescaleFromMediaHeader:c}},KHaC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TagViewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("6z+b").TagWebLayout}});t.TagViewAdapter=r},KN4Y:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n("vgmO"))&&"object"===typeof r&&"default"in r?r.default:r,o={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},a=["video","audio","text"],s=["Video","Audio","Text"],c=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})):e},l=function(e){return e.map(c)},u=function(e){void 0===e&&(e="");var t=e.split(","),n={},r=[];return t.forEach((function(e){var t;e=e.trim(),a.forEach((function(r){var i=o[r].exec(e.toLowerCase());if(i&&!(i.length<=1)){t=r;var a=e.substring(0,i[1].length),s=e.replace(a,"");n[r]={type:a,details:s}}})),t||r.push(e)})),r.length&&(n.unknown=r),n},d=function(e){return void 0===e&&(e=""),o.audio.test(e.trim().toLowerCase())},f=function(e){return void 0===e&&(e=""),o.text.test(e.trim().toLowerCase())},p=function(e){if(e&&"string"===typeof e){var t=e.toLowerCase().split(",").map((function(e){return c(e.trim())})),n="video";1===t.length&&d(t[0])?n="audio":1===t.length&&f(t[0])&&(n="application");var r="mp4";return t.every((function(e){return o.mp4.test(e)}))?r="mp4":t.every((function(e){return o.webm.test(e)}))?r="webm":t.every((function(e){return o.ogg.test(e)}))&&(r="ogg"),n+"/"+r+';codecs="'+e+'"'}};t.DEFAULT_AUDIO_CODEC="mp4a.40.2",t.DEFAULT_VIDEO_CODEC="avc1.4d400d",t.browserSupportsCodec=function(e){return void 0===e&&(e=""),i.MediaSource&&i.MediaSource.isTypeSupported&&i.MediaSource.isTypeSupported(p(e))||!1},t.codecsFromDefault=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var r in n){var i=n[r];if(i.default&&i.playlists)return u(i.playlists[0].attributes.CODECS)}return null},t.getMimeForCodec=p,t.isAudioCodec=d,t.isTextCodec=f,t.isVideoCodec=function(e){return void 0===e&&(e=""),o.video.test(e.trim().toLowerCase())},t.mapLegacyAvcCodecs=function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e){return l([e])[0]}))},t.muxerSupportsCodec=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<s.length;t++){if(o["muxer"+s[t]].test(e))return!0}return!1}))},t.parseCodecs=u,t.translateLegacyCodec=c,t.translateLegacyCodecs=l},KVSy:function(e,t,n){"use strict";var r=n("67WC"),i=n("SEBh"),o=n("0Dky"),a=r.aTypedArray,s=r.aTypedArrayConstructor,c=r.exportTypedArrayMethod,l=[].slice;c("slice",(function(e,t){for(var n=l.call(a(this),e,t),r=i(this,this.constructor),o=0,c=n.length,u=new(s(r))(c);c>o;)u[o]=n[o++];return u}),o((function(){new Int8Array(1).slice()})))},KdhP:function(e,t,n){function r(e){this.options=e||{locator:{}}}function i(){this.cdata=!1}function o(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function s(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function c(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new l,o=n.domBuilder||new i,s=n.errorHandler,c=n.locator,u=n.xmlns||{},d={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return c&&o.setDocumentLocator(c),r.errorHandler=function(e,t,n){if(!e){if(t instanceof i)return t;e=t}var r={},o=e instanceof Function;function s(t){var i=e[t];!i&&o&&(i=2==e.length?function(n){e(t,n)}:e),r[t]=i&&function(e){i("[xmldom "+t+"]\t"+e+a(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),r}(s,o,c),r.domBuilder=n.domBuilder||o,/\/x?html?$/.test(t)&&(d.nbsp="\xa0",d.copy="\xa9",u[""]="http://www.w3.org/1999/xhtml"),u.xml=u.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,u,d):r.errorHandler.error("invalid doc source"),o.doc},i.prototype={startDocument:function(){this.doc=(new u).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var i=this.doc,a=i.createElementNS(e,n||t),s=r.length;c(this,a),this.currentElement=a,this.locator&&o(this.locator,a);for(var l=0;l<s;l++){e=r.getURI(l);var u=r.getValue(l),d=(n=r.getQName(l),i.createAttributeNS(e,n));this.locator&&o(r.getLocator(l),d),d.value=d.nodeValue=u,a.setAttributeNode(d)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&o(this.locator,n),c(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=s.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&o(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=s.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&o(this.locator,r),c(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(e,t,n);this.locator&&o(this.locator,i),c(this,i)}},warning:function(e){console.warn("[xmldom warning]\t"+e,a(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,a(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,a(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){i.prototype[e]=function(){return null}}));var l=n("1h1e").XMLReader,u=t.DOMImplementation=n("dJxt").DOMImplementation;t.XMLSerializer=n("dJxt").XMLSerializer,t.DOMParser=r},KhEo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DividerLogicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("6+00").DividerWebAdapter}});t.DividerLogicalAdapter=r},LveU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressWebAdapter=void 0;t.ProgressWebAdapter={}},LwBt:function(e,t,n){"use strict";var r=n("284h"),i=n("TqRt");n("zKZe"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("pVnL")),a=i(n("J4zp")),s=r(n("q1tI")),c=i(n("TSYQ")),l=n("VTYn"),u=i(n("MCNy")),d=i(n("jqTq")),f=i(n("b9ng")),p=function(e){var t=s.default.useState(!1),n=(0,a.default)(t,2),r=n[0],i=n[1],p=s.default.useState(!0),h=(0,a.default)(p,2),m=h[0],v=h[1],b=(0,l.useConfig)().clsPrefix,g=s.default.useState(e.src||""),y=(0,a.default)(g,2),_=y[0],w=y[1],O=s.default.useRef(null),x=!1;if("undefined"!==typeof window&&(x=(0,f.default)()),(0,s.useEffect)((function(){O.current&&O.current.complete?v(!1):v(!0)})),r)return s.default.createElement("div",{className:(0,c.default)("".concat(b,"-img-previewer__controller-item is-error"),{"is-mobile":x,"is-active":e.isActive}),onClick:e.onClick},s.default.createElement(u.default,{size:20,name:"PictureErrorOutlined",color:"white"}));var S={};return m&&Object.assign(S,{display:"none",visibility:"hidden"}),s.default.createElement(s.default.Fragment,null,s.default.createElement("img",(0,o.default)({ref:O,style:S,onLoad:function(){v(!1)}},e,{src:_,onError:function(t){var n=e.onError(e.idx||0);if(n&&n!==_)return w(n),void v(!0);i(!0)}})),m&&s.default.createElement("div",{className:(0,c.default)("".concat(b,"-img-previewer__controller-item"),{"is-mobile":x,"is-loading":S})},s.default.createElement(d.default,{size:20,color:"white",type:"spinner"})))};t.default=p},MCxF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s[e]?s[e]:null};var r=a(n("ApgV")),i=a(n("P0IM")),o=a(n("IRph"));function a(e){return e&&e.__esModule?e:{default:e}}var s={"plugin_post@post_extension_entry_hook":a(n("a5PV")).default,"plugin_post@post_extension_content_hook":o.default,"plugin_index@thread_extension_display_hook":i.default,"plugin_detail@thread_extension_display_hook":r.default}},MRl3:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("lwsE")),o=r(n("W8MJ")),a=r(n("7W2i")),s=r(n("a1gu")),c=r(n("Nsbk")),l=r(n("lSNA")),u=r(n("q1tI")),d=n("GDuN"),f=n("5LZQ"),p=n("NX9C");function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var m=function(e){(0,a.default)(n,e);var t=h(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.RenderComponent;return u.default.createElement(e,this.props,this.props.children)}}]),n}((0,d.baseComponentFactory)({viewAdapter:f.UploadViewAdapter,logicalAdapter:p.UploadLogicalAdapter}));t.default=m,(0,l.default)(m,"defaultProps",{})},MoCz:function(e,t,n){"use strict";var r=n("67WC"),i=n("5Yz+"),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){return i.apply(o(this),arguments)}))},MzE4:function(e,t,n){"use strict";n("toAj"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,"undefined"!==typeof window&&function(e,t){var n,r,i="";function o(t,o,a,s){t[n](i+o,"wheel"==r?a:function(t){!t&&(t=e.event);var n={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==r?(n.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(n.deltaX=-1/40*t.wheelDeltaX)):n.deltaY=t.detail,a(n)},s||!1)}e.addEventListener?n="addEventListener":(n="attachEvent",i="on"),r="onwheel"in t.createElement("div")?"wheel":void 0!==t.onmousewheel?"mousewheel":"DOMMouseScroll",e.addWheelListener=function(e,t,n){o(e,r,t,n),"DOMMouseScroll"==r&&o(e,"MozMousePixelScroll",t,n)}}(window,document);var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.element="string"===typeof e?document.querySelector(e):e,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.wheelDelta=this.wheelDelta.bind(this),this.dragStart=this.dragStart.bind(this),this.mouseMove=t.mouseMove.bind(this),this.zoomIn=t.zoomIn.bind(this),this.zoomOut=t.zoomOut.bind(this),this.startPosition=null,this.endPosition=null,this.currentPosition=null,this.element.addEventListener("mousedown",this.start,!1),this.element.addEventListener("mousemove",this.move,!1),this.element.addEventListener("mouseleave",this.end,!1),this.element.addEventListener("mouseup",this.end,!1),this.element.dragStart=this.dragStart,window.addWheelListener(document,this.wheelDelta,!1)};r.prototype={dragStart:function(e){return e.preventDefault(),e.stopPropagation(),!1},start:function(e){this.startPosition={x:e.clientX,y:e.clientY},this.endPosition=null,this.currentPosition=null},move:function(e){this.startPosition&&(this.endPosition||(this.currentPosition?(e.deltaX=e.clientX-this.currentPosition.x,e.deltaY=e.clientY-this.currentPosition.y):(e.deltaX=e.clientX-this.startPosition.x,e.deltaY=e.clientY-this.startPosition.y),this.currentPosition={x:e.clientX,y:e.clientY},this.mouseMove(e)))},end:function(e){this.endPosition={x:e.clientX,y:e.clientY},this.startPosition=null},destroy:function(){this.element.removeEventListener("mousedown",this.start),this.element.removeEventListener("mousemove",this.move),this.element.removeEventListener("mouseleave",this.end),this.element.removeEventListener("mouseup",this.end)},wheelDelta:function(e){e.deltaY>=0?this.zoomIn&&this.zoomIn({evt:e,zoom:(e.deltaY/100).toFixed(1)}):this.zoomOut&&this.zoomOut({evt:e,zoom:-(e.deltaY/100).toFixed(1)})}};var i=r;t.default=i},NDL1:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("8OJ3"));var o=function(e,t){var n=t.src,r=t.poster,o=t.initialTime,a=(0,i.default)(e,t);return n&&a.src(n),r&&a.poster(r),o&&a.currentTime(o),a};t.default=o},NX9C:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UploadLogicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("wi0z").UploadWebAdapter}});t.UploadLogicalAdapter=r},NsZL:function(e,t){var n,r,i,o,a,s,c,l=9e4;n=function(e){return e*l},r=function(e,t){return e*t},i=function(e){return e/l},o=function(e,t){return e/t},a=function(e,t){return n(o(e,t))},s=function(e,t){return r(i(e),t)},c=function(e,t,n){return i(n?e:e-t)},e.exports={ONE_SECOND_IN_TS:l,secondsToVideoTs:n,secondsToAudioTs:r,videoTsToSeconds:i,audioTsToSeconds:o,audioTsToVideoTs:a,videoTsToAudioTs:s,metadataTsToSeconds:c}},Nsua:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DividerViewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("AJmO").DividerWebLayout}});t.DividerViewAdapter=r},OEh5:function(e,t,n){"use strict";var r=n("284h"),i=n("TqRt");n("ma9I"),n("qePV"),n("zKZe"),Object.defineProperty(t,"__esModule",{value:!0}),t.SliderWebLayout=void 0;var o=i(n("pVnL")),a=i(n("lSNA")),s=i(n("o0o1"));n("ls82");var c=i(n("yXPU")),l=i(n("J4zp")),u=i(n("QILm")),d=r(n("q1tI")),f=i(n("TSYQ")),p=n("VTYn"),h=n("0UJW"),m=n("a20H");t.SliderWebLayout=function(e){var t=Object.assign({},e),n=(0,p.useConfig)().clsPrefix,r=(0,h.useDefaultValue)(t,0),i=r.className,v=r.value,b=r.onChange,g=r.min,y=r.max,_=r.step,w=r.disabled,O=r.formatter,x=(0,u.default)(r,["className","value","onChange","min","max","step","disabled","formatter"]),S=Math.max(100,y),j=(0,d.useState)(null),E=(0,l.default)(j,2),T=E[0],k=E[1],C=(0,d.useRef)(!1),A=(0,d.useRef)(null),M=(0,d.useRef)(null),P=(0,d.useRef)(null),R=function(e){return Math.round(Math.max(g,Math.min(y,e))/_)*_},L=function(e){return"targetTouches"in e?e.targetTouches[0]:e},N=function(e){("boolean"!==typeof e.cancelable||e.cancelable)&&e.preventDefault(),U(e)},D=function(e){("boolean"!==typeof e.cancelable||e.cancelable)&&e.preventDefault(),q()},I=function(e){("boolean"!==typeof e.cancelable||e.cancelable)&&e.preventDefault()};function B(){document.removeEventListener("mousemove",U),document.removeEventListener("touchstart",I),document.removeEventListener("touchmove",N),document.removeEventListener("mouseup",q),document.removeEventListener("touchend",D)}var H=function(e){if(("boolean"!==typeof e.cancelable||e.cancelable)&&e.preventDefault(),!w){C.current=!0;var t=L(e).pageX;M.current=t,P.current=R(v),B(),document.addEventListener("mousemove",U),document.addEventListener("touchstart",I),document.addEventListener("touchmove",N,{passive:!1}),document.addEventListener("mouseup",q),document.addEventListener("touchend",D,{passive:!1})}},U=function(e){if(!w&&C.current){var t=L(e).pageX-M.current,n=R(P.current+t/T.width*S);b(n,{event:e})}},q=function(){B(),C.current=!1},V=function(e){if(B(),!w){var t;t="click"===e.type?e.clientX:"undefined"!==typeof e.changedTouches[0].x?e.changedTouches[0].x:e.changedTouches[0].clientX;var n=R((t-T.left)/T.width*S);b(n,{event:e})}};(0,d.useEffect)((function(){return F(),function(){B()}}),[]);var F=function(){var e=(0,c.default)(s.default.mark((function e(){var t,n,r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.getRect)(A);case 2:t=e.sent,n=(0,l.default)(t,1),r=n[0],k(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=O(v),z=Math.min(Number(v),100);return d.default.createElement("div",(0,o.default)({className:(0,f.default)("".concat(n,"-slider"),i,(0,a.default)({},"".concat(n,"-slider--disabled"),w)),onClick:V,onTouchEnd:V},x),d.default.createElement("div",{className:"".concat(n,"-slider__progress"),ref:A},d.default.createElement("div",{className:"".concat(n,"-slider__progress--stick ").concat(n,"-slider__feature")}),d.default.createElement("div",{className:"".concat(n,"-slider__progress__button"),style:{left:"".concat(z/S*100,"%")},onTouchStart:H,onTouchMove:U,onTouchEnd:q,onMouseDown:H,onMouseMove:U,onDragStart:function(e){return e.preventDefault()},onMouseUp:q}),d.default.createElement("div",{className:(0,f.default)("".concat(n,"-slider__progress--active"),(0,a.default)({},"".concat(n,"-slider__progress--disabled"),w)),style:{width:"".concat(z/S*100,"%")}}),d.default.createElement("div",{className:"".concat(n,"-slider__progress--max"),style:{width:"".concat(100-y,"%")}})),d.default.createElement("div",{className:"".concat(n,"-slider__feature")}),W&&d.default.createElement("div",{className:"".concat(n,"-slider__value")},W))}},Onu3:function(e,t,n){"use strict";var r=n("67WC"),i=n("tycR").findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},P0IM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{render:function(t){var n=t.renderData,a=t.site;if(!(0,o.default)(t))return console.warn("".concat(e.pluginName," -> \u7f3a\u5931\u63d2\u4ef6\u5fc5\u987b\u63d0\u4f9b\u53c2\u6570\uff01")),null;var s=null;return n&&n[e.pluginName]&&(s=n[e.pluginName]),r.default.createElement(i.default,{siteData:a,renderData:s,_pluginInfo:c({},e)})},pluginInfo:c({},e)}};var r=a(n("q1tI")),i=a(n("I1Go")),o=(a(n("WDfI")),a(n("IUnV")));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},P8wP:function(e,t,n){"use strict";var r=n("67WC"),i=n("tycR").map,o=n("SEBh"),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(s(o(e,e.constructor)))(t)}))}))},PF2M:function(e,t,n){"use strict";var r=n("67WC"),i=n("UMSQ"),o=n("GC2F"),a=n("ewvW"),s=n("0Dky"),c=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(e){c(this);var t=o(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=a(e),s=i(r.length),l=0;if(s+t>n)throw RangeError("Wrong length");for(;l<s;)this[t+l]=r[l++]}),s((function(){new Int8Array(1).set({})})))},Qj6V:function(e,t,n){"use strict";var r=n("rnXk"),i=function(e){var t=31&e[1];return t<<=8,t|=e[2]},o=function(e){return!!(64&e[1])},a=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},s=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};e.exports={parseType:function(e,t){var n=i(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=o(e),n=4+a(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=o(e),r=4+a(e);if(n&&(r+=e[r]+1),1&e[r+5]){var i;i=3+((15&e[r+1])<<8|e[r+2])-4;for(var s=12+((15&e[r+10])<<8|e[r+11]);s<i;){var c=r+s;t[(31&e[c+1])<<8|e[c+2]]=e[c],s+=5+((15&e[c+3])<<8|e[c+4])}return t}},parsePayloadUnitStartIndicator:o,parsePesType:function(e,t){switch(t[i(e)]){case r.H264_STREAM_TYPE:return"video";case r.ADTS_STREAM_TYPE:return"audio";case r.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!o(e))return null;var t=4+a(e);if(t>=e.byteLength)return null;var n,r=null;return 192&(n=e[t+7])&&((r={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,r.pts*=4,r.pts+=(6&e[t+13])>>>1,r.dts=r.pts,64&n&&(r.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,r.dts*=4,r.dts+=(6&e[t+18])>>>1)),r},videoPacketContainsKeyFrame:function(e){for(var t=4+a(e),n=e.subarray(t),r=0,i=0,o=!1;i<n.byteLength-3;i++)if(1===n[i+2]){r=i+5;break}for(;r<n.byteLength;)switch(n[r]){case 0:if(0!==n[r-1]){r+=2;break}if(0!==n[r-2]){r++;break}i+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===s(31&n[i+3])&&(o=!0);do{r++}while(1!==n[r]&&r<n.length);i=r-2,r+=3;break;case 1:if(0!==n[r-1]||0!==n[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===s(31&n[i+3])&&(o=!0),i=r-2,r+=3;break;default:r+=3}return n=n.subarray(i),r-=i,i=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===s(31&n[i+3])&&(o=!0),o}}},QykG:function(e,t,n){"use strict";var r=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var r;return!!e[t]&&(r=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var n,r,i,o;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(o=[],r=arguments.length,r=1;r<arguments.length;++r)o.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,o)}},this.dispose=function(){e={}}}};r.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},r.prototype.push=function(e){this.trigger("data",e)},r.prototype.flush=function(e){this.trigger("done",e)},r.prototype.partialFlush=function(e){this.trigger("partialdone",e)},r.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},r.prototype.reset=function(e){this.trigger("reset",e)},e.exports=r},RiCf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderWebAdapter=void 0;t.SliderWebAdapter={}},RiVy:function(e,t,n){"use strict";function r(){if("undefined"===typeof window)return!1;var e=window.navigator.userAgent.toLowerCase();return/micromessenger/.test(e)}n.d(t,"a",(function(){return r}))},"S+ZJ":function(e,t,n){"use strict";var r=n("284h"),i=n("TqRt");n("pjDv"),n("2B1R"),n("E9XD"),n("+2oP"),n("PKPk"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("J4zp")),a=r(n("q1tI")),s=i(n("TSYQ")),c=n("VTYn"),l=i(n("b9ng")),u=i(n("LwBt")),d=function(e){var t=e.imgUrls,n=void 0===t?[]:t,r=e.currentImgIdx,i=void 0===r?0:r,d=(e.visible,e.onImgClick),f=void 0===d?function(){}:d,p=e.onError,h=void 0===p?function(e){return""}:p,m=(0,c.useConfig)().clsPrefix,v=(0,a.useState)(0),b=(0,o.default)(v,2),g=b[0],y=b[1],_=(0,a.useState)(!1),w=(0,o.default)(_,2),O=w[0],x=w[1],S=a.default.useRef(null),j=a.default.useRef(null),E=a.default.useRef(null),T=a.default.useRef(null),k=!1;return"undefined"!==typeof window&&(k=(0,l.default)()),(0,a.useEffect)((function(){var e=function(){E.current||(x(!0),S.current&&clearTimeout(S.current),S.current=setTimeout((function(){x(!1)}),2e3))},t=function(){x(!0),E.current=!0,"undefined"!==typeof window&&document.removeEventListener("mousemove",e),S.current&&clearTimeout(S.current)},n=function(){E.current=null,"undefined"!==typeof window&&document.addEventListener("mousemove",e,!1)};return"undefined"!==typeof window&&document.addEventListener("mousemove",e,!1),j.current&&(k||(j.current.addEventListener("mouseover",t,!1),j.current.addEventListener("mouseleave",n,!1))),function(){"undefined"!==typeof window&&document.removeEventListener("mousemove",e),j.current&&(j.current.removeEventListener("mouseover",t),j.current.removeEventListener("mouseleave",n))}}),[]),(0,a.useEffect)((function(){setTimeout((function(){if("undefined"!==typeof window){var e=j.current;if(e){var t=document.getElementsByClassName("".concat(m,"-img-previewer__controller-item")),n=e.getBoundingClientRect().width,r=Array.from(t).slice(0,i).reduce((function(e,t){return e+t.getBoundingClientRect().width}),0);y(r>=n/2?r<n-40?r-n/2+40:r-n/2+30:0)}}}),300)}),[i]),a.default.createElement("div",{ref:j,className:(0,s.default)("".concat(m,"-img-previewer__controller-wrapper"),{"is-mobile":k}),style:{visibility:O||k?"visible":"hidden",overflow:"hidden"},onTouchStart:function(e){e.stopPropagation(),T.current=e.touches[0].clientX},onTouchMove:function(e){e.stopPropagation();var t=e.touches[0].clientX-T.current;T.current=e.touches[0].clientX;var n=j.current.getBoundingClientRect().width,r=document.getElementsByClassName("".concat(m,"-img-previewer__controller-item")),i=Array.from(r).slice(0,r.length-1).reduce((function(e,t){return e+t.getBoundingClientRect().width}),0);y((function(e){return e-t<=0?0:e-t>=i-n/2+30?i-n/2+30:e-t}))},onClick:function(e){e.stopPropagation(),e.preventDefault()}},a.default.createElement("div",{style:{transform:"translateX(-".concat(g,"px)"),transition:"transform .3s"},className:(0,s.default)("".concat(m,"-img-previewer__controller-container"))},n.map((function(e,t){return a.default.createElement(u.default,{className:(0,s.default)("".concat(m,"-img-previewer__controller-item"),{"is-active":t===i,"is-mobile":k}),alt:"",isActive:t===i,onClick:function(){f(t)},idx:t,onError:h,src:e})}))))};t.default=d},S1Q7:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.WebLayout=void 0;var i=r(n("W8MJ")),o=r(n("PJYZ")),a=r(n("lSNA")),s=r(n("lwsE")),c=r(n("7W2i")),l=r(n("a1gu")),u=r(n("Nsbk")),d=r(n("q1tI")),f=n("VTYn"),p=r(n("TSYQ")),h=r(n("NDL1")),m=r(n("nrUO")),v=r(n("uhBA")),b=r(n("Vhm6"));function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var y=new(function(e){(0,c.default)(n,e);var t=g(n);function n(){return(0,s.default)(this,n),t.apply(this,arguments)}return n}(v.default)),_=function(e){(0,c.default)(n,e);var t=g(n);function n(e){var r;return(0,s.default)(this,n),r=t.call(this,e),(0,a.default)((0,o.default)(r),"player",void 0),(0,a.default)((0,o.default)(r),"videoNode",void 0),r}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.player=(0,h.default)(this.videoNode,this.props),(0,m.default)(this.player,this.props),this.props.onReady&&this.props.onReady(this.player),(0,b.default)(this.player,y,this.props)}},{key:"componentWillUnmount",value:function(){this.player&&this.player.dispose()}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,r=t.className,i=t.autoplay,o=t.src,a=this.context.clsPrefix;return d.default.createElement("div",{style:n,className:(0,p.default)("".concat(a,"-video"),r)},d.default.createElement("div",{"data-vjs-player":!0},d.default.createElement("video",{src:o,ref:function(t){return e.videoNode=t},"x5-video-player-type":"h5-page","t7-video-player-type":"inline","webkit-playsinline":"isiPhoneShowPlaysinline",className:"video-js",autoPlay:i})))}}]),n}(d.default.Component);t.WebLayout=_,(0,a.default)(_,"contextType",f.ConfigContext)},STnV:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l}));var r={SURE:"sure",PAYWAY:"payway",PAY:"pay",WALLET_PASSWORD:"walletPassword",RESULT:"result",SET_PASSWORD:"setPassword"},i={WX:"weixin",WALLET:"wallet"},o={WX_PAY_OK:"get_brand_wcpay_request:ok",WX_PAY_CANCEL:"get_brand_wcpay_request:cancel",WX_PAY_FAIL:"get_brand_wcpay_request:fail"},a={WX_QRCODE:10,WX_H5:11,WX_OFFICAL:12,WX_MINI_PROGRAM:13,WALLET:20},s={PENDING_PAY:0,PAID:1,CANCEL_PAY:2,FAIL_PAY:3,OUT_DATE_PAY:4},c={ORDER_TYPE_REGISTER:1,ORDER_TYPE_REWARD:2,ORDER_TYPE_THREAD:3,ORDER_TYPE_GROUP:4,ORDER_TYPE_QUESTION:5,ORDER_TYPE_ONLOOKER:6,ORDER_TYPE_ATTACHMENT:7,ORDER_TYPE_RENEW:8,ORDER_TYPE_REDPACKET:9,ORDER_TYPE_QUESTION_REWARD:10,ORDER_TYPE_MERGE:11,ORDER_TYPE_TEXT:20},l={NOT_IN_WEIXIN_PAY:{Code:"pbx_0001",Message:"\u5fae\u4fe1\u5916\u6d4f\u89c8\u5668\u65e0\u6cd5\u62c9\u8d77\u4ed8\u6b3e"},IN_IOS:{Code:"pbx_0002",Message:"\u7531\u4e8e\u76f8\u5173\u89c4\u8303\uff0cIOS\u7cfb\u7edf\u4e14\u5fae\u4fe1\u5185\uff0c\u7981\u6b62\u8fdb\u884c\u6b64\u64cd\u4f5c\uff0c\u8bf7\u66f4\u6362\u5176\u5b83\u9014\u5f84\u64cd\u4f5c"},WX_PAY_CANCEL:{Code:"pbx_0003",Message:"\u5fae\u4fe1\u652f\u4ed8\u53d6\u6d88"},WX_PAY_FAIL:{Code:"pbx_0004",Message:"\u5fae\u4fe1\u652f\u4ed8\u62c9\u8d77\u5931\u8d25"},NETWORK_ERROR:{Code:"pbx_9999",Message:"\u7f51\u7edc\u9519\u8bef"},WX_MINI_PAY_CREATE_FAILED:{Code:"pbx_0005",Message:"\u62c9\u8d77\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u652f\u4ed8\u5931\u8d25"}}},StJS:function(e,t,n){"use strict";n("4mDm"),n("2B1R"),n("rOQg"),n("07d7"),n("5s+n"),n("rB9j"),n("PKPk"),n("Rm1S"),n("UxlC"),n("EnZy"),n("XMab"),n("moxL"),n("qXVe"),n("c162"),n("waxf"),n("0TkE"),n("Onu3"),n("1dYe"),n("gvgV"),n("6R/c"),n("YL0P"),n("X5Zq"),n("MoCz"),n("P8wP"),n("ypFw"),n("JaFt"),n("zSZm"),n("PF2M"),n("KVSy"),n("ZJ55"),n("IZzc"),n("Fwt+"),n("s5qe"),n("cvf0"),n("3bBZ");var r=n("o0o1"),i=n.n(r),o=(n("ls82"),n("yXPU")),a=n.n(o),s=n("J4zp"),c=n.n(s),l=n("lY1M"),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image",n=e.split(","),r="",i="data:image/jpg;base64";if(n.length>1){var o=c()(n,2);i=o[0],r=o[1]}else{var a=c()(n,1);r=a[0]}for(var s=i.match(/:(.*?);/)[1]||"image/jpg",l=atob(r),u=l.length,d=new Uint8Array(u);u--;)d[u]=l.charCodeAt(u);return new File([d],t,{type:s})};t.a=function(){return new Promise(function(){var e=a()(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.b.env("weixin")&&l.b.env("android")&&window.wx&&wx.hasDoneConfig){e.next=3;break}return t([]),e.abrupt("return");case 3:return e.next=5,new Promise((function(e){wx.getNetworkType({success:function(){return e(!0)}}),wx.error((function(){return e(!1)}))}));case 5:if(e.sent){e.next=9;break}return t([]),e.abrupt("return");case 9:wx.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(){var e=a()(i.a.mark((function e(n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.localIds,e.next=3,Promise.all(r.map((function(e){return new Promise((function(t){wx.getLocalImgData({localId:e,success:function(n){var r=u(n.localData);r.imageType=r.type.replace("image/",""),r.localId=e,r.src=n.localData,t(r)}})}))})));case 3:o=e.sent,t(o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},SwMc:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/thread/post",function(){return n("s/rW")}])},T6Gt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogViewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("bihr").DialogWebLayout}});t.DialogViewAdapter=r},TGR9:function(e,t,n){"use strict";n("ma9I"),n("pDQq"),Object.defineProperty(t,"__esModule",{value:!0}),t.createCallbackManager=void 0;t.createCallbackManager=function(){var e=[];return{add:function(t){e.push(t)},remove:function(t){var n=-1;e.forEach((function(e,r){e===t&&(n=r)})),n>-1&&e.splice(n,1)},count:function(){return e.length},trigger:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach((function(e){if("function"===typeof e)e.apply(void 0,n);else{var t=e.callback,r=e.ctx;t.call.apply(t,[r].concat(n))}}))}}}},TJTF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStr=t.toFixed=void 0;t.toFixed=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return.01*Math.floor(100*e)};t.randomStr=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=t.length,r="",i=0;i<e;i++){var o=Math.floor(100*Math.random()*n%n);r+=t[o]}return r}},TOwV:function(e,t,n){"use strict";e.exports=n("qT12")},U5R6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("YKlV").VideoWebAdapter}});t.logicalAdapter=r},UQAj:function(e,t,n){"use strict";n("4mDm"),n("2B1R"),n("07d7"),n("5s+n"),n("PKPk"),n("3bBZ");var r=n("o0o1"),i=n.n(r),o=(n("ls82"),n("yXPU")),a=n.n(o),s=n("lSNA"),c=n.n(s),l=n("jbJk").default,u=n("mG8q").default;function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.a=function(e){var t=e.files;e.type,e.qcloudCos,e.qcloudCosBucketName,e.qcloudCosBucketArea,e.qcloudCosSignUrl,e.supportImgExt,e.supportMaxSize;return Promise.all(t.map((function(t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({file:t},e);return new Promise(function(){var e=a()(i.a.mark((function e(t,r){var o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(n);case 3:o=e.sent,t(o),e.next=19;break;case 7:return e.prev=7,e.t0=e.catch(0),e.prev=9,e.next=12,u(n);case 12:a=e.sent,t(a),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(9),r("error");case 19:case"end":return e.stop()}}),e,null,[[0,7],[9,16]])})));return function(t,n){return e.apply(this,arguments)}}())})))}},"V+Sr":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n("gWAJ").CheckboxViewAdapter)();t.default=r},VbXa:function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},Vhm6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t,n){var r=n.singleton;e.on("play",(function(){t.emit("play",e)})),t.on("play",(function(t){if(t!==e&&r&&e&&e.pause)try{e.pause()}catch(n){}}))};t.default=r},WDfI:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(n){t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({_pluginInfo:e},n))}}},Wgwo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){return n("jW6v").WebLayout};t.default=r},X5Zq:function(e,t,n){"use strict";var r=n("67WC"),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].join;o("join",(function(e){return a.apply(i(this),arguments)}))},"X8+f":function(e,t,n){"use strict";function r(e){return e&&"object"===typeof e&&"default"in e?e.default:e}var i=r(n("0Tbm")),o=r(n("vgmO"));e.exports=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=i.buildAbsoluteURL(o.location&&o.location.href||"",e)),i.buildAbsoluteURL(e,t))}},XMab:function(e,t,n){n("dOgj")("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},XaQo:function(e,t,n){"use strict";function r(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function i(e,t){var n=function(e,t){var n=r(e)*r(t);if(0===n)return 0;var i=function(e,t){return e.x*t.x+e.y*t.y}(e,t)/n;return i>1&&(i=1),Math.acos(i)}(e,t);return function(e,t){return e.x*t.y-t.x*e.y}(e,t)>0&&(n*=-1),180*n/Math.PI}n("pDQq"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){this.handlers=[],this.el=e};function a(e,t){var n=new o(e);return n.add(t),n}o.prototype.add=function(e){this.handlers.push(e)},o.prototype.del=function(e){e||(this.handlers=[]);for(var t=this.handlers.length;t>=0;t--)this.handlers[t]===e&&this.handlers.splice(t,1)},o.prototype.dispatch=function(){for(var e=0,t=this.handlers.length;e<t;e++){var n=this.handlers[e];"function"===typeof n&&n.apply(this.el,arguments)}};var s=function(e,t){this.element="string"===typeof e?document.querySelector(e):e,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var n=function(){};this.rotate=a(this.element,t.rotate||n),this.touchStart=a(this.element,t.touchStart||n),this.multipointStart=a(this.element,t.multipointStart||n),this.multipointEnd=a(this.element,t.multipointEnd||n),this.pinch=a(this.element,t.pinch||n),this.swipe=a(this.element,t.swipe||n),this.tap=a(this.element,t.tap||n),this.doubleTap=a(this.element,t.doubleTap||n),this.longTap=a(this.element,t.longTap||n),this.singleTap=a(this.element,t.singleTap||n),this.pressMove=a(this.element,t.pressMove||n),this.twoFingerPressMove=a(this.element,t.twoFingerPressMove||n),this.touchMove=a(this.element,t.touchMove||n),this.touchEnd=a(this.element,t.touchEnd||n),this.touchCancel=a(this.element,t.touchCancel||n),this._cancelAllHandler=this.cancelAll.bind(this),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}};s.prototype={start:function(e){var t=this;if(e.touches){this.now=Date.now(),this.x1=e.touches[0].pageX,this.y1=e.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(e,this.element),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30,this.isDoubleTap&&clearTimeout(this.singleTapTimeout)),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var n=this.preV;if(e.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var i={x:e.touches[1].pageX-this.x1,y:e.touches[1].pageY-this.y1};n.x=i.x,n.y=i.y,this.pinchStartLen=r(n),this.multipointStart.dispatch(e,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout((function(){t.longTap.dispatch(e,t.element),t._preventTap=!0}),750)}},move:function(e){if(e.touches){var t=this.preV,n=e.touches.length,o=e.touches[0].pageX,a=e.touches[0].pageY;if(this.isDoubleTap=!1,n>1){var s=e.touches[1].pageX,c=e.touches[1].pageY,l={x:e.touches[1].pageX-o,y:e.touches[1].pageY-a};null!==t.x&&(this.pinchStartLen>0&&(e.zoom=r(l)/this.pinchStartLen,this.pinch.dispatch(e,this.element)),e.angle=i(l,t),this.rotate.dispatch(e,this.element)),t.x=l.x,t.y=l.y,null!==this.x2&&null!==this.sx2?(e.deltaX=(o-this.x2+s-this.sx2)/2,e.deltaY=(a-this.y2+c-this.sy2)/2):(e.deltaX=0,e.deltaY=0),this.twoFingerPressMove.dispatch(e,this.element),this.sx2=s,this.sy2=c}else{if(null!==this.x2){e.deltaX=o-this.x2,e.deltaY=a-this.y2;var u=Math.abs(this.x1-this.x2),d=Math.abs(this.y1-this.y2);(u>10||d>10)&&(this._preventTap=!0)}else e.deltaX=0,e.deltaY=0;this.pressMove.dispatch(e,this.element)}this.touchMove.dispatch(e,this.element),this._cancelLongTap(),this.x2=o,this.y2=a,n>1&&e.preventDefault()}},end:function(e){if(e.changedTouches){this._cancelLongTap();var t=this;e.touches.length<2&&(this.multipointEnd.dispatch(e,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(e.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout((function(){t.swipe.dispatch(e,t.element)}),0)):(this.tapTimeout=setTimeout((function(){t._preventTap||t.tap.dispatch(e,t.element),t.isDoubleTap&&(t.doubleTap.dispatch(e,t.element),t.isDoubleTap=!1)}),0),t.isDoubleTap||(t.singleTapTimeout=setTimeout((function(){t.singleTap.dispatch(e,t.element)}),250))),this.touchEnd.dispatch(e,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}},cancelAll:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)},cancel:function(e){this.cancelAll(),this.touchCancel.dispatch(e,this.element)},_cancelLongTap:function(){clearTimeout(this.longTapTimeout)},_cancelSingleTap:function(){clearTimeout(this.singleTapTimeout)},_swipeDirection:function(e,t,n,r){return Math.abs(e-t)>=Math.abs(n-r)?e-t>0?"Left":"Right":n-r>0?"Up":"Down"},on:function(e,t){this[e]&&this[e].add(t)},off:function(e,t){this[e]&&this[e].del(t)},destroy:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,window.removeEventListener("scroll",this._cancelAllHandler),null}};var c=s;t.default=c},Xw8k:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=28)}([function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return d}));var r=n(6),i=function(e,t){for(var n=u(e,t),r=!1,i=!1;n&&!n.classList.contains("vditor-reset")&&!i;)(r=u(n.parentElement,t))?n=r:i=!0;return n||!1},o=function(e,t){for(var n=Object(r.b)(e,t),i=!1,o=!1;n&&!n.classList.contains("vditor-reset")&&!o;)(i=Object(r.b)(n.parentElement,t))?n=i:o=!0;return n||!1},a=function(e){var t=o(e,"UL"),n=o(e,"OL"),r=t;return n&&(!t||t&&n.contains(t))&&(r=n),r},s=function(e,t,n){if(!e)return!1;3===e.nodeType&&(e=e.parentElement);for(var r=e,i=!1;r&&!i&&!r.classList.contains("vditor-reset");)r.getAttribute(t)===n?i=!0:r=r.parentElement;return i&&r},c=function(e){if(!e)return!1;3===e.nodeType&&(e=e.parentElement);var t=e,n=!1,r=s(e,"data-block","0");if(r)return r;for(;t&&!n&&!t.classList.contains("vditor-reset");)"H1"===t.tagName||"H2"===t.tagName||"H3"===t.tagName||"H4"===t.tagName||"H5"===t.tagName||"H6"===t.tagName||"P"===t.tagName||"BLOCKQUOTE"===t.tagName||"OL"===t.tagName||"UL"===t.tagName?n=!0:t=t.parentElement;return n&&t},l=function(e,t){if(!e)return!1;3===e.nodeType&&(e=e.parentElement);for(var n=e,r=!1;n&&!r&&!n.classList.contains("vditor-reset");)n.nodeName===t?r=!0:n=n.parentElement;return r&&n},u=function(e,t){if(!e)return!1;3===e.nodeType&&(e=e.parentElement);for(var n=e,r=!1;n&&!r&&!n.classList.contains("vditor-reset");)n.classList.contains(t)?r=!0:n=n.parentElement;return r&&n},d=function(e){for(;e&&e.lastChild;)e=e.lastChild;return e}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"d",(function(){return p}));var r=n(2),i=n(3),o=n(0),a=function(e){var t,n=e[e.currentMode].element;return getSelection().rangeCount>0&&(t=getSelection().getRangeAt(0),n.isEqualNode(t.startContainer)||n.contains(t.startContainer))?t:e[e.currentMode].range?e[e.currentMode].range:(n.focus(),(t=n.ownerDocument.createRange()).setStart(n,0),t.collapse(!0),t)},s=function(e){var t=window.getSelection().getRangeAt(0);if(!e.contains(t.startContainer)&&!Object(o.e)(t.startContainer,"vditor-panel--none"))return{left:0,top:0};var n,r=e.parentElement.getBoundingClientRect();if(0===t.getClientRects().length)if(3===t.startContainer.nodeType){var i=t.startContainer.parentElement;if(!(i&&i.getClientRects().length>0))return{left:0,top:0};n=i.getClientRects()[0]}else{var a=t.startContainer.children;if(a[t.startOffset]&&a[t.startOffset].getClientRects().length>0)n=a[t.startOffset].getClientRects()[0];else if(t.startContainer.childNodes.length>0){var s=t.cloneRange();t.selectNode(t.startContainer.childNodes[Math.max(0,t.startOffset-1)]),n=t.getClientRects()[0],t.setEnd(s.endContainer,s.endOffset),t.setStart(s.startContainer,s.startOffset)}else n=t.startContainer.getClientRects()[0];if(!n){for(var c=t.startContainer.childNodes[t.startOffset];!c.getClientRects||c.getClientRects&&0===c.getClientRects().length;)c=c.parentElement;n=c.getClientRects()[0]}}else n=t.getClientRects()[0];return{left:n.left-r.left,top:n.top-r.top}},c=function(e,t){if(!t){if(0===getSelection().rangeCount)return!1;t=getSelection().getRangeAt(0)}var n=t.commonAncestorContainer;return e.isEqualNode(n)||e.contains(n)},l=function(e){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)},u=function(e,t,n){var r={end:0,start:0};if(!n){if(0===getSelection().rangeCount)return r;n=window.getSelection().getRangeAt(0)}if(c(t,n)){var i=n.cloneRange();e.childNodes[0]&&e.childNodes[0].childNodes[0]?i.setStart(e.childNodes[0].childNodes[0],0):i.selectNodeContents(e),i.setEnd(n.startContainer,n.startOffset),r.start=i.toString().length,r.end=r.start+n.toString().length}return r},d=function(e,t,n){var r=0,i=0,o=n.childNodes[i],a=!1,s=!1;e=Math.max(0,e),t=Math.max(0,t);var c=n.ownerDocument.createRange();for(c.setStart(o||n,0),c.collapse(!0);!s&&o;){var u=r+o.textContent.length;if(!a&&e>=r&&e<=u&&(0===e?c.setStart(o,0):3===o.childNodes[0].nodeType?c.setStart(o.childNodes[0],e-r):o.nextSibling?c.setStartBefore(o.nextSibling):c.setStartAfter(o),a=!0,e===t)){s=!0;break}a&&t>=r&&t<=u&&(0===t?c.setEnd(o,0):3===o.childNodes[0].nodeType?c.setEnd(o.childNodes[0],t-r):o.nextSibling?c.setEndBefore(o.nextSibling):c.setEndAfter(o),s=!0),r=u,o=n.childNodes[++i]}return!s&&n.childNodes[i-1]&&c.setStartBefore(n.childNodes[i-1]),l(c),c},f=function(e,t,n,o){var a=e.querySelector("wbr");if(a){if(n&&"insertValue"===n.inputType)if(a.nextSibling)if(3===a.nextSibling.nodeType)if(n&&"insertValue"===n.inputType){var s=a.nextSibling.textContent,c=null==o?void 0:o.replace(/<[^>]+>/g,"").replace(/\n$/,"").replace(/&nbsp;/g," ");s===c||s.length<c.length?t.setStart(a.nextSibling,a.nextSibling.textContent.length):t.setStart(a.nextSibling,c.length)}else t.setStart(a.nextSibling,0);else t.setStartAfter(a.nextSibling);else a.previousSibling?3===a.previousSibling.nodeType?t.setStart(a.previousSibling,a.previousSibling.textContent.length):t.setStartAfter(a.previousSibling):t.setStart(a.parentElement,0);else if(a.previousElementSibling)if(a.previousElementSibling.isSameNode(a.previousSibling)){if(a.previousElementSibling.lastChild)return t.setStartBefore(a),t.collapse(!0),l(t),!Object(i.c)()||"EM"!==a.previousElementSibling.tagName&&"STRONG"!==a.previousElementSibling.tagName&&"S"!==a.previousElementSibling.tagName||(t.insertNode(document.createTextNode(r.a.ZWSP)),t.collapse(!1)),void a.remove();t.setStartAfter(a.previousElementSibling)}else t.setStart(a.previousSibling,a.previousSibling.textContent.length);else a.previousSibling?t.setStart(a.previousSibling,a.previousSibling.textContent.length):a.nextSibling?3===a.nextSibling.nodeType?t.setStart(a.nextSibling,0):t.setStartBefore(a.nextSibling):t.setStart(a.parentElement,0);t.collapse(!0),a.remove(),l(t)}},p=function(e,t){var n=document.createElement("div");n.innerHTML=e;var r=n.querySelectorAll("p");1===r.length&&!r[0].previousSibling&&!r[0].nextSibling&&t[t.currentMode].element.children.length>0&&"P"===n.firstElementChild.tagName&&(e=r[0].innerHTML.trim());var i=document.createElement("div");i.innerHTML=e;var s=a(t);if(""!==s.toString()&&(t[t.currentMode].preventInput=!0,document.execCommand("delete",!1,"")),i.firstElementChild&&"0"===i.firstElementChild.getAttribute("data-block")){i.lastElementChild.insertAdjacentHTML("beforeend","<wbr>");var c=Object(o.c)(s.startContainer);c?c.insertAdjacentHTML("afterend",i.innerHTML):t[t.currentMode].element.insertAdjacentHTML("beforeend",i.innerHTML),f(t[t.currentMode].element,s)}else{var u=document.createElement("template");u.innerHTML=e,s.insertNode(u.content.cloneNode(!0)),s.collapse(!1),l(s)}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r="1.0.25",i=function(){function e(){}return e.ZWSP="\u200b",e.DROP_EDITOR="application/editor",e.MOBILE_WIDTH=520,e.CLASS_MENU_DISABLED="vditor-menu--disabled",e.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],e.CODE_THEME=["abap","algol","algol_nu","arduino","autumn","borland","bw","colorful","dracula","emacs","friendly","fruity","github","igor","lovelace","manni","monokai","monokailight","murphy","native","paraiso-dark","paraiso-light","pastie","perldoc","pygments","rainbow_dash","rrt","solarized-dark","solarized-dark256","solarized-light","swapoff","tango","trac","vim","vs","xcode","ant-design"],e.CODE_LANGUAGES=["mermaid","echarts","mindmap","plantuml","abc","graphviz","flowchart","apache","bash","cs","cpp","css","coffeescript","diff","xml","http","ini","json","java","javascript","js","makefile","markdown","nginx","objectivec","php","perl","properties","python","ruby","sql","shell","dart","erb","go","gradle","julia","kotlin","less","lua","matlab","rust","scss","typescript","ts","yaml"],e.CDN="https://cdn.jsdelivr.net/npm/@discuzq/vditor@1.0.25",e.MARKDOWN_OPTIONS={autoSpace:!1,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},e.HLJS_OPTIONS={enable:!0,lineNumber:!1,style:"github"},e.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},e.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:e.CDN+"/dist/css/content-theme"},e}()},function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"c",(function(){return l}));var r=function(){return navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")},i=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},o=function(){try{return"undefined"!=typeof localStorage}catch(e){return!1}},a=function(){return navigator.userAgent.indexOf("iPhone")>-1?"touchstart":"click"},s=function(e){return navigator.platform.toUpperCase().indexOf("MAC")>=0?!(!e.metaKey||e.ctrlKey):!(e.metaKey||!e.ctrlKey)},c=function(e){return/Mac/.test(navigator.platform)||"iPhone"===navigator.platform?e.indexOf("\u21e7")>-1&&i()&&(e=e.replace(";",":").replace("=","+").replace("-","_")):(e=(e=e.startsWith("\u2318")?e.replace("\u2318","\u2318+"):e.startsWith("\u2325")&&"\u2318"!==e.substr(1,1)?e.replace("\u2325","\u2325+"):e.replace("\u21e7\u2318","\u2318+\u21e7+").replace("\u2325\u2318","\u2325+\u2318+")).replace("\u2318","Ctrl").replace("\u21e7","Shift").replace("\u2325","Alt")).indexOf("Shift")>-1&&(e=e.replace(";",":").replace("=","+").replace("-","_")),e},l=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={en_US:{alignCenter:"Center",alignLeft:"Left",alignRight:"Right",alternateText:"Alternate text",bold:"Blod",both:"editor & preview",check:"Task List",close:"Close",code:"Code Block","code-theme":"Code Block Theme Preview",column:"Column",comment:"Comment",confirm:"Confirm","content-theme":"Content Theme Preview",copied:"Copied",copy:"Copy","delete-column":"Delete Row","delete-row":"Delete Column",devtools:"DevTools",down:"Down",downloadTip:"The browser does not support the download function",edit:"Edit","edit-mode":"Toggle Edit Mode",emoji:"Emoji",export:"Export",fileTypeError:"file type is error",footnoteRef:"Footnote Ref",fullscreen:"Toggle Fullscreen",generate:"Generating",headings:"Headings",help:"Help",imageURL:"image URL",indent:"Indent",info:"Info","inline-code":"Inline Code","insert-after":"Insert line after","insert-before":"Insert line Before",insertColumnLeft:"Insert 1 left",insertColumnRight:"Insert 1 right",insertRowAbove:"Insert 1 above",insertRowBelow:"Insert 1 below",instantRendering:"Instant Rendering",italic:"Italic",language:"Language",line:"Line",link:"Link",linkRef:"Link Ref",list:"List",more:"More",nameEmpty:"Name is empty","ordered-list":"Order List",outdent:"Outdent",outline:"Outline",over:"over",performanceTip:"Real-time preview requires ${x}ms, you can close it",preview:"Preview",quote:"Quote",record:"Start Record/End Record","record-tip":"The device does not support recording",recording:"recording...",redo:"Redo",remove:"Remove",row:"Row",spin:"Spin",splitView:"Split View",strike:"Strike",table:"Table",textIsNotEmpty:"text(no empty)",title:"Title",tooltipText:"Tooltip text",undo:"Undo",up:"Up",update:"Update",upload:"Upload image or file",uploadError:"upload error",uploading:"uploading...",wysiwyg:"WYSIWYG"},ja_JP:{alignCenter:"\u4e2d\u592e",alignLeft:"\u5de6\u5074",alignRight:"\u53f3\u5074",alternateText:"\u30a4\u30e1\u30fc\u30b8\u30bf\u30b0",bold:"\u592a\u304f",both:"\u30a8\u30c7\u30a3\u30bf\u30fc & \u30d7\u30ec\u30d3\u30e5\u30fc",check:"\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8",close:"\u9589\u3058\u308b",code:"\u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u633f\u5165","code-theme":"\u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u30c6\u30fc\u30de",column:"\u884c\u5217",comment:"\u30b3\u30e1\u30f3\u30c8",confirm:"\u78ba\u8a8d","content-theme":"\u30b3\u30f3\u30c6\u30f3\u30c4\u30c6\u30fc\u30de",copied:"\u30b3\u30d4\u30fc\u5b8c\u4e86",copy:"\u30b3\u30d4\u30fc","delete-column":"\u5217 \u6d88\u53bb","delete-row":"\u884c \u6d88\u53bb",devtools:"\u958b\u767a\u30c4\u30fc\u30eb",down:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9",downloadTip:"\u30d6\u30e9\u30a6\u30b6\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6a5f\u80fd\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002",edit:"\u4fee\u6b63","edit-mode":"\u7de8\u96c6\u30e2\u30fc\u30c9",emoji:"\u7d75\u6587\u5b57",export:"\u66f8\u304d\u51fa\u3057",fileTypeError:"\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002",footnoteRef:"\u811a\u6ce8\u53c2\u7167",fullscreen:"\u5168\u4f53\u753b\u9762",generate:"\u4f5c\u6210\u3059\u308b",headings:"\u30bf\u30a4\u30c8\u30eb\u5927\u304d\u3055",help:"\u30d8\u30eb\u30d7",imageURL:"\u30a4\u30e1\u30fc\u30b8 URL",indent:"\u5b57\u4e0b\u3052",info:"\u60c5\u5831","inline-code":"\u30a4\u30f3\u30e9\u30a4\u30f3\u30b3\u30fc\u30c9","insert-after":"\u30d6\u30ed\u30c3\u30af\u306e\u5f8c\u308d\u306b\u5165\u529b","insert-before":"\u30d6\u30ed\u30c3\u30af\u306e\u524d\u306b\u5165\u529b",insertColumnLeft:"\u5de6\u5074\u306b\u5217\u3092\u633f\u5165",insertColumnRight:"\u53f3\u5074\u306b\u5217\u3092\u633f\u5165",insertRowAbove:"\u4e0a\u306b\u884c\u3092\u633f\u5165",insertRowBelow:"\u4e0b\u306b\u884c\u3092\u633f\u5165",instantRendering:"\u30a4\u30f3\u30b9\u30bf\u30f3\u30c8\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0",italic:"\u659c\u4f53",language:"\u8a00\u8a9e",line:"\u6bb5\u843d\u5206\u5272",link:"\u30ea\u30f3\u30af",linkRef:"\u30ea\u30f3\u30af\u53c2\u7167",list:"\u30ea\u30b9\u30c8",more:"\u8a73\u3057\u304f\u898b\u308b",nameEmpty:"\u540d\u524d\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002","ordered-list":"\u9806\u5e8f\u306e\u3042\u308b\u30ea\u30b9\u30c8",outdent:"\u3076\u3089\u4e0b\u3052\u30a4\u30f3\u30c7\u30f3\u30c8",outline:"\u6982\u8981",over:"\u30aa\u30fc\u30d0\u30fc",performanceTip:"\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u30d7\u30ec\u30d3\u30e5\u30fc\u306b\u306f\u3001${x}ms\u304c\u5fc5\u8981\u3067\u30a8\u30c7\u30a3\u30bf\u30fc/\u30d7\u30ec\u30d3\u30e5\u30fc\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u9589\u3058\u308b\u4e8b\u304c\u51fa\u6765\u307e\u3059\u3002",preview:"\u30d7\u30ec\u30d3\u30e5\u30fc",quote:"\u5f15\u7528\u6bb5\u843d",record:"\u9332\u97f3\u958b\u59cb/\u9332\u97f3\u7d42\u4e86","record-tip":"\u9332\u97f3\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002",recording:"\u9332\u97f3\u4e2d...",redo:"\u623b\u308b",remove:"\u6d88\u53bb",row:"\u5217",spin:"\u30b9\u30d4\u30f3",splitView:"\u30de\u30fc\u30af\u30c0\u30a6\u30f3",strike:"\u53d6\u308a\u6d88\u3057\u7dda",table:"\u8868 \u633f\u5165",textIsNotEmpty:"\u30c6\u30ad\u30b9\u30c8(no empty)",title:"\u984c\u540d",tooltipText:"\u30c4\u30fc\u30eb\u30c1\u30c3\u30d7",undo:"\u53d6\u308a\u6d88\u3059",up:"\u623b\u308b",update:"\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8",upload:"\u30a4\u30e1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b",uploadError:"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u5931\u6557",uploading:"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u4e2d",wysiwyg:"\u30a6\u30a3\u30b8\u30a6\u30a3\u30b0"},ko_KR:{alignCenter:"\uac00\uc6b4\ub370",alignLeft:"\uc67c\ucabd",alignRight:"\uc624\ub978\ucabd",alternateText:"\uc774\ubbf8\uc9c0 \ud0dc\uadf8",bold:"\uad75\uac8c",both:"\uc5d0\ub514\ud130 & \ubbf8\ub9ac\ubcf4\uae30",check:"\uccb4\ud06c\ubc15\uc2a4",close:"\ub2eb\uae30",code:"\ucf54\ub4dc\ube14\ub7ed\uc0bd\uc785","code-theme":"\ucf54\ub4dc\ube14\ub7ed\ud14c\ub9c8",column:"\ud589",comment:"\ucf54\uba58\ud2b8",confirm:"\ud655\uc778","content-theme":"\ucee8\ud150\uce20\ud14c\ub9c8",copied:"\ubcf5\uc0ac\uc644\ub8cc",copy:"\ubcf5\uc0ac","delete-column":"\uc5f4 \uc0ad\uc81c","delete-row":"\ud589 \uc0ad\uc81c",devtools:"\uac1c\ubc1c\ud234",down:"\ub2e4\uc6b4",downloadTip:"\ube0c\ub77c\uc6b0\uc800\uac00 \ub2e4\uc6b4\ub85c\ub4dc \uae30\ub2a5\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4",edit:"\uc218\uc815","edit-mode":"\ud3b8\uc9d1\ubaa8\ub4dc",emoji:"\uc774\ubaa8\uc9c0",export:"\ub0b4\ubcf4\ub0b4\uae30",fileTypeError:"\uc9c0\uc6d0\ud558\uc9c0\uc54a\uc2b5\ub2c8\ub2e4.",footnoteRef:"\uac01\uc8fc\ucc38\uc870",fullscreen:"\uc804\uccb4\ud654\uba74",generate:"\uc0dd\uc131",headings:"\uc81c\ubaa9\ud06c\uae30",help:"\ub3c4\uc6c0\ub9d0",imageURL:"\uc774\ubbf8\uc9c0 URL",indent:"\ub4e4\uc5ec\uc4f0\uae30",info:"\uc815\ubcf4","inline-code":"\uc778\ub77c\uc778\ucf54\ub4dc","insert-after":"\ube14\ub77d \ub4a4\ub85c \uc785\ub825","insert-before":"\ube14\ub77d \uc55e\uc73c\ub85c \uc785\ub825",insertColumnLeft:"\uc67c\ucabd\uc5d0 \uc5f4 \uc0bd\uc785",insertColumnRight:"\uc624\ub978\ucabd\uc5d0 \uc5f4 \uc0bd\uc785",insertRowAbove:"\uc704\uc5d0 \ud589 \uc0bd\uc785",insertRowBelow:"\uc544\ub798\uc5d0 \ud589 \uc0bd\uc785",instantRendering:"\ud0c0\uc774\ud3ec\ub77c",italic:"\uae30\uc6b8\uc784\uaf34",language:"\uc5b8\uc5b4",line:"\ubb38\ub2e8\ub098\ub214",link:"\ub9c1\ud06c",linkRef:"\ub9c1\ud06c \ucc38\uc870",list:"\uc21c\uc11c\uc5c6\ub294 \ubaa9\ub85d",more:"\ub354\ubcf4\uae30",nameEmpty:"\uc774\ub984\uc774 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4.","ordered-list":"\uc21c\uc11c\uc788\ub294 \ubaa9\ub85d",outdent:"\ub0b4\uc5b4\uc4f0\uae30",outline:"\uac1c\uc694",over:"\uc624\ubc84",performanceTip:"\uc2e4\uc2dc\uac04 \ubbf8\ub9ac\ubcf4\uae30\uc5d0\ub294 ${x}ms\uac00 \ud544\uc694\ud558\uba70 \uc5d0\ub514\ud130/\ubbf8\ub9ac\ubcf4\uae30 \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc5ec \ub2eb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",preview:"\ubbf8\ub9ac\ubcf4\uae30",quote:"\uc778\uc6a9\ub2e8\ub77d",record:"\ub179\uc74c\uc2dc\uc791/\ub179\uc74c\uc885\ub8cc","record-tip":"\ub179\uc74c\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.",recording:"\ub179\uc74c\uc911...",redo:"\ub418\ub3cc\ub9ac\uae30",remove:"\uc0ad\uc81c",row:"\uc5f4",spin:"\ud68c\uc804",splitView:"\ub9c8\ud06c\ub2e4\uc6b4",strike:"\ucde8\uc18c\uc120",table:"\ud45c\uc0bd\uc785",textIsNotEmpty:"\ud14d\uc2a4\ud2b8(no empty)",title:"\ud45c\uc81c",tooltipText:"\ud234\ud301",undo:"\ucde8\uc18c\ud558\uae30",up:"\uc704\ub85c",update:"\uc5c5\ub370\uc774\ud2b8",upload:"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\ud558\uae30",uploadError:"\uc5c5\ub85c\ub4dc \uc2e4\ud328",uploading:"\uc5c5\ub85c\ub4dc\uc911...",wysiwyg:"\uc704\uc9c0\uc704\uadf8"},ru_RU:{alignCenter:"\u0412\u044b\u0440\u043e\u0432\u043d\u044f\u0442\u044c \u043f\u043e \u0446\u0435\u043d\u0442\u0440\u0443",alignLeft:"\u0412\u044b\u0440\u043e\u0432\u043d\u044f\u0442\u044c \u043f\u043e \u043b\u0435\u0432\u043e\u043c\u0443 \u043a\u0440\u0430\u044e",alignRight:"\u0412\u044b\u0440\u043e\u0432\u043d\u044f\u0442\u044c \u043f\u043e \u043f\u0440\u0430\u0432\u043e\u043c\u0443 \u043a\u0440\u0430\u044e",alternateText:"\u0410\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442",bold:"\u041f\u043e\u043b\u0443\u0436\u0438\u0440\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442",both:"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0441 \u043f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u043c",check:"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0434\u0430\u0447",close:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",code:"\u0411\u043b\u043e\u043a \u043a\u043e\u0434\u0430","code-theme":"\u0422\u0435\u043c\u0430 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0431\u043b\u043e\u043a\u0430 \u043a\u043e\u0434\u0430",column:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432",comment:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",confirm:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c","content-theme":"\u0422\u0435\u043c\u0430 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430",copied:"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e",copy:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c","delete-column":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446","delete-row":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443",devtools:"\u0413\u0440\u0430\u0444 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",down:"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0432\u043d\u0438\u0437",downloadTip:"\u0411\u0440\u0430\u0443\u0437\u0435\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438",edit:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","edit-mode":"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0440\u0435\u0436\u0438\u043c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",emoji:"\u0421\u043c\u0430\u0439\u043b\u044b",export:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442",fileTypeError:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0442\u0438\u043f\u0430 \u0444\u0430\u0439\u043b\u0430",footnoteRef:"\u0421\u043d\u043e\u0441\u043a\u0430",fullscreen:"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043d\u0430 \u043f\u043e\u043b\u043d\u044b\u0439 \u044d\u043a\u0440\u0430\u043d",generate:"\u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f",headings:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438",help:"\u041f\u043e\u043c\u043e\u0449\u044c",imageURL:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",indent:"\u041e\u0442\u0441\u0442\u0443\u043f",info:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0435","inline-code":"\u0412\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u043a\u043e\u0434 ","insert-after":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043b\u0438\u043d\u0438\u044e \u043f\u043e\u0441\u043b\u0435 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438","insert-before":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043b\u0438\u043d\u0438\u044e \u043f\u0435\u0440\u0435\u0434 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u043e\u0439",insertColumnLeft:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u0441\u043b\u0435\u0432\u0430",insertColumnRight:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u0441\u043f\u0440\u0430\u0432\u0430",insertRowAbove:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u0441\u0432\u0435\u0440\u0445\u0443",insertRowBelow:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u0441\u043d\u0438\u0437\u0443",instantRendering:"\u041c\u0433\u043d\u043e\u0432\u0435\u043d\u043d\u044b\u0439 \u0440\u0435\u043d\u0434\u0435\u0440\u0438\u043d\u0433",italic:"\u041a\u0443\u0440\u0441\u0438\u0432",language:"\u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441",line:"\u041b\u0438\u043d\u0438\u044f",link:"\u0421\u0441\u044b\u043b\u043a\u0430",linkRef:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443",list:"\u0421\u043f\u0438\u0441\u043e\u043a",more:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e",nameEmpty:"\u0418\u043c\u044f \u043f\u0443\u0441\u0442\u043e\u0435","ordered-list":"\u0423\u043f\u043e\u0440\u044f\u0434\u043e\u0447\u0435\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a",outdent:"\u0412\u044b\u0441\u0442\u0443\u043f",outline:"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435",over:"\u041d\u0430\u0434",performanceTip:"\u041f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442 ${x}\u043c\u0441, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c \u0435\u0433\u043e",preview:"\u041f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",quote:"\u0426\u0438\u0442\u0430\u0442\u0430",record:"\u041d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c/\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c","record-tip":"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u044c",recording:"\u0417\u0430\u043f\u0438\u0441\u044c...",redo:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c",remove:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",row:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u043e\u043a",spin:"\u041f\u0440\u043e\u043a\u0440\u0443\u0442\u043a\u0430",splitView:"\u0420\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",strike:"\u0417\u0430\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044b\u0439 \u0442\u0435\u043a\u0441\u0442",table:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430",textIsNotEmpty:"\u0422\u0435\u043a\u0441\u0442 (\u043d\u0435\u043f\u0443\u0441\u0442\u043e\u0439)",title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",tooltipText:"\u0422\u0435\u043a\u0441\u0442 \u0432\u0441\u043f\u043b\u044b\u0432\u0430\u044e\u0449\u0435\u0439 \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0438",undo:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",up:"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0432\u0432\u0435\u0440\u0445",update:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",upload:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438\u043b\u0438 \u0444\u0430\u0439\u043b",uploadError:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438",uploading:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",wysiwyg:"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440 WYSIWYG"},zh_CN:{alignCenter:"\u5c45\u4e2d",alignLeft:"\u5c45\u5de6",alignRight:"\u5c45\u53f3",alternateText:"\u66ff\u4ee3\u6587\u672c",bold:"\u7c97\u4f53",both:"\u7f16\u8f91 & \u9884\u89c8",check:"\u4efb\u52a1\u5217\u8868",close:"\u5173\u95ed",code:"\u4ee3\u7801\u5757","code-theme":"\u4ee3\u7801\u5757\u4e3b\u9898\u9884\u89c8",column:"\u5217",comment:"\u8bc4\u8bba",confirm:"\u786e\u5b9a","content-theme":"\u5185\u5bb9\u4e3b\u9898\u9884\u89c8",copied:"\u5df2\u590d\u5236",copy:"\u590d\u5236","delete-column":"\u5220\u9664\u5217","delete-row":"\u5220\u9664\u884c",devtools:"\u5f00\u53d1\u8005\u5de5\u5177",down:"\u4e0b",downloadTip:"\u8be5\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u4e0b\u8f7d\u529f\u80fd",edit:"\u7f16\u8f91","edit-mode":"\u5207\u6362\u7f16\u8f91\u6a21\u5f0f",emoji:"\u8868\u60c5",export:"\u5bfc\u51fa",fileTypeError:"\u6587\u4ef6\u7c7b\u578b\u4e0d\u5141\u8bb8\u4e0a\u4f20",footnoteRef:"\u811a\u6ce8\u6807\u8bc6",fullscreen:"\u5168\u5c4f\u5207\u6362",generate:"\u751f\u6210\u4e2d",headings:"\u6807\u9898",help:"\u5e2e\u52a9",imageURL:"\u56fe\u7247\u5730\u5740",indent:"\u5217\u8868\u7f29\u8fdb",info:"\u5173\u4e8e","inline-code":"\u884c\u5185\u4ee3\u7801","insert-after":"\u672b\u5c3e\u63d2\u5165\u884c","insert-before":"\u8d77\u59cb\u63d2\u5165\u884c",insertColumnLeft:"\u5728\u5de6\u8fb9\u63d2\u5165\u4e00\u5217",insertColumnRight:"\u5728\u53f3\u8fb9\u63d2\u5165\u4e00\u5217",insertRowAbove:"\u5728\u4e0a\u65b9\u63d2\u5165\u4e00\u884c",insertRowBelow:"\u5728\u4e0b\u65b9\u63d2\u5165\u4e00\u884c",instantRendering:"\u5373\u65f6\u6e32\u67d3",italic:"\u659c\u4f53",language:"\u8bed\u8a00",line:"\u5206\u9694\u7ebf",link:"\u94fe\u63a5",linkRef:"\u5f15\u7528\u6807\u8bc6",list:"\u65e0\u5e8f\u5217\u8868",more:"\u66f4\u591a",nameEmpty:"\u6587\u4ef6\u540d\u4e0d\u80fd\u4e3a\u7a7a","ordered-list":"\u6709\u5e8f\u5217\u8868",outdent:"\u5217\u8868\u53cd\u5411\u7f29\u8fdb",outline:"\u5927\u7eb2",over:"\u8d85\u8fc7",performanceTip:"\u5b9e\u65f6\u9884\u89c8\u9700 ${x}ms\uff0c\u53ef\u70b9\u51fb\u7f16\u8f91 & \u9884\u89c8\u6309\u94ae\u8fdb\u884c\u5173\u95ed",preview:"\u9884\u89c8",quote:"\u5f15\u7528",record:"\u5f00\u59cb\u5f55\u97f3/\u7ed3\u675f\u5f55\u97f3","record-tip":"\u8be5\u8bbe\u5907\u4e0d\u652f\u6301\u5f55\u97f3\u529f\u80fd",recording:"\u5f55\u97f3\u4e2d...",redo:"\u91cd\u505a",remove:"\u5220\u9664",row:"\u884c",spin:"\u65cb\u8f6c",splitView:"\u5206\u5c4f\u9884\u89c8",strike:"\u5220\u9664\u7ebf",table:"\u8868\u683c",textIsNotEmpty:"\u6587\u672c\uff08\u4e0d\u80fd\u4e3a\u7a7a\uff09",title:"\u6807\u9898",tooltipText:"\u63d0\u793a\u6587\u672c",undo:"\u64a4\u9500",up:"\u4e0a",update:"\u66f4\u65b0",upload:"\u4e0a\u4f20\u56fe\u7247\u6216\u6587\u4ef6",uploadError:"\u4e0a\u4f20\u9519\u8bef",uploading:"\u4e0a\u4f20\u4e2d...",wysiwyg:"\u6240\u89c1\u5373\u6240\u5f97"}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r=function(e,t){if(document.getElementById(t))return!1;var n=new XMLHttpRequest;n.open("GET",e,!1),n.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),n.send("");var r=document.createElement("script");r.type="text/javascript",r.text=n.responseText,r.id=t,document.head.appendChild(r)},i=function(e,t){return new Promise((function(n,r){if(document.getElementById(t))return n(),!1;var i=document.createElement("script");i.src=e,i.async=!0,document.head.appendChild(i),i.onload=function(){if(document.getElementById(t))return i.remove(),n(),!1;i.id=t,n()}}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r=function(e,t){if(!e)return!1;3===e.nodeType&&(e=e.parentElement);for(var n=e,r=!1;n&&!r&&!n.classList.contains("vditor-reset");)0===n.nodeName.indexOf(t)?r=!0:n=n.parentElement;return r&&n},i=function(e){var t=r(e,"H");return!(!t||2!==t.tagName.length||"HR"===t.tagName)&&t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),i=n(5),o=n(8),a=n(9),s=function(e,t){var n=e.querySelectorAll(".language-math");if(0!==n.length){var s={cdn:r.a.CDN,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}};if(t&&t.math&&(t.math=Object.assign({},s.math,t.math)),"KaTeX"===(t=Object.assign({},s,t)).math.engine)Object(o.a)(t.cdn+"/dist/js/katex/katex.min.css","vditorKatexStyle"),Object(i.a)(t.cdn+"/dist/js/katex/katex.min.js","vditorKatexScript").then((function(){n.forEach((function(e){if(!e.parentElement.classList.contains("vditor-wysiwyg__pre")&&!e.parentElement.classList.contains("vditor-ir__marker--pre")&&!e.getAttribute("data-math")){var t=Object(a.a)(e.textContent);e.setAttribute("data-math",t);try{e.innerHTML=katex.renderToString(t,{displayMode:"DIV"===e.tagName,output:"html"})}catch(t){e.innerHTML=t.message,e.className="language-math vditor-reset--error"}e.addEventListener("copy",(function(e){e.stopPropagation(),e.preventDefault();var t=e.currentTarget.closest(".language-math");e.clipboardData.setData("text/html",t.innerHTML),e.clipboardData.setData("text/plain",t.getAttribute("data-math"))}))}}))}));else if("MathJax"===t.math.engine){window.MathJax||(window.MathJax={loader:{paths:{mathjax:t.cdn+"/dist/js/mathjax"}},startup:{typeset:!1},tex:{macros:t.math.macros}}),Object(i.b)(t.cdn+"/dist/js/mathjax/tex-svg.js","vditorMathJaxScript");var c=function(e,t){var n=Object(a.a)(e.textContent).trim(),r=window.MathJax.getMetricsFor(e);r.display="DIV"===e.tagName,window.MathJax.tex2svgPromise(n,r).then((function(r){e.innerHTML="",e.setAttribute("data-math",n),e.append(r),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();var i=r.querySelector('[data-mml-node="merror"]');i&&""!==i.textContent.trim()&&(e.innerHTML=i.textContent.trim(),e.className="vditor-reset--error"),t&&t()}))};window.MathJax.startup.promise.then((function(){for(var e=[],t=function(t){var r=n[t];r.parentElement.classList.contains("vditor-wysiwyg__pre")||r.parentElement.classList.contains("vditor-ir__marker--pre")||r.getAttribute("data-math")||!Object(a.a)(r.textContent).trim()||e.push((function(e){t===n.length-1?c(r):c(r,e)}))},r=0;r<n.length;r++)t(r);!function(e){if(0!==e.length){var t=0,n=e[e.length-1],r=function(){var i=e[t++];i===n?i():i(r)};r()}}(e)}))}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t){if(!document.getElementById(t)){var n=document.createElement("link");n.id=t,n.rel="stylesheet",n.type="text/css",n.href=e,document.getElementsByTagName("head")[0].appendChild(n)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e.replace(/\u00a0/g," ")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(8),i=function(e,t){if(e&&t){var n=document.getElementById("vditorContentTheme"),i=t+"/"+e+".css";n?n.href!==i&&(n.remove(),Object(r.a)(i,"vditorContentTheme")):Object(r.a)(i,"vditorContentTheme")}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),i=n(5),o=function(e,t){void 0===e&&(e=document),void 0===t&&(t=r.a.CDN);var n=e.querySelectorAll(".language-abc");n.length>0&&Object(i.a)(t+"/dist/js/abcjs/abcjs_basic.min.js","vditorAbcjsScript").then((function(){n.forEach((function(e){e.parentElement.classList.contains("vditor-wysiwyg__pre")||e.parentElement.classList.contains("vditor-ir__marker--pre")||"true"!==e.getAttribute("data-processed")&&(ABCJS.renderAbc(e,e.textContent.trim()),e.style.overflowX="auto",e.setAttribute("data-processed","true"))}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),i=n(5),o=function(e,t,n){void 0===e&&(e=document),void 0===t&&(t=r.a.CDN);var o=e.querySelectorAll(".language-echarts");o.length>0&&Object(i.a)(t+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then((function(){o.forEach((function(e){if(!e.parentElement.classList.contains("vditor-wysiwyg__pre")&&!e.parentElement.classList.contains("vditor-ir__marker--pre")){var t=e.innerText.trim();if(t)try{if("true"===e.getAttribute("data-processed"))return;var r=JSON.parse(t);echarts.init(e,"dark"===n?"dark":void 0).setOption(r),e.setAttribute("data-processed","true")}catch(t){e.className="vditor-reset--error",e.innerHTML="echarts render error: <br>"+t}}}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4),i=n(9),o=function(e,t){void 0===t&&(t="zh_CN"),e.querySelectorAll("pre > code").forEach((function(n,o){if(!n.parentElement.classList.contains("vditor-wysiwyg__pre")&&!n.parentElement.classList.contains("vditor-ir__marker--pre")&&!(n.classList.contains("language-mermaid")||n.classList.contains("language-flowchart")||n.classList.contains("language-echarts")||n.classList.contains("language-mindmap")||n.classList.contains("language-plantuml")||n.classList.contains("language-abc")||n.classList.contains("language-graphviz")||n.classList.contains("language-math")||n.style.maxHeight.indexOf("px")>-1||e.classList.contains("vditor-preview")&&o>5)){var a=n.innerText;if(n.classList.contains("highlight-chroma")){var s=document.createElement("code");s.innerHTML=n.innerHTML,s.querySelectorAll(".highlight-ln").forEach((function(e){e.remove()})),a=s.innerText}var c=document.createElement("div");c.className="vditor-copy",c.innerHTML='<span aria-label="'+r.a[t].copy+"\"\nonmouseover=\"this.setAttribute('aria-label', '"+r.a[t].copy+"')\"\nclass=\"vditor-tooltipped vditor-tooltipped__w\"\nonclick=\"this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '"+r.a[t].copied+'\')"><svg><use xlink:href="#vditor-icon-copy"></use></svg></span>';var l=document.createElement("textarea");l.value=Object(i.a)(a),c.insertAdjacentElement("afterbegin",l),n.before(c),n.style.maxHeight=window.outerHeight-40+"px"}}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),i=n(5),o=function(e,t){void 0===t&&(t=r.a.CDN);var n=e.querySelectorAll(".language-flowchart");0!==n.length&&Object(i.a)(t+"/dist/js/flowchart.js/flowchart.min.js","vditorFlowchartScript").then((function(){n.forEach((function(e){if("true"!==e.getAttribute("data-processed")){var t=flowchart.parse(e.textContent);e.innerHTML="",t.drawSVG(e),e.setAttribute("data-processed","true")}}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),i=n(5),o=function(e,t){void 0===t&&(t=r.a.CDN);var n=e.querySelectorAll(".language-graphviz");0!==n.length&&Object(i.a)(t+"/dist/js/graphviz/viz.js","vditorGraphVizScript").then((function(){n.forEach((function(e){if(!e.parentElement.classList.contains("vditor-wysiwyg__pre")&&!e.parentElement.classList.contains("vditor-ir__marker--pre")&&"true"!==e.getAttribute("data-processed")&&""!==e.textContent.trim()){try{var t=new Blob(["importScripts('"+document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js")+"');"],{type:"application/javascript"}),n=(window.URL||window.webkitURL).createObjectURL(t),r=new Worker(n);new Viz({worker:r}).renderSVGElement(e.textContent).then((function(t){e.innerHTML=t.outerHTML})).catch((function(t){e.innerHTML="graphviz render error: <br>"+t,e.className="vditor-reset--error"}))}catch(e){console.error("graphviz error",e)}e.setAttribute("data-processed","true")}}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),i=n(5),o=n(8),a=function(e,t,n){void 0===t&&(t=document),void 0===n&&(n=r.a.CDN);var a=e.style;r.a.CODE_THEME.includes(a)||(a="github");var s=document.getElementById("vditorHljsStyle"),c=n+"/dist/js/highlight.js/styles/"+a+".css";s&&s.href!==c&&s.remove(),Object(o.a)(n+"/dist/js/highlight.js/styles/"+a+".css","vditorHljsStyle"),!1!==e.enable&&0!==t.querySelectorAll("pre > code").length&&Object(i.a)(n+"/dist/js/highlight.js/highlight.pack.js","vditorHljsScript").then((function(){t.querySelectorAll("pre > code").forEach((function(t){if(!t.parentElement.classList.contains("vditor-ir__marker--pre")&&!t.parentElement.classList.contains("vditor-wysiwyg__pre")&&!(t.classList.contains("language-mermaid")||t.classList.contains("language-flowchart")||t.classList.contains("language-echarts")||t.classList.contains("language-mindmap")||t.classList.contains("language-plantuml")||t.classList.contains("language-abc")||t.classList.contains("language-graphviz")||t.classList.contains("language-math"))&&(hljs.highlightBlock(t),e.lineNumber)){t.classList.add("vditor-linenumber");var n=t.querySelector(".vditor-linenumber__temp");n||((n=document.createElement("div")).className="vditor-linenumber__temp",t.insertAdjacentElement("beforeend",n));var r=getComputedStyle(t).whiteSpace,i=!1;"pre-wrap"!==r&&"pre-line"!==r||(i=!0);var o="",a=t.textContent.split(/\r\n|\r|\n/g);a.pop(),a.map((function(e){var t="";i&&(n.textContent=e||"\n",t=' style="height:'+n.getBoundingClientRect().height+'px"'),o+="<span"+t+"></span>"})),n.style.display="none",o='<span class="vditor-linenumber__rows">'+o+"</span>",t.insertAdjacentHTML("beforeend",o)}}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),i=n(5),o=function(e,t,n){void 0===t&&(t=r.a.CDN);var o=e.querySelectorAll(".language-mermaid");0!==o.length&&Object(i.a)(t+"/dist/js/mermaid/mermaid.min.js","vditorMermaidScript").then((function(){var e={altFontFamily:"sans-serif",flowchart:{htmlLabels:!0,useMaxWidth:!0},fontFamily:"sans-serif",gantt:{leftPadding:75,rightPadding:20},securityLevel:"loose",sequence:{boxMargin:8,diagramMarginX:8,diagramMarginY:8,useMaxWidth:!0},startOnLoad:!1};"dark"===n&&(e.theme="dark",e.themeVariables={activationBkgColor:"hsl(180, 1.5873015873%, 28.3529411765%)",activationBorderColor:"#81B1DB",activeTaskBkgColor:"#81B1DB",activeTaskBorderColor:"#ffffff",actorBkg:"#1f2020",actorBorder:"#81B1DB",actorLineColor:"lightgrey",actorTextColor:"lightgrey",altBackground:"hsl(0, 0%, 40%)",altSectionBkgColor:"#333",arrowheadColor:"lightgrey",background:"#333",border1:"#81B1DB",border2:"rgba(255, 255, 255, 0.25)",classText:"#e0dfdf",clusterBkg:"hsl(180, 1.5873015873%, 28.3529411765%)",clusterBorder:"rgba(255, 255, 255, 0.25)",critBkgColor:"#E83737",critBorderColor:"#E83737",darkTextColor:"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)",defaultLinkColor:"lightgrey",doneTaskBkgColor:"lightgrey",doneTaskBorderColor:"grey",edgeLabelBackground:"hsl(0, 0%, 34.4117647059%)",errorBkgColor:"#a44141",errorTextColor:"#ddd",fillType0:"#1f2020",fillType1:"hsl(180, 1.5873015873%, 28.3529411765%)",fillType2:"hsl(244, 1.5873015873%, 12.3529411765%)",fillType3:"hsl(244, 1.5873015873%, 28.3529411765%)",fillType4:"hsl(116, 1.5873015873%, 12.3529411765%)",fillType5:"hsl(116, 1.5873015873%, 28.3529411765%)",fillType6:"hsl(308, 1.5873015873%, 12.3529411765%)",fillType7:"hsl(308, 1.5873015873%, 28.3529411765%)",fontFamily:'"trebuchet ms", verdana, arial',fontSize:"16px",gridColor:"lightgrey",labelBackground:"#181818",labelBoxBkgColor:"#1f2020",labelBoxBorderColor:"#81B1DB",labelColor:"#ccc",labelTextColor:"lightgrey",lineColor:"lightgrey",loopTextColor:"lightgrey",mainBkg:"#1f2020",mainContrastColor:"lightgrey",nodeBkg:"#1f2020",nodeBorder:"#81B1DB",noteBkgColor:"#fff5ad",noteBorderColor:"rgba(255, 255, 255, 0.25)",noteTextColor:"#1f2020",primaryBorderColor:"hsl(180, 0%, 2.3529411765%)",primaryColor:"#1f2020",primaryTextColor:"#e0dfdf",secondBkg:"hsl(180, 1.5873015873%, 28.3529411765%)",secondaryBorderColor:"hsl(180, 0%, 18.3529411765%)",secondaryColor:"hsl(180, 1.5873015873%, 28.3529411765%)",secondaryTextColor:"rgb(183.8476190475, 181.5523809523, 181.5523809523)",sectionBkgColor:"hsl(52.9411764706, 28.813559322%, 58.431372549%)",sectionBkgColor2:"#EAE8D9",sequenceNumberColor:"black",signalColor:"lightgrey",signalTextColor:"lightgrey",taskBkgColor:"hsl(180, 1.5873015873%, 35.3529411765%)",taskBorderColor:"#ffffff",taskTextClickableColor:"#003163",taskTextColor:"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)",taskTextDarkColor:"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)",taskTextLightColor:"lightgrey",taskTextOutsideColor:"lightgrey",tertiaryBorderColor:"hsl(20, 0%, 2.3529411765%)",tertiaryColor:"hsl(20, 1.5873015873%, 12.3529411765%)",tertiaryTextColor:"rgb(222.9999999999, 223.6666666666, 223.9999999999)",textColor:"#ccc",titleColor:"#F9FFFE",todayLineColor:"#DB5757"}),mermaid.initialize(e),o.forEach((function(e){"true"!==e.getAttribute("data-processed")&&""!==e.textContent.trim()&&(mermaid.init(void 0,e),e.setAttribute("data-processed","true"))}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),i=n(5),o=function(e,t,n){void 0===e&&(e=document),void 0===t&&(t=r.a.CDN);var o=e.querySelectorAll(".language-mindmap");o.length>0&&Object(i.a)(t+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then((function(){o.forEach((function(e){if(!e.parentElement.classList.contains("vditor-wysiwyg__pre")&&!e.parentElement.classList.contains("vditor-ir__marker--pre")){var t=e.getAttribute("data-code");if(t)try{if("true"===e.getAttribute("data-processed"))return;echarts.init(e,"dark"===n?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(t))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(e,t){var n;return(null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.children)?"circle":"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),e.setAttribute("data-processed","true")}catch(t){e.className="vditor-reset--error",e.innerHTML="mindmap render error: <br>"+t}}}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),i=n(5),o=function(e,t){void 0===e&&(e=document),void 0===t&&(t=r.a.CDN);var n=e.querySelectorAll(".language-plantuml");0!==n.length&&Object(i.a)(t+"/dist/js/plantuml/plantuml-encoder.min.js","vditorPlantumlScript").then((function(){n.forEach((function(e){if(!e.parentElement.classList.contains("vditor-wysiwyg__pre")&&!e.parentElement.classList.contains("vditor-ir__marker--pre")){var t=e.textContent.trim();if(t)try{e.innerHTML='<img src="http://www.plantuml.com/plantuml/svg/~1'+plantumlEncoder.encode(t)+'">'}catch(t){e.className="vditor-reset--error",e.innerHTML="plantuml render error: <br>"+t}}}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){e&&e.querySelectorAll("a").forEach((function(e){var t=e.getAttribute("href");t&&(t.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)?function(e,t){e.insertAdjacentHTML("afterend",'<video controls="controls" src="'+t+'"></video>'),e.remove()}(e,t):t.match(/^.+.(mp3|wav|flac)$/)?function(e,t){e.insertAdjacentHTML("afterend",'<audio controls="controls" src="'+t+'"></audio>'),e.remove()}(e,t):function(e,t){var n=t.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),r=t.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),i=t.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),o=t.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),a=t.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),s=t.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),c=t.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),l=t.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/);n&&11===n[1].length?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'+n[1]+(n[2]?"?start="+n[2]:"")+'"></iframe>'),e.remove()):r&&r[1]?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'+r[1]+'"></iframe>'),e.remove()):i&&i[1]?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='+i[1]+'"></iframe>'),e.remove()):o&&o[1]?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video"\n src="//coub.com/embed/'+o[1]+'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>'),e.remove()):a&&a[0]?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video"\n src="https://www.facebook.com/plugins/video.php?href='+encodeURIComponent(a[0])+'"></iframe>'),e.remove()):s&&s[2]?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video"\n src="https://www.dailymotion.com/embed/video/'+s[2]+'"></iframe>'),e.remove()):c&&c[1]?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video"\n src="//player.bilibili.com/player.html?bvid='+c[1]+'"></iframe>'),e.remove()):l&&l[1]&&(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'+l[1]+'"></iframe>'),e.remove())}(e,t))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),i=function(e,t,n){void 0===t&&(t="zh_CN"),void 0===n&&(n="classic");var i=e.getBoundingClientRect();document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'+("dark"===n?" vditor--dark":"")+'">\n    <div class="vditor-img__bar">\n      <span class="vditor-img__btn" data-deg="0">\n        <svg><use xlink:href="#vditor-icon-redo"></use></svg>\n        '+r.a[t].spin+"\n      </span>\n      <span class=\"vditor-img__btn\"  onclick=\"this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''\">\n        X &nbsp;"+r.a[t].close+'\n      </span>\n    </div>\n    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = \'\';document.body.style.overflow = \'\'">\n      <img style="width: '+e.width+"px;height:"+e.height+"px;transform: translate3d("+i.left+"px, "+(i.top-36)+'px, 0)" src="'+e.getAttribute("src")+'">\n    </div>\n</div>'),document.body.style.overflow="hidden";var o=document.querySelector(".vditor-img img"),a="translate3d("+Math.max(0,window.innerWidth-e.naturalWidth)/2+"px, "+Math.max(0,window.innerHeight-36-e.naturalHeight)/2+"px, 0)";setTimeout((function(){o.setAttribute("style","transition: transform .3s ease-in-out;transform: "+a),setTimeout((function(){o.parentElement.scrollTo((o.parentElement.scrollWidth-o.parentElement.clientWidth)/2,(o.parentElement.scrollHeight-o.parentElement.clientHeight)/2)}),400)}));var s=document.querySelector(".vditor-img__btn");s.addEventListener("click",(function(){var t=parseInt(s.getAttribute("data-deg"),10)+90;t/90%2==1&&e.naturalWidth>o.parentElement.clientHeight?o.style.transform="translate3d("+Math.max(0,window.innerWidth-e.naturalWidth)/2+"px, "+(e.naturalWidth/2-e.naturalHeight/2)+"px, 0) rotateZ("+t+"deg)":o.style.transform=a+" rotateZ("+t+"deg)",s.setAttribute("data-deg",t.toString()),setTimeout((function(){o.parentElement.scrollTo((o.parentElement.scrollWidth-o.parentElement.clientWidth)/2,(o.parentElement.scrollHeight-o.parentElement.clientHeight)/2)}),400)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),i=n(8),o=function(e,t){void 0===t&&(t=r.a.CDN),r.a.CODE_THEME.includes(e)||(e="github");var n=document.getElementById("vditorHljsStyle"),o=t+"/dist/js/highlight.js/styles/"+e+".css";n?n.href!==o&&(n.remove(),Object(i.a)(o,"vditorHljsStyle")):Object(i.a)(o,"vditorHljsStyle")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(6),i=n(7),o=function(e,t,n){var o="",a=[];if(Array.from(e.children).forEach((function(e,t){if(Object(r.a)(e)){if(n){var i=e.id.lastIndexOf("_");e.id=e.id.substring(0,-1===i?void 0:i)+"_"+t}a.push(e.id),o+=e.outerHTML.replace("<wbr>","")}})),""===o)return t.innerHTML="","";var s=document.createElement("div");if(n)n.lute.SetToC(!0),"wysiwyg"!==n.currentMode||n.preview.element.contains(e)?"ir"!==n.currentMode||n.preview.element.contains(e)?s.innerHTML=n.lute.HTML2VditorDOM("<p>[ToC]</p>"+o):s.innerHTML=n.lute.SpinVditorIRDOM("<p>[ToC]</p>"+o):s.innerHTML=n.lute.SpinVditorDOM("<p>[ToC]</p>"+o),n.lute.SetToC(n.options.preview.markdown.toc);else{t.classList.add("vditor-outline");var c=Lute.New();c.SetToC(!0),s.innerHTML=c.HTML2VditorDOM("<p>[ToC]</p>"+o)}var l=s.firstElementChild.querySelectorAll("li > span[data-target-id]");return l.forEach((function(e,t){e.nextElementSibling&&"UL"===e.nextElementSibling.tagName?e.innerHTML="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg><span>"+e.innerHTML+"</span>":e.innerHTML="<svg></svg><span>"+e.innerHTML+"</span>",e.setAttribute("data-target-id",a[t])})),o=s.firstElementChild.innerHTML,0===l.length?(t.innerHTML="",o):(t.innerHTML=o,n&&Object(i.a)(t,{cdn:n.options.cdn,math:n.options.preview.math}),t.firstElementChild.addEventListener("click",(function(r){for(var i=r.target;i&&!i.isEqualNode(t);){if(i.classList.contains("vditor-outline__action")){i.classList.contains("vditor-outline__action--close")?(i.classList.remove("vditor-outline__action--close"),i.parentElement.nextElementSibling.setAttribute("style","display:block")):(i.classList.add("vditor-outline__action--close"),i.parentElement.nextElementSibling.setAttribute("style","display:none")),r.preventDefault(),r.stopPropagation();break}if(i.getAttribute("data-target-id")){r.preventDefault(),r.stopPropagation();var o=document.getElementById(i.getAttribute("data-target-id"));if(!o)return;if(n)if("auto"===n.options.height){var a=o.offsetTop+n.element.offsetTop;n.options.toolbarConfig.pin||(a+=n.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,a)}else n.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,n.element.offsetTop),n.preview.element.contains(e)?e.parentElement.scrollTop=o.offsetTop:e.scrollTop=o.offsetTop;else window.scrollTo(window.scrollX,o.offsetTop);break}i=i.parentElement}})),o)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},i=function(e){for(var t in e)e.hasOwnProperty(t)&&("[object Object]"===Object.prototype.toString.call(e[t])?n[t]=r(n[t],e[t]):n[t]=e[t])},o=0;o<e.length;o++)i(e[o]);return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){var t=Lute.New();return t.PutEmojis(e.emojis),t.SetEmojiSite(e.emojiSite),t.SetHeadingAnchor(e.headingAnchor),t.SetInlineMathAllowDigitAfterOpenMarker(e.inlineMathDigit),t.SetAutoSpace(e.autoSpace),t.SetToC(e.toc),t.SetFootnotes(e.footnotes),t.SetFixTermTypo(e.fixTermTypo),t.SetVditorCodeBlockPreview(e.codeBlockPreview),t.SetVditorMathBlockPreview(e.mathBlockPreview),t.SetSanitize(e.sanitize),t.SetChineseParagraphBeginningSpace(e.paragraphBeginningSpace),t.SetRenderListStyle(e.listStyle),t.SetLinkBase(e.linkBase),t.SetLinkPrefix(e.linkPrefix),t.SetMark(e.mark),e.lazyLoadImage&&t.SetImageLazyLoading(e.lazyLoadImage),t}},function(e,t,n){"use strict";n.r(t);var r=n(11),i=n(12),o=n(13),a=n(14),s=n(15),c=n(16),l=function(e){void 0===e&&(e=document);var t=function(e){var t=document.createElement("img");t.src=e.getAttribute("data-src"),t.addEventListener("load",(function(){e.getAttribute("style")||e.getAttribute("class")||e.getAttribute("width")||e.getAttribute("height")||t.naturalHeight>t.naturalWidth&&t.naturalWidth/t.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&t.naturalHeight>window.innerHeight-40&&(e.style.height=window.innerHeight-40+"px"),e.src=t.src})),e.removeAttribute("data-src")};if(!("IntersectionObserver"in window))return e.querySelectorAll("img").forEach((function(e){e.getAttribute("data-src")&&t(e)})),!1;window.vditorImageIntersectionObserver?(window.vditorImageIntersectionObserver.disconnect(),e.querySelectorAll("img").forEach((function(e){window.vditorImageIntersectionObserver.observe(e)}))):(window.vditorImageIntersectionObserver=new IntersectionObserver((function(e){e.forEach((function(e){(void 0===e.isIntersecting?0!==e.intersectionRatio:e.isIntersecting)&&e.target.getAttribute("data-src")&&t(e.target)}))})),e.querySelectorAll("img").forEach((function(e){window.vditorImageIntersectionObserver.observe(e)})))},u=n(7),d=n(20),f=n(17),p=n(18),h=n(23),m=n(19),v=n(2),b=n(10),g=n(5),y=n(0),_=n(24),w=n(25),O=n(1),x=function(e,t){if(void 0===t&&(t="zh_CN"),"undefined"!=typeof speechSynthesis&&"undefined"!=typeof SpeechSynthesisUtterance){var n='<svg><use xlink:href="#vditor-icon-play"></use></svg>',r='<svg><use xlink:href="#vditor-icon-pause"></use></svg>',i=document.querySelector(".vditor-speech");if(!i){(i=document.createElement("div")).className="vditor-speech",document.body.insertAdjacentElement("beforeend",i);var o=function(){var e,n;return speechSynthesis.getVoices().forEach((function(r){r.lang===t.replace("_","-")&&(e=r),r.default&&(n=r)})),e||(e=n),e};void 0!==speechSynthesis.onvoiceschanged&&(speechSynthesis.onvoiceschanged=o);var a=o();i.onclick=function(){if("vditor-speech"===i.className){var e=new SpeechSynthesisUtterance(i.getAttribute("data-text"));e.voice=a,e.onend=function(){i.className="vditor-speech",speechSynthesis.cancel(),i.innerHTML=n},speechSynthesis.speak(e),i.className="vditor-speech vditor-speech--current",i.innerHTML=r}else speechSynthesis.speaking&&(speechSynthesis.paused?(speechSynthesis.resume(),i.innerHTML=r):(speechSynthesis.pause(),i.innerHTML=n));Object(O.h)(window.vditorSpeechRange)},document.body.addEventListener("click",(function(){""===getSelection().toString().trim()&&"block"===i.style.display&&(i.className="vditor-speech",speechSynthesis.cancel(),i.style.display="none")}))}e.addEventListener("mouseup",(function(e){var t=getSelection().toString().trim();if(speechSynthesis.cancel(),""!==getSelection().toString().trim()){window.vditorSpeechRange=getSelection().getRangeAt(0).cloneRange();var r=getSelection().getRangeAt(0).getBoundingClientRect();i.innerHTML=n,i.style.display="block",i.style.top=r.top+r.height+document.querySelector("html").scrollTop-20+"px",i.style.left=e.screenX+2+"px",i.setAttribute("data-text",t)}else"block"===i.style.display&&(i.className="vditor-speech",i.style.display="none")}))}},S=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},j=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},E=function(e){var t={anchor:0,cdn:v.a.CDN,customEmoji:{},emojiPath:(e&&e.emojiPath||v.a.CDN)+"/dist/images/emoji",hljs:v.a.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:v.a.MARKDOWN_OPTIONS,math:v.a.MATH_OPTIONS,mode:"light",speech:{enable:!1},theme:v.a.THEME_OPTIONS};return Object(_.a)(t,e)},T=function(e,t){var n=E(t);return Object(g.a)(n.cdn+"/dist/js/lute/lute.min.js","vditorLuteScript").then((function(){var r=Object(w.a)({autoSpace:n.markdown.autoSpace,codeBlockPreview:n.markdown.codeBlockPreview,emojiSite:n.emojiPath,emojis:n.customEmoji,fixTermTypo:n.markdown.fixTermTypo,footnotes:n.markdown.footnotes,headingAnchor:0!==n.anchor,inlineMathDigit:n.math.inlineDigit,lazyLoadImage:n.lazyLoadImage,linkBase:n.markdown.linkBase,linkPrefix:n.markdown.linkPrefix,listStyle:n.markdown.listStyle,mark:n.markdown.mark,mathBlockPreview:n.markdown.mathBlockPreview,paragraphBeginningSpace:n.markdown.paragraphBeginningSpace,sanitize:n.markdown.sanitize,toc:n.markdown.toc});return(null==t?void 0:t.renderers)&&r.SetJSRenderers({renderers:{Md2HTML:t.renderers}}),r.SetHeadingID(!0),r.Md2HTML(e)}))},k=function(e,t,n){return S(void 0,void 0,void 0,(function(){var h,v;return j(this,(function(_){switch(_.label){case 0:return h=E(n),[4,T(t,h)];case 1:return v=_.sent(),h.transform&&(v=h.transform(v)),e.innerHTML=v,e.classList.add("vditor-reset"),Object(b.a)(h.theme.current,h.theme.path),1===h.anchor&&e.classList.add("vditor-reset--anchor"),Object(o.a)(e,h.lang),Object(c.a)(h.hljs,e,h.cdn),Object(u.a)(e,{cdn:h.cdn,math:h.math}),Object(f.a)(e,h.cdn,h.mode),Object(a.a)(e,h.cdn),Object(s.a)(e,h.cdn),Object(i.a)(e,h.cdn,h.mode),Object(p.a)(e,h.cdn,h.mode),Object(m.a)(e,h.cdn),Object(r.a)(e,h.cdn),Object(d.a)(e),h.speech.enable&&x(e,h.lang),0!==h.anchor&&(w=h.anchor,document.querySelectorAll(".vditor-anchor").forEach((function(e){1===w&&e.classList.add("vditor-anchor--left"),e.onclick=function(){var t=e.getAttribute("href").substr(1),n=document.getElementById("vditorAnchor-"+t).offsetTop;document.querySelector("html").scrollTop=n}})),window.onhashchange=function(){var e=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));e&&(document.querySelector("html").scrollTop=e.offsetTop)}),h.after&&h.after(),h.lazyLoadImage&&l(e),h.icon&&Object(g.a)(h.cdn+"/dist/js/icons/"+h.icon+".js","vditorIconScript"),e.addEventListener("click",(function(t){var n=Object(y.f)(t.target,"SPAN");if(n&&Object(y.e)(n,"vditor-toc")){var r=e.querySelector("#"+n.getAttribute("data-target-id"));r&&window.scrollTo(window.scrollX,r.offsetTop)}})),[2]}var w}))}))},C=n(21),A=n(22),M=function(){function e(){}return e.previewImage=C.a,e.codeRender=o.a,e.graphvizRender=s.a,e.highlightRender=c.a,e.mathRender=u.a,e.mermaidRender=f.a,e.flowchartRender=a.a,e.chartRender=i.a,e.abcRender=r.a,e.mindmapRender=p.a,e.plantumlRender=m.a,e.outlineRender=h.a,e.mediaRender=d.a,e.speechRender=x,e.lazyLoadImageRender=l,e.md2html=T,e.preview=k,e.setCodeTheme=A.a,e.setContentTheme=b.a,e}();t.default=M},function(e,t){var n=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32};n.Diff=function(e,t){return[e,t]},n.prototype.diff_main=function(e,t,r,i){void 0===i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=i;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[new n.Diff(0,e)]:[];void 0===r&&(r=!0);var a=r,s=this.diff_commonPrefix(e,t),c=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.diff_commonSuffix(e,t);var l=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var u=this.diff_compute_(e,t,a,o);return c&&u.unshift(new n.Diff(0,c)),l&&u.push(new n.Diff(0,l)),this.diff_cleanupMerge(u),u},n.prototype.diff_compute_=function(e,t,r,i){var o;if(!e)return[new n.Diff(1,t)];if(!t)return[new n.Diff(-1,e)];var a=e.length>t.length?e:t,s=e.length>t.length?t:e,c=a.indexOf(s);if(-1!=c)return o=[new n.Diff(1,a.substring(0,c)),new n.Diff(0,s),new n.Diff(1,a.substring(c+s.length))],e.length>t.length&&(o[0][0]=o[2][0]=-1),o;if(1==s.length)return[new n.Diff(-1,e),new n.Diff(1,t)];var l=this.diff_halfMatch_(e,t);if(l){var u=l[0],d=l[1],f=l[2],p=l[3],h=l[4],m=this.diff_main(u,f,r,i),v=this.diff_main(d,p,r,i);return m.concat([new n.Diff(0,h)],v)}return r&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,i):this.diff_bisect_(e,t,i)},n.prototype.diff_lineMode_=function(e,t,r){var i=this.diff_linesToChars_(e,t);e=i.chars1,t=i.chars2;var o=i.lineArray,a=this.diff_main(e,t,!1,r);this.diff_charsToLines_(a,o),this.diff_cleanupSemantic(a),a.push(new n.Diff(0,""));for(var s=0,c=0,l=0,u="",d="";s<a.length;){switch(a[s][0]){case 1:l++,d+=a[s][1];break;case-1:c++,u+=a[s][1];break;case 0:if(c>=1&&l>=1){a.splice(s-c-l,c+l),s=s-c-l;for(var f=this.diff_main(u,d,!1,r),p=f.length-1;p>=0;p--)a.splice(s,0,f[p]);s+=f.length}l=0,c=0,u="",d=""}s++}return a.pop(),a},n.prototype.diff_bisect_=function(e,t,r){for(var i=e.length,o=t.length,a=Math.ceil((i+o)/2),s=a,c=2*a,l=new Array(c),u=new Array(c),d=0;d<c;d++)l[d]=-1,u[d]=-1;l[s+1]=0,u[s+1]=0;for(var f=i-o,p=f%2!=0,h=0,m=0,v=0,b=0,g=0;g<a&&!((new Date).getTime()>r);g++){for(var y=-g+h;y<=g-m;y+=2){for(var _=s+y,w=(E=y==-g||y!=g&&l[_-1]<l[_+1]?l[_+1]:l[_-1]+1)-y;E<i&&w<o&&e.charAt(E)==t.charAt(w);)E++,w++;if(l[_]=E,E>i)m+=2;else if(w>o)h+=2;else if(p&&(S=s+f-y)>=0&&S<c&&-1!=u[S]&&E>=(x=i-u[S]))return this.diff_bisectSplit_(e,t,E,w,r)}for(var O=-g+v;O<=g-b;O+=2){for(var x,S=s+O,j=(x=O==-g||O!=g&&u[S-1]<u[S+1]?u[S+1]:u[S-1]+1)-O;x<i&&j<o&&e.charAt(i-x-1)==t.charAt(o-j-1);)x++,j++;if(u[S]=x,x>i)b+=2;else if(j>o)v+=2;else if(!p){var E;if((_=s+f-O)>=0&&_<c&&-1!=l[_]&&(w=s+(E=l[_])-_,E>=(x=i-x)))return this.diff_bisectSplit_(e,t,E,w,r)}}}return[new n.Diff(-1,e),new n.Diff(1,t)]},n.prototype.diff_bisectSplit_=function(e,t,n,r,i){var o=e.substring(0,n),a=t.substring(0,r),s=e.substring(n),c=t.substring(r),l=this.diff_main(o,a,!1,i),u=this.diff_main(s,c,!1,i);return l.concat(u)},n.prototype.diff_linesToChars_=function(e,t){var n=[],r={};function i(e){for(var t="",i=0,a=-1,s=n.length;a<e.length-1;){-1==(a=e.indexOf("\n",i))&&(a=e.length-1);var c=e.substring(i,a+1);(r.hasOwnProperty?r.hasOwnProperty(c):void 0!==r[c])?t+=String.fromCharCode(r[c]):(s==o&&(c=e.substring(i),a=e.length),t+=String.fromCharCode(s),r[c]=s,n[s++]=c),i=a+1}return t}n[0]="";var o=4e4,a=i(e);return o=65535,{chars1:a,chars2:i(t),lineArray:n}},n.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],i=[],o=0;o<r.length;o++)i[o]=t[r.charCodeAt(o)];e[n][1]=i.join("")}},n.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(o,i)==t.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},n.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(e.length-i,e.length-o)==t.substring(t.length-i,t.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},n.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var i=Math.min(n,r);if(e==t)return i;for(var o=0,a=1;;){var s=e.substring(i-a),c=t.indexOf(s);if(-1==c)return o;a+=c,0!=c&&e.substring(i-a)!=t.substring(0,a)||(o=a,a++)}},n.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;var i=this;function o(e,t,n){for(var r,o,a,s,c=e.substring(n,n+Math.floor(e.length/4)),l=-1,u="";-1!=(l=t.indexOf(c,l+1));){var d=i.diff_commonPrefix(e.substring(n),t.substring(l)),f=i.diff_commonSuffix(e.substring(0,n),t.substring(0,l));u.length<f+d&&(u=t.substring(l-f,l)+t.substring(l,l+d),r=e.substring(0,n-f),o=e.substring(n+d),a=t.substring(0,l-f),s=t.substring(l+d))}return 2*u.length>=e.length?[r,o,a,s,u]:null}var a,s,c,l,u,d=o(n,r,Math.ceil(n.length/4)),f=o(n,r,Math.ceil(n.length/2));return d||f?(a=f?d&&d[4].length>f[4].length?d:f:d,e.length>t.length?(s=a[0],c=a[1],l=a[2],u=a[3]):(l=a[0],u=a[1],s=a[2],c=a[3]),[s,c,l,u,a[4]]):null},n.prototype.diff_cleanupSemantic=function(e){for(var t=!1,r=[],i=0,o=null,a=0,s=0,c=0,l=0,u=0;a<e.length;)0==e[a][0]?(r[i++]=a,s=l,c=u,l=0,u=0,o=e[a][1]):(1==e[a][0]?l+=e[a][1].length:u+=e[a][1].length,o&&o.length<=Math.max(s,c)&&o.length<=Math.max(l,u)&&(e.splice(r[i-1],0,new n.Diff(-1,o)),e[r[i-1]+1][0]=1,i--,a=--i>0?r[i-1]:-1,s=0,c=0,l=0,u=0,o=null,t=!0)),a++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),a=1;a<e.length;){if(-1==e[a-1][0]&&1==e[a][0]){var d=e[a-1][1],f=e[a][1],p=this.diff_commonOverlap_(d,f),h=this.diff_commonOverlap_(f,d);p>=h?(p>=d.length/2||p>=f.length/2)&&(e.splice(a,0,new n.Diff(0,f.substring(0,p))),e[a-1][1]=d.substring(0,d.length-p),e[a+1][1]=f.substring(p),a++):(h>=d.length/2||h>=f.length/2)&&(e.splice(a,0,new n.Diff(0,d.substring(0,h))),e[a-1][0]=1,e[a-1][1]=f.substring(0,f.length-h),e[a+1][0]=-1,e[a+1][1]=d.substring(h),a++),a++}a++}},n.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var r=e.charAt(e.length-1),i=t.charAt(0),o=r.match(n.nonAlphaNumericRegex_),a=i.match(n.nonAlphaNumericRegex_),s=o&&r.match(n.whitespaceRegex_),c=a&&i.match(n.whitespaceRegex_),l=s&&r.match(n.linebreakRegex_),u=c&&i.match(n.linebreakRegex_),d=l&&e.match(n.blanklineEndRegex_),f=u&&t.match(n.blanklineStartRegex_);return d||f?5:l||u?4:o&&!s&&c?3:s||c?2:o||a?1:0}for(var r=1;r<e.length-1;){if(0==e[r-1][0]&&0==e[r+1][0]){var i=e[r-1][1],o=e[r][1],a=e[r+1][1],s=this.diff_commonSuffix(i,o);if(s){var c=o.substring(o.length-s);i=i.substring(0,i.length-s),o=c+o.substring(0,o.length-s),a=c+a}for(var l=i,u=o,d=a,f=t(i,o)+t(o,a);o.charAt(0)===a.charAt(0);){i+=o.charAt(0),o=o.substring(1)+a.charAt(0),a=a.substring(1);var p=t(i,o)+t(o,a);p>=f&&(f=p,l=i,u=o,d=a)}e[r-1][1]!=l&&(l?e[r-1][1]=l:(e.splice(r-1,1),r--),e[r][1]=u,d?e[r+1][1]=d:(e.splice(r+1,1),r--))}r++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,r=[],i=0,o=null,a=0,s=!1,c=!1,l=!1,u=!1;a<e.length;)0==e[a][0]?(e[a][1].length<this.Diff_EditCost&&(l||u)?(r[i++]=a,s=l,c=u,o=e[a][1]):(i=0,o=null),l=u=!1):(-1==e[a][0]?u=!0:l=!0,o&&(s&&c&&l&&u||o.length<this.Diff_EditCost/2&&s+c+l+u==3)&&(e.splice(r[i-1],0,new n.Diff(-1,o)),e[r[i-1]+1][0]=1,i--,o=null,s&&c?(l=u=!0,i=0):(a=--i>0?r[i-1]:-1,l=u=!1),t=!0)),a++;t&&this.diff_cleanupMerge(e)},n.prototype.diff_cleanupMerge=function(e){e.push(new n.Diff(0,""));for(var t,r=0,i=0,o=0,a="",s="";r<e.length;)switch(e[r][0]){case 1:o++,s+=e[r][1],r++;break;case-1:i++,a+=e[r][1],r++;break;case 0:i+o>1?(0!==i&&0!==o&&(0!==(t=this.diff_commonPrefix(s,a))&&(r-i-o>0&&0==e[r-i-o-1][0]?e[r-i-o-1][1]+=s.substring(0,t):(e.splice(0,0,new n.Diff(0,s.substring(0,t))),r++),s=s.substring(t),a=a.substring(t)),0!==(t=this.diff_commonSuffix(s,a))&&(e[r][1]=s.substring(s.length-t)+e[r][1],s=s.substring(0,s.length-t),a=a.substring(0,a.length-t))),r-=i+o,e.splice(r,i+o),a.length&&(e.splice(r,0,new n.Diff(-1,a)),r++),s.length&&(e.splice(r,0,new n.Diff(1,s)),r++),r++):0!==r&&0==e[r-1][0]?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,o=0,i=0,a="",s=""}""===e[e.length-1][1]&&e.pop();var c=!1;for(r=1;r<e.length-1;)0==e[r-1][0]&&0==e[r+1][0]&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)==e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),c=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),c=!0)),r++;c&&this.diff_cleanupMerge(e)},n.prototype.diff_xIndex=function(e,t){var n,r=0,i=0,o=0,a=0;for(n=0;n<e.length&&(1!==e[n][0]&&(r+=e[n][1].length),-1!==e[n][0]&&(i+=e[n][1].length),!(r>t));n++)o=r,a=i;return e.length!=n&&-1===e[n][0]?a:a+(t-o)},n.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,r=/</g,i=/>/g,o=/\n/g,a=0;a<e.length;a++){var s=e[a][0],c=e[a][1].replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(o,"&para;<br>");switch(s){case 1:t[a]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case-1:t[a]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:t[a]="<span>"+c+"</span>"}}return t.join("")},n.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)-1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_levenshtein=function(e){for(var t=0,n=0,r=0,i=0;i<e.length;i++){var o=e[i][0],a=e[i][1];switch(o){case 1:n+=a.length;break;case-1:r+=a.length;break;case 0:t+=Math.max(n,r),n=0,r=0}}return t+Math.max(n,r)},n.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case-1:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(e,t){for(var r=[],i=0,o=0,a=t.split(/\t/g),s=0;s<a.length;s++){var c=a[s].substring(1);switch(a[s].charAt(0)){case"+":try{r[i++]=new n.Diff(1,decodeURI(c))}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var l=parseInt(c,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+c);var u=e.substring(o,o+=l);"="==a[s].charAt(0)?r[i++]=new n.Diff(0,u):r[i++]=new n.Diff(-1,u);break;default:if(a[s])throw new Error("Invalid diff operation in diff_fromDelta: "+a[s])}}if(o!=e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+").");return r},n.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},n.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),i=this;function o(e,r){var o=e/t.length,a=Math.abs(n-r);return i.Match_Distance?o+a/i.Match_Distance:a?1:o}var a=this.Match_Threshold,s=e.indexOf(t,n);-1!=s&&(a=Math.min(o(0,s),a),-1!=(s=e.lastIndexOf(t,n+t.length))&&(a=Math.min(o(0,s),a)));var c,l,u=1<<t.length-1;s=-1;for(var d,f=t.length+e.length,p=0;p<t.length;p++){for(c=0,l=f;c<l;)o(p,n+l)<=a?c=l:f=l,l=Math.floor((f-c)/2+c);f=l;var h=Math.max(1,n-l+1),m=Math.min(n+l,e.length)+t.length,v=Array(m+2);v[m+1]=(1<<p)-1;for(var b=m;b>=h;b--){var g=r[e.charAt(b-1)];if(v[b]=0===p?(v[b+1]<<1|1)&g:(v[b+1]<<1|1)&g|(d[b+1]|d[b])<<1|1|d[b+1],v[b]&u){var y=o(p,b-1);if(y<=a){if(a=y,!((s=b-1)>n))break;h=Math.max(1,2*n-s)}}}if(o(p+1,n)>a)break;d=v}return s},n.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},n.prototype.patch_addContext_=function(e,t){if(0!=t.length){if(null===e.start2)throw Error("patch not initialized");for(var r=t.substring(e.start2,e.start2+e.length1),i=0;t.indexOf(r)!=t.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,r=t.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var o=t.substring(e.start2-i,e.start2);o&&e.diffs.unshift(new n.Diff(0,o));var a=t.substring(e.start2+e.length1,e.start2+e.length1+i);a&&e.diffs.push(new n.Diff(0,a)),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+a.length,e.length2+=o.length+a.length}},n.prototype.patch_make=function(e,t,r){var i,o;if("string"==typeof e&&"string"==typeof t&&void 0===r)i=e,(o=this.diff_main(i,t,!0)).length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&"object"==typeof e&&void 0===t&&void 0===r)o=e,i=this.diff_text1(o);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===r)i=e,o=t;else{if("string"!=typeof e||"string"!=typeof t||!r||"object"!=typeof r)throw new Error("Unknown call format to patch_make.");i=e,o=r}if(0===o.length)return[];for(var a=[],s=new n.patch_obj,c=0,l=0,u=0,d=i,f=i,p=0;p<o.length;p++){var h=o[p][0],m=o[p][1];switch(c||0===h||(s.start1=l,s.start2=u),h){case 1:s.diffs[c++]=o[p],s.length2+=m.length,f=f.substring(0,u)+m+f.substring(u);break;case-1:s.length1+=m.length,s.diffs[c++]=o[p],f=f.substring(0,u)+f.substring(u+m.length);break;case 0:m.length<=2*this.Patch_Margin&&c&&o.length!=p+1?(s.diffs[c++]=o[p],s.length1+=m.length,s.length2+=m.length):m.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(s,d),a.push(s),s=new n.patch_obj,c=0,d=f,l=u)}1!==h&&(l+=m.length),-1!==h&&(u+=m.length)}return c&&(this.patch_addContext_(s,d),a.push(s)),a},n.prototype.patch_deepCopy=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r],o=new n.patch_obj;o.diffs=[];for(var a=0;a<i.diffs.length;a++)o.diffs[a]=new n.Diff(i.diffs[a][0],i.diffs[a][1]);o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,t[r]=o}return t},n.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var r=0,i=[],o=0;o<e.length;o++){var a,s,c=e[o].start2+r,l=this.diff_text1(e[o].diffs),u=-1;if(l.length>this.Match_MaxBits?-1!=(a=this.match_main(t,l.substring(0,this.Match_MaxBits),c))&&(-1==(u=this.match_main(t,l.substring(l.length-this.Match_MaxBits),c+l.length-this.Match_MaxBits))||a>=u)&&(a=-1):a=this.match_main(t,l,c),-1==a)i[o]=!1,r-=e[o].length2-e[o].length1;else if(i[o]=!0,r=a-c,l==(s=-1==u?t.substring(a,a+l.length):t.substring(a,u+this.Match_MaxBits)))t=t.substring(0,a)+this.diff_text2(e[o].diffs)+t.substring(a+l.length);else{var d=this.diff_main(l,s,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(d)/l.length>this.Patch_DeleteThreshold)i[o]=!1;else{this.diff_cleanupSemanticLossless(d);for(var f,p=0,h=0;h<e[o].diffs.length;h++){var m=e[o].diffs[h];0!==m[0]&&(f=this.diff_xIndex(d,p)),1===m[0]?t=t.substring(0,a+f)+m[1]+t.substring(a+f):-1===m[0]&&(t=t.substring(0,a+f)+t.substring(a+this.diff_xIndex(d,p+m[1].length))),-1!==m[0]&&(p+=m[1].length)}}}}return[t=t.substring(n.length,t.length-n.length),i]},n.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,r="",i=1;i<=t;i++)r+=String.fromCharCode(i);for(i=0;i<e.length;i++)e[i].start1+=t,e[i].start2+=t;var o=e[0],a=o.diffs;if(0==a.length||0!=a[0][0])a.unshift(new n.Diff(0,r)),o.start1-=t,o.start2-=t,o.length1+=t,o.length2+=t;else if(t>a[0][1].length){var s=t-a[0][1].length;a[0][1]=r.substring(a[0][1].length)+a[0][1],o.start1-=s,o.start2-=s,o.length1+=s,o.length2+=s}return 0==(a=(o=e[e.length-1]).diffs).length||0!=a[a.length-1][0]?(a.push(new n.Diff(0,r)),o.length1+=t,o.length2+=t):t>a[a.length-1][1].length&&(s=t-a[a.length-1][1].length,a[a.length-1][1]+=r.substring(0,s),o.length1+=s,o.length2+=s),r},n.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=t)){var i=e[r];e.splice(r--,1);for(var o=i.start1,a=i.start2,s="";0!==i.diffs.length;){var c=new n.patch_obj,l=!0;for(c.start1=o-s.length,c.start2=a-s.length,""!==s&&(c.length1=c.length2=s.length,c.diffs.push(new n.Diff(0,s)));0!==i.diffs.length&&c.length1<t-this.Patch_Margin;){var u=i.diffs[0][0],d=i.diffs[0][1];1===u?(c.length2+=d.length,a+=d.length,c.diffs.push(i.diffs.shift()),l=!1):-1===u&&1==c.diffs.length&&0==c.diffs[0][0]&&d.length>2*t?(c.length1+=d.length,o+=d.length,l=!1,c.diffs.push(new n.Diff(u,d)),i.diffs.shift()):(d=d.substring(0,t-c.length1-this.Patch_Margin),c.length1+=d.length,o+=d.length,0===u?(c.length2+=d.length,a+=d.length):l=!1,c.diffs.push(new n.Diff(u,d)),d==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(d.length))}s=(s=this.diff_text2(c.diffs)).substring(s.length-this.Patch_Margin);var f=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==f&&(c.length1+=f.length,c.length2+=f.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=f:c.diffs.push(new n.Diff(0,f))),l||e.splice(++r,0,c)}}},n.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},n.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var r=e.split("\n"),i=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<r.length;){var a=r[i].match(o);if(!a)throw new Error("Invalid patch string: "+r[i]);var s=new n.patch_obj;for(t.push(s),s.start1=parseInt(a[1],10),""===a[2]?(s.start1--,s.length1=1):"0"==a[2]?s.length1=0:(s.start1--,s.length1=parseInt(a[2],10)),s.start2=parseInt(a[3],10),""===a[4]?(s.start2--,s.length2=1):"0"==a[4]?s.length2=0:(s.start2--,s.length2=parseInt(a[4],10)),i++;i<r.length;){var c=r[i].charAt(0);try{var l=decodeURI(r[i].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+l)}if("-"==c)s.diffs.push(new n.Diff(-1,l));else if("+"==c)s.diffs.push(new n.Diff(1,l));else if(" "==c)s.diffs.push(new n.Diff(0,l));else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+l)}i++}}return t},(n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:e="+";break;case-1:e="-";break;case 0:e=" "}t[n+1]=e+encodeURI(this.diffs[n][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=n,e.exports.diff_match_patch=n,e.exports.DIFF_DELETE=-1,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},function(e,t,n){"use strict";n.r(t);var r,i,o=n(26),a=n(2),s=n(9),c=function(e){return"sv"===e.currentMode?Object(s.a)((e.sv.element.textContent+"\n").replace(/\n\n$/,"\n")):"wysiwyg"===e.currentMode?e.lute.VditorDOM2Md(e.wysiwyg.element.innerHTML):"ir"===e.currentMode?e.lute.VditorIRDOM2Md(e.ir.element.innerHTML):""},l=n(5),u=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-devtools",this.element.innerHTML='<div class="vditor-reset--error"></div><div style="height: 100%;"></div>'}return e.prototype.renderEchart=function(e){var t=this;"block"===e.devtools.element.style.display&&Object(l.a)(e.options.cdn+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then((function(){t.ASTChart||(t.ASTChart=echarts.init(e.devtools.element.lastElementChild));try{t.element.lastElementChild.style.display="block",t.element.firstElementChild.innerHTML="",t.ASTChart.setOption({series:[{data:JSON.parse(e.lute.RenderEChartsJSON(c(e))),initialTreeDepth:-1,label:{align:"left",backgroundColor:"rgba(68, 77, 86, .68)",borderRadius:3,color:"#d1d5da",fontSize:12,lineHeight:12,offset:[9,12],padding:[2,4,2,4],position:"top",verticalAlign:"middle"},lineStyle:{color:"#4285f4",type:"curve",width:1},orient:"vertical",roam:!0,type:"tree"}],toolbox:{bottom:25,emphasis:{iconStyle:{color:"#4285f4"}},feature:{restore:{show:!0},saveAsImage:{show:!0}},right:15,show:!0}}),t.ASTChart.resize()}catch(e){t.element.lastElementChild.style.display="none",t.element.firstElementChild.innerHTML=e}}))},e}(),d=n(3),f=function(e,t){t.forEach((function(t){if(e[t]){var n=e[t].children[0];n&&n.classList.contains("vditor-menu--current")&&n.classList.remove("vditor-menu--current")}}))},p=function(e,t){t.forEach((function(t){if(e[t]){var n=e[t].children[0];n&&!n.classList.contains("vditor-menu--current")&&n.classList.add("vditor-menu--current")}}))},h=function(e,t){t.forEach((function(t){if(e[t]){var n=e[t].children[0];n&&n.classList.contains(a.a.CLASS_MENU_DISABLED)&&n.classList.remove(a.a.CLASS_MENU_DISABLED)}}))},m=function(e,t){t.forEach((function(t){if(e[t]){var n=e[t].children[0];n&&!n.classList.contains(a.a.CLASS_MENU_DISABLED)&&n.classList.add(a.a.CLASS_MENU_DISABLED)}}))},v=function(e,t){t.forEach((function(t){e[t]&&e[t]&&(e[t].style.display="none")}))},b=function(e,t){t.forEach((function(t){e[t]&&e[t]&&(e[t].style.display="block")}))},g=function(e,t,n){t.includes("subToolbar")&&(e.toolbar.element.querySelectorAll(".vditor-hint").forEach((function(e){n&&e.isEqualNode(n)||(e.style.display="none")})),e.toolbar.elements.emoji&&(e.toolbar.elements.emoji.lastElementChild.style.display="none")),t.includes("hint")&&(e.hint.element.style.display="none","[object Function]"==={}.toString.call(e.options.hint.hide)&&e.options.hint.hide()),e.wysiwyg.popover&&t.includes("popover")&&(e.wysiwyg.popover.style.display="none")},y=function(e,t,n,r){n.addEventListener(Object(d.b)(),(function(r){r.preventDefault(),r.stopPropagation(),n.classList.contains(a.a.CLASS_MENU_DISABLED)||(e.toolbar.element.querySelectorAll(".vditor-hint--current").forEach((function(e){e.classList.remove("vditor-hint--current")})),"block"===t.style.display?t.style.display="none":(g(e,["subToolbar","hint","popover"],n.parentElement.parentElement),n.classList.contains("vditor-tooltipped")||n.classList.add("vditor-hint--current"),t.style.display="block",e.toolbar.element.getBoundingClientRect().right-n.getBoundingClientRect().right<250?t.classList.add("vditor-panel--left"):t.classList.remove("vditor-panel--left")))}))},_=n(0),w=n(6),O=function(e,t,n,r){r&&console.log(e+" - "+n+": "+t)},x=n(11),S=n(12),j=n(13),E=n(14),T=n(15),k=n(16),C=n(7),A=n(17),M=n(18),P=n(19),R=function(e,t){if(e)if("html-block"!==e.parentElement.getAttribute("data-type")){var n=e.firstElementChild.className.replace("language-","");n&&("abc"===n?Object(x.a)(e,t.options.cdn):"mermaid"===n?Object(A.a)(e,t.options.cdn,t.options.theme):"flowchart"===n?Object(E.a)(e,t.options.cdn):"echarts"===n?Object(S.a)(e,t.options.cdn,t.options.theme):"mindmap"===n?Object(M.a)(e,t.options.cdn,t.options.theme):"plantuml"===n?Object(P.a)(e,t.options.cdn):"graphviz"===n?Object(T.a)(e,t.options.cdn):"math"===n?Object(C.a)(e,{cdn:t.options.cdn,math:t.options.preview.math}):(Object(k.a)(Object.assign({},t.options.preview.hljs),e,t.options.cdn),Object(j.a)(e,t.options.lang)),e.setAttribute("data-render","1"))}else e.setAttribute("data-render","1")},L=n(1),N=function(e){if("sv"!==e.currentMode){var t=e[e.currentMode].element,n=e.outline.render(e);""===n&&(n="[ToC]"),t.querySelectorAll('[data-type="toc-block"]').forEach((function(t){t.innerHTML=n,Object(C.a)(t,{cdn:e.options.cdn,math:e.options.preview.math})}))}},D=function(e,t){var n=Object(_.f)(e.target,"SPAN");if(n&&Object(_.e)(n,"vditor-toc")){var r=t[t.currentMode].element.querySelector("#"+n.getAttribute("data-target-id"));if(r)if("auto"===t.options.height){var i=r.offsetTop+t.element.offsetTop;t.options.toolbarConfig.pin||(i+=t.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,i)}else t.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,t.element.offsetTop),t[t.currentMode].element.scrollTop=r.offsetTop}},I=function(e,t,n,r){if(e.previousElementSibling&&e.previousElementSibling.classList.contains("vditor-toc")){if("Backspace"===n.key&&0===Object(L.c)(e,t[t.currentMode].element,r).start)return e.previousElementSibling.remove(),st(t),!0;if(et(t,n,r,e,e.previousElementSibling))return!0}if(e.nextElementSibling&&e.nextElementSibling.classList.contains("vditor-toc")){if("Delete"===n.key&&Object(L.c)(e,t[t.currentMode].element,r).start>=e.textContent.trimRight().length)return e.nextElementSibling.remove(),st(t),!0;if($e(t,n,r,e,e.nextElementSibling))return!0}if("Backspace"===n.key||"Delete"===n.key){var i=Object(_.e)(r.startContainer,"vditor-toc");if(i)return i.remove(),st(t),!0}},B=function(e,t,n,r){void 0===n&&(n=!1);var i=Object(_.c)(t.startContainer);if(i&&!n&&"code-block"!==i.getAttribute("data-type")){if(ot(i.innerHTML)&&i.previousElementSibling||at(i.innerHTML))return;for(var o=Object(L.c)(i,e.ir.element,t).start,s=!0,c=o-1;c>i.textContent.substr(0,o).lastIndexOf("\n");c--)if(" "!==i.textContent.charAt(c)&&"\t"!==i.textContent.charAt(c)){s=!1;break}0===o&&(s=!1);var l=!0;for(c=o-1;c<i.textContent.length;c++)if(" "!==i.textContent.charAt(c)&&"\n"!==i.textContent.charAt(c)){l=!1;break}if(s)return;if(l&&!Object(_.e)(t.startContainer,"vditor-ir__marker")){var u=t.startContainer.previousSibling;return void(u&&3!==u.nodeType&&u.classList.contains("vditor-ir__node--expand")&&u.classList.remove("vditor-ir__node--expand"))}}if(e.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach((function(e){e.classList.remove("vditor-ir__node--expand")})),i||(i=e.ir.element),!i.querySelector("wbr")){var d=Object(_.e)(t.startContainer,"vditor-ir__preview");d?d.previousElementSibling.insertAdjacentHTML("beforeend","<wbr>"):t.insertNode(document.createElement("wbr"))}i.querySelectorAll("[style]").forEach((function(e){e.removeAttribute("style")})),"link-ref-defs-block"===i.getAttribute("data-type")&&(i=e.ir.element);var f,p=i.isEqualNode(e.ir.element),h=Object(_.d)(i,"data-type","footnotes-block"),m="";if(p)m=i.innerHTML;else{var v=Object(w.b)(t.startContainer,"BLOCKQUOTE"),b=Object(_.b)(t.startContainer);if(b&&(i=b),v&&(!b||b&&!v.contains(b))&&(i=v),h&&(i=h),m=i.outerHTML,"UL"===i.tagName||"OL"===i.tagName){var g=i.previousElementSibling,y=i.nextElementSibling;!g||"UL"!==g.tagName&&"OL"!==g.tagName||(m=g.outerHTML+m,g.remove()),!y||"UL"!==y.tagName&&"OL"!==y.tagName||(m+=y.outerHTML,y.remove()),m=m.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}else i.previousElementSibling&&""!==i.previousElementSibling.textContent.replace(a.a.ZWSP,"")&&r&&"insertParagraph"===r.inputType&&(m=i.previousElementSibling.outerHTML+m,i.previousElementSibling.remove());e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach((function(e){e&&!i.isEqualNode(e)&&(m+=e.outerHTML,e.remove())})),e.ir.element.querySelectorAll("[data-type='footnotes-block']").forEach((function(e){e&&!i.isEqualNode(e)&&(m+=e.outerHTML,e.remove())}))}if(O("SpinVditorIRDOM",m,"argument",e.options.debugger),m=e.lute.SpinVditorIRDOM(m),O("SpinVditorIRDOM",m,"result",e.options.debugger),p)i.innerHTML=m;else if(i.outerHTML=m,h){var x=Object(_.d)(e.ir.element.querySelector("wbr"),"data-type","footnotes-def");if(x){var S=x.textContent,j=S.substring(1,S.indexOf("]:")),E=e.ir.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'+j+'"]');E&&E.setAttribute("aria-label",S.substr(j.length+3).trim().substr(0,24))}}var T,k=e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']");k.forEach((function(e,t){0===t?f=e:(f.insertAdjacentHTML("beforeend",e.innerHTML),e.remove())})),k.length>0&&e.ir.element.insertAdjacentElement("beforeend",k[0]);var C=e.ir.element.querySelectorAll("[data-type='footnotes-block']");C.forEach((function(e,t){0===t?T=e:(T.insertAdjacentHTML("beforeend",e.innerHTML),e.remove())})),C.length>0&&e.ir.element.insertAdjacentElement("beforeend",C[0]),Object(L.f)(e.ir.element,t),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach((function(t){R(t,e)})),N(e),jt(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},H=function(e,t){if(""===e)return!1;if(-1===e.indexOf("\u21e7")&&-1===e.indexOf("\u2318")&&-1===e.indexOf("\u2325"))return!(Object(d.d)(t)||t.altKey||t.shiftKey||t.code!==e);if("\u21e7Tab"===e)return!(Object(d.d)(t)||t.altKey||!t.shiftKey||"Tab"!==t.code);var n=e.split("");if(e.startsWith("\u2325")){var r=3===n.length?n[2]:n[1];return!((3===n.length?!Object(d.d)(t):Object(d.d)(t))||!t.altKey||t.shiftKey||t.code!==(/^[0-9]$/.test(r)?"Digit":"Key")+r)}"\u2318Enter"===e&&(n=["\u2318","Enter"]);var i=n.length>2&&"\u21e7"===n[0],o=i?n[2]:n[1];return!i||!Object(d.e)()&&/Mac/.test(navigator.platform)||("-"===o?o="_":"="===o&&(o="+")),!(!Object(d.d)(t)||t.key.toLowerCase()!==o.toLowerCase()||t.altKey||!(!i&&!t.shiftKey||i&&t.shiftKey))},U=function(e,t){t.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach((function(e){e.classList.remove("vditor-ir__node--expand")}));var n=Object(_.g)(e.startContainer,"vditor-ir__node"),r=!e.collapsed&&Object(_.g)(e.endContainer,"vditor-ir__node");if(e.collapsed||n&&n===r){n&&(n.classList.add("vditor-ir__node--expand"),n.classList.remove("vditor-ir__node--hidden"),Object(L.h)(e));var i=function(e){var t=e.startContainer;if(3===t.nodeType&&t.nodeValue.length!==e.startOffset)return!1;for(var n=t.nextSibling;n&&""===n.textContent;)n=n.nextSibling;if(!n){var r=Object(_.e)(t,"vditor-ir__marker");if(r&&!r.nextSibling){var i=t.parentElement.parentElement.nextSibling;if(i&&3!==i.nodeType&&i.classList.contains("vditor-ir__node"))return i}return!1}return!(!n||3===n.nodeType||!n.classList.contains("vditor-ir__node")||n.getAttribute("data-block"))&&n}(e);if(i)return i.classList.add("vditor-ir__node--expand"),void i.classList.remove("vditor-ir__node--hidden");var o=function(e){var t=e.startContainer,n=t.previousSibling;return!(3!==t.nodeType||0!==e.startOffset||!n||3===n.nodeType||!n.classList.contains("vditor-ir__node")||n.getAttribute("data-block"))&&n}(e);return o?(o.classList.add("vditor-ir__node--expand"),void o.classList.remove("vditor-ir__node--hidden")):void 0}},q=n(21),V=function(e,t){var n,r=getSelection().getRangeAt(0).cloneRange(),i=r.startContainer;3!==r.startContainer.nodeType&&"DIV"===r.startContainer.tagName&&(i=r.startContainer.childNodes[r.startOffset-1]);var o=Object(_.d)(i,"data-block","0");if(o&&t&&("deleteContentBackward"===t.inputType||" "===t.data)){for(var a=Object(L.c)(o,e.sv.element,r).start,s=!0,c=a-1;c>o.textContent.substr(0,a).lastIndexOf("\n");c--)if(" "!==o.textContent.charAt(c)&&"\t"!==o.textContent.charAt(c)){s=!1;break}if(0===a&&(s=!1),s)return void Re(e);if("deleteContentBackward"===t.inputType){var l=Object(_.d)(i,"data-type","code-block-open-marker")||Object(_.d)(i,"data-type","code-block-close-marker");if(l){var u;if("code-block-close-marker"===l.getAttribute("data-type")&&(u=Ae(i,"code-block-open-marker")))return u.textContent=l.textContent,void Re(e);if("code-block-open-marker"===l.getAttribute("data-type")&&(u=Ae(i,"code-block-close-marker",!1)))return u.textContent=l.textContent,void Re(e)}var d=Object(_.d)(i,"data-type","math-block-open-marker");if(d){var f=d.nextElementSibling.nextElementSibling;return void(f&&"math-block-close-marker"===f.getAttribute("data-type")&&(f.remove(),Re(e)))}o.querySelectorAll('[data-type="code-block-open-marker"]').forEach((function(e){1===e.textContent.length&&e.remove()})),o.querySelectorAll('[data-type="code-block-close-marker"]').forEach((function(e){1===e.textContent.length&&e.remove()}));var p=Object(_.d)(i,"data-type","heading-marker");if(p&&-1===p.textContent.indexOf("#"))return void Re(e)}if((" "===t.data||"deleteContentBackward"===t.inputType)&&(Object(_.d)(i,"data-type","padding")||Object(_.d)(i,"data-type","li-marker")||Object(_.d)(i,"data-type","task-marker")||Object(_.d)(i,"data-type","blockquote-marker")))return void Re(e)}if(o&&"$$"===o.textContent.trimRight())Re(e);else{o||(o=e.sv.element),"link-ref-defs-block"===(null===(n=o.firstElementChild)||void 0===n?void 0:n.getAttribute("data-type"))&&(o=e.sv.element),Object(_.d)(i,"data-type","footnotes-link")&&(o=e.sv.element),-1===o.textContent.indexOf(Lute.Caret)&&r.insertNode(document.createTextNode(Lute.Caret)),o.querySelectorAll("[style]").forEach((function(e){e.removeAttribute("style")})),o.querySelectorAll("font").forEach((function(e){e.outerHTML=e.innerHTML}));var h,m=o.textContent,v=o.isEqualNode(e.sv.element);v?m=o.textContent:(o.previousElementSibling&&(m=o.previousElementSibling.textContent+m,o.previousElementSibling.remove()),o.previousElementSibling&&0===m.indexOf("---\n")&&(m=o.previousElementSibling.textContent+m,o.previousElementSibling.remove()),e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach((function(e,t){0===t&&e&&!o.isEqualNode(e.parentElement)&&(m+="\n"+e.parentElement.textContent,e.parentElement.remove())})),e.sv.element.querySelectorAll("[data-type='footnotes-link']").forEach((function(e,t){0===t&&e&&!o.isEqualNode(e.parentElement)&&(m+="\n"+e.parentElement.textContent,e.parentElement.remove())}))),m=Me(m,e),v?o.innerHTML=m:o.outerHTML=m;var b,g=e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']");g.forEach((function(e,t){0===t?h=e.parentElement:(h.lastElementChild.remove(),h.insertAdjacentHTML("beforeend",""+e.parentElement.innerHTML),e.parentElement.remove())})),g.length>0&&e.sv.element.insertAdjacentElement("beforeend",h);var y=e.sv.element.querySelectorAll("[data-type='footnotes-link']");y.forEach((function(e,t){0===t?b=e.parentElement:(b.lastElementChild.remove(),b.insertAdjacentHTML("beforeend",""+e.parentElement.innerHTML),e.parentElement.remove())})),y.length>0&&e.sv.element.insertAdjacentElement("beforeend",b),Object(L.f)(e.sv.element,r),Ee(e),Re(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})}},F=n(4),W=n(10),z=function(e){"dark"===e.options.theme?e.element.classList.add("vditor--dark"):e.element.classList.remove("vditor--dark")},X=function(e){var t=window.innerWidth<=a.a.MOBILE_WIDTH?10:35;if("none"!==e.wysiwyg.element.parentElement.style.display){var n=(e.wysiwyg.element.parentElement.clientWidth-e.options.preview.maxWidth)/2;e.wysiwyg.element.style.padding="10px "+Math.max(t,n)+"px"}"none"!==e.ir.element.parentElement.style.display&&(n=(e.ir.element.parentElement.clientWidth-e.options.preview.maxWidth)/2,e.ir.element.style.padding="10px "+Math.max(t,n)+"px"),"block"===e.preview.element.style.display&&"sv"!==e.currentMode||(e.toolbar.element.style.paddingLeft=Math.max(5,parseInt(e[e.currentMode].element.style.paddingLeft||"0",10)+("left"===e.options.outline.position?e.outline.element.offsetWidth:0))+"px")},Y=function(e){if(e.options.typewriterMode){var t=window.innerHeight;"number"==typeof e.options.height&&(t=e.options.height,"number"==typeof e.options.minHeight&&(t=Math.max(t,e.options.minHeight)),t=Math.min(window.innerHeight,t)),e.element.classList.contains("vditor--fullscreen")&&(t=window.innerHeight),e[e.currentMode].element.style.setProperty("--editor-bottom",(t-e.toolbar.element.offsetHeight)/2+"px")}},K=function(e,t){Y(e),window.addEventListener("resize",(function(){X(e),Y(e)}));var n=Object(d.a)()&&localStorage.getItem(e.options.cache.id);return e.options.cache.enable&&n||(e.options.value?n=e.options.value:e.originalInnerHTML?n=e.lute.HTML2Md(e.originalInnerHTML):e.options.cache.enable||(n="")),n||""},G=function(e){clearTimeout(e[e.currentMode].hlToolbarTimeoutId),e[e.currentMode].hlToolbarTimeoutId=window.setTimeout((function(){if("false"!==e[e.currentMode].element.getAttribute("contenteditable")&&Object(L.e)(e[e.currentMode].element)){f(e.toolbar.elements,a.a.EDIT_TOOLBARS),h(e.toolbar.elements,a.a.EDIT_TOOLBARS);var t=Object(L.b)(e),n=t.startContainer;3===t.startContainer.nodeType&&(n=t.startContainer.parentElement),n.classList.contains("vditor-reset")&&(n=n.childNodes[t.startOffset]),("sv"===e.currentMode?Object(_.d)(n,"data-type","heading"):Object(w.a)(n))&&p(e.toolbar.elements,["headings"]),("sv"===e.currentMode?Object(_.d)(n,"data-type","blockquote"):Object(_.f)(n,"BLOCKQUOTE"))&&p(e.toolbar.elements,["quote"]),Object(_.d)(n,"data-type","strong")&&p(e.toolbar.elements,["bold"]),Object(_.d)(n,"data-type","em")&&p(e.toolbar.elements,["italic"]),Object(_.d)(n,"data-type","s")&&p(e.toolbar.elements,["strike"]),Object(_.d)(n,"data-type","a")&&p(e.toolbar.elements,["link"]);var r=Object(_.f)(n,"LI");r?(r.classList.contains("vditor-task")?p(e.toolbar.elements,["check"]):"OL"===r.parentElement.tagName?p(e.toolbar.elements,["ordered-list"]):"UL"===r.parentElement.tagName&&p(e.toolbar.elements,["list"]),h(e.toolbar.elements,["outdent","indent"])):m(e.toolbar.elements,["outdent","indent"]),Object(_.d)(n,"data-type","code-block")&&(m(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),p(e.toolbar.elements,["code"])),Object(_.d)(n,"data-type","code")&&(m(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),p(e.toolbar.elements,["inline-code"])),Object(_.d)(n,"data-type","table")&&m(e.toolbar.elements,["headings","list","ordered-list","check","line","quote","code","table"])}}),200)},Q=function(e,t,n){void 0===t&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),clearTimeout(e.wysiwyg.afterRenderTimeoutId),e.wysiwyg.afterRenderTimeoutId=window.setTimeout((function(){if(!e.wysiwyg.composingLock){var r=c(e);"function"==typeof e.options.input&&t.enableInput&&e.options.input(r,n),e.options.counter.enable&&e.counter.render(e,r),e.options.cache.enable&&Object(d.a)()&&(localStorage.setItem(e.options.cache.id,r),e.options.cache.after&&e.options.cache.after(r)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}}),e.options.undoDelay)},Z=function(e){for(var t="",n=e.nextSibling;n;)3===n.nodeType?t+=n.textContent:t+=n.outerHTML,n=n.nextSibling;return t},J=function(e){for(var t="",n=e.previousSibling;n;)t=3===n.nodeType?n.textContent+t:n.outerHTML+t,n=n.previousSibling;return t},$=function(e,t){Array.from(e.wysiwyg.element.childNodes).find((function(n){if(3===n.nodeType){var r=document.createElement("p");r.setAttribute("data-block","0"),r.textContent=n.textContent;var i=3===t.startContainer.nodeType?t.startOffset:n.textContent.length;return n.parentNode.insertBefore(r,n),n.remove(),t.setStart(r.firstChild,Math.min(r.firstChild.textContent.length,i)),t.collapse(!0),Object(L.h)(t),!0}if(!n.getAttribute("data-block"))return"P"===n.tagName?n.remove():("DIV"===n.tagName?(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.innerHTML+"</p>"):"BR"===n.tagName?n.outerHTML='<p data-block="0">'+n.outerHTML+"<wbr></p>":(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.outerHTML+"</p>"),Object(L.f)(e.wysiwyg.element,t),t=getSelection().getRangeAt(0)),!0}))},ee=function(e,t){var n=Object(L.b)(e),r=Object(_.c)(n.startContainer);r||(r=n.startContainer.childNodes[n.startOffset]),r||0!==e.wysiwyg.element.children.length||(r=e.wysiwyg.element),r&&!r.classList.contains("vditor-wysiwyg__block")&&(n.insertNode(document.createElement("wbr")),"<wbr>"===r.innerHTML.trim()&&(r.innerHTML="<wbr><br>"),"BLOCKQUOTE"===r.tagName||r.classList.contains("vditor-reset")?r.innerHTML="<"+t+' data-block="0">'+r.innerHTML.trim()+"</"+t+">":r.outerHTML="<"+t+' data-block="0">'+r.innerHTML.trim()+"</"+t+">",Object(L.f)(e.wysiwyg.element,n),N(e))},te=function(e){var t=getSelection().getRangeAt(0),n=Object(_.c)(t.startContainer);n||(n=t.startContainer.childNodes[t.startOffset]),n&&(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.innerHTML+"</p>",Object(L.f)(e.wysiwyg.element,t)),e.wysiwyg.popover.style.display="none"},ne=function(e,t,n){void 0===n&&(n=!0);var r=e.previousElementSibling,i=r.ownerDocument.createRange();"CODE"===r.tagName?(r.style.display="inline-block",n?i.setStart(r.firstChild,1):i.selectNodeContents(r)):(r.style.display="block",r.firstChild.firstChild||r.firstChild.appendChild(document.createTextNode("")),i.selectNodeContents(r.firstChild)),n?i.collapse(!0):i.collapse(!1),Object(L.h)(i),e.firstElementChild.classList.contains("language-mindmap")||Ee(t)},re=function(e,t){if(H("\u21e7\u2318X",t)){var n=e.wysiwyg.popover.querySelector('[data-type="remove"]');if(n)return n.click(),t.preventDefault(),!0}},ie=function(e){clearTimeout(e.wysiwyg.hlToolbarTimeoutId),e.wysiwyg.hlToolbarTimeoutId=window.setTimeout((function(){if("false"!==e.wysiwyg.element.getAttribute("contenteditable")&&Object(L.e)(e.wysiwyg.element)){f(e.toolbar.elements,a.a.EDIT_TOOLBARS),h(e.toolbar.elements,a.a.EDIT_TOOLBARS);var t=getSelection().getRangeAt(0),n=t.startContainer;n=3===t.startContainer.nodeType?t.startContainer.parentElement:n.childNodes[t.startOffset>=n.childNodes.length?n.childNodes.length-1:t.startOffset];var r=Object(_.d)(n,"data-type","footnotes-block");if(r)return e.wysiwyg.popover.innerHTML="",le(r,e),void oe(e,r);var i=Object(_.f)(n,"LI");i?(i.classList.contains("vditor-task")?p(e.toolbar.elements,["check"]):"OL"===i.parentElement.tagName?p(e.toolbar.elements,["ordered-list"]):"UL"===i.parentElement.tagName&&p(e.toolbar.elements,["list"]),h(e.toolbar.elements,["outdent","indent"])):m(e.toolbar.elements,["outdent","indent"]),Object(_.f)(n,"BLOCKQUOTE")&&p(e.toolbar.elements,["quote"]),(Object(_.f)(n,"B")||Object(_.f)(n,"STRONG"))&&p(e.toolbar.elements,["bold"]),(Object(_.f)(n,"I")||Object(_.f)(n,"EM"))&&p(e.toolbar.elements,["italic"]),(Object(_.f)(n,"STRIKE")||Object(_.f)(n,"S"))&&p(e.toolbar.elements,["strike"]),e.wysiwyg.element.querySelectorAll(".vditor-comment--focus").forEach((function(e){e.classList.remove("vditor-comment--focus")}));var o=Object(_.e)(n,"vditor-comment");if(o){var s=o.getAttribute("data-cmtids").split(" ");if(s.length>1&&o.nextSibling.isSameNode(o.nextElementSibling)){var c=o.nextElementSibling.getAttribute("data-cmtids").split(" ");s.find((function(e){if(c.includes(e))return s=[e],!0}))}e.wysiwyg.element.querySelectorAll(".vditor-comment").forEach((function(e){e.getAttribute("data-cmtids").indexOf(s[0])>-1&&e.classList.add("vditor-comment--focus")}))}var l=Object(_.f)(n,"A");l&&p(e.toolbar.elements,["link"]);var u=Object(_.f)(n,"TABLE"),v=Object(w.a)(n);Object(_.f)(n,"CODE")?Object(_.f)(n,"PRE")?(m(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),p(e.toolbar.elements,["code"])):(m(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),p(e.toolbar.elements,["inline-code"])):v?(m(e.toolbar.elements,["bold"]),p(e.toolbar.elements,["headings"])):u&&m(e.toolbar.elements,["table"]);var b=Object(_.e)(n,"vditor-toc");if(b)return e.wysiwyg.popover.innerHTML="",le(b,e),void oe(e,b);var g=Object(w.b)(n,"BLOCKQUOTE");if(g&&(e.wysiwyg.popover.innerHTML="",se(t,g,e),ce(t,g,e),le(g,e),oe(e,g)),i&&(e.wysiwyg.popover.innerHTML="",se(t,i,e),ce(t,i,e),le(i,e),oe(e,i)),u){e.wysiwyg.popover.innerHTML="";var y=function(){var e=u.rows.length,t=u.rows[0].cells.length,n=parseInt(I.value,10)||e,r=parseInt(H.value,10)||t;if(n!==e||t!==r){if(t!==r)for(var i=r-t,o=0;o<u.rows.length;o++)if(i>0)for(var a=0;a<i;a++)0===o?u.rows[o].lastElementChild.insertAdjacentHTML("afterend","<th> </th>"):u.rows[o].lastElementChild.insertAdjacentHTML("afterend","<td> </td>");else for(var s=t-1;s>=r;s--)u.rows[o].cells[s].remove();if(e!==n){var c=n-e;if(c>0){for(var l="<tr>",d=0;d<r;d++)l+="<td> </td>";for(var f=0;f<c;f++)u.querySelector("tbody")?u.querySelector("tbody").insertAdjacentHTML("beforeend",l):u.querySelector("thead").insertAdjacentHTML("afterend",l+"</tr>")}else for(d=e-1;d>=n;d--)u.rows[d].remove(),1===u.rows.length&&u.querySelector("tbody").remove()}}},O=function(n){it(u,n),"right"===n?(E.classList.remove("vditor-icon--current"),T.classList.remove("vditor-icon--current"),k.classList.add("vditor-icon--current")):"center"===n?(E.classList.remove("vditor-icon--current"),k.classList.remove("vditor-icon--current"),T.classList.add("vditor-icon--current")):(T.classList.remove("vditor-icon--current"),k.classList.remove("vditor-icon--current"),E.classList.add("vditor-icon--current")),Object(L.h)(t),Q(e)},x=Object(_.f)(n,"TD"),S=Object(_.f)(n,"TH"),j="left";x?j=x.getAttribute("align")||"left":S&&(j=S.getAttribute("align")||"center");var E=document.createElement("button");E.setAttribute("type","button"),E.setAttribute("aria-label",F.a[e.options.lang].alignLeft+"<"+Object(d.g)("\u21e7\u2318L")+">"),E.setAttribute("data-type","left"),E.innerHTML='<svg><use xlink:href="#vditor-icon-align-left"></use></svg>',E.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+("left"===j?" vditor-icon--current":""),E.onclick=function(){O("left")};var T=document.createElement("button");T.setAttribute("type","button"),T.setAttribute("aria-label",F.a[e.options.lang].alignCenter+"<"+Object(d.g)("\u21e7\u2318C")+">"),T.setAttribute("data-type","center"),T.innerHTML='<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',T.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+("center"===j?" vditor-icon--current":""),T.onclick=function(){O("center")};var k=document.createElement("button");k.setAttribute("type","button"),k.setAttribute("aria-label",F.a[e.options.lang].alignRight+"<"+Object(d.g)("\u21e7\u2318R")+">"),k.setAttribute("data-type","right"),k.innerHTML='<svg><use xlink:href="#vditor-icon-align-right"></use></svg>',k.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+("right"===j?" vditor-icon--current":""),k.onclick=function(){O("right")};var C=document.createElement("button");C.setAttribute("type","button"),C.setAttribute("aria-label",F.a[e.options.lang].insertRowBelow+"<"+Object(d.g)("\u2318=")+">"),C.setAttribute("data-type","insertRow"),C.innerHTML='<svg><use xlink:href="#vditor-icon-insert-row"></use></svg>',C.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",C.onclick=function(){var n=getSelection().getRangeAt(0).startContainer,r=Object(_.f)(n,"TD")||Object(_.f)(n,"TH");r&&dt(e,t,r)};var A=document.createElement("button");A.setAttribute("type","button"),A.setAttribute("aria-label",F.a[e.options.lang].insertRowAbove+"<"+Object(d.g)("\u21e7\u2318F")+">"),A.setAttribute("data-type","insertRow"),A.innerHTML='<svg><use xlink:href="#vditor-icon-insert-rowb"></use></svg>',A.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",A.onclick=function(){var n=getSelection().getRangeAt(0).startContainer,r=Object(_.f)(n,"TD")||Object(_.f)(n,"TH");r&&ft(e,t,r)};var M=document.createElement("button");M.setAttribute("type","button"),M.setAttribute("aria-label",F.a[e.options.lang].insertColumnRight+"<"+Object(d.g)("\u21e7\u2318=")+">"),M.setAttribute("data-type","insertColumn"),M.innerHTML='<svg><use xlink:href="#vditor-icon-insert-column"></use></svg>',M.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",M.onclick=function(){var t=getSelection().getRangeAt(0).startContainer,n=Object(_.f)(t,"TD")||Object(_.f)(t,"TH");n&&pt(e,u,n)};var P=document.createElement("button");P.setAttribute("type","button"),P.setAttribute("aria-label",F.a[e.options.lang].insertColumnLeft+"<"+Object(d.g)("\u21e7\u2318G")+">"),P.setAttribute("data-type","insertColumn"),P.innerHTML='<svg><use xlink:href="#vditor-icon-insert-columnb"></use></svg>',P.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",P.onclick=function(){var t=getSelection().getRangeAt(0).startContainer,n=Object(_.f)(t,"TD")||Object(_.f)(t,"TH");n&&pt(e,u,n,"beforebegin")};var N=document.createElement("button");N.setAttribute("type","button"),N.setAttribute("aria-label",F.a[e.options.lang]["delete-row"]+"<"+Object(d.g)("\u2318-")+">"),N.setAttribute("data-type","deleteRow"),N.innerHTML='<svg><use xlink:href="#vditor-icon-delete-row"></use></svg>',N.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",N.onclick=function(){var n=getSelection().getRangeAt(0).startContainer,r=Object(_.f)(n,"TD")||Object(_.f)(n,"TH");r&&ht(e,t,r)};var D=document.createElement("button");D.setAttribute("type","button"),D.setAttribute("aria-label",F.a[e.options.lang]["delete-column"]+"<"+Object(d.g)("\u21e7\u2318-")+">"),D.setAttribute("data-type","deleteColumn"),D.innerHTML='<svg><use xlink:href="#vditor-icon-delete-column"></use></svg>',D.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",D.onclick=function(){var n=getSelection().getRangeAt(0).startContainer,r=Object(_.f)(n,"TD")||Object(_.f)(n,"TH");r&&mt(e,t,u,r)},(K=document.createElement("span")).setAttribute("aria-label",F.a[e.options.lang].row),K.className="vditor-tooltipped vditor-tooltipped__n";var I=document.createElement("input");K.appendChild(I),I.type="number",I.min="1",I.className="vditor-input",I.style.width="42px",I.style.textAlign="center",I.setAttribute("placeholder",F.a[e.options.lang].row),I.value=u.rows.length.toString(),I.oninput=function(){y()},I.onkeydown=function(t){if(!t.isComposing)return"Tab"===t.key?(H.focus(),H.select(),void t.preventDefault()):void re(e,t)};var B=document.createElement("span");B.setAttribute("aria-label",F.a[e.options.lang].column),B.className="vditor-tooltipped vditor-tooltipped__n";var H=document.createElement("input");B.appendChild(H),H.type="number",H.min="1",H.className="vditor-input",H.style.width="42px",H.style.textAlign="center",H.setAttribute("placeholder",F.a[e.options.lang].column),H.value=u.rows[0].cells.length.toString(),H.oninput=function(){y()},H.onkeydown=function(t){if(!t.isComposing)return"Tab"===t.key?(I.focus(),I.select(),void t.preventDefault()):void re(e,t)},se(t,u,e),ce(t,u,e),le(u,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",E),e.wysiwyg.popover.insertAdjacentElement("beforeend",T),e.wysiwyg.popover.insertAdjacentElement("beforeend",k),e.wysiwyg.popover.insertAdjacentElement("beforeend",A),e.wysiwyg.popover.insertAdjacentElement("beforeend",C),e.wysiwyg.popover.insertAdjacentElement("beforeend",P),e.wysiwyg.popover.insertAdjacentElement("beforeend",M),e.wysiwyg.popover.insertAdjacentElement("beforeend",N),e.wysiwyg.popover.insertAdjacentElement("beforeend",D),e.wysiwyg.popover.insertAdjacentElement("beforeend",K),e.wysiwyg.popover.insertAdjacentHTML("beforeend"," x "),e.wysiwyg.popover.insertAdjacentElement("beforeend",B),oe(e,u)}var U=Object(_.d)(n,"data-type","link-ref");U&&ae(e,U);var q=Object(_.d)(n,"data-type","footnotes-ref");if(q){e.wysiwyg.popover.innerHTML="",(K=document.createElement("span")).setAttribute("aria-label",F.a[e.options.lang].footnoteRef+"<"+Object(d.g)("\u2325Enter")+">"),K.className="vditor-tooltipped vditor-tooltipped__n";var V=document.createElement("input");K.appendChild(V),V.className="vditor-input",V.setAttribute("placeholder",F.a[e.options.lang].footnoteRef+"<"+Object(d.g)("\u2325Enter")+">"),V.style.width="120px",V.value=q.getAttribute("data-footnotes-label"),V.oninput=function(){""!==V.value.trim()&&q.setAttribute("data-footnotes-label",V.value)},V.onkeydown=function(n){if(!n.isComposing)return Object(d.d)(n)||n.shiftKey||!n.altKey||"Enter"!==n.key?void re(e,n):(t.selectNodeContents(q),t.collapse(!1),Object(L.h)(t),void n.preventDefault())},le(q,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",K),oe(e,q)}var W=Object(_.e)(n,"vditor-wysiwyg__block");if(W&&W.getAttribute("data-type").indexOf("block")>-1){if(e.wysiwyg.popover.innerHTML="",se(t,W,e),ce(t,W,e),le(W,e),"code-block"===W.getAttribute("data-type")){var z=document.createElement("span");z.setAttribute("aria-label",F.a[e.options.lang].language+"<"+Object(d.g)("\u2325Enter")+">"),z.className="vditor-tooltipped vditor-tooltipped__n";var X=document.createElement("input");z.appendChild(X);var Y=W.firstElementChild.firstElementChild;X.className="vditor-input",X.setAttribute("placeholder",F.a[e.options.lang].language+"<"+Object(d.g)("\u2325Enter")+">"),X.value=Y.className.indexOf("language-")>-1?Y.className.split("-")[1].split(" ")[0]:"",X.oninput=function(){""!==X.value.trim()?Y.className="language-"+X.value:(Y.className="",e.hint.recentLanguage=""),W.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(W.lastElementChild.innerHTML=W.firstElementChild.innerHTML,R(W.lastElementChild,e)),Q(e)},X.onkeydown=function(n){if(!n.isComposing&&!re(e,n)){if("Escape"===n.key&&"block"===e.hint.element.style.display)return e.hint.element.style.display="none",void n.preventDefault();Object(d.d)(n)||n.shiftKey||!n.altKey||"Enter"!==n.key||(t.setStart(Y.firstChild,0),t.collapse(!0),Object(L.h)(t)),e.hint.select(n,e)}},X.onkeyup=function(t){if(!t.isComposing&&"Enter"!==t.key&&"ArrowUp"!==t.key&&"Escape"!==t.key&&"ArrowDown"!==t.key){var n=[],r=X.value.substring(0,X.selectionStart);a.a.CODE_LANGUAGES.forEach((function(e){e.indexOf(r.toLowerCase())>-1&&n.push({html:e,value:e})})),e.hint.genHTML(n,r,e),t.preventDefault()}},e.wysiwyg.popover.insertAdjacentElement("beforeend",z)}oe(e,W)}else W||e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview").forEach((function(e){e.previousElementSibling.style.display="none"})),W=void 0;if(v){var K;e.wysiwyg.popover.innerHTML="",(K=document.createElement("span")).setAttribute("aria-label","ID<"+Object(d.g)("\u2325Enter")+">"),K.className="vditor-tooltipped vditor-tooltipped__n";var G=document.createElement("input");K.appendChild(G),G.className="vditor-input",G.setAttribute("placeholder","ID<"+Object(d.g)("\u2325Enter")+">"),G.style.width="120px",G.value=v.getAttribute("data-id")||"",G.oninput=function(){v.setAttribute("data-id",G.value)},G.onkeydown=function(n){if(!n.isComposing)return Object(d.d)(n)||n.shiftKey||!n.altKey||"Enter"!==n.key?void re(e,n):(t.selectNodeContents(v),t.collapse(!1),Object(L.h)(t),void n.preventDefault())},se(t,v,e),ce(t,v,e),le(v,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",K),oe(e,v)}if(l&&de(e,l),!(g||i||u||W||l||U||q||v||b)){var Z=Object(_.d)(n,"data-block","0");Z&&Z.parentElement.isEqualNode(e.wysiwyg.element)?(e.wysiwyg.popover.innerHTML="",se(t,Z,e),ce(t,Z,e),le(Z,e),oe(e,Z)):e.wysiwyg.popover.style.display="none"}e.wysiwyg.element.querySelectorAll('span[data-type="backslash"] > span').forEach((function(e){e.style.display="none"}));var J=Object(_.d)(t.startContainer,"data-type","backslash");J&&(J.querySelector("span").style.display="inline")}}),200)},oe=function(e,t){var n=t,r=Object(_.f)(t,"TABLE");r&&(n=r),e.wysiwyg.popover.style.left="0",e.wysiwyg.popover.style.display="block",e.wysiwyg.popover.style.top=Math.max(-8,n.offsetTop-21-e.wysiwyg.element.scrollTop)+"px",e.wysiwyg.popover.style.left=Math.min(n.offsetLeft,e.wysiwyg.element.clientWidth-e.wysiwyg.popover.clientWidth)+"px",e.wysiwyg.popover.setAttribute("data-top",(n.offsetTop-21).toString())},ae=function(e,t){e.wysiwyg.popover.innerHTML="";var n=function(){""!==i.value.trim()&&("IMG"===t.tagName?t.setAttribute("alt",i.value):t.textContent=i.value),""!==a.value.trim()&&t.setAttribute("data-link-label",a.value)},r=document.createElement("span");r.setAttribute("aria-label",F.a[e.options.lang].textIsNotEmpty),r.className="vditor-tooltipped vditor-tooltipped__n";var i=document.createElement("input");r.appendChild(i),i.className="vditor-input",i.setAttribute("placeholder",F.a[e.options.lang].textIsNotEmpty),i.style.width="120px",i.value=t.getAttribute("alt")||t.textContent,i.oninput=function(){n()},i.onkeydown=function(n){re(e,n)||ue(e,t,n,a)};var o=document.createElement("span");o.setAttribute("aria-label",F.a[e.options.lang].linkRef),o.className="vditor-tooltipped vditor-tooltipped__n";var a=document.createElement("input");o.appendChild(a),a.className="vditor-input",a.setAttribute("placeholder",F.a[e.options.lang].linkRef),a.value=t.getAttribute("data-link-label"),a.oninput=function(){n()},a.onkeydown=function(n){re(e,n)||ue(e,t,n,i)},le(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",r),e.wysiwyg.popover.insertAdjacentElement("beforeend",o),oe(e,t)},se=function(e,t,n){},ce=function(e,t,n){},le=function(e,t){},ue=function(e,t,n,r){if(!n.isComposing){if("Tab"===n.key)return r.focus(),r.select(),void n.preventDefault();if(!Object(d.d)(n)&&!n.shiftKey&&n.altKey&&"Enter"===n.key){var i=Object(L.b)(e);t.insertAdjacentHTML("afterend",a.a.ZWSP),i.setStartAfter(t.nextSibling),i.collapse(!0),Object(L.h)(i),n.preventDefault()}}},de=function(e,t){e.wysiwyg.popover.innerHTML="";var n=function(){""!==i.value.trim()&&(t.innerHTML=i.value),t.setAttribute("href",a.value),t.setAttribute("title",c.value)};t.querySelectorAll("[data-marker]").forEach((function(e){e.removeAttribute("data-marker")}));var r=document.createElement("span");r.setAttribute("aria-label",F.a[e.options.lang].textIsNotEmpty),r.className="vditor-tooltipped vditor-tooltipped__n";var i=document.createElement("input");r.appendChild(i),i.className="vditor-input",i.setAttribute("placeholder",F.a[e.options.lang].textIsNotEmpty),i.style.width="120px",i.value=t.innerHTML||"",i.oninput=function(){n()},i.onkeydown=function(n){re(e,n)||ue(e,t,n,a)};var o=document.createElement("span");o.setAttribute("aria-label",F.a[e.options.lang].link),o.className="vditor-tooltipped vditor-tooltipped__n";var a=document.createElement("input");o.appendChild(a),a.className="vditor-input",a.setAttribute("placeholder",F.a[e.options.lang].link),a.value=t.getAttribute("href")||"",a.oninput=function(){n()},a.onkeydown=function(n){re(e,n)||ue(e,t,n,c)};var s=document.createElement("span");s.setAttribute("aria-label",F.a[e.options.lang].tooltipText),s.className="vditor-tooltipped vditor-tooltipped__n";var c=document.createElement("input");s.appendChild(c),c.className="vditor-input",c.setAttribute("placeholder",F.a[e.options.lang].tooltipText),c.style.width="60px",c.value=t.getAttribute("title")||"",c.oninput=function(){n()},c.onkeydown=function(n){re(e,n)||ue(e,t,n,i)},le(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",r),e.wysiwyg.popover.insertAdjacentElement("beforeend",o),e.wysiwyg.popover.insertAdjacentElement("beforeend",s),oe(e,t)},fe=function(e){"wysiwyg"===e.currentMode?ie(e):"ir"===e.currentMode&&G(e)},pe=function(e,t,n){void 0===n&&(n={enableAddUndoStack:!0,enableHint:!1,enableInput:!0});var r=e.wysiwyg.element;r.innerHTML=e.lute.Md2VditorDOM(t),r.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach((function(t){R(t,e),t.previousElementSibling.setAttribute("style","display:none")})),Q(e,n)},he=function(e,t){return Object(L.e)(e,t)?getSelection().toString():""},me=function(e,t,n){for(var r=e.startContainer.parentElement,i=!1,o="",s="",c=function(e){var t=J(e.startContainer),n=Z(e.startContainer),r=e.startContainer.textContent,i=e.startOffset,o="",s="";return(""!==r.substr(0,i)&&r.substr(0,i)!==a.a.ZWSP||t)&&(o=""+t+r.substr(0,i)),(""!==r.substr(i)&&r.substr(i)!==a.a.ZWSP||n)&&(s=""+r.substr(i)+n),{afterHTML:s,beforeHTML:o}}(e),l=c.beforeHTML,u=c.afterHTML;r&&!i;){var d=r.tagName;if("STRIKE"===d&&(d="S"),"I"===d&&(d="EM"),"B"===d&&(d="STRONG"),"S"===d||"STRONG"===d||"EM"===d){var f="",p="",h="";"0"!==r.parentElement.getAttribute("data-block")&&(p=J(r),h=Z(r)),(l||p)&&(l=f=p+"<"+d+">"+l+"</"+d+">"),("bold"===n&&"STRONG"===d||"italic"===n&&"EM"===d||"strikeThrough"===n&&"S"===d)&&(f+=""+o+a.a.ZWSP+"<wbr>"+s,i=!0),(u||h)&&(f+=u="<"+d+">"+u+"</"+d+">"+h),"0"!==r.parentElement.getAttribute("data-block")?(r=r.parentElement).innerHTML=f:(r.outerHTML=f,r=r.parentElement),o="<"+d+">"+o,s="</"+d+">"+s}else i=!0}Object(L.f)(t.wysiwyg.element,e)},ve=function(e,t){var n,r=this;this.element=document.createElement("div"),t.className&&(n=this.element.classList).add.apply(n,t.className.split(" "));var i=t.hotkey?" <"+Object(d.g)(t.hotkey)+">":"";2===t.level&&(i=t.hotkey?" &lt;"+Object(d.g)(t.hotkey)+"&gt;":"");var o=t.tip?t.tip+i:F.a[e.options.lang][t.name]+i,s="upload"===t.name?"div":"button";if(2===t.level)this.element.innerHTML="<"+s+' data-type="'+t.name+'">'+o+"</"+s+">";else{this.element.classList.add("vditor-toolbar__item");var c=document.createElement(s);c.setAttribute("data-type",t.name),c.className="vditor-tooltipped vditor-tooltipped__"+t.tipPosition,c.setAttribute("aria-label",o),c.innerHTML=t.icon,this.element.appendChild(c)}t.prefix&&this.element.children[0].addEventListener(Object(d.b)(),(function(n){n.preventDefault(),r.element.firstElementChild.classList.contains(a.a.CLASS_MENU_DISABLED)||("wysiwyg"===e.currentMode?function(e,t,n){if(!(e.wysiwyg.composingLock&&n instanceof CustomEvent)){var r=!0,i=!0;e.wysiwyg.element.querySelector("wbr")&&e.wysiwyg.element.querySelector("wbr").remove();var o=Object(L.b)(e),s=t.getAttribute("data-type");if(t.classList.contains("vditor-menu--current"))if("strike"===s&&(s="strikeThrough"),"quote"===s){var c=Object(_.f)(o.startContainer,"BLOCKQUOTE");c||(c=o.startContainer.childNodes[o.startOffset]),c&&(r=!1,t.classList.remove("vditor-menu--current"),o.insertNode(document.createElement("wbr")),c.outerHTML=""===c.innerHTML.trim()?'<p data-block="0">'+c.innerHTML+"</p>":c.innerHTML,Object(L.f)(e.wysiwyg.element,o))}else if("inline-code"===s){var l=Object(_.f)(o.startContainer,"CODE");l||(l=o.startContainer.childNodes[o.startOffset]),l&&(l.outerHTML=l.innerHTML.replace(a.a.ZWSP,"")+"<wbr>",Object(L.f)(e.wysiwyg.element,o))}else"link"===s?o.collapsed?(o.selectNode(o.startContainer.parentElement),document.execCommand("unlink",!1,"")):document.execCommand("unlink",!1,""):"check"===s||"list"===s||"ordered-list"===s?(tt(e,o,s),Object(L.f)(e.wysiwyg.element,o),r=!1,t.classList.remove("vditor-menu--current")):(r=!1,t.classList.remove("vditor-menu--current"),""===o.toString()?me(o,e,s):document.execCommand(s,!1,""));else{0===e.wysiwyg.element.childNodes.length&&(e.wysiwyg.element.innerHTML='<p data-block="0"><wbr></p>',Object(L.f)(e.wysiwyg.element,o));var u=Object(_.c)(o.startContainer);if("quote"===s){if(u||(u=o.startContainer.childNodes[o.startOffset]),u){r=!1,t.classList.add("vditor-menu--current"),o.insertNode(document.createElement("wbr"));var d=Object(_.f)(o.startContainer,"LI");d&&u.contains(d)?d.innerHTML='<blockquote data-block="0">'+d.innerHTML+"</blockquote>":u.outerHTML='<blockquote data-block="0">'+u.outerHTML+"</blockquote>",Object(L.f)(e.wysiwyg.element,o)}}else if("check"===s||"list"===s||"ordered-list"===s)tt(e,o,s,!1),Object(L.f)(e.wysiwyg.element,o),r=!1,f(e.toolbar.elements,["check","list","ordered-list"]),t.classList.add("vditor-menu--current");else if("inline-code"===s){if(""===o.toString())(p=document.createElement("code")).textContent=a.a.ZWSP,o.insertNode(p),o.setStart(p.firstChild,1),o.collapse(!0),Object(L.h)(o);else if(3===o.startContainer.nodeType){var p=document.createElement("code");o.surroundContents(p),o.insertNode(p),Object(L.h)(o)}t.classList.add("vditor-menu--current")}else if("code"===s)(p=document.createElement("div")).className="vditor-wysiwyg__block",p.setAttribute("data-type","code-block"),p.setAttribute("data-block","0"),p.setAttribute("data-marker","```"),""===o.toString()?p.innerHTML="<pre><code><wbr>\n</code></pre>":(p.innerHTML="<pre><code>"+o.toString()+"<wbr></code></pre>",o.deleteContents()),o.insertNode(p),u&&(u.outerHTML=e.lute.SpinVditorDOM(u.outerHTML)),Object(L.f)(e.wysiwyg.element,o),e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach((function(t){R(t,e)})),t.classList.add("vditor-menu--disabled");else if("link"===s){if(""===o.toString()){var h=document.createElement("a");h.innerText=a.a.ZWSP,o.insertNode(h),o.setStart(h.firstChild,1),o.collapse(!0),de(e,h);var m=e.wysiwyg.popover.querySelector("input");m.value="",m.focus(),i=!1}else{(p=document.createElement("a")).setAttribute("href",""),p.innerHTML=o.toString(),o.surroundContents(p),o.insertNode(p),Object(L.h)(o),de(e,p);var v=e.wysiwyg.popover.querySelectorAll("input");v[0].value=p.innerText,v[1].focus()}r=!1,t.classList.add("vditor-menu--current")}else if("table"===s){var b='<table data-block="0"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>';if(""===o.toString().trim())u&&""===u.innerHTML.trim().replace(a.a.ZWSP,"")?u.outerHTML=b:document.execCommand("insertHTML",!1,b),o.selectNode(e.wysiwyg.element.querySelector("wbr").previousSibling),e.wysiwyg.element.querySelector("wbr").remove(),Object(L.h)(o);else{b='<table data-block="0"><thead><tr>';var g=o.toString().split("\n"),y=g[0].split(",").length>g[0].split("\t").length?",":"\t";g.forEach((function(e,t){0===t?(e.split(y).forEach((function(e,t){b+=0===t?"<th>"+e+"<wbr></th>":"<th>"+e+"</th>"})),b+="</tr></thead>"):(b+=1===t?"<tbody><tr>":"<tr>",e.split(y).forEach((function(e){b+="<td>"+e+"</td>"})),b+="</tr>")})),b+="</tbody></table>",document.execCommand("insertHTML",!1,b),Object(L.f)(e.wysiwyg.element,o)}r=!1,t.classList.add("vditor-menu--disabled")}else if("line"===s){if(u){var w='<hr data-block="0"><p data-block="0"><wbr>\n</p>';""===u.innerHTML.trim()?u.outerHTML=w:u.insertAdjacentHTML("afterend",w),Object(L.f)(e.wysiwyg.element,o)}}else if(r=!1,t.classList.add("vditor-menu--current"),"strike"===s&&(s="strikeThrough"),""!==o.toString()||"bold"!==s&&"italic"!==s&&"strikeThrough"!==s)document.execCommand(s,!1,"");else{var O="strong";"italic"===s?O="em":"strikeThrough"===s&&(O="s"),(p=document.createElement(O)).textContent=a.a.ZWSP,o.insertNode(p),p.previousSibling&&p.previousSibling.textContent===a.a.ZWSP&&(p.previousSibling.textContent=""),o.setStart(p.firstChild,1),o.collapse(!0),Object(L.h)(o)}}he(e[e.currentMode].element)&&getSelection().removeAllRanges(),e.bubbleToolbar.hide(),r&&ie(e),i&&Q(e)}}(e,r.element.children[0],n):"ir"===e.currentMode?kt(e,r.element.children[0],t.prefix||"",t.suffix||""):Ne(e,r.element.children[0],t.prefix||"",t.suffix||""))}))},be=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ge=function(e,t,n){var r;if("string"!=typeof n?(g(e,["subToolbar","hint"]),n.preventDefault(),r=c(e)):r=n,e.currentMode!==t||"string"==typeof n){if(e.devtools&&e.devtools.renderEchart(e),"both"===e.options.preview.mode&&"sv"===t?e.preview.element.style.display="block":e.preview.element.style.display="none",h(e.toolbar.elements,a.a.EDIT_TOOLBARS),f(e.toolbar.elements,a.a.EDIT_TOOLBARS),m(e.toolbar.elements,["outdent","indent"]),"ir"===t)v(e.toolbar.elements,["both"]),b(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="block",e.lute.SetVditorIR(!0),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!1),e.currentMode="ir",e.ir.element.innerHTML=e.lute.Md2VditorIRDOM(r),jt(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),X(e),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach((function(t){R(t,e)})),e.ir.element.querySelectorAll(".vditor-toc").forEach((function(t){Object(C.a)(t,{cdn:e.options.cdn,math:e.options.preview.math})}));else if("wysiwyg"===t)v(e.toolbar.elements,["both"]),b(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="block",e.ir.element.parentElement.style.display="none",e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!0),e.lute.SetVditorSV(!1),e.currentMode="wysiwyg",X(e),pe(e,r,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),e.wysiwyg.element.querySelectorAll(".vditor-toc").forEach((function(t){Object(C.a)(t,{cdn:e.options.cdn,math:e.options.preview.math})})),e.wysiwyg.popover.style.display="none";else if("sv"===t){b(e.toolbar.elements,["both"]),v(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="none",("both"===e.options.preview.mode||"editor"===e.options.preview.mode)&&(e.sv.element.style.display="block"),e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!0),e.currentMode="sv";var i=Me(r,e);"<div data-block='0'></div>"===i&&(i=""),e.sv.element.innerHTML=i,Re(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),X(e)}e.undo.resetIcon(e),"string"!=typeof n&&(e[e.currentMode].element.focus(),fe(e)),N(e),Y(e),e.toolbar.elements["edit-mode"]&&(e.toolbar.elements["edit-mode"].querySelectorAll("button").forEach((function(e){e.classList.remove("vditor-menu--current")})),e.toolbar.elements["edit-mode"].querySelector('button[data-mode="'+e.currentMode+'"]').classList.add("vditor-menu--current")),e.outline.toggle(e,"sv"!==e.currentMode&&e.options.outline.enable)}},ye=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=document.createElement("div");return i.className="vditor-hint"+(2===n.level?"":" vditor-panel--arrow"),i.innerHTML='<button data-mode="wysiwyg">'+F.a[t.options.lang].wysiwyg+" &lt;"+Object(d.g)("\u2325\u23187")+'></button>\n<button data-mode="ir">'+F.a[t.options.lang].instantRendering+" &lt;"+Object(d.g)("\u2325\u23188")+'></button>\n<button data-mode="sv">'+F.a[t.options.lang].splitView+" &lt;"+Object(d.g)("\u2325\u23189")+"></button>",r.element.appendChild(i),r._bindEvent(t,i,n),r}return be(t,e),t.prototype._bindEvent=function(e,t,n){var r=this.element.children[0];y(e,t,r,n.level),t.children.item(0).addEventListener(Object(d.b)(),(function(t){ge(e,"wysiwyg",t),t.preventDefault(),t.stopPropagation()})),t.children.item(1).addEventListener(Object(d.b)(),(function(t){ge(e,"ir",t),t.preventDefault(),t.stopPropagation()})),t.children.item(2).addEventListener(Object(d.b)(),(function(t){ge(e,"sv",t),t.preventDefault(),t.stopPropagation()}))},t}(ve),_e=function(e,t){t.addEventListener("focus",(function(t){e.options.focus&&e.options.focus(c(e),t),g(e,["subToolbar"])}))},we=function(e,t){t.addEventListener("dblclick",(function(t){"IMG"===t.target.tagName&&Object(q.a)(t.target,e.options.lang,e.options.theme)}))},Oe=function(e,t){t.addEventListener("blur",(function(t){if("ir"===e.currentMode){var n=e.ir.element.querySelector(".vditor-ir__node--expand");n&&n.classList.remove("vditor-ir__node--expand")}else"wysiwyg"!==e.currentMode||e.wysiwyg.selectPopover.contains(t.relatedTarget)||e.wysiwyg.hideComment();e[e.currentMode].range=Object(L.b)(e),e.options.blur&&e.options.blur(c(e))}))},xe=function(e,t){t.addEventListener("dragstart",(function(e){e.dataTransfer.setData(a.a.DROP_EDITOR,a.a.DROP_EDITOR)})),t.addEventListener("drop",(function(t){t.dataTransfer.getData(a.a.DROP_EDITOR)?st(e):("Files"===t.dataTransfer.types[0]||t.dataTransfer.types.includes("text/html"))&&xt(e,t,{pasteCode:function(e){document.execCommand("insertHTML",!1,e)}})}))},Se=function(e,t,n){t.addEventListener("copy",(function(t){return n(t,e)}))},je=function(e,t,n){t.addEventListener("cut",(function(t){n(t,e),e.options.comment.enable&&"wysiwyg"===e.currentMode&&e.wysiwyg.getComments(e),document.execCommand("delete")}))},Ee=function(e){if("wysiwyg"===e.currentMode&&e.options.comment.enable&&e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)),e.options.typewriterMode){var t=e[e.currentMode].element,n=Object(L.a)(t).top;"string"!=typeof e.options.height||e.element.classList.contains("vditor--fullscreen")||window.scrollTo(window.scrollX,n+e.element.offsetTop+e.toolbar.element.offsetHeight-window.innerHeight/2+10),("number"==typeof e.options.height||e.element.classList.contains("vditor--fullscreen"))&&(t.scrollTop=n+t.scrollTop-t.clientHeight/2+10)}},Te=function(e,t){t.addEventListener("keydown",(function(t){if(!(e.options.hint.extend.length>1||e.toolbar.elements.emoji)||!e.hint.select(t,e)){if(e.options.comment.enable&&"wysiwyg"===e.currentMode&&("Backspace"===t.key||H("\u2318X",t))&&e.wysiwyg.getComments(e),"sv"===e.currentMode){if(function(e,t){var n,r,i,o,a;if(e.sv.composingLock=t.isComposing,t.isComposing)return!1;if(-1!==t.key.indexOf("Arrow")||"Meta"===t.key||"Control"===t.key||"Alt"===t.key||"Shift"===t.key||"CapsLock"===t.key||"Escape"===t.key||/^F\d{1,2}$/.test(t.key)||e.undo.recordFirstPosition(e,t),"Enter"!==t.key&&"Tab"!==t.key&&"Backspace"!==t.key&&-1===t.key.indexOf("Arrow")&&!Object(d.d)(t)&&"Escape"!==t.key)return!1;var s=Object(L.b)(e),c=s.startContainer;3!==s.startContainer.nodeType&&"DIV"===s.startContainer.tagName&&(c=s.startContainer.childNodes[s.startOffset-1]);var l=Object(_.d)(c,"data-type","text"),u=Object(_.d)(c,"data-type","blockquote-marker");if(!u&&0===s.startOffset&&l&&l.previousElementSibling&&"blockquote-marker"===l.previousElementSibling.getAttribute("data-type")&&(u=l.previousElementSibling),u&&"Enter"===t.key&&!Object(d.d)(t)&&!t.altKey&&""===u.nextElementSibling.textContent.trim()&&Object(L.c)(u,e.sv.element,s).start===u.textContent.length)return"padding"===(null===(n=u.previousElementSibling)||void 0===n?void 0:n.getAttribute("data-type"))&&u.previousElementSibling.setAttribute("data-action","enter-remove"),u.remove(),Re(e),t.preventDefault(),!0;var f=Object(_.d)(c,"data-type","li-marker"),p=Object(_.d)(c,"data-type","task-marker"),h=f;if(h||p&&"task-marker"!==p.nextElementSibling.getAttribute("data-type")&&(h=p),h||0!==s.startOffset||!l||!l.previousElementSibling||"li-marker"!==l.previousElementSibling.getAttribute("data-type")&&"task-marker"!==l.previousElementSibling.getAttribute("data-type")||(h=l.previousElementSibling),h){var m=Object(L.c)(h,e.sv.element,s).start,v="task-marker"===h.getAttribute("data-type"),b=h;if(v&&(b=h.previousElementSibling.previousElementSibling.previousElementSibling),m===h.textContent.length){if("Enter"===t.key&&!Object(d.d)(t)&&!t.altKey&&!t.shiftKey&&""===h.nextElementSibling.textContent.trim())return"padding"===(null===(r=b.previousElementSibling)||void 0===r?void 0:r.getAttribute("data-type"))?(b.previousElementSibling.remove(),V(e)):(v&&(b.remove(),h.previousElementSibling.previousElementSibling.remove(),h.previousElementSibling.remove()),h.nextElementSibling.remove(),h.remove(),Re(e)),t.preventDefault(),!0;if("Tab"===t.key)return b.insertAdjacentHTML("beforebegin",'<span data-type="padding">'+b.textContent.replace(/\S/g," ")+"</span>"),/^\d/.test(b.textContent)&&(b.textContent=b.textContent.replace(/^\d{1,}/,"1"),s.selectNodeContents(h.firstChild),s.collapse(!1)),V(e),t.preventDefault(),!0}}if(lt(e,s,t))return!0;var g=Object(_.d)(c,"data-block","0"),y=Object(w.b)(c,"SPAN");if("Enter"===t.key&&!Object(d.d)(t)&&!t.altKey&&!t.shiftKey&&g){var O=!1,x=g.textContent.match(/^\n+/);Object(L.c)(g,e.sv.element).start<=(x?x[0].length:0)&&(O=!0);var S="\n";if(y){if("enter-remove"===(null===(i=y.previousElementSibling)||void 0===i?void 0:i.getAttribute("data-action")))return y.previousElementSibling.remove(),Re(e),t.preventDefault(),!0;S+=Pe(y)}return s.insertNode(document.createTextNode(S)),s.collapse(!1),g&&""!==g.textContent.trim()&&!O?V(e):Re(e),t.preventDefault(),!0}if("Backspace"===t.key&&!Object(d.d)(t)&&!t.altKey&&!t.shiftKey){if(y&&"newline"===(null===(o=y.previousElementSibling)||void 0===o?void 0:o.getAttribute("data-type"))&&1===Object(L.c)(y,e.sv.element,s).start&&-1===y.getAttribute("data-type").indexOf("code-block-"))return s.setStart(y,0),s.extractContents(),""!==y.textContent.trim()?V(e):Re(e),t.preventDefault(),!0;if(g&&0===Object(L.c)(g,e.sv.element,s).start&&g.previousElementSibling){s.extractContents();var j=g.previousElementSibling.lastElementChild;return"newline"===j.getAttribute("data-type")&&(j.remove(),j=g.previousElementSibling.lastElementChild),"newline"!==j.getAttribute("data-type")&&(j.insertAdjacentHTML("afterend",g.innerHTML),g.remove()),""===g.textContent.trim()||(null===(a=g.previousElementSibling)||void 0===a?void 0:a.querySelector('[data-type="code-block-open-marker"]'))?("newline"!==j.getAttribute("data-type")&&(s.selectNodeContents(j.lastChild),s.collapse(!1)),Re(e)):V(e),t.preventDefault(),!0}}return!1}(e,t))return}else if("wysiwyg"===e.currentMode){if(function(e,t){if(e.wysiwyg.composingLock=t.isComposing,t.isComposing)return!1;-1!==t.key.indexOf("Arrow")||"Meta"===t.key||"Control"===t.key||"Alt"===t.key||"Shift"===t.key||"CapsLock"===t.key||"Escape"===t.key||/^F\d{1,2}$/.test(t.key)||e.undo.recordFirstPosition(e,t);var n=Object(L.b)(e),r=n.startContainer;if(!Xe(t,e,r))return!1;if(Ye(n,e,t),wt(n),"Enter"!==t.key&&"Tab"!==t.key&&"Backspace"!==t.key&&-1===t.key.indexOf("Arrow")&&!Object(d.d)(t)&&"Escape"!==t.key&&"Delete"!==t.key)return!1;var i=Object(_.c)(r),o=Object(_.f)(r,"P");if(ut(t,e,o,n))return!0;if(ct(n,e,o,t))return!0;if(vt(e,t,n))return!0;var s=Object(_.e)(r,"vditor-wysiwyg__block");if(s){if("Escape"===t.key&&2===s.children.length)return e.wysiwyg.popover.style.display="none",s.firstElementChild.style.display="none",e.wysiwyg.element.blur(),t.preventDefault(),!0;if(!Object(d.d)(t)&&!t.shiftKey&&t.altKey&&"Enter"===t.key&&"code-block"===s.getAttribute("data-type")){var c=e.wysiwyg.popover.querySelector(".vditor-input");return c.focus(),c.select(),t.preventDefault(),!0}if("0"===s.getAttribute("data-block")){if(bt(e,t,s.firstElementChild,n))return!0;if($e(e,t,n,s.firstElementChild,s))return!0;if("yaml-front-matter"!==s.getAttribute("data-type")&&et(e,t,n,s.firstElementChild,s))return!0}}if(gt(e,n,t,o))return!0;var l=Object(_.h)(r,"BLOCKQUOTE");if(l&&!t.shiftKey&&t.altKey&&"Enter"===t.key){Object(d.d)(t)?n.setStartBefore(l):n.setStartAfter(l),Object(L.h)(n);var u=document.createElement("p");return u.setAttribute("data-block","0"),u.innerHTML="\n",n.insertNode(u),n.collapse(!0),Object(L.h)(n),Q(e),Ee(e),t.preventDefault(),!0}var f,p=Object(w.a)(r);if(p){if("H6"===p.tagName&&r.textContent.length===n.startOffset&&!Object(d.d)(t)&&!t.shiftKey&&!t.altKey&&"Enter"===t.key){var h=document.createElement("p");return h.textContent="\n",h.setAttribute("data-block","0"),r.parentElement.insertAdjacentElement("afterend",h),n.setStart(h,0),Object(L.h)(n),Q(e),Ee(e),t.preventDefault(),!0}var m;if(H("\u2318=",t))return(m=parseInt(p.tagName.substr(1),10)-1)>0&&(ee(e,"h"+m),Q(e)),t.preventDefault(),!0;if(H("\u2318-",t))return(m=parseInt(p.tagName.substr(1),10)+1)<7&&(ee(e,"h"+m),Q(e)),t.preventDefault(),!0;"Backspace"!==t.key||Object(d.d)(t)||t.shiftKey||t.altKey||1!==p.textContent.length||te(e)}if(yt(e,n,t))return!0;if(t.altKey&&"Enter"===t.key&&!Object(d.d)(t)&&!t.shiftKey){var v=Object(_.f)(r,"A"),b=Object(_.d)(r,"data-type","link-ref"),g=Object(_.d)(r,"data-type","footnotes-ref");if(v||b||g||p&&2===p.tagName.length){var y=e.wysiwyg.popover.querySelector("input");y.focus(),y.select()}}if(re(e,t))return!0;if(H("\u21e7\u2318U",t)&&(f=e.wysiwyg.popover.querySelector('[data-type="up"]')))return f.click(),t.preventDefault(),!0;if(H("\u21e7\u2318D",t)&&(f=e.wysiwyg.popover.querySelector('[data-type="down"]')))return f.click(),t.preventDefault(),!0;if(lt(e,n,t))return!0;if(!Object(d.d)(t)&&t.shiftKey&&!t.altKey&&"Enter"===t.key&&"LI"!==r.parentElement.tagName&&"P"!==r.parentElement.tagName||"Enter"===t.key&&-1!==["P","STRONG","STRIKE","S","I","EM","B"].indexOf(r.parentElement.tagName))return["STRONG","STRIKE","S","I","EM","B"].includes(r.parentElement.tagName),n.insertNode(document.createTextNode("\n"+a.a.ZWSP)),n.collapse(!1),Object(L.h)(n),Q(e),Ee(e),t.preventDefault(),!0;if("Backspace"===t.key&&!Object(d.d)(t)&&!t.shiftKey&&!t.altKey&&""===n.toString()){if(_t(e,n,t,o))return!0;if(i){if(i.previousElementSibling&&i.previousElementSibling.classList.contains("vditor-wysiwyg__block")&&"0"===i.previousElementSibling.getAttribute("data-block")&&"UL"!==i.tagName&&"OL"!==i.tagName){var O=Object(L.c)(i,e.wysiwyg.element,n).start;if(0===O&&0===n.startOffset||1===O&&i.innerText.startsWith(a.a.ZWSP))return ne(i.previousElementSibling.lastElementChild,e,!1),""===i.innerHTML.trim().replace(a.a.ZWSP,"")&&(i.remove(),Q(e)),t.preventDefault(),!0}var x=n.startOffset;if(""===n.toString()&&3===r.nodeType&&"\n"===r.textContent.charAt(x-2)&&r.textContent.charAt(x-1)!==a.a.ZWSP&&["STRONG","STRIKE","S","I","EM","B"].includes(r.parentElement.tagName))return r.textContent=r.textContent.substring(0,x-1)+a.a.ZWSP,n.setStart(r,x),n.collapse(!0),Q(e),t.preventDefault(),!0;r.textContent===a.a.ZWSP&&1===n.startOffset&&!r.previousSibling&&function(e){for(var t=e.startContainer.nextSibling;t&&""===t.textContent;)t=t.nextSibling;return!(!t||3===t.nodeType||"CODE"!==t.tagName&&"math-inline"!==t.getAttribute("data-type")&&"html-entity"!==t.getAttribute("data-type")&&"html-inline"!==t.getAttribute("data-type"))}(n)&&(r.textContent=""),i.querySelectorAll("span.vditor-wysiwyg__block[data-type='math-inline']").forEach((function(e){e.firstElementChild.style.display="inline",e.lastElementChild.style.display="none"})),i.querySelectorAll("span.vditor-wysiwyg__block[data-type='html-entity']").forEach((function(e){e.firstElementChild.style.display="inline",e.lastElementChild.style.display="none"}))}}if(Object(d.e)()&&1===n.startOffset&&r.textContent.indexOf(a.a.ZWSP)>-1&&r.previousSibling&&3!==r.previousSibling.nodeType&&"CODE"===r.previousSibling.tagName&&("Backspace"===t.key||"ArrowLeft"===t.key))return n.selectNodeContents(r.previousSibling),n.collapse(!1),t.preventDefault(),!0;if(Ot(t,i,n))return t.preventDefault(),!0;if(Ke(n,t.key),"ArrowDown"===t.key){var S=r.nextSibling;S&&3!==S.nodeType&&"math-inline"===S.getAttribute("data-type")&&n.setStartAfter(S)}return!(!i||!I(i,e,t,n))&&(t.preventDefault(),!0)}(e,t))return}else if("ir"===e.currentMode&&function(e,t){if(e.ir.composingLock=t.isComposing,t.isComposing)return!1;-1!==t.key.indexOf("Arrow")||"Meta"===t.key||"Control"===t.key||"Alt"===t.key||"Shift"===t.key||"CapsLock"===t.key||"Escape"===t.key||/^F\d{1,2}$/.test(t.key)||e.undo.recordFirstPosition(e,t);var n=Object(L.b)(e),r=n.startContainer;if(!Xe(t,e,r))return!1;if(Ye(n,e,t),wt(n),"Enter"!==t.key&&"Tab"!==t.key&&"Backspace"!==t.key&&-1===t.key.indexOf("Arrow")&&!Object(d.d)(t)&&"Escape"!==t.key&&"Delete"!==t.key)return!1;var i=Object(_.d)(r,"data-newline","1");if(!Object(d.d)(t)&&!t.altKey&&!t.shiftKey&&"Enter"===t.key&&i&&n.startOffset<i.textContent.length){var o=i.previousElementSibling;o&&(n.insertNode(document.createTextNode(o.textContent)),n.collapse(!1));var s=i.nextSibling;s&&(n.insertNode(document.createTextNode(s.textContent)),n.collapse(!0))}var c=Object(_.f)(r,"P");if(ut(t,e,c,n))return!0;if(ct(n,e,c,t))return!0;if(gt(e,n,t,c))return!0;var l=Object(_.e)(r,"vditor-ir__marker--pre");if(l&&"PRE"===l.tagName){var u=l.firstChild;if(bt(e,t,l,n))return!0;if(("math-block"===u.getAttribute("data-type")||"html-block"===u.getAttribute("data-type"))&&et(e,t,n,u,l.parentElement))return!0;if($e(e,t,n,u,l.parentElement))return!0}var f=Object(_.d)(r,"data-type","code-block-info");if(f){if("Enter"===t.key||"Tab"===t.key)return n.selectNodeContents(f.nextElementSibling.firstChild),n.collapse(!0),t.preventDefault(),g(e,["hint"]),!0;if("Backspace"===t.key){var p=Object(L.c)(f,e.ir.element).start;1===p&&n.setStart(r,0),2===p&&(e.hint.recentLanguage="")}if(et(e,t,n,f,f.parentElement))return g(e,["hint"]),!0}var h=Object(_.f)(r,"TD")||Object(_.f)(r,"TH");if(t.key.indexOf("Arrow")>-1&&h){var m=Qe(h);if(m&&et(e,t,n,h,m))return!0;var v=Ze(h);if(v&&$e(e,t,n,h,v))return!0}if(vt(e,t,n))return!0;if(yt(e,n,t))return!0;if(lt(e,n,t))return!0;var b=Object(w.a)(r);if(b){var y;if(H("\u2318=",t))return(y=b.querySelector(".vditor-ir__marker--heading"))&&y.textContent.trim().length>1&&Et(e,y.textContent.substr(1)),t.preventDefault(),!0;if(H("\u2318-",t))return(y=b.querySelector(".vditor-ir__marker--heading"))&&y.textContent.trim().length<6&&Et(e,y.textContent.trim()+"# "),t.preventDefault(),!0}var O=Object(_.c)(r);if("Backspace"===t.key&&!Object(d.d)(t)&&!t.shiftKey&&!t.altKey&&""===n.toString()){if(_t(e,n,t,c))return!0;if(O&&O.previousElementSibling&&"UL"!==O.tagName&&"OL"!==O.tagName&&("code-block"===O.previousElementSibling.getAttribute("data-type")||"math-block"===O.previousElementSibling.getAttribute("data-type"))){var x=Object(L.c)(O,e.ir.element,n).start;if(0===x||1===x&&O.innerText.startsWith(a.a.ZWSP))return n.selectNodeContents(O.previousElementSibling.querySelector(".vditor-ir__marker--pre code")),n.collapse(!1),U(n,e),""===O.textContent.trim().replace(a.a.ZWSP,"")&&(O.remove(),jt(e)),t.preventDefault(),!0}if(b){var S=b.firstElementChild.textContent.length;Object(L.c)(b,e.ir.element).start===S&&(n.setStart(b.firstElementChild.firstChild,S-1),n.collapse(!0),Object(L.h)(n))}}return!("ArrowUp"!==t.key&&"ArrowDown"!==t.key||!O||(O.querySelectorAll(".vditor-ir__node").forEach((function(e){e.contains(r)||e.classList.add("vditor-ir__node--hidden")})),!Ot(t,O,n)))||(Ke(n,t.key),!(!O||!I(O,e,t,n))&&(t.preventDefault(),!0))}(e,t))return;if(e.options.ctrlEnter&&H("\u2318Enter",t))return e.options.ctrlEnter(c(e)),void t.preventDefault();if(H("\u2318Z",t)&&!e.toolbar.elements.undo)return e.undo.undo(e),void t.preventDefault();if(H("\u2318Y",t)&&!e.toolbar.elements.redo)return e.undo.redo(e),void t.preventDefault();if("Escape"===t.key)return"block"===e.hint.element.style.display?e.hint.element.style.display="none":e.options.esc&&!t.isComposing&&e.options.esc(c(e)),void t.preventDefault();if(Object(d.d)(t)&&t.altKey&&!t.shiftKey&&/^Digit[1-6]$/.test(t.code)){if("wysiwyg"===e.currentMode){var n=t.code.replace("Digit","H");Object(_.f)(getSelection().getRangeAt(0).startContainer,n)?te(e):ee(e,n),Q(e)}else"sv"===e.currentMode?Le(e,"#".repeat(parseInt(t.code.replace("Digit",""),10))+" "):"ir"===e.currentMode&&Et(e,"#".repeat(parseInt(t.code.replace("Digit",""),10))+" ");return t.preventDefault(),!0}if(Object(d.d)(t)&&t.altKey&&!t.shiftKey&&/^Digit[7-9]$/.test(t.code))return"Digit7"===t.code?ge(e,"wysiwyg",t):"Digit8"===t.code?ge(e,"ir",t):"Digit9"===t.code&&ge(e,"sv",t),!0;e.options.toolbar.find((function(n){return!n.hotkey||n.toolbar?!!n.toolbar&&!!n.toolbar.find((function(n){return!!n.hotkey&&(H(n.hotkey,t)?(e.toolbar.elements[n.name].children[0].dispatchEvent(new CustomEvent(Object(d.b)())),t.preventDefault(),!0):void 0)})):H(n.hotkey,t)?(e.toolbar.elements[n.name].children[0].dispatchEvent(new CustomEvent(Object(d.b)())),t.preventDefault(),!0):void 0}))}}))},ke=function(e,t){t.addEventListener("selectstart",(function(n){t.onmouseup=function(){setTimeout((function(){var t=he(e[e.currentMode].element);t.trim()?("wysiwyg"===e.currentMode&&e.options.comment.enable&&(Object(_.d)(n.target,"data-type","footnotes-block")||Object(_.d)(n.target,"data-type","link-ref-defs-block")?e.wysiwyg.hideComment():e.wysiwyg.showComment()),e.options.select&&e.options.select(t)):"wysiwyg"===e.currentMode&&e.options.comment.enable&&e.wysiwyg.hideComment()}))}})),document.addEventListener("selectionchange",(function(){!function(){if(!e.options.toolbarConfig.bubbleHide){var t=he(e[e.currentMode].element);e.options.select&&t&&e.options.select(t),clearTimeout(e.bubbleToolbar.bubbleToolbarTimeoutId),e.bubbleToolbar.bubbleToolbarTimeoutId=window.setTimeout((function(){t&&!e.options.toolbarConfig.bubbleHide?e.bubbleToolbar.show(e):e.bubbleToolbar.hide()}),10)}}()}))},Ce=function(e,t){var n=Object(L.b)(e);n.extractContents(),n.insertNode(document.createTextNode(Lute.Caret)),n.insertNode(document.createTextNode(t));var r=Object(_.d)(n.startContainer,"data-block","0");r||(r=e.sv.element);var i="<div data-block='0'>"+e.lute.Md2VditorSVDOM(r.textContent).replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,'<span data-type="newline"><br /><span style="display: none">\n</span></span><span data-type="newline"><br /><span style="display: none">\n</span></span></div><div data-block="0"><')+"</div>";r.isEqualNode(e.sv.element)?r.innerHTML=i:r.outerHTML=i,Object(L.f)(e.sv.element,n),Ee(e)},Ae=function(e,t,n){void 0===n&&(n=!0);var r=e;for(3===r.nodeType&&(r=r.parentElement);r;){if(r.getAttribute("data-type")===t)return r;r=n?r.previousElementSibling:r.nextElementSibling}return!1},Me=function(e,t){return O("SpinVditorSVDOM",e,"argument",t.options.debugger),e="<div data-block='0'>"+t.lute.SpinVditorSVDOM(e).replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,'<span data-type="newline"><br /><span style="display: none">\n</span></span><span data-type="newline"><br /><span style="display: none">\n</span></span></div><div data-block="0"><')+"</div>",O("SpinVditorSVDOM",e,"result",t.options.debugger),e},Pe=function(e){var t=e.getAttribute("data-type"),n=e.previousElementSibling,r=t&&"text"!==t&&"table"!==t&&"heading-marker"!==t&&"newline"!==t&&"yaml-front-matter-open-marker"!==t&&"yaml-front-matter-close-marker"!==t&&"code-block-info"!==t&&"code-block-close-marker"!==t&&"code-block-open-marker"!==t?e.textContent:"",i=!1;for("newline"===t&&(i=!0);n&&!i;){var o=n.getAttribute("data-type");if("li-marker"===o||"blockquote-marker"===o||"task-marker"===o||"padding"===o){var a=n.textContent;if("li-marker"!==o||"code-block-open-marker"!==t&&"code-block-info"!==t)if("code-block-close-marker"===t&&n.nextElementSibling.isSameNode(e)){var s=Ae(e,"code-block-open-marker");s&&s.previousElementSibling&&(n=s.previousElementSibling,r=a+r)}else r=a+r;else r=a.replace(/\S/g," ")+r}else"newline"===o&&(i=!0);n=n.previousElementSibling}return r},Re=function(e,t){void 0===t&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),e.preview.render(e);var n=c(e);"function"==typeof e.options.input&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&Object(d.a)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),clearTimeout(e.sv.processTimeoutId),e.sv.processTimeoutId=window.setTimeout((function(){t.enableAddUndoStack&&!e.sv.composingLock&&e.undo.addToUndoStack(e)}),e.options.undoDelay)},Le=function(e,t){var n=Object(L.b)(e),r=Object(w.b)(n.startContainer,"SPAN");r&&""!==r.textContent.trim()&&(t="\n"+t),n.collapse(!0),document.execCommand("insertHTML",!1,t)},Ne=function(e,t,n,r){var i=Object(L.b)(e),o=t.getAttribute("data-type");0===e.sv.element.childNodes.length&&(e.sv.element.innerHTML='<span data-type="p" data-block="0"><span data-type="text"><wbr></span></span><span data-type="newline"><br><span style="display: none">\n</span></span>',Object(L.f)(e.sv.element,i));var a=Object(_.c)(i.startContainer),s=Object(w.b)(i.startContainer,"SPAN");if(a){if("link"===o){var c=void 0;return c=""===i.toString()?""+n+Lute.Caret+r:""+n+i.toString()+r.replace(")",Lute.Caret+")"),void document.execCommand("insertHTML",!1,c)}if("italic"===o||"bold"===o||"strike"===o||"inline-code"===o||"code"===o||"table"===o||"line"===o)return c=void 0,c=""===i.toString()?""+n+Lute.Caret+("code"===o?"":r):""+n+i.toString()+Lute.Caret+("code"===o?"":r),"table"===o||"code"===o&&s&&""!==s.textContent?c="\n\n"+c:"line"===o&&(c="\n\n"+n+"\n"+Lute.Caret),void document.execCommand("insertHTML",!1,c);if(("check"===o||"list"===o||"ordered-list"===o||"quote"===o)&&s){var l="* ";"check"===o?l="* [ ] ":"ordered-list"===o?l="1. ":"quote"===o&&(l="> ");var u=Ae(s,"newline");return u?u.insertAdjacentText("afterend",l):a.insertAdjacentText("afterbegin",l),void V(e)}Object(L.f)(e.sv.element,i),Re(e)}},De=function(e){switch(e.currentMode){case"ir":return e.ir.element;case"wysiwyg":return e.wysiwyg.element;case"sv":return e.sv.element}},Ie=function(e,t){e.options.upload.setHeaders&&(e.options.upload.headers=e.options.upload.setHeaders()),e.options.upload.headers&&Object.keys(e.options.upload.headers).forEach((function(n){t.setRequestHeader(n,e.options.upload.headers[n])}))},Be=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},He=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ue=function(){this.isUploading=!1,this.element=document.createElement("div"),this.element.className="vditor-upload"},qe=function(e,t,n){return Be(void 0,void 0,void 0,(function(){var r,i,o,a,s,c,l,u,d,f,p,h,m,v;return He(this,(function(b){switch(b.label){case 0:for(r=[],i=!0===e.options.upload.multiple?t.length:1,h=0;h<i;h++)(o=t[h])instanceof DataTransferItem&&(o=o.getAsFile()),r.push(o);return e.options.upload.handler?"string"==typeof(a=e.options.upload.handler(r))?(e.tip.show(a),[2]):[2]:e.options.upload.url&&e.upload?e.options.upload.file?[4,e.options.upload.file(r)]:[3,2]:(n&&(n.value=""),e.tip.show("please config: options.upload.url"),[2]);case 1:r=b.sent(),b.label=2;case 2:if(e.options.upload.validate&&"string"==typeof(a=e.options.upload.validate(r)))return e.tip.show(a),[2];if(s=De(e),e.upload.range=Object(L.b)(e),0===(c=function(e,t){e.tip.hide();for(var n=[],r="",i="",o=e.options.lang,a=function(a,s){var c=t[s],l=!0;c.name||(r+="<li>"+F.a[o].nameEmpty+"</li>",l=!1),c.size>e.options.upload.max&&(r+="<li>"+c.name+" "+F.a[o].over+" "+e.options.upload.max/1024/1024+"M</li>",l=!1);var u=c.name.lastIndexOf("."),d=c.name.substr(u),f=e.options.upload.filename(c.name.substr(0,u))+d;e.options.upload.accept&&(e.options.upload.accept.split(",").some((function(e){var t=e.trim();if(0===t.indexOf(".")){if(d.toLowerCase()===t.toLowerCase())return!0}else if(c.type.split("/")[0]===t.split("/")[0])return!0;return!1}))||(r+="<li>"+c.name+" "+F.a[o].fileTypeError+"</li>",l=!1)),l&&(n.push(c),i+="<li>"+f+" "+F.a[o].uploading+"</li>")},s=t.length,c=0;c<s;c++)a(0,c);return e.tip.show("<ul>"+r+i+"</ul>"),n}(e,r)).length)return n&&(n.value=""),[2];for(l=new FormData,u=e.options.upload.extraData,d=0,f=Object.keys(u);d<f.length;d++)p=f[d],l.append(p,u[p]);for(h=0,m=c.length;h<m;h++)l.append(e.options.upload.fieldName,c[h]);return(v=new XMLHttpRequest).open("POST",e.options.upload.url),e.options.upload.token&&v.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(v.withCredentials=!0),Ie(e,v),e.upload.isUploading=!0,s.setAttribute("contenteditable","false"),v.onreadystatechange=function(){if(v.readyState===XMLHttpRequest.DONE){if(e.upload.isUploading=!1,s.setAttribute("contenteditable","true"),v.status>=200&&v.status<300)if(e.options.upload.success)e.options.upload.success(s,v.responseText);else{var r=v.responseText;e.options.upload.format&&(r=e.options.upload.format(t,v.responseText)),function(e,t){De(t).focus();var n=JSON.parse(e),r="";1===n.code&&(r=""+n.msg),n.data.errFiles&&n.data.errFiles.length>0&&(r="<ul><li>"+r+"</li>",n.data.errFiles.forEach((function(e){var n=e.lastIndexOf("."),i=t.options.upload.filename(e.substr(0,n))+e.substr(n);r+="<li>"+i+" "+F.a[t.options.lang].uploadError+"</li>"})),r+="</ul>"),r?t.tip.show(r):t.tip.hide();var i="";Object.keys(n.data.succMap).forEach((function(e){var r=n.data.succMap[e],o=e.lastIndexOf("."),a=e.substr(o),s=t.options.upload.filename(e.substr(0,o))+a;0===(a=a.toLowerCase()).indexOf(".wav")||0===a.indexOf(".mp3")||0===a.indexOf(".ogg")?"wysiwyg"===t.currentMode?i+='<div class="vditor-wysiwyg__block" data-type="html-block"\n data-block="0"><pre><code>&lt;audio controls="controls" src="'+r+'"&gt;&lt;/audio&gt;</code></pre>':"ir"===t.currentMode?i+='<audio controls="controls" src="'+r+'"></audio>\n':i+="["+s+"]("+r+")\n":0===a.indexOf(".apng")||0===a.indexOf(".bmp")||0===a.indexOf(".gif")||0===a.indexOf(".ico")||0===a.indexOf(".cur")||0===a.indexOf(".jpg")||0===a.indexOf(".jpeg")||0===a.indexOf(".jfif")||0===a.indexOf(".pjp")||0===a.indexOf(".pjpeg")||0===a.indexOf(".png")||0===a.indexOf(".svg")||0===a.indexOf(".webp")?"wysiwyg"===t.currentMode?i+='<img alt="'+s+'" src="'+r+'">':i+="!["+s+"]("+r+")\n":"wysiwyg"===t.currentMode?i+='<a href="'+r+'">'+s+"</a>":i+="["+s+"]("+r+")\n"})),Object(L.h)(t.upload.range),document.execCommand("insertHTML",!1,i),t.upload.range=getSelection().getRangeAt(0).cloneRange()}(r,e)}else e.options.upload.error?e.options.upload.error(v.responseText):e.tip.show(v.responseText);n&&(n.value=""),e.upload.element.style.display="none"}},v.upload.onprogress=function(t){if(t.lengthComputable){var n=t.loaded/t.total*100;e.upload.element.style.display="block",e.upload.element.style.width=n+"%"}},v.send(l),[2]}}))}))},Ve=function(e,t,n,r){var i,o=Object(_.c)(t.startContainer);if(o||(o=e.wysiwyg.element),n&&"formatItalic"!==n.inputType&&"deleteByDrag"!==n.inputType&&"insertFromDrop"!==n.inputType&&"formatBold"!==n.inputType&&"formatRemove"!==n.inputType&&"formatStrikeThrough"!==n.inputType&&"insertUnorderedList"!==n.inputType&&"insertOrderedList"!==n.inputType&&"formatOutdent"!==n.inputType&&"formatIndent"!==n.inputType&&""!==n.inputType||!n){var s=function(e){for(var t=e.previousSibling;t;){if(3!==t.nodeType&&"A"===t.tagName&&!t.previousSibling&&""===t.innerHTML.replace(a.a.ZWSP,"")&&t.nextSibling)return t;t=t.previousSibling}return!1}(t.startContainer);s&&s.remove(),e.wysiwyg.element.querySelectorAll("wbr").forEach((function(e){e.remove()})),t.insertNode(document.createElement("wbr")),o.querySelectorAll("[style]").forEach((function(e){e.removeAttribute("style")})),o.querySelectorAll(".vditor-comment").forEach((function(e){""===e.textContent.trim()&&(e.classList.remove("vditor-comment","vditor-comment--focus"),e.removeAttribute("data-cmtids"))})),null===(i=o.previousElementSibling)||void 0===i||i.querySelectorAll(".vditor-comment").forEach((function(e){""===e.textContent.trim()&&(e.classList.remove("vditor-comment","vditor-comment--focus"),e.removeAttribute("data-cmtids"))}));var c="";"link-ref-defs-block"===o.getAttribute("data-type")&&(o=e.wysiwyg.element);var l,u=o.isEqualNode(e.wysiwyg.element),d=Object(_.d)(o,"data-type","footnotes-block");if(u)c=o.innerHTML;else{var f=Object(_.b)(t.startContainer);if(f&&!d){var p=Object(w.b)(t.startContainer,"BLOCKQUOTE");o=p?Object(_.c)(t.startContainer)||o:f}if(d&&(o=d),c=o.outerHTML,"UL"===o.tagName||"OL"===o.tagName){var h=o.previousElementSibling,m=o.nextElementSibling;!h||"UL"!==h.tagName&&"OL"!==h.tagName||(c=h.outerHTML+c,h.remove()),!m||"UL"!==m.tagName&&"OL"!==m.tagName||(c+=m.outerHTML,m.remove()),c=c.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach((function(e){e&&!o.isEqualNode(e)&&(c+=e.outerHTML,e.remove())})),e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']").forEach((function(e){e&&!o.isEqualNode(e)&&(c+=e.outerHTML,e.remove())}))}if('<p data-block="0">```<wbr></p>'===(c=c.replace(/<\/(strong|b)><strong data-marker="\W{2}">/g,"").replace(/<\/(em|i)><em data-marker="\W{1}">/g,"").replace(/<\/(s|strike)><s data-marker="~{1,2}">/g,""))&&e.hint.recentLanguage&&(c='<p data-block="0">```<wbr></p>'.replace("```","```"+e.hint.recentLanguage)),O("SpinVditorDOM",c,"argument",e.options.debugger),c=e.lute.SpinVditorDOM(c),O("SpinVditorDOM",c,"result",e.options.debugger),u)o.innerHTML=c;else if(o.outerHTML=c,d){var v=Object(_.h)(e.wysiwyg.element.querySelector("wbr"),"LI");if(v){var b=e.wysiwyg.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'+v.getAttribute("data-marker")+'"]');b&&b.setAttribute("aria-label",v.textContent.trim().substr(0,24))}}var g,y=e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']");y.forEach((function(e,t){0===t?l=e:(l.insertAdjacentHTML("beforeend",e.innerHTML),e.remove())})),y.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",y[0]);var x=e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']");x.forEach((function(e,t){0===t?g=e:(g.insertAdjacentHTML("beforeend",e.innerHTML),e.remove())})),x.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",x[0]),Object(L.f)(e.wysiwyg.element,t,n,r),e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach((function(t){R(t,e)})),n&&("deleteContentBackward"===n.inputType||"deleteContentForward"===n.inputType)&&e.options.comment.enable&&(e.wysiwyg.triggerRemoveComment(e),e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)))}N(e),Q(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0},n)},Fe=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},We=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ze=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Xe=function(e,t,n){if(229===e.keyCode&&""===e.code&&"Unidentified"===e.key&&"sv"!==t.currentMode){var r=Object(_.c)(n);if(r&&""===r.textContent.trim())return t[t.currentMode].composingLock=!0,!1}return!0},Ye=function(e,t,n){if(!("Enter"===n.key||"Tab"===n.key||"Backspace"===n.key||n.key.indexOf("Arrow")>-1||Object(d.d)(n)||"Escape"===n.key||n.shiftKey||n.altKey)){var r=Object(_.f)(e.startContainer,"P")||Object(_.f)(e.startContainer,"LI");if(r&&0===Object(L.c)(r,t[t.currentMode].element,e).start){var i=document.createTextNode(a.a.ZWSP);e.insertNode(i),e.setStartAfter(i)}}},Ke=function(e,t){if("ArrowDown"===t||"ArrowUp"===t){var n=Object(_.d)(e.startContainer,"data-type","math-inline")||Object(_.d)(e.startContainer,"data-type","html-entity")||Object(_.d)(e.startContainer,"data-type","html-inline");n&&("ArrowDown"===t&&e.setStartAfter(n.parentElement),"ArrowUp"===t&&e.setStartBefore(n.parentElement))}},Ge=function(e,t){var n=Object(L.b)(e),r=Object(_.c)(n.startContainer);r&&(r.insertAdjacentHTML(t,'<p data-block="0">'+a.a.ZWSP+"<wbr>\n</p>"),Object(L.f)(e[e.currentMode].element,n),fe(e),st(e))},Qe=function(e){var t=Object(_.f)(e,"TABLE");return!(!t||!t.rows[0].cells[0].isSameNode(e))&&t},Ze=function(e){var t=Object(_.f)(e,"TABLE");return!(!t||!t.lastElementChild.lastElementChild.lastElementChild.isSameNode(e))&&t},Je=function(e,t,n){void 0===n&&(n=!0);var r=e.previousElementSibling;return r||(r=e.parentElement.previousElementSibling?e.parentElement.previousElementSibling.lastElementChild:"TBODY"===e.parentElement.parentElement.tagName&&e.parentElement.parentElement.previousElementSibling?e.parentElement.parentElement.previousElementSibling.lastElementChild.lastElementChild:null),r&&(t.selectNodeContents(r),n||t.collapse(!1),Object(L.h)(t)),r},$e=function(e,t,n,r,i){var o=Object(L.c)(r,e[e.currentMode].element,n);if("ArrowDown"===t.key&&-1===r.textContent.trimRight().substr(o.start).indexOf("\n")||"ArrowRight"===t.key&&o.start>=r.textContent.trimRight().length){var s=i.nextElementSibling;return!s||s&&("TABLE"===s.tagName||s.getAttribute("data-type"))?(i.insertAdjacentHTML("afterend",'<p data-block="0">'+a.a.ZWSP+"<wbr></p>"),Object(L.f)(e[e.currentMode].element,n)):(n.selectNodeContents(s),n.collapse(!0),Object(L.h)(n)),t.preventDefault(),!0}return!1},et=function(e,t,n,r,i){var o=Object(L.c)(r,e[e.currentMode].element,n);if("ArrowUp"===t.key&&-1===r.textContent.substr(0,o.start).indexOf("\n")||("ArrowLeft"===t.key||"Backspace"===t.key&&""===n.toString())&&0===o.start){var s=i.previousElementSibling;return!s||s&&("TABLE"===s.tagName||s.getAttribute("data-type"))?(i.insertAdjacentHTML("beforebegin",'<p data-block="0">'+a.a.ZWSP+"<wbr></p>"),Object(L.f)(e[e.currentMode].element,n)):(n.selectNodeContents(s),n.collapse(!1),Object(L.h)(n)),t.preventDefault(),!0}return!1},tt=function(e,t,n,r){void 0===r&&(r=!0);var i=Object(_.f)(t.startContainer,"LI");if(e[e.currentMode].element.querySelectorAll("wbr").forEach((function(e){e.remove()})),t.insertNode(document.createElement("wbr")),r&&i){for(var o="",a=0;a<i.parentElement.childElementCount;a++){var s=i.parentElement.children[a].querySelector("input");s&&s.remove(),o+='<p data-block="0">'+i.parentElement.children[a].innerHTML.trimLeft()+"</p>"}i.parentElement.insertAdjacentHTML("beforebegin",o),i.parentElement.remove()}else if(i)if("check"===n)i.parentElement.querySelectorAll("li").forEach((function(e){e.insertAdjacentHTML("afterbegin",'<input type="checkbox" />'+(0===e.textContent.indexOf(" ")?"":" ")),e.classList.add("vditor-task")}));else{i.querySelector("input")&&i.parentElement.querySelectorAll("li").forEach((function(e){e.querySelector("input").remove(),e.classList.remove("vditor-task")}));var c=void 0;(c="list"===n?document.createElement("ul"):document.createElement("ol")).innerHTML=i.parentElement.innerHTML,i.parentElement.parentNode.replaceChild(c,i.parentElement)}else{var l=Object(_.d)(t.startContainer,"data-block","0");l||(e[e.currentMode].element.querySelector("wbr").remove(),(l=e[e.currentMode].element.querySelector("p")).innerHTML="<wbr>"),"check"===n?(l.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li class="vditor-task"><input type="checkbox" /> '+l.innerHTML+"</li></ul>"),l.remove()):"list"===n?(l.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li>'+l.innerHTML+"</li></ul>"),l.remove()):"ordered-list"===n&&(l.insertAdjacentHTML("beforebegin",'<ol data-block="0"><li>'+l.innerHTML+"</li></ol>"),l.remove())}},nt=function(e,t,n){var r=t.previousElementSibling;if(t&&r){var i=[t];Array.from(n.cloneContents().children).forEach((function(e,n){3!==e.nodeType&&t&&""!==e.textContent.trim()&&t.getAttribute("data-node-id")===e.getAttribute("data-node-id")&&(0!==n&&i.push(t),t=t.nextElementSibling)})),e[e.currentMode].element.querySelectorAll("wbr").forEach((function(e){e.remove()})),n.insertNode(document.createElement("wbr"));var o=r.parentElement,a="";i.forEach((function(e){var t=e.getAttribute("data-marker");1!==t.length&&(t="1"+t.slice(-1)),a+='<li data-node-id="'+e.getAttribute("data-node-id")+'" data-marker="'+t+'">'+e.innerHTML+"</li>",e.remove()})),r.insertAdjacentHTML("beforeend","<"+o.tagName+' data-block="0">'+a+"</"+o.tagName+">"),"wysiwyg"===e.currentMode?o.outerHTML=e.lute.SpinVditorDOM(o.outerHTML):o.outerHTML=e.lute.SpinVditorIRDOM(o.outerHTML),Object(L.f)(e[e.currentMode].element,n);var s=Object(_.b)(n.startContainer);s&&s.querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='2']").forEach((function(t){R(t,e),"wysiwyg"===e.currentMode&&t.previousElementSibling.setAttribute("style","display:none")})),st(e),fe(e)}else e[e.currentMode].element.focus()},rt=function(e,t,n,r){var i=Object(_.f)(t.parentElement,"LI");if(i){e[e.currentMode].element.querySelectorAll("wbr").forEach((function(e){e.remove()})),n.insertNode(document.createElement("wbr"));var o=t.parentElement,a=o.cloneNode(),s=[t];Array.from(n.cloneContents().children).forEach((function(e,n){3!==e.nodeType&&t&&""!==e.textContent.trim()&&t.getAttribute("data-node-id")===e.getAttribute("data-node-id")&&(0!==n&&s.push(t),t=t.nextElementSibling)}));var c=!1,l="";o.querySelectorAll("li").forEach((function(e){c&&(l+=e.outerHTML,e.nextElementSibling||e.previousElementSibling?e.remove():e.parentElement.remove()),e.isSameNode(s[s.length-1])&&(c=!0)})),s.reverse().forEach((function(e){i.insertAdjacentElement("afterend",e)})),l&&(a.innerHTML=l,s[0].insertAdjacentElement("beforeend",a)),"wysiwyg"===e.currentMode?r.outerHTML=e.lute.SpinVditorDOM(r.outerHTML):r.outerHTML=e.lute.SpinVditorIRDOM(r.outerHTML),Object(L.f)(e[e.currentMode].element,n);var u=Object(_.b)(n.startContainer);u&&u.querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='2']").forEach((function(t){R(t,e),"wysiwyg"===e.currentMode&&t.previousElementSibling.setAttribute("style","display:none")})),st(e),fe(e)}else e[e.currentMode].element.focus()},it=function(e,t){for(var n=getSelection().getRangeAt(0).startContainer.parentElement,r=e.rows[0].cells.length,i=e.rows.length,o=0,a=0;a<i;a++)for(var s=0;s<r;s++)if(e.rows[a].cells[s].isSameNode(n)){o=s;break}for(var c=0;c<i;c++)e.rows[c].cells[o].setAttribute("align",t)},ot=function(e){var t=e.trimRight().split("\n").pop();return""!==t&&(""===t.replace(/ |-/g,"")||""===t.replace(/ |_/g,"")||""===t.replace(/ |\*/g,""))&&t.replace(/ /g,"").length>2&&!(t.indexOf("-")>-1&&-1===t.trimLeft().indexOf(" ")&&e.trimRight().split("\n").length>1)&&0!==t.indexOf("    ")&&0!==t.indexOf("\t")},at=function(e){var t=e.trimRight().split("\n");return 0!==(e=t.pop()).indexOf("    ")&&0!==e.indexOf("\t")&&""!==(e=e.trimLeft())&&0!==t.length&&(""===e.replace(/-/g,"")||""===e.replace(/=/g,""))},st=function(e,t){void 0===t&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),"wysiwyg"===e.currentMode?Q(e,t):"ir"===e.currentMode?jt(e,t):"sv"===e.currentMode&&Re(e,t)},ct=function(e,t,n,r){var i,o=e.startContainer,s=Object(_.f)(o,"LI");if(s){if(!Object(d.d)(r)&&!r.altKey&&"Enter"===r.key&&!r.shiftKey&&n&&s.contains(n)&&n.nextElementSibling)return s&&!s.textContent.endsWith("\n")&&s.insertAdjacentText("beforeend","\n"),e.insertNode(document.createTextNode("\n\n")),e.collapse(!1),st(t),r.preventDefault(),!0;if(!(Object(d.d)(r)||r.shiftKey||r.altKey||"Backspace"!==r.key||s.previousElementSibling||""!==e.toString()||0!==Object(L.c)(s,t[t.currentMode].element,e).start))return s.nextElementSibling?(s.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'+s.innerHTML+"</p>"),s.remove()):s.parentElement.outerHTML='<p data-block="0"><wbr>'+s.innerHTML+"</p>",Object(L.f)(t[t.currentMode].element,e),st(t),r.preventDefault(),!0;if(!Object(d.d)(r)&&!r.shiftKey&&!r.altKey&&"Backspace"===r.key&&""===s.textContent.trim().replace(a.a.ZWSP,"")&&""===e.toString()&&"LI"===(null===(i=s.previousElementSibling)||void 0===i?void 0:i.tagName))return s.previousElementSibling.insertAdjacentText("beforeend","\n\n"),e.selectNodeContents(s.previousElementSibling),e.collapse(!1),s.remove(),Object(L.f)(t[t.currentMode].element,e),st(t),r.preventDefault(),!0;if(!Object(d.d)(r)&&!r.altKey&&"Tab"===r.key){var c=!1;if((0===e.startOffset&&(3===o.nodeType&&!o.previousSibling||3!==o.nodeType&&"LI"===o.nodeName)||s.classList.contains("vditor-task")&&1===e.startOffset&&3!==o.previousSibling.nodeType&&"INPUT"===o.previousSibling.tagName)&&(c=!0),c||""!==e.toString())return r.shiftKey?rt(t,s,e,s.parentElement):nt(t,s,e),r.preventDefault(),!0}}return!1},lt=function(e,t,n){if(e.options.tab&&"Tab"===n.key)return n.shiftKey||(""===t.toString()?(t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1)):(t.extractContents(),t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1))),Object(L.h)(t),st(e),n.preventDefault(),!0},ut=function(e,t,n,r){if(n){if(!Object(d.d)(e)&&!e.altKey&&"Enter"===e.key){var o=String.raw(i||(i=Fe(["",""],["",""])),n.textContent).replace(/\\\|/g,"").trim(),a=o.split("|");if(o.startsWith("|")&&o.endsWith("|")&&a.length>3){var s=a.map((function(){return"---"})).join("|");return s=n.textContent+"\n"+s.substring(3,s.length-3)+"\n|<wbr>",n.outerHTML=t.lute.SpinVditorDOM(s),Object(L.f)(t[t.currentMode].element,r),st(t),Ee(t),e.preventDefault(),!0}if(ot(n.innerHTML)&&n.previousElementSibling){var c="",l=n.innerHTML.trimRight().split("\n");return l.length>1&&(l.pop(),c='<p data-block="0">'+l.join("\n")+"</p>"),n.insertAdjacentHTML("afterend",c+'<hr data-block="0"><p data-block="0"><wbr>\n</p>'),n.remove(),Object(L.f)(t[t.currentMode].element,r),st(t),Ee(t),e.preventDefault(),!0}if(at(n.innerHTML))return"wysiwyg"===t.currentMode?n.outerHTML=t.lute.SpinVditorDOM(n.innerHTML+'<p data-block="0"><wbr>\n</p>'):n.outerHTML=t.lute.SpinVditorIRDOM(n.innerHTML+'<p data-block="0"><wbr>\n</p>'),Object(L.f)(t[t.currentMode].element,r),st(t),Ee(t),e.preventDefault(),!0}if(r.collapsed&&n.previousElementSibling&&"Backspace"===e.key&&!Object(d.d)(e)&&!e.altKey&&!e.shiftKey&&n.textContent.trimRight().split("\n").length>1&&0===Object(L.c)(n,t[t.currentMode].element,r).start){var u=Object(_.a)(n.previousElementSibling);return u.textContent.endsWith("\n")||(u.textContent=u.textContent+"\n"),u.parentElement.insertAdjacentHTML("beforeend","<wbr>"+n.innerHTML),n.remove(),Object(L.f)(t[t.currentMode].element,r),!1}return!1}},dt=function(e,t,n){for(var r="",i=0;i<n.parentElement.childElementCount;i++)r+='<td align="'+n.parentElement.children[i].getAttribute("align")+'"> </td>';"TH"===n.tagName?n.parentElement.parentElement.insertAdjacentHTML("afterend","<tbody><tr>"+r+"</tr></tbody>"):n.parentElement.insertAdjacentHTML("afterend","<tr>"+r+"</tr>"),st(e)},ft=function(e,t,n){for(var r="",i=0;i<n.parentElement.childElementCount;i++)"TH"===n.tagName?r+='<th align="'+n.parentElement.children[i].getAttribute("align")+'"> </th>':r+='<td align="'+n.parentElement.children[i].getAttribute("align")+'"> </td>';if("TH"===n.tagName){n.parentElement.parentElement.insertAdjacentHTML("beforebegin","<thead><tr>"+r+"</tr></thead>"),t.insertNode(document.createElement("wbr"));var o=n.parentElement.innerHTML.replace(/<th>/g,"<td>").replace(/<\/th>/g,"</td>");n.parentElement.parentElement.nextElementSibling.insertAdjacentHTML("afterbegin",o),n.parentElement.parentElement.remove(),Object(L.f)(e.ir.element,t)}else n.parentElement.insertAdjacentHTML("beforebegin","<tr>"+r+"</tr>");st(e)},pt=function(e,t,n,r){void 0===r&&(r="afterend");for(var i=0,o=n.previousElementSibling;o;)i++,o=o.previousElementSibling;for(var a=0;a<t.rows.length;a++)0===a?t.rows[a].cells[i].insertAdjacentHTML(r,"<th> </th>"):t.rows[a].cells[i].insertAdjacentHTML(r,"<td> </td>");st(e)},ht=function(e,t,n){if("TD"===n.tagName){var r=n.parentElement.parentElement;n.parentElement.previousElementSibling?t.selectNodeContents(n.parentElement.previousElementSibling.lastElementChild):t.selectNodeContents(r.previousElementSibling.lastElementChild.lastElementChild),1===r.childElementCount?r.remove():n.parentElement.remove(),t.collapse(!1),Object(L.h)(t),st(e)}},mt=function(e,t,n,r){for(var i=0,o=r.previousElementSibling;o;)i++,o=o.previousElementSibling;(r.previousElementSibling||r.nextElementSibling)&&(t.selectNodeContents(r.previousElementSibling||r.nextElementSibling),t.collapse(!0));for(var a=0;a<n.rows.length;a++){var s=n.rows[a].cells;if(1===s.length){n.remove(),fe(e);break}s[i].remove()}Object(L.h)(t),st(e)},vt=function(e,t,n){var r=n.startContainer,i=Object(_.f)(r,"TD")||Object(_.f)(r,"TH");if(i){if(!Object(d.d)(t)&&!t.altKey&&"Enter"===t.key){i.lastElementChild&&(!i.lastElementChild||i.lastElementChild.isSameNode(i.lastChild)&&"BR"===i.lastElementChild.tagName)||i.insertAdjacentHTML("beforeend","<br>");var o=document.createElement("br");return n.insertNode(o),n.setStartAfter(o),st(e),Ee(e),t.preventDefault(),!0}if("Tab"===t.key)return t.shiftKey?(Je(i,n),t.preventDefault(),!0):((u=i.nextElementSibling)||(u=i.parentElement.nextElementSibling?i.parentElement.nextElementSibling.firstElementChild:"THEAD"===i.parentElement.parentElement.tagName&&i.parentElement.parentElement.nextElementSibling?i.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild:null),u&&(n.selectNodeContents(u),Object(L.h)(n)),t.preventDefault(),!0);var a=i.parentElement.parentElement.parentElement;if("ArrowUp"===t.key){if(t.preventDefault(),"TH"===i.tagName)return a.previousElementSibling?(n.selectNodeContents(a.previousElementSibling),n.collapse(!1),Object(L.h)(n)):Ge(e,"beforebegin"),!0;for(var s=0,c=i.parentElement;s<c.cells.length&&!c.cells[s].isSameNode(i);s++);var l=c.previousElementSibling;return l||(l=c.parentElement.previousElementSibling.firstChild),n.selectNodeContents(l.cells[s]),n.collapse(!1),Object(L.h)(n),!0}if("ArrowDown"===t.key){var u;if(t.preventDefault(),!(c=i.parentElement).nextElementSibling&&"TD"===i.tagName)return a.nextElementSibling?(n.selectNodeContents(a.nextElementSibling),n.collapse(!0),Object(L.h)(n)):Ge(e,"afterend"),!0;for(s=0;s<c.cells.length&&!c.cells[s].isSameNode(i);s++);return(u=c.nextElementSibling)||(u=c.parentElement.nextElementSibling.firstChild),n.selectNodeContents(u.cells[s]),n.collapse(!0),Object(L.h)(n),!0}if("wysiwyg"===e.currentMode&&!Object(d.d)(t)&&"Enter"===t.key&&!t.shiftKey&&t.altKey){var f=e.wysiwyg.popover.querySelector(".vditor-input");return f.focus(),f.select(),t.preventDefault(),!0}if(!Object(d.d)(t)&&!t.shiftKey&&!t.altKey&&"Backspace"===t.key&&0===n.startOffset&&""===n.toString())return!Je(i,n,!1)&&a&&(""===a.textContent.trim()?(a.outerHTML='<p data-block="0"><wbr>\n</p>',Object(L.f)(e[e.currentMode].element,n)):(n.setStartBefore(a),n.collapse(!0)),st(e)),t.preventDefault(),!0;if(H("\u21e7\u2318F",t))return ft(e,n,i),t.preventDefault(),!0;if(H("\u2318=",t))return dt(e,n,i),t.preventDefault(),!0;if(H("\u21e7\u2318G",t))return pt(e,a,i,"beforebegin"),t.preventDefault(),!0;if(H("\u21e7\u2318=",t))return pt(e,a,i),t.preventDefault(),!0;if(H("\u2318-",t))return ht(e,n,i),t.preventDefault(),!0;if(H("\u21e7\u2318-",t))return mt(e,n,a,i),t.preventDefault(),!0;if(H("\u21e7\u2318L",t)){if("ir"===e.currentMode)return it(a,"left"),st(e),t.preventDefault(),!0;if(p=e.wysiwyg.popover.querySelector('[data-type="left"]'))return p.click(),t.preventDefault(),!0}if(H("\u21e7\u2318C",t)){if("ir"===e.currentMode)return it(a,"center"),st(e),t.preventDefault(),!0;if(p=e.wysiwyg.popover.querySelector('[data-type="center"]'))return p.click(),t.preventDefault(),!0}if(H("\u21e7\u2318R",t)){if("ir"===e.currentMode)return it(a,"right"),st(e),t.preventDefault(),!0;var p;if(p=e.wysiwyg.popover.querySelector('[data-type="right"]'))return p.click(),t.preventDefault(),!0}}return!1},bt=function(e,t,n,r){if("PRE"===n.tagName&&H("\u2318A",t))return r.selectNodeContents(n.firstElementChild),t.preventDefault(),!0;if(e.options.tab&&"Tab"===t.key&&!t.shiftKey&&""===r.toString())return r.insertNode(document.createTextNode(e.options.tab)),r.collapse(!1),st(e),t.preventDefault(),!0;if("Backspace"===t.key&&!Object(d.d)(t)&&!t.shiftKey&&!t.altKey){var i=Object(L.c)(n,e[e.currentMode].element,r);if((0===i.start||1===i.start&&"\n"===n.innerText)&&""===r.toString())return n.parentElement.outerHTML='<p data-block="0"><wbr>'+n.firstElementChild.innerHTML+"</p>",Object(L.f)(e[e.currentMode].element,r),st(e),t.preventDefault(),!0}return!Object(d.d)(t)&&!t.altKey&&"Enter"===t.key&&(n.firstElementChild.textContent.endsWith("\n")||n.firstElementChild.insertAdjacentText("beforeend","\n"),r.extractContents(),r.insertNode(document.createTextNode("\n")),r.collapse(!1),Object(L.h)(r),Object(d.e)()||("wysiwyg"===e.currentMode?Ve(e,r):B(e,r)),Ee(e),t.preventDefault(),!0)},gt=function(e,t,n,r){var i=t.startContainer,o=Object(_.f)(i,"BLOCKQUOTE");if(o&&""===t.toString()){if("Backspace"===n.key&&!Object(d.d)(n)&&!n.shiftKey&&!n.altKey&&0===Object(L.c)(o,e[e.currentMode].element,t).start)return t.insertNode(document.createElement("wbr")),o.outerHTML=o.innerHTML,Object(L.f)(e[e.currentMode].element,t),st(e),n.preventDefault(),!0;if(r&&"Enter"===n.key&&!Object(d.d)(n)&&!n.shiftKey&&!n.altKey&&"BLOCKQUOTE"===r.parentElement.tagName){var s=!1;if("\n"===r.innerHTML.replace(a.a.ZWSP,"")||""===r.innerHTML.replace(a.a.ZWSP,"")?(s=!0,r.remove()):r.innerHTML.endsWith("\n\n")&&Object(L.c)(r,e[e.currentMode].element,t).start===r.textContent.length-1&&(r.innerHTML=r.innerHTML.substr(0,r.innerHTML.length-2),s=!0),s)return o.insertAdjacentHTML("afterend",'<p data-block="0">'+a.a.ZWSP+"<wbr>\n</p>"),Object(L.f)(e[e.currentMode].element,t),st(e),n.preventDefault(),!0}var c=Object(_.c)(i);if("wysiwyg"===e.currentMode&&c&&H("\u21e7\u2318;",n))return t.insertNode(document.createElement("wbr")),c.outerHTML='<blockquote data-block="0">'+c.outerHTML+"</blockquote>",Object(L.f)(e.wysiwyg.element,t),Q(e),n.preventDefault(),!0;if($e(e,n,t,o,o))return!0;if(et(e,n,t,o,o))return!0}return!1},yt=function(e,t,n){var r=t.startContainer,i=Object(_.e)(r,"vditor-task");if(i){if(H("\u21e7\u2318J",n)){var o=i.firstElementChild;return o.checked?o.removeAttribute("checked"):o.setAttribute("checked","checked"),st(e),n.preventDefault(),!0}if("Backspace"===n.key&&!Object(d.d)(n)&&!n.shiftKey&&!n.altKey&&""===t.toString()&&1===t.startOffset&&(3===r.nodeType&&r.previousSibling&&"INPUT"===r.previousSibling.tagName||3!==r.nodeType)){var a=i.previousElementSibling;return i.querySelector("input").remove(),a?(Object(_.a)(a).parentElement.insertAdjacentHTML("beforeend","<wbr>"+i.innerHTML.trim()),i.remove()):(i.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'+(i.innerHTML.trim()||"\n")+"</p>"),i.nextElementSibling?i.remove():i.parentElement.remove()),Object(L.f)(e[e.currentMode].element,t),st(e),n.preventDefault(),!0}if("Enter"===n.key&&!Object(d.d)(n)&&!n.shiftKey&&!n.altKey){if(""===i.textContent.trim())if(Object(_.e)(i.parentElement,"vditor-task")){var s=Object(_.b)(r);s&&rt(e,i,t,s)}else if(i.nextElementSibling){var c="",l="",u=!1;Array.from(i.parentElement.children).forEach((function(e){i.isSameNode(e)?u=!0:u?c+=e.outerHTML:l+=e.outerHTML}));var f=i.parentElement.tagName,p="OL"===i.parentElement.tagName?"":' data-marker="'+i.parentElement.getAttribute("data-marker")+'"',h="";l&&(h="UL"===i.parentElement.tagName?"":' start="1"',l="<"+f+' data-tight="true"'+p+' data-block="0">'+l+"</"+f+">"),i.parentElement.outerHTML=l+'<p data-block="0"><wbr>\n</p><'+f+'\n data-tight="true"'+p+' data-block="0"'+h+">"+c+"</"+f+">"}else i.parentElement.insertAdjacentHTML("afterend",'<p data-block="0"><wbr>\n</p>'),1===i.parentElement.querySelectorAll("li").length?i.parentElement.remove():i.remove();else 3!==r.nodeType&&0===t.startOffset&&"INPUT"===r.firstChild.tagName?t.setStart(r.childNodes[1],1):(t.setEndAfter(i.lastChild),i.insertAdjacentHTML("afterend",'<li class="vditor-task" data-marker="'+i.getAttribute("data-marker")+'"><input type="checkbox"> <wbr></li>'),document.querySelector("wbr").after(t.extractContents()));return Object(L.f)(e[e.currentMode].element,t),st(e),Ee(e),n.preventDefault(),!0}}return!1},_t=function(e,t,n,r){if(3!==t.startContainer.nodeType){var i=t.startContainer.children[t.startOffset];if(i&&"HR"===i.tagName)return t.selectNodeContents(i.previousElementSibling),t.collapse(!1),n.preventDefault(),!0}if(r){var o=r.previousElementSibling;if(o&&0===Object(L.c)(r,e[e.currentMode].element,t).start&&(Object(d.e)()&&"HR"===o.tagName||"TABLE"===o.tagName)){if("TABLE"===o.tagName){var a=o.lastElementChild.lastElementChild.lastElementChild;a.innerHTML=a.innerHTML.trimLeft()+"<wbr>"+r.textContent.trim(),r.remove()}else o.remove();return Object(L.f)(e[e.currentMode].element,t),st(e),n.preventDefault(),!0}}return!1},wt=function(e){Object(d.e)()&&3!==e.startContainer.nodeType&&"HR"===e.startContainer.tagName&&e.setStartBefore(e.startContainer)},Ot=function(e,t,n){var r,i;if(!Object(d.e)())return!1;if("ArrowUp"===e.key&&t&&"TABLE"===(null===(r=t.previousElementSibling)||void 0===r?void 0:r.tagName)){var o=t.previousElementSibling;return n.selectNodeContents(o.rows[o.rows.length-1].lastElementChild),n.collapse(!1),e.preventDefault(),!0}return!("ArrowDown"!==e.key||!t||"TABLE"!==(null===(i=t.nextElementSibling)||void 0===i?void 0:i.tagName))&&(n.selectNodeContents(t.nextElementSibling.rows[0].cells[0]),n.collapse(!0),e.preventDefault(),!0)},xt=function(e,t,n){return We(void 0,void 0,void 0,(function(){var r,i,o,s,c,l,u,d,f,p,h,m,v,b;return ze(this,(function(g){switch(g.label){case 0:return t.stopPropagation(),t.preventDefault(),"clipboardData"in t?(r=t.clipboardData.getData("text/html"),i=t.clipboardData.getData("text/plain"),o=t.clipboardData.files):(r=t.dataTransfer.getData("text/html"),i=t.dataTransfer.getData("text/plain"),"Files"===t.dataTransfer.types[0]&&(o=t.dataTransfer.items)),s={},c=function(t,n){if(!n)return["",Lute.WalkContinue];var r=t.TokensStr();if(34===t.__internal_object__.Parent.Type&&r&&-1===r.indexOf("file://")&&e.options.upload.linkToImgUrl){var i=new XMLHttpRequest;i.open("POST",e.options.upload.linkToImgUrl),e.options.upload.token&&i.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(i.withCredentials=!0),Ie(e,i),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.onreadystatechange=function(){if(i.readyState===XMLHttpRequest.DONE){if(200===i.status){var t=i.responseText;e.options.upload.linkToImgFormat&&(t=e.options.upload.linkToImgFormat(i.responseText));var n=JSON.parse(t);if(0!==n.code)return void e.tip.show(n.msg);var r=n.data.originalURL;if("sv"===e.currentMode)e.sv.element.querySelectorAll(".vditor-sv__marker--link").forEach((function(e){e.textContent===r&&(e.textContent=n.data.url)}));else{var o=e[e.currentMode].element.querySelector('img[src="'+r+'"]');o.src=n.data.url,"ir"===e.currentMode&&(o.previousElementSibling.previousElementSibling.innerHTML=n.data.url)}st(e)}else e.tip.show(i.responseText);e.options.upload.linkToImgCallback&&e.options.upload.linkToImgCallback(i.responseText)}},i.send(JSON.stringify({url:r}))}return"ir"===e.currentMode?['<span class="vditor-ir__marker vditor-ir__marker--link">'+r+"</span>",Lute.WalkContinue]:"wysiwyg"===e.currentMode?["",Lute.WalkContinue]:['<span class="vditor-sv__marker--link">'+r+"</span>",Lute.WalkContinue]},r.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/gi,"").trim()!=='<a href="'+i+'">'+i+"</a>"&&r.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/gi,"").trim()!=='\x3c!--StartFragment--\x3e<a href="'+i+'">'+i+"</a>\x3c!--EndFragment--\x3e"||(r=""),(l=(new DOMParser).parseFromString(r,"text/html")).body&&(r=l.body.innerHTML),e.wysiwyg.getComments(e),u=e[e.currentMode].element.scrollHeight,d=function(e,t,n){void 0===n&&(n="sv");var r=document.createElement("div");r.innerHTML=e;var i=!1;1===r.childElementCount&&r.lastElementChild.style.fontFamily.indexOf("monospace")>-1&&(i=!0);var o=r.querySelectorAll("pre");if(1===r.childElementCount&&1===o.length&&"vditor-wysiwyg"!==o[0].className&&"vditor-sv"!==o[0].className&&(i=!0),0===e.indexOf('\n<p class="p1">')&&(i=!0),1===r.childElementCount&&"TABLE"===r.firstElementChild.tagName&&r.querySelector(".line-number")&&r.querySelector(".line-content")&&(i=!0),i){var a=t||e;return/\n/.test(a)||1===o.length?"wysiwyg"===n?'<div class="vditor-wysiwyg__block" data-block="0" data-type="code-block"><pre><code>'+a.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"<wbr></code></pre></div>":"\n```\n"+a.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"\n```":"wysiwyg"===n?"<code>"+a.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"</code><wbr>":"`"+a+"`"}return!1}(r,i,e.currentMode),(f="sv"===e.currentMode?Object(_.d)(t.target,"data-type","code-block"):Object(_.f)(t.target,"CODE"))?("sv"===e.currentMode?document.execCommand("insertHTML",!1,i.replace(/&/g,"&amp;").replace(/</g,"&lt;")):(p=Object(L.c)(t.target,e[e.currentMode].element),"PRE"!==f.parentElement.tagName&&(i+=a.a.ZWSP),f.textContent=f.textContent.substring(0,p.start)+i+f.textContent.substring(p.end),Object(L.g)(p.start+i.length,p.start+i.length,f.parentElement),(null===(b=f.parentElement)||void 0===b?void 0:b.nextElementSibling.classList.contains("vditor-"+e.currentMode+"__preview"))&&(f.parentElement.nextElementSibling.innerHTML=f.outerHTML,R(f.parentElement.nextElementSibling,e))),[3,6]):[3,1];case 1:return d?(n.pasteCode(d),[3,6]):[3,2];case 2:return""===r.trim()?[3,3]:((h=document.createElement("div")).innerHTML=r,h.querySelectorAll("[style]").forEach((function(e){e.removeAttribute("style")})),h.querySelectorAll(".vditor-copy").forEach((function(e){e.remove()})),"ir"===e.currentMode?(s.HTML2VditorIRDOM={renderLinkDest:c},e.lute.SetJSRenderers({renderers:s}),Object(L.d)(e.lute.HTML2VditorIRDOM(h.innerHTML),e)):"wysiwyg"===e.currentMode?(s.HTML2VditorDOM={renderLinkDest:c},e.lute.SetJSRenderers({renderers:s}),Object(L.d)(e.lute.HTML2VditorDOM(h.innerHTML),e)):(s.Md2VditorSVDOM={renderLinkDest:c},e.lute.SetJSRenderers({renderers:s}),Ce(e,e.lute.HTML2Md(h.innerHTML).trimRight())),e.outline.render(e),[3,6]);case 3:return o.length>0&&e.options.upload.url?[4,qe(e,o)]:[3,5];case 4:return g.sent(),[3,6];case 5:""!==i.trim()&&0===o.length&&("ir"===e.currentMode?(s.Md2VditorIRDOM={renderLinkDest:c},e.lute.SetJSRenderers({renderers:s}),Object(L.d)(e.lute.Md2VditorIRDOM(i),e)):"wysiwyg"===e.currentMode?(s.Md2VditorDOM={renderLinkDest:c},e.lute.SetJSRenderers({renderers:s}),Object(L.d)(e.lute.Md2VditorDOM(i),e)):(s.Md2VditorSVDOM={renderLinkDest:c},e.lute.SetJSRenderers({renderers:s}),Ce(e,i)),e.outline.render(e)),g.label=6;case 6:return"sv"!==e.currentMode&&((m=Object(_.c)(Object(L.b)(e).startContainer))&&(v=Object(L.b)(e),e[e.currentMode].element.querySelectorAll("wbr").forEach((function(e){e.remove()})),v.insertNode(document.createElement("wbr")),"wysiwyg"===e.currentMode?m.outerHTML=e.lute.SpinVditorDOM(m.outerHTML):m.outerHTML=e.lute.SpinVditorIRDOM(m.outerHTML),Object(L.f)(e[e.currentMode].element,v)),e[e.currentMode].element.querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='2']").forEach((function(t){R(t,e)}))),e.wysiwyg.triggerRemoveComment(e),st(e),e[e.currentMode].element.scrollHeight-u>Math.min(e[e.currentMode].element.clientHeight,window.innerHeight)/2&&Ee(e),[2]}}))}))},St=function(e){e.hint.render(e);var t=Object(L.b)(e).startContainer,n=Object(_.d)(t,"data-type","code-block-info");if(n)if(""===n.textContent.replace(a.a.ZWSP,"")&&e.hint.recentLanguage)n.textContent=a.a.ZWSP+e.hint.recentLanguage,Object(L.b)(e).selectNodeContents(n);else{var r=[],i=n.textContent.substring(0,Object(L.c)(n,e.ir.element).start).replace(a.a.ZWSP,"");a.a.CODE_LANGUAGES.forEach((function(e){e.indexOf(i.toLowerCase())>-1&&r.push({html:e,value:e})})),e.hint.genHTML(r,i,e)}},jt=function(e,t){void 0===t&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&St(e),clearTimeout(e.ir.processTimeoutId),e.ir.processTimeoutId=window.setTimeout((function(){if(!e.ir.composingLock){var n=c(e);"function"==typeof e.options.input&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&Object(d.a)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}}),e.options.undoDelay)},Et=function(e,t){var n=Object(L.b)(e),r=Object(_.c)(n.startContainer)||n.startContainer;if(r){var i=r.querySelector(".vditor-ir__marker--heading");i?i.innerHTML=t:(r.insertAdjacentText("afterbegin",t),n.selectNodeContents(r),n.collapse(!1)),B(e,n.cloneRange()),G(e)}},Tt=function(e,t,n){var r=Object(_.d)(e.startContainer,"data-type",n);if(r){r.firstElementChild.remove(),r.lastElementChild.remove(),e.insertNode(document.createElement("wbr"));var i=document.createElement("div");i.innerHTML=t.lute.SpinVditorIRDOM(r.outerHTML),r.outerHTML=i.firstElementChild.innerHTML.trim()}},kt=function(e,t,n,r){var i=Object(L.b)(e),o=t.getAttribute("data-type"),a=i.startContainer;3===a.nodeType&&(a=a.parentElement);var s=!0;if(t.classList.contains("vditor-menu--current"))if("quote"===o){var c=Object(_.f)(a,"BLOCKQUOTE");c&&(i.insertNode(document.createElement("wbr")),c.outerHTML=""===c.innerHTML.trim()?'<p data-block="0">'+c.innerHTML+"</p>":c.innerHTML)}else if("link"===o){var l=Object(_.d)(i.startContainer,"data-type","a");if(l){var u=Object(_.e)(i.startContainer,"vditor-ir__link");u?(i.insertNode(document.createElement("wbr")),l.outerHTML=u.innerHTML):l.outerHTML=l.querySelector(".vditor-ir__link").innerHTML+"<wbr>"}}else"italic"===o?Tt(i,e,"em"):"bold"===o?Tt(i,e,"strong"):"strike"===o?Tt(i,e,"s"):"inline-code"===o?Tt(i,e,"code"):"check"!==o&&"list"!==o&&"ordered-list"!==o||(tt(e,i,o),s=!1,t.classList.remove("vditor-menu--current"));else{0===e.ir.element.childNodes.length&&(e.ir.element.innerHTML='<p data-block="0"><wbr></p>',Object(L.f)(e.ir.element,i));var d=Object(_.c)(i.startContainer);if("line"===o){if(d){var p='<hr data-block="0"><p data-block="0"><wbr>\n</p>';""===d.innerHTML.trim()?d.outerHTML=p:d.insertAdjacentHTML("afterend",p)}}else if("quote"===o)d&&(i.insertNode(document.createElement("wbr")),d.outerHTML='<blockquote data-block="0">'+d.outerHTML+"</blockquote>",s=!1,t.classList.add("vditor-menu--current"));else if("link"===o){var h=void 0;h=""===i.toString()?n+"<wbr>"+r:""+n+i.toString()+r.replace(")","<wbr>)"),document.execCommand("insertHTML",!1,h),s=!1,t.classList.add("vditor-menu--current")}else if("italic"===o||"bold"===o||"strike"===o||"inline-code"===o||"code"===o||"table"===o){h=void 0,""===i.toString()?h=n+"<wbr>"+r:(h="code"===o||"table"===o?""+n+i.toString()+"<wbr>"+r:""+n+i.toString()+r+"<wbr>",i.deleteContents()),"table"!==o&&"code"!==o||(h="\n"+h+"\n\n");var m=document.createElement("span");m.innerHTML=h,i.insertNode(m),B(e,i),"table"===o&&(i.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement),Object(L.h)(i))}else"check"!==o&&"list"!==o&&"ordered-list"!==o||(tt(e,i,o,!1),s=!1,f(e.toolbar.elements,["check","list","ordered-list"]),t.classList.add("vditor-menu--current"))}Object(L.f)(e.ir.element,i),jt(e),s&&G(e)},Ct=function(){function e(e){var t=this;this.splitChar="",this.lastIndex=-1,this.fillEmoji=function(e,n){t.element.style.display="none";var r=decodeURIComponent(e.getAttribute("data-value")),i=window.getSelection().getRangeAt(0);if("ir"===n.currentMode){var o=Object(_.d)(i.startContainer,"data-type","code-block-info");if(o)return o.textContent=a.a.ZWSP+r.trimRight(),i.selectNodeContents(o),i.collapse(!1),jt(n),o.parentElement.querySelectorAll("code").forEach((function(e){e.className="language-"+r.trimRight()})),R(o.parentElement.querySelector(".vditor-ir__preview"),n),void(t.recentLanguage=r.trimRight())}if("wysiwyg"===n.currentMode&&3!==i.startContainer.nodeType&&i.startContainer.firstElementChild.classList.contains("vditor-input")){var s=i.startContainer.firstElementChild;return s.value=r.trimRight(),i.selectNodeContents(s),i.collapse(!1),s.dispatchEvent(new CustomEvent("input")),void(t.recentLanguage=r.trimRight())}if(i.setStart(i.startContainer,t.lastIndex),i.deleteContents(),n.options.hint.parse?"sv"===n.currentMode?Object(L.d)(n.lute.SpinVditorSVDOM(r),n):"wysiwyg"===n.currentMode?Object(L.d)(n.lute.SpinVditorDOM(r),n):Object(L.d)(n.lute.SpinVditorIRDOM(r),n):Object(L.d)(r,n),":"===t.splitChar&&r.indexOf(":")>-1&&"sv"!==n.currentMode&&i.insertNode(document.createTextNode(" ")),i.collapse(!1),Object(L.h)(i),"wysiwyg"===n.currentMode)(c=Object(_.e)(i.startContainer,"vditor-wysiwyg__block"))&&c.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(c.lastElementChild.innerHTML=c.firstElementChild.innerHTML,R(c.lastElementChild,n));else if("ir"===n.currentMode){var c;(c=Object(_.e)(i.startContainer,"vditor-ir__marker--pre"))&&c.nextElementSibling.classList.contains("vditor-ir__preview")&&(c.nextElementSibling.innerHTML=c.innerHTML,R(c.nextElementSibling,n))}st(n)},this.timeId=-1,this.element=document.createElement("div"),this.element.className="vditor-hint",this.recentLanguage="",e.push({key:":"})}return e.prototype.render=function(e){var t=this;if(window.getSelection().focusNode){var n,r=getSelection().getRangeAt(0);n=r.startContainer.textContent.substring(0,r.startOffset)||"";var i=this.getKey(n,e.options.hint.extend);if(void 0===i)"[object Function]"==={}.toString.call(e.options.hint.hide)&&e.options.hint.hide(),this.element.style.display="none",clearTimeout(this.timeId);else if(":"===this.splitChar){var o=""===i?e.options.hint.emoji:e.lute.GetEmojis(),a=[];Object.keys(o).forEach((function(e){0===e.indexOf(i.toLowerCase())&&(o[e].indexOf(".")>-1?a.push({html:'<img src="'+o[e]+'" title=":'+e+':"/> :'+e+":",value:":"+e+":"}):a.push({html:'<span class="vditor-hint__emoji">'+o[e]+"</span>"+e,value:o[e]}))})),this.genHTML(a,i,e)}else e.options.hint.extend.forEach((function(n){n.key===t.splitChar&&(clearTimeout(t.timeId),t.timeId=window.setTimeout((function(){if(n.hint&&Array.isArray(n.hint(i))&&t.genHTML(n.hint(i),i,e),"[object Function]"==={}.toString.call(n.hintCustom)){var r=e[e.currentMode].element,o=Object(L.a)(r);n.hintCustom(i,o,t.lastIndex)}}),e.options.hint.delay))}))}},e.prototype.genHTML=function(e,t,n){var r=this;if(0!==e.length){var i=n[n.currentMode].element,o=Object(L.a)(i),a=o.left+("left"===n.options.outline.position?n.outline.element.offsetWidth:0),s=o.top,c="";e.forEach((function(e,n){if(!(n>7)){var r=e.html;if(""!==t){var i=r.lastIndexOf(">")+1,o=r.substr(i),a=o.toLowerCase().indexOf(t.toLowerCase());a>-1&&(o=o.substring(0,a)+"<b>"+o.substring(a,a+t.length)+"</b>"+o.substring(a+t.length),r=r.substr(0,i)+o)}c+='<button data-value="'+encodeURIComponent(e.value)+' "\n'+(0===n?"class='vditor-hint--current'":"")+"> "+r+"</button>"}})),this.element.innerHTML=c;var l=parseInt(document.defaultView.getComputedStyle(i,null).getPropertyValue("line-height"),10);this.element.style.top=s+(l||22)+"px",this.element.style.left=a+"px",this.element.style.display="block",this.element.style.right="auto",this.element.querySelectorAll("button").forEach((function(e){e.addEventListener("click",(function(t){r.fillEmoji(e,n),t.preventDefault()}))})),this.element.getBoundingClientRect().bottom>window.innerHeight&&(this.element.style.top=s-this.element.offsetHeight+"px"),this.element.getBoundingClientRect().right>window.innerWidth&&(this.element.style.left="auto",this.element.style.right="0")}else this.element.style.display="none"},e.prototype.select=function(e,t){if(0===this.element.querySelectorAll("button").length||"none"===this.element.style.display)return!1;var n=this.element.querySelector(".vditor-hint--current");if("ArrowDown"===e.key)return e.preventDefault(),e.stopPropagation(),n.removeAttribute("class"),n.nextElementSibling?n.nextElementSibling.className="vditor-hint--current":this.element.children[0].className="vditor-hint--current",!0;if("ArrowUp"===e.key){if(e.preventDefault(),e.stopPropagation(),n.removeAttribute("class"),n.previousElementSibling)n.previousElementSibling.className="vditor-hint--current";else{var r=this.element.children.length;this.element.children[r-1].className="vditor-hint--current"}return!0}return!(Object(d.d)(e)||e.shiftKey||e.altKey||"Enter"!==e.key||e.isComposing)&&(e.preventDefault(),e.stopPropagation(),this.fillEmoji(n,t),!0)},e.prototype.getKey=function(e,t){var n,r=this;if(this.lastIndex=-1,this.splitChar="",t.forEach((function(t){var n=e.lastIndexOf(t.key);r.lastIndex<n&&(r.splitChar=t.key,r.lastIndex=n)})),-1===this.lastIndex)return n;var i=e.split(this.splitChar),o=i[i.length-1];if(i.length>1&&o.trim()===o)if(2===i.length&&""===i[0]&&i[1].length<32)n=i[1];else{var a=i[i.length-2].slice(-1);" "===Object(s.a)(a)&&o.length<32&&(n=o)}return n},e}(),At=function(){function e(e){this.composingLock=!1;var t=document.createElement("div");t.className="vditor-ir",t.innerHTML='<pre class="vditor-reset" placeholder="'+e.options.placeholder+'"\n contenteditable="true" spellcheck="false"></pre>',this.element=t.firstElementChild,this.bindEvent(e),_e(e,this.element),we(e,this.element),Oe(e,this.element),Te(e,this.element),ke(e,this.element),xe(e,this.element),Se(e,this.element,this.copy),je(e,this.element,this.copy)}return e.prototype.copy=function(e,t){var n=getSelection().getRangeAt(0);if(""!==n.toString()){e.stopPropagation(),e.preventDefault();var r=document.createElement("div");r.appendChild(n.cloneContents()),e.clipboardData.setData("text/plain",t.lute.VditorIRDOM2Md(r.innerHTML).trim()),e.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(e){var t=this;this.element.addEventListener("paste",(function(t){xt(e,t,{pasteCode:function(e){document.execCommand("insertHTML",!1,e)}})})),this.element.addEventListener("compositionstart",(function(e){t.composingLock=!0})),this.element.addEventListener("compositionend",(function(n){Object(d.e)()||B(e,getSelection().getRangeAt(0).cloneRange()),t.composingLock=!1})),this.element.addEventListener("input",(function(n){"deleteByDrag"!==n.inputType&&"insertFromDrop"!==n.inputType&&(t.preventInput?t.preventInput=!1:t.composingLock||"\u2018"===n.data||"\u201c"===n.data||"\u300a"===n.data||B(e,getSelection().getRangeAt(0).cloneRange(),!1,n))})),this.element.addEventListener("click",(function(n){if("INPUT"===n.target.tagName)return n.target.checked?n.target.setAttribute("checked","checked"):n.target.removeAttribute("checked"),t.preventInput=!0,void jt(e);var r=Object(L.b)(e),i=Object(_.e)(n.target,"vditor-ir__preview");if(i||(i=Object(_.e)(r.startContainer,"vditor-ir__preview")),i&&(i.previousElementSibling.firstElementChild?r.selectNodeContents(i.previousElementSibling.firstElementChild):r.selectNodeContents(i.previousElementSibling),r.collapse(!0),Object(L.h)(r),Ee(e)),"IMG"===n.target.tagName){var o=n.target.parentElement.querySelector(".vditor-ir__marker--link");o&&(r.selectNode(o),Object(L.h)(r))}var s=Object(_.d)(n.target,"data-type","a");if(!s||s.classList.contains("vditor-ir__node--expand")){if(n.target.isEqualNode(t.element)&&t.element.lastElementChild&&r.collapsed){var c=t.element.lastElementChild.getBoundingClientRect();n.y>c.top+c.height&&("P"===t.element.lastElementChild.tagName&&""===t.element.lastElementChild.textContent.trim().replace(a.a.ZWSP,"")?(r.selectNodeContents(t.element.lastElementChild),r.collapse(!1)):(t.element.insertAdjacentHTML("beforeend",'<p data-block="0">'+a.a.ZWSP+"<wbr></p>"),Object(L.f)(t.element,r)))}""===r.toString()?U(r,e):setTimeout((function(){U(Object(L.b)(e),e)})),D(n,e),G(e)}else window.open(s.querySelector(":scope > .vditor-ir__marker--link").textContent)})),this.element.addEventListener("keyup",(function(n){if(!n.isComposing&&!Object(d.d)(n))if("Enter"===n.key&&Ee(e),G(e),"Backspace"!==n.key&&"Delete"!==n.key||""===e.ir.element.innerHTML||1!==e.ir.element.childNodes.length||!e.ir.element.firstElementChild||"P"!==e.ir.element.firstElementChild.tagName||0!==e.ir.element.firstElementChild.childElementCount||""!==e.ir.element.textContent&&"\n"!==e.ir.element.textContent){var r=Object(L.b)(e);"Backspace"===n.key?(Object(d.e)()&&"\n"===r.startContainer.textContent&&1===r.startOffset&&(r.startContainer.textContent="",U(r,e)),t.element.querySelectorAll(".language-math").forEach((function(e){var t=e.querySelector("br");t&&t.remove()}))):n.key.indexOf("Arrow")>-1?("ArrowLeft"!==n.key&&"ArrowRight"!==n.key||St(e),U(r,e)):229===n.keyCode&&""===n.code&&"Unidentified"===n.key&&U(r,e);var i=Object(_.e)(r.startContainer,"vditor-ir__preview");if(i){if("ArrowUp"===n.key||"ArrowLeft"===n.key)return i.previousElementSibling.firstElementChild?r.selectNodeContents(i.previousElementSibling.firstElementChild):r.selectNodeContents(i.previousElementSibling),r.collapse(!1),n.preventDefault(),!0;if("SPAN"===i.tagName&&("ArrowDown"===n.key||"ArrowRight"===n.key))return"html-entity"===i.parentElement.getAttribute("data-type")?(i.parentElement.insertAdjacentText("afterend",a.a.ZWSP),r.setStart(i.parentElement.nextSibling,1)):r.selectNodeContents(i.parentElement.lastElementChild),r.collapse(!1),n.preventDefault(),!0}}else e.ir.element.innerHTML=""}))},e}(),Mt=function(e){if("sv"===e.currentMode)return e.lute.Md2HTML(c(e));if("wysiwyg"===e.currentMode){var t=e.wysiwyg.element.innerHTML.replace(/\u200b/g,"&nbsp;");return e.lute.VditorDOM2HTML(t)}return"ir"===e.currentMode?e.lute.VditorIRDOM2HTML(e.ir.element.innerHTML):void 0},Pt=n(25),Rt=n(23),Lt=function(){function e(e){this.element=document.createElement("div"),this.element.className="vditor-outline",this.element.innerHTML='<div class="vditor-outline__title">'+e+'</div>\n<div class="vditor-outline__content"></div>'}return e.prototype.render=function(e){return"block"===e.preview.element.style.display?Object(Rt.a)(e.preview.element.lastElementChild,this.element.lastElementChild,e):Object(Rt.a)(e[e.currentMode].element,this.element.lastElementChild,e)},e.prototype.toggle=function(e,t){var n;void 0===t&&(t=!0);var r=null===(n=e.toolbar.elements.outline)||void 0===n?void 0:n.firstElementChild;if(t&&window.innerWidth>=a.a.MOBILE_WIDTH?(this.element.style.display="block",this.render(e),null==r||r.classList.add("vditor-menu--current")):(this.element.style.display="none",null==r||r.classList.remove("vditor-menu--current")),getSelection().rangeCount>0){var i=getSelection().getRangeAt(0);e[e.currentMode].element.contains(i.startContainer)?Object(L.h)(i):e[e.currentMode].element.focus()}X(e)},e}(),Nt=n(20),Dt=function(){function e(e){var t=this;this.element=document.createElement("div"),this.element.className="vditor-preview";var n=document.createElement("div");n.className="vditor-reset",e.options.classes.preview&&n.classList.add(e.options.classes.preview),n.style.maxWidth=e.options.preview.maxWidth+"px",n.addEventListener("copy",(function(n){if("TEXTAREA"!==n.target.tagName){var r=document.createElement("div");r.className="vditor-reset",r.appendChild(getSelection().getRangeAt(0).cloneContents()),t.copyToX(e,r),n.preventDefault()}})),n.addEventListener("click",(function(r){var i=Object(_.f)(r.target,"SPAN");if(i&&Object(_.e)(i,"vditor-toc")){var o=n.querySelector("#"+i.getAttribute("data-target-id"));o&&(t.element.scrollTop=o.offsetTop)}else"IMG"===r.target.tagName&&Object(q.a)(r.target,e.options.lang,e.options.theme)}));var r=e.options.preview.actions,i=document.createElement("div");i.className="vditor-preview__action";for(var o=[],a=0;a<r.length;a++){var s=r[a];if("object"!=typeof s)switch(s){case"desktop":o.push('<button type="button" class="vditor-preview__action--current" data-type="desktop">Desktop</button>');break;case"tablet":o.push('<button type="button" data-type="tablet">Tablet</button>');break;case"mobile":o.push('<button type="button" data-type="mobile">Mobile/Wechat</button>');break;case"mp-wechat":o.push('<button type="button" data-type="mp-wechat" class="vditor-tooltipped vditor-tooltipped__w" aria-label="\u590d\u5236\u5230\u516c\u4f17\u53f7"><svg><use xlink:href="#vditor-icon-mp-wechat"></use></svg></button>');break;case"zhihu":o.push('<button type="button" data-type="zhihu" class="vditor-tooltipped vditor-tooltipped__w" aria-label="\u590d\u5236\u5230\u77e5\u4e4e"><svg><use xlink:href="#vditor-icon-zhihu"></use></svg></button>')}else o.push('<button type="button" data-type="'+s.key+'" class="'+s.className+'"'+(s.tooltip?' aria-label="'+s.tooltip+'"':"")+'">'+s.text+"</button>")}i.innerHTML=o.join(""),0===r.length&&(i.style.display="none"),this.element.appendChild(i),this.element.appendChild(n),i.addEventListener(Object(d.b)(),(function(o){var a=Object(w.b)(o.target,"BUTTON");if(a){var s=a.getAttribute("data-type"),c=r.find((function(e){return(null==e?void 0:e.key)===s}));c?c.click(s):"mp-wechat"!==s&&"zhihu"!==s?(n.style.width="desktop"===s?"auto":"tablet"===s?"780px":"360px",n.scrollWidth>n.parentElement.clientWidth&&(n.style.width="auto"),t.render(e),i.querySelectorAll("button").forEach((function(e){e.classList.remove("vditor-preview__action--current")})),a.classList.add("vditor-preview__action--current")):t.copyToX(e,t.element.lastElementChild.cloneNode(!0),s)}}))}return e.prototype.render=function(e,t){var n=this;if(clearTimeout(this.mdTimeoutId),"none"!==this.element.style.display)if(t)this.element.lastElementChild.innerHTML=t;else if(""!==c(e).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")){var r=(new Date).getTime(),i=c(e);this.mdTimeoutId=window.setTimeout((function(){if(e.options.preview.url){var t=new XMLHttpRequest;t.open("POST",e.options.preview.url),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.onreadystatechange=function(){if(t.readyState===XMLHttpRequest.DONE)if(200===t.status){var o=JSON.parse(t.responseText);if(0!==o.code)return void e.tip.show(o.msg);e.options.preview.transform&&(o.data=e.options.preview.transform(o.data)),n.element.lastElementChild.innerHTML=o.data,n.afterRender(e,r)}else{var a=e.lute.Md2HTML(i);e.options.preview.transform&&(a=e.options.preview.transform(a)),n.element.lastElementChild.innerHTML=a,n.afterRender(e,r)}},t.send(JSON.stringify({markdownText:i}))}else{var o=e.lute.Md2HTML(i);e.options.preview.transform&&(o=e.options.preview.transform(o)),n.element.lastElementChild.innerHTML=o,n.afterRender(e,r)}}),e.options.preview.delay)}else this.element.lastElementChild.innerHTML="";else"renderPerformance"===this.element.getAttribute("data-type")&&e.tip.hide()},e.prototype.afterRender=function(e,t){e.options.preview.parse&&e.options.preview.parse(this.element);var n=(new Date).getTime()-t;(new Date).getTime()-t>2600?(e.tip.show(F.a[e.options.lang].performanceTip.replace("${x}",n.toString())),e.preview.element.setAttribute("data-type","renderPerformance")):"renderPerformance"===e.preview.element.getAttribute("data-type")&&(e.tip.hide(),e.preview.element.removeAttribute("data-type"));var r=e.preview.element.querySelector(".vditor-comment--focus");r&&r.classList.remove("vditor-comment--focus"),Object(j.a)(e.preview.element.lastElementChild,e.options.lang),Object(k.a)(e.options.preview.hljs,e.preview.element.lastElementChild,e.options.cdn),Object(A.a)(e.preview.element.lastElementChild,e.options.cdn,e.options.theme),Object(E.a)(e.preview.element.lastElementChild,e.options.cdn),Object(T.a)(e.preview.element.lastElementChild,e.options.cdn),Object(S.a)(e.preview.element.lastElementChild,e.options.cdn,e.options.theme),Object(M.a)(e.preview.element.lastElementChild,e.options.cdn,e.options.theme),Object(P.a)(e.preview.element.lastElementChild,e.options.cdn),Object(x.a)(e.preview.element.lastElementChild,e.options.cdn),Object(Nt.a)(e.preview.element.lastElementChild);var i=e.preview.element,o=e.outline.render(e);""===o&&(o="[ToC]"),i.querySelectorAll('[data-type="toc-block"]').forEach((function(t){t.innerHTML=o,Object(C.a)(t,{cdn:e.options.cdn,math:e.options.preview.math})})),Object(C.a)(e.preview.element.lastElementChild,{cdn:e.options.cdn,math:e.options.preview.math})},e.prototype.copyToX=function(e,t,n){void 0===n&&(n="mp-wechat"),"zhihu"!==n?t.querySelectorAll(".katex-html .base").forEach((function(e){e.style.display="initial"})):t.querySelectorAll(".language-math").forEach((function(e){e.outerHTML='<img class="Formula-image" data-eeimg="true" src="//www.zhihu.com/equation?tex=" alt="'+e.getAttribute("data-math")+'\\" style="display: block; margin: 0 auto; max-width: 100%;">'})),t.style.backgroundColor="#fff",t.querySelectorAll("code").forEach((function(e){e.style.backgroundImage="none"})),this.element.append(t);var r=t.ownerDocument.createRange();r.selectNode(t),Object(L.h)(r),document.execCommand("copy"),this.element.lastElementChild.remove(),e.tip.show("\u5df2\u590d\u5236\uff0c\u53ef\u5230"+("zhihu"===n?"\u77e5\u4e4e":"\u5fae\u4fe1\u516c\u4f17\u53f7\u5e73\u53f0")+"\u8fdb\u884c\u7c98\u8d34")},e}(),It=function(){function e(e){this.element=document.createElement("div"),this.element.className="vditor-resize vditor-resize--"+e.options.resize.position,this.element.innerHTML='<div><svg><use xlink:href="#vditor-icon-resize"></use></svg></div>',this.bindEvent(e)}return e.prototype.bindEvent=function(e){var t=this;this.element.addEventListener("mousedown",(function(n){var r=document,i=n.clientY,o=e.element.offsetHeight,a=63+e.element.querySelector(".vditor-toolbar").clientHeight;r.ondragstart=function(){return!1},window.captureEvents&&window.captureEvents(),t.element.classList.add("vditor-resize--selected"),r.onmousemove=function(t){"top"===e.options.resize.position?e.element.style.height=Math.max(a,o+(i-t.clientY))+"px":e.element.style.height=Math.max(a,o+(t.clientY-i))+"px",e.options.typewriterMode&&(e.sv.element.style.paddingBottom=e.sv.element.parentElement.offsetHeight/2+"px")},r.onmouseup=function(){e.options.resize.after&&e.options.resize.after(e.element.offsetHeight-o),window.captureEvents&&window.captureEvents(),r.onmousemove=null,r.onmouseup=null,r.ondragstart=null,r.onselectstart=null,r.onselect=null,t.element.classList.remove("vditor-resize--selected")}}))},e}(),Bt=function(){function e(e){this.composingLock=!1,this.element=document.createElement("pre"),this.element.className="vditor-sv vditor-reset",this.element.setAttribute("placeholder",e.options.placeholder),this.element.setAttribute("contenteditable","true"),this.element.setAttribute("spellcheck","false"),this.bindEvent(e),_e(e,this.element),Oe(e,this.element),Te(e,this.element),ke(e,this.element),xe(e,this.element),Se(e,this.element,this.copy),je(e,this.element,this.copy)}return e.prototype.copy=function(e,t){e.stopPropagation(),e.preventDefault(),e.clipboardData.setData("text/plain",he(t[t.currentMode].element))},e.prototype.bindEvent=function(e){var t=this;this.element.addEventListener("paste",(function(t){xt(e,t,{pasteCode:function(e){document.execCommand("insertHTML",!1,e)}})})),this.element.addEventListener("scroll",(function(){if("block"===e.preview.element.style.display){var n=t.element.scrollTop,r=t.element.clientHeight,i=t.element.scrollHeight-parseFloat(t.element.style.paddingBottom||"0"),o=e.preview.element;o.scrollTop=n/r>.5?(n+r)*o.scrollHeight/i-r:n*o.scrollHeight/i}})),this.element.addEventListener("compositionstart",(function(e){t.composingLock=!0})),this.element.addEventListener("compositionend",(function(n){Object(d.e)()||V(e,n),t.composingLock=!1})),this.element.addEventListener("input",(function(n){"deleteByDrag"!==n.inputType&&"insertFromDrop"!==n.inputType&&(t.composingLock||"\u2018"===n.data||"\u201c"===n.data||"\u300a"===n.data||(t.preventInput?t.preventInput=!1:V(e,n)))})),this.element.addEventListener("keyup",(function(t){t.isComposing||Object(d.d)(t)||("Backspace"!==t.key&&"Delete"!==t.key||""===e.sv.element.innerHTML||1!==e.sv.element.childNodes.length||!e.sv.element.firstElementChild||"DIV"!==e.sv.element.firstElementChild.tagName||2!==e.sv.element.firstElementChild.childElementCount||""!==e.sv.element.firstElementChild.textContent&&"\n"!==e.sv.element.textContent?"Enter"===t.key&&Ee(e):e.sv.element.innerHTML="")}))},e}(),Ht=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-tip"}return e.prototype.show=function(e,t){var n=this;if(void 0===t&&(t=6e3),this.element.className="vditor-tip vditor-tip--show",0===t)return this.element.innerHTML='<div class="vditor-tip__content">'+e+'\n<div class="vditor-tip__close">X</div></div>',void this.element.querySelector(".vditor-tip__close").addEventListener("click",(function(){n.hide()}));this.element.innerHTML='<div class="vditor-tip__content">'+e+"</div>",setTimeout((function(){n.hide()}),t)},e.prototype.hide=function(){this.element.className="vditor-messageElementtip",this.element.innerHTML=""},e}(),Ut=function(e,t){if(t.options.preview.mode!==e){switch(t.options.preview.mode=e,e){case"both":t.sv.element.style.display="block",t.preview.element.style.display="block",t.preview.render(t),p(t.toolbar.elements,["both"]);break;case"editor":t.sv.element.style.display="block",t.preview.element.style.display="none",f(t.toolbar.elements,["both"])}t.devtools&&t.devtools.renderEchart(t)}},qt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return"both"===t.options.preview.mode&&r.element.children[0].classList.add("vditor-menu--current"),r.element.children[0].addEventListener(Object(d.b)(),(function(e){r.element.firstElementChild.classList.contains(a.a.CLASS_MENU_DISABLED)||(e.preventDefault(),"sv"===t.currentMode&&("both"===t.options.preview.mode?Ut("editor",t):Ut("both",t)))})),r}return qt(t,e),t}(ve),Ft=function(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__br"},Wt=n(22),zt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xt=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=r.element.children[0],o=document.createElement("div");o.className="vditor-hint"+(2===n.level?"":" vditor-panel--arrow");var s="";return a.a.CODE_THEME.forEach((function(e){s+="<button>"+e+"</button>"})),o.innerHTML='<div style="overflow: auto;max-height:'+window.innerHeight/2+'px">'+s+"</div>",o.addEventListener(Object(d.b)(),(function(e){"BUTTON"===e.target.tagName&&(g(t,["subToolbar"]),t.options.preview.hljs.style=e.target.textContent,Object(Wt.a)(e.target.textContent,t.options.cdn),e.preventDefault(),e.stopPropagation())})),r.element.appendChild(o),y(t,o,i,n.level),r}return zt(t,e),t}(ve),Yt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kt=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=r.element.children[0],o=document.createElement("div");o.className="vditor-hint"+(2===n.level?"":" vditor-panel--arrow");var a="";return Object.keys(t.options.preview.theme.list).forEach((function(e){a+='<button data-type="'+e+'">'+t.options.preview.theme.list[e]+"</button>"})),o.innerHTML='<div style="overflow: auto;max-height:'+window.innerHeight/2+'px">'+a+"</div>",o.addEventListener(Object(d.b)(),(function(e){"BUTTON"===e.target.tagName&&(g(t,["subToolbar"]),t.options.preview.theme.current=e.target.getAttribute("data-type"),Object(W.a)(t.options.preview.theme.current,t.options.preview.theme.path),e.preventDefault(),e.stopPropagation())})),r.element.appendChild(o),y(t,o,i,n.level),r}return Yt(t,e),t}(ve),Gt=function(){function e(e){this.element=document.createElement("span"),this.element.className="vditor-counter vditor-tooltipped vditor-tooltipped__nw",this.render(e,"")}return e.prototype.render=function(e,t){var n=t.endsWith("\n")?t.length-1:t.length;if("text"===e.options.counter.type&&e[e.currentMode]){var r=e[e.currentMode].element.cloneNode(!0);r.querySelectorAll(".vditor-wysiwyg__preview").forEach((function(e){e.remove()})),n=r.textContent.length}"number"==typeof e.options.counter.max?(n>e.options.counter.max?this.element.className="vditor-counter vditor-counter--error":this.element.className="vditor-counter",this.element.innerHTML=n+"/"+e.options.counter.max):this.element.innerHTML=""+n,this.element.setAttribute("aria-label",e.options.counter.type),e.options.counter.after&&e.options.counter.after(n,{enable:e.options.counter.enable,max:e.options.counter.max,type:e.options.counter.type})},e}(),Qt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.element.children[0].innerHTML=n.icon,r.element.children[0].addEventListener(Object(d.b)(),(function(e){e.preventDefault(),e.currentTarget.classList.contains(a.a.CLASS_MENU_DISABLED)||n.click(e,t)})),r}return Qt(t,e),t}(ve),Jt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$t=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.element.firstElementChild.addEventListener(Object(d.b)(),(function(e){var n=r.element.firstElementChild;n.classList.contains(a.a.CLASS_MENU_DISABLED)||(e.preventDefault(),n.classList.contains("vditor-menu--current")?(n.classList.remove("vditor-menu--current"),t.devtools.element.style.display="none",X(t)):(n.classList.add("vditor-menu--current"),t.devtools.element.style.display="block",X(t),t.devtools.renderEchart(t)))})),r}return Jt(t,e),t}(ve),en=function(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__divider"},tn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nn=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=document.createElement("div");i.className="vditor-panel vditor-panel--arrow";var o="";Object.keys(t.options.hint.emoji).forEach((function(e){var n=t.options.hint.emoji[e];n.indexOf(".")>-1?o+='<button data-value=":'+e+': " data-key=":'+e+':"><img\ndata-value=":'+e+': " data-key=":'+e+':" class="vditor-emojis__icon" src="'+n+'"/></button>':o+='<button data-value="'+n+' "\n data-key="'+e+'"><span class="vditor-emojis__icon">'+n+"</span></button>"}));var a='<div class="vditor-emojis__tail">\n    <span class="vditor-emojis__tip"></span><span>'+(t.options.hint.emojiTail||"")+"</span>\n</div>";return i.innerHTML='<div class="vditor-emojis" style="max-height: '+("auto"===t.options.height?"auto":t.options.height-80)+'px">'+o+"</div>"+a,r.element.appendChild(i),y(t,i,r.element.children[0],n.level),r._bindEvent(t,i),r}return tn(t,e),t.prototype._bindEvent=function(e,t){t.querySelectorAll(".vditor-emojis button").forEach((function(n){n.addEventListener(Object(d.b)(),(function(r){r.preventDefault();var i=n.getAttribute("data-value"),o=Object(L.b)(e),a=i;if("wysiwyg"===e.currentMode?a=e.lute.SpinVditorDOM(i):"ir"===e.currentMode&&(a=e.lute.SpinVditorIRDOM(i)),i.indexOf(":")>-1&&"sv"!==e.currentMode){var s=document.createElement("div");s.innerHTML=a,a=s.firstElementChild.firstElementChild.outerHTML+" ",Object(L.d)(a,e)}else o.extractContents(),o.insertNode(document.createTextNode(i));o.collapse(!1),Object(L.h)(o),t.style.display="none",st(e)})),n.addEventListener("mouseover",(function(e){"BUTTON"===e.target.tagName&&(t.querySelector(".vditor-emojis__tip").innerHTML=e.target.getAttribute("data-key"))}))}))},t}(ve),rn=function(e,t,n){var r=document.createElement("a");"download"in r?(r.download=n,r.style.display="none",r.href=URL.createObjectURL(new Blob([t])),document.body.appendChild(r),r.click(),r.remove()):e.tip.show(F.a[e.options.lang].downloadTip,0)},on=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),an=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=r.element.children[0],o=document.createElement("div");return o.className="vditor-hint"+(2===n.level?"":" vditor-panel--arrow"),o.innerHTML='<button data-type="markdown">Markdown</button>\n<button data-type="pdf">PDF</button>\n<button data-type="html">HTML</button>',o.addEventListener(Object(d.b)(),(function(e){var n=e.target;if("BUTTON"===n.tagName){switch(n.getAttribute("data-type")){case"markdown":!function(e){var t=c(e);rn(e,t,t.substr(0,10)+".md")}(t);break;case"pdf":!function(e){e.tip.show(F.a[e.options.lang].generate,3800);var t=document.querySelector("iframe");t.contentDocument.open(),t.contentDocument.write('<link rel="stylesheet" href="'+e.options.cdn+'/dist/index.css"/>\n<script src="'+e.options.cdn+'/dist/method.min.js"><\/script>\n<div id="preview"></div>\n<script>\nwindow.addEventListener("message", (e) => {\n  if(!e.data) {\n    return;\n  }\n  Vditor.preview(document.getElementById(\'preview\'), e.data, {\n    markdown: {\n      theme: "'+e.options.preview.theme+'"\n    },\n    hljs: {\n      style: "'+e.options.preview.hljs.style+'"\n    }\n  });\n  setTimeout(() => {\n        window.print();\n    }, 3600);\n}, false);\n<\/script>'),t.contentDocument.close(),setTimeout((function(){t.contentWindow.postMessage(c(e),"*")}),200)}(t);break;case"html":!function(e){var t=Mt(e),n='<html><head><link rel="stylesheet" type="text/css" href="'+e.options.cdn+'/dist/index.css"/>\n<script src="'+e.options.cdn+'/dist/method.min.js"><\/script></head>\n<body><div class="vditor-reset" id="preview">'+t+"</div>\n<script>\n    const previewElement = document.getElementById('preview')\n    Vditor.setContentTheme('"+e.options.preview.theme.current+"', '"+e.options.preview.theme.path+"');\n    Vditor.codeRender(previewElement, '"+e.options.lang+"');\n    Vditor.highlightRender("+JSON.stringify(e.options.preview.hljs)+", previewElement, '"+e.options.cdn+"');\n    Vditor.mathRender(previewElement, {\n        cdn: '"+e.options.cdn+"',\n        math: "+JSON.stringify(e.options.preview.math)+",\n    });\n    Vditor.mermaidRender(previewElement, '"+e.options.cdn+"', '"+e.options.theme+"');\n    Vditor.flowchartRender(previewElement, '"+e.options.cdn+"');\n    Vditor.graphvizRender(previewElement, '"+e.options.cdn+"');\n    Vditor.chartRender(previewElement, '"+e.options.cdn+"', '"+e.options.theme+"');\n    Vditor.mindmapRender(previewElement, '"+e.options.cdn+"', '"+e.options.theme+"');\n    Vditor.abcRender(previewElement, '"+e.options.cdn+"');\n    Vditor.mediaRender(previewElement);\n<\/script></body></html>";rn(e,n,t.substr(0,10)+".html")}(t)}g(t,["subToolbar"]),e.preventDefault(),e.stopPropagation()}})),r.element.appendChild(o),y(t,o,i,n.level),r}return on(t,e),t}(ve),sn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._bindEvent(t,n),r}return sn(t,e),t.prototype._bindEvent=function(e,t){this.element.children[0].addEventListener(Object(d.b)(),(function(n){n.preventDefault(),e.element.className.includes("vditor--fullscreen")?(t.level||(this.innerHTML=t.icon),e.element.style.zIndex="",document.body.style.overflow="",e.element.classList.remove("vditor--fullscreen"),Object.keys(e.toolbar.elements).forEach((function(t){var n=e.toolbar.elements[t].firstChild;n&&(n.className=n.className.replace("__s","__n"))})),e.counter&&(e.counter.element.className=e.counter.element.className.replace("__s","__n"))):(t.level||(this.innerHTML='<svg><use xlink:href="#vditor-icon-contract"></use></svg>'),e.element.style.zIndex=e.options.fullscreen.index.toString(),document.body.style.overflow="hidden",e.element.classList.add("vditor--fullscreen"),Object.keys(e.toolbar.elements).forEach((function(t){var n=e.toolbar.elements[t].firstChild;n&&(n.className=n.className.replace("__n","__s"))})),e.counter&&(e.counter.element.className=e.counter.element.className.replace("__n","__s"))),e.devtools&&e.devtools.renderEchart(e),t.click&&t.click(n,e),X(e),Y(e)}))},t}(ve),ln=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),un=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=document.createElement("div");return i.className="vditor-hint vditor-panel--arrow",i.innerHTML='<button data-tag="h1" data-value="# ">Heading 1 '+Object(d.g)("&lt;\u2325\u23181>")+'</button>\n<button data-tag="h2" data-value="## ">Heading 2 &lt;'+Object(d.g)("\u2325\u23182")+'></button>\n<button data-tag="h3" data-value="### ">Heading 3 &lt;'+Object(d.g)("\u2325\u23183")+'></button>\n<button data-tag="h4" data-value="#### ">Heading 4 &lt;'+Object(d.g)("\u2325\u23184")+'></button>\n<button data-tag="h5" data-value="##### ">Heading 5 &lt;'+Object(d.g)("\u2325\u23185")+'></button>\n<button data-tag="h6" data-value="###### ">Heading 6 &lt;'+Object(d.g)("\u2325\u23186")+"></button>",r.element.appendChild(i),r._bindEvent(t,i),r}return ln(t,e),t.prototype._bindEvent=function(e,t){var n=this.element.children[0];n.addEventListener(Object(d.b)(),(function(r){r.preventDefault(),n.classList.contains(a.a.CLASS_MENU_DISABLED)||(n.blur(),n.classList.contains("vditor-menu--current")?("wysiwyg"===e.currentMode?(te(e),Q(e)):"ir"===e.currentMode&&Et(e,""),n.classList.remove("vditor-menu--current")):(g(e,["subToolbar"]),t.style.display="block"))}));for(var r=0;r<6;r++)t.children.item(r).addEventListener(Object(d.b)(),(function(r){r.preventDefault(),"wysiwyg"===e.currentMode?(ee(e,r.target.getAttribute("data-tag")),Q(e),n.classList.add("vditor-menu--current")):"ir"===e.currentMode?(Et(e,r.target.getAttribute("data-value")),n.classList.add("vditor-menu--current")):Le(e,r.target.getAttribute("data-value")),t.style.display="none"}))},t}(ve),dn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.element.children[0].addEventListener(Object(d.b)(),(function(e){e.preventDefault(),t.tip.show('<div style="margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;">\n<div style="margin-top: 14px;flex: 1">\n    <div>Markdown \u4f7f\u7528\u6307\u5357</div>\n    <ul style="list-style: none">\n        <li><a href="https://ld246.com/article/1583308420519" target="_blank">\u8bed\u6cd5\u901f\u67e5\u624b\u518c</a></li>\n        <li><a href="https://ld246.com/article/1583129520165" target="_blank">\u57fa\u7840\u8bed\u6cd5</a></li>\n        <li><a href="https://ld246.com/article/1583305480675" target="_blank">\u6269\u5c55\u8bed\u6cd5</a></li>\n        <li><a href="https://ld246.com/article/1582778815353" target="_blank">\u952e\u76d8\u5feb\u6377\u952e</a></li>\n    </ul>\n</div>\n<div style="margin-top: 14px;flex: 1">\n    <div>Vditor \u652f\u6301</div>\n    <ul style="list-style: none">\n        <li><a href="https://github.com/Vanessa219/vditor/issues" target="_blank">Issues</a></li>\n        <li><a href="https://ld246.com/tag/vditor" target="_blank">\u5b98\u65b9\u8ba8\u8bba\u533a</a></li>\n        <li><a href="https://ld246.com/article/1549638745630" target="_blank">\u5f00\u53d1\u624b\u518c</a></li>\n        <li><a href="https://ld246.com/guide/markdown" target="_blank">\u6f14\u793a\u5730\u5740</a></li>\n    </ul>\n</div></div>',0)})),r}return dn(t,e),t}(ve),pn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.element.children[0].addEventListener(Object(d.b)(),(function(e){if(e.preventDefault(),!r.element.firstElementChild.classList.contains(a.a.CLASS_MENU_DISABLED)&&"sv"!==t.currentMode){var n=Object(L.b)(t),i=Object(_.f)(n.startContainer,"LI");i&&nt(t,i,n)}})),r}return pn(t,e),t}(ve),mn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.element.children[0].addEventListener(Object(d.b)(),(function(e){e.preventDefault(),t.tip.show('<div style="max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;">\n<p style="text-align: center;margin: 14px 0">\n    <em>\u4e0b\u4e00\u4ee3\u7684 Markdown \u7f16\u8f91\u5668\uff0c\u4e3a\u672a\u6765\u800c\u6784\u5efa</em>\n</p>\n<div style="display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center">\n    <img src="https://cdn.jsdelivr.net/npm/vditor/src/assets/images/logo.png" style="margin: 0 auto;height: 68px"/>\n    <div>&nbsp;&nbsp;</div>\n    <div style="flex: 1;min-width: 250px">\n        Vditor \u662f\u4e00\u6b3e\u6d4f\u89c8\u5668\u7aef\u7684 Markdown \u7f16\u8f91\u5668\uff0c\u652f\u6301\u6240\u89c1\u5373\u6240\u5f97\u3001\u5373\u65f6\u6e32\u67d3\uff08\u7c7b\u4f3c Typora\uff09\u548c\u5206\u5c4f\u9884\u89c8\u6a21\u5f0f\u3002\n        \u5b83\u4f7f\u7528 TypeScript \u5b9e\u73b0\uff0c\u652f\u6301\u539f\u751f JavaScript\u3001Vue\u3001React\u3001Angular\uff0c\u63d0\u4f9b<a target="_blank" href="https://b3log.org/siyuan">\u684c\u9762\u7248</a>\u3002\n    </div>\n</div>\n<div style="display: flex;flex-wrap: wrap;">\n    <ul style="list-style: none;flex: 1;min-width:148px">\n        <li>\n        \u9879\u76ee\u5730\u5740\uff1a<a href="https://b3log.org/vditor" target="_blank">b3log.org/vditor</a>\n        </li>\n        <li>\n        \u5f00\u6e90\u534f\u8bae\uff1aMIT\n        </li>\n    </ul>\n    <ul style="list-style: none;margin-right: 18px">\n        <li>\n        \u7ec4\u4ef6\u7248\u672c\uff1aVditor v'+a.b+" / Lute v"+Lute.Version+'\n        </li>\n        <li>\n        \u8d5e\u52a9\u6350\u8d60\uff1a<a href="https://ld246.com/sponsor" target="_blank">https://ld246.com/sponsor</a>\n        </li>\n    </ul>\n</div>\n</div>',0)})),r}return mn(t,e),t}(ve),bn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.element.children[0].addEventListener(Object(d.b)(),(function(e){e.preventDefault(),r.element.firstElementChild.classList.contains(a.a.CLASS_MENU_DISABLED)||"sv"===t.currentMode||Ge(t,"afterend")})),r}return bn(t,e),t}(ve),yn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_n=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.element.children[0].addEventListener(Object(d.b)(),(function(e){e.preventDefault(),r.element.firstElementChild.classList.contains(a.a.CLASS_MENU_DISABLED)||"sv"===t.currentMode||Ge(t,"beforebegin")})),r}return yn(t,e),t}(ve),wn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),On=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.element.children[0].addEventListener(Object(d.b)(),(function(e){if(e.preventDefault(),!r.element.firstElementChild.classList.contains(a.a.CLASS_MENU_DISABLED)&&"sv"!==t.currentMode){var n=Object(L.b)(t),i=Object(_.f)(n.startContainer,"LI");i&&rt(t,i,n,i.parentElement)}})),r}return wn(t,e),t}(ve),xn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return t.options.outline&&r.element.firstElementChild.classList.add("vditor-menu--current"),r.element.children[0].addEventListener(Object(d.b)(),(function(e){e.preventDefault(),t.toolbar.elements.outline.firstElementChild.classList.contains(a.a.CLASS_MENU_DISABLED)||(t.options.outline.enable=!r.element.firstElementChild.classList.contains("vditor-menu--current"),t.outline.toggle(t,t.options.outline.enable))})),r}return xn(t,e),t}(ve),jn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),En=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._bindEvent(t),r}return jn(t,e),t.prototype._bindEvent=function(e){var t=this;this.element.children[0].addEventListener(Object(d.b)(),(function(n){n.preventDefault();var r=t.element.firstElementChild;if(!r.classList.contains(a.a.CLASS_MENU_DISABLED)){var i=a.a.EDIT_TOOLBARS.concat(["both","edit-mode","devtools"]);r.classList.contains("vditor-menu--current")?(r.classList.remove("vditor-menu--current"),"sv"===e.currentMode?(e.sv.element.style.display="block","both"===e.options.preview.mode?e.preview.element.style.display="block":e.preview.element.style.display="none"):(e[e.currentMode].element.parentElement.style.display="block",e.preview.element.style.display="none"),h(e.toolbar.elements,i),e.outline.render(e)):(m(e.toolbar.elements,i),e.preview.element.style.display="block","sv"===e.currentMode?e.sv.element.style.display="none":e[e.currentMode].element.parentElement.style.display="none",e.preview.render(e),r.classList.add("vditor-menu--current"),g(e,["subToolbar","hint","popover"]),setTimeout((function(){e.outline.render(e)}),e.options.preview.delay+10)),X(e)}}))},t}(ve),Tn=function(){function e(e){var t;if(this.SAMPLE_RATE=5e3,this.isRecording=!1,this.readyFlag=!1,this.leftChannel=[],this.rightChannel=[],this.recordingLength=0,"undefined"!=typeof AudioContext)t=new AudioContext;else{if(!webkitAudioContext)return;t=new webkitAudioContext}this.DEFAULT_SAMPLE_RATE=t.sampleRate;var n=t.createGain();t.createMediaStreamSource(e).connect(n),this.recorder=t.createScriptProcessor(2048,2,1),this.recorder.onaudioprocess=null,n.connect(this.recorder),this.recorder.connect(t.destination),this.readyFlag=!0}return e.prototype.cloneChannelData=function(e,t){this.leftChannel.push(new Float32Array(e)),this.rightChannel.push(new Float32Array(t)),this.recordingLength+=2048},e.prototype.startRecordingNewWavFile=function(){this.readyFlag&&(this.isRecording=!0,this.leftChannel.length=this.rightChannel.length=0,this.recordingLength=0)},e.prototype.stopRecording=function(){this.isRecording=!1},e.prototype.buildWavFileBlob=function(){for(var e=this.mergeBuffers(this.leftChannel),t=this.mergeBuffers(this.rightChannel),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=.5*(e[r]+t[r]);this.DEFAULT_SAMPLE_RATE>this.SAMPLE_RATE&&(n=this.downSampleBuffer(n,this.SAMPLE_RATE));var i=44+2*n.length,o=new ArrayBuffer(i),a=new DataView(o);this.writeUTFBytes(a,0,"RIFF"),a.setUint32(4,i,!0),this.writeUTFBytes(a,8,"WAVE"),this.writeUTFBytes(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,1,!0),a.setUint32(24,this.SAMPLE_RATE,!0),a.setUint32(28,2*this.SAMPLE_RATE,!0),a.setUint16(32,2,!0),a.setUint16(34,16,!0);var s=2*n.length;this.writeUTFBytes(a,36,"data"),a.setUint32(40,s,!0);for(var c=n.length,l=44,u=0;u<c;u++)a.setInt16(l,32767*n[u],!0),l+=2;return new Blob([a],{type:"audio/wav"})},e.prototype.downSampleBuffer=function(e,t){if(t===this.DEFAULT_SAMPLE_RATE)return e;if(t>this.DEFAULT_SAMPLE_RATE)return e;for(var n=this.DEFAULT_SAMPLE_RATE/t,r=Math.round(e.length/n),i=new Float32Array(r),o=0,a=0;o<i.length;){for(var s=Math.round((o+1)*n),c=0,l=0,u=a;u<s&&u<e.length;u++)c+=e[u],l++;i[o]=c/l,o++,a=s}return i},e.prototype.mergeBuffers=function(e){for(var t=new Float32Array(this.recordingLength),n=0,r=e.length,i=0;i<r;++i){var o=e[i];t.set(o,n),n+=o.length}return t},e.prototype.writeUTFBytes=function(e,t,n){for(var r=n.length,i=0;i<r;i++)e.setUint8(t+i,n.charCodeAt(i))},e}(),kn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._bindEvent(t),r}return kn(t,e),t.prototype._bindEvent=function(e){var t,n=this;this.element.children[0].addEventListener(Object(d.b)(),(function(r){if(r.preventDefault(),!n.element.firstElementChild.classList.contains(a.a.CLASS_MENU_DISABLED)){var i=e[e.currentMode].element;if(t)if(t.isRecording){t.stopRecording(),e.tip.hide();var o=new File([t.buildWavFileBlob()],"record"+(new Date).getTime()+".wav",{type:"video/webm"});qe(e,[o]),n.element.children[0].classList.remove("vditor-menu--current")}else e.tip.show(F.a[e.options.lang].recording),i.setAttribute("contenteditable","false"),t.startRecordingNewWavFile(),n.element.children[0].classList.add("vditor-menu--current");else navigator.mediaDevices.getUserMedia({audio:!0}).then((function(r){(t=new Tn(r)).recorder.onaudioprocess=function(e){if(t.isRecording){var n=e.inputBuffer.getChannelData(0),r=e.inputBuffer.getChannelData(1);t.cloneChannelData(n,r)}},t.startRecordingNewWavFile(),e.tip.show(F.a[e.options.lang].recording),i.setAttribute("contenteditable","false"),n.element.children[0].classList.add("vditor-menu--current")})).catch((function(){e.tip.show(F.a[e.options.lang]["record-tip"])}))}}))},t}(ve),An=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return m({redo:r.element},["redo"]),r.element.children[0].addEventListener(Object(d.b)(),(function(e){e.preventDefault(),r.element.firstElementChild.classList.contains(a.a.CLASS_MENU_DISABLED)||t.undo.redo(t)})),r}return An(t,e),t}(ve),Pn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return m({undo:r.element},["undo"]),r.element.children[0].addEventListener(Object(d.b)(),(function(e){e.preventDefault(),r.element.firstElementChild.classList.contains(a.a.CLASS_MENU_DISABLED)||t.undo.undo(t)})),r}return Pn(t,e),t}(ve),Ln=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nn=function(e){function t(t,n){var r=e.call(this,t,n)||this,i='<input type="file"';return t.options.upload.multiple&&(i+=' multiple="multiple"'),t.options.upload.accept&&(i+=' accept="'+t.options.upload.accept+'"'),r.element.children[0].innerHTML=""+(n.icon||'<svg><use xlink:href="#vditor-icon-upload"></use></svg>')+i+">",r._bindEvent(t),r}return Ln(t,e),t.prototype._bindEvent=function(e){var t=this;this.element.children[0].addEventListener(Object(d.b)(),(function(e){if(t.element.firstElementChild.classList.contains(a.a.CLASS_MENU_DISABLED))return e.stopPropagation(),void e.preventDefault()})),this.element.querySelector("input").addEventListener("change",(function(n){if(t.element.firstElementChild.classList.contains(a.a.CLASS_MENU_DISABLED))return n.stopPropagation(),void n.preventDefault();0!==n.target.files.length&&qe(e,n.target.files,n.target)}))},t}(ve),Dn=function(){function e(e){var t=this,n=e.options;this.elements={},this.element=document.createElement("div"),this.element.className="vditor-toolbar",n.toolbar.forEach((function(n,r){var i=t.genItem(e,n,r);if(t.element.appendChild(i),n.toolbar){var o=document.createElement("div");o.className="vditor-hint vditor-panel--arrow",o.addEventListener(Object(d.b)(),(function(e){o.style.display="none"})),n.toolbar.forEach((function(n,i){n.level=2,o.appendChild(t.genItem(e,n,r+i))})),i.appendChild(o),y(e,o,i.children[0])}})),e.options.toolbarConfig.hide&&this.element.classList.add("vditor-toolbar--hide"),e.options.toolbarConfig.pin&&this.element.classList.add("vditor-toolbar--pin"),e.options.counter.enable&&(e.counter=new Gt(e),this.element.appendChild(e.counter.element))}return e.prototype.genItem=function(e,t,n){var r;switch(t.name){case"bold":case"italic":case"more":case"strike":case"line":case"quote":case"list":case"ordered-list":case"check":case"code":case"inline-code":case"link":case"table":r=new ve(e,t);break;case"emoji":r=new nn(e,t);break;case"headings":r=new un(e,t);break;case"|":r=new en;break;case"br":r=new Ft;break;case"undo":r=new Rn(e,t);break;case"redo":r=new Mn(e,t);break;case"help":r=new fn(e,t);break;case"both":r=new Vt(e,t);break;case"preview":r=new En(e,t);break;case"fullscreen":r=new cn(e,t);break;case"upload":r=new Nn(e,t);break;case"record":r=new Cn(e,t);break;case"info":r=new vn(e,t);break;case"edit-mode":r=new ye(e,t);break;case"devtools":r=new $t(e,t);break;case"outdent":r=new On(e,t);break;case"indent":r=new hn(e,t);break;case"outline":r=new Sn(e,t);break;case"insert-after":r=new gn(e,t);break;case"insert-before":r=new _n(e,t);break;case"code-theme":r=new Xt(e,t);break;case"content-theme":r=new Kt(e,t);break;case"export":r=new an(e,t);break;default:r=new Zt(e,t)}if(r){var i=t.name;return"br"!==i&&"|"!==i||(i+=n),this.elements[i]=r.element,r.element}},e}(),In=n(27),Bn=n.n(In),Hn=function(){function e(){this.stackSize=50,this.resetStack(),this.dmp=new Bn.a}return e.prototype.clearStack=function(e){this.resetStack(),this.resetIcon(e)},e.prototype.resetIcon=function(e){e.toolbar&&(this[e.currentMode].undoStack.length>1?h(e.toolbar.elements,["undo"]):m(e.toolbar.elements,["undo"]),0!==this[e.currentMode].redoStack.length?h(e.toolbar.elements,["redo"]):m(e.toolbar.elements,["redo"]))},e.prototype.undo=function(e){if("false"!==e[e.currentMode].element.getAttribute("contenteditable")&&!(this[e.currentMode].undoStack.length<2)){var t=this[e.currentMode].undoStack.pop();t&&(this[e.currentMode].redoStack.push(t),this.renderDiff(t,e),this[e.currentMode].hasUndo=!0,g(e,["hint"]))}},e.prototype.redo=function(e){if("false"!==e[e.currentMode].element.getAttribute("contenteditable")){var t=this[e.currentMode].redoStack.pop();t&&(this[e.currentMode].undoStack.push(t),this.renderDiff(t,e,!0))}},e.prototype.recordFirstPosition=function(e,t){if(0!==getSelection().rangeCount&&!(1!==this[e.currentMode].undoStack.length||0===this[e.currentMode].undoStack[0].length||this[e.currentMode].redoStack.length>0||Object(d.e)()&&"Backspace"===t.key||Object(d.f)())){var n=this.addCaret(e);n.replace("<wbr>","").replace(" vditor-ir__node--expand","")===this[e.currentMode].undoStack[0][0].diffs[0][1].replace("<wbr>","")&&(this[e.currentMode].undoStack[0][0].diffs[0][1]=n,this[e.currentMode].lastText=n)}},e.prototype.addToUndoStack=function(e){var t=this.addCaret(e,!0),n=this.dmp.diff_main(t,this[e.currentMode].lastText,!0),r=this.dmp.patch_make(t,this[e.currentMode].lastText,n);0===r.length&&this[e.currentMode].undoStack.length>0||(this[e.currentMode].lastText=t,this[e.currentMode].undoStack.push(r),this[e.currentMode].undoStack.length>this.stackSize&&this[e.currentMode].undoStack.shift(),this[e.currentMode].hasUndo&&(this[e.currentMode].redoStack=[],this[e.currentMode].hasUndo=!1,m(e.toolbar.elements,["redo"])),this[e.currentMode].undoStack.length>1&&h(e.toolbar.elements,["undo"]))},e.prototype.renderDiff=function(e,t,n){var r;if(void 0===n&&(n=!1),n){var i=this.dmp.patch_deepCopy(e).reverse();i.forEach((function(e){e.diffs.forEach((function(e){e[0]=-e[0]}))})),r=this.dmp.patch_apply(i,this[t.currentMode].lastText)[0]}else r=this.dmp.patch_apply(e,this[t.currentMode].lastText)[0];if(this[t.currentMode].lastText=r,t[t.currentMode].element.innerHTML=r,"sv"!==t.currentMode&&t[t.currentMode].element.querySelectorAll(".vditor-"+t.currentMode+"__preview[data-render='2']").forEach((function(e){R(e,t)})),t[t.currentMode].element.querySelector("wbr"))Object(L.f)(t[t.currentMode].element,t[t.currentMode].element.ownerDocument.createRange()),Ee(t);else{var o=getSelection().getRangeAt(0);o.setEndBefore(t[t.currentMode].element),o.collapse(!1)}st(t,{enableAddUndoStack:!1,enableHint:!1,enableInput:!0}),fe(t),t[t.currentMode].element.querySelectorAll(".vditor-"+t.currentMode+"__preview[data-render='2']").forEach((function(e){R(e,t)})),this[t.currentMode].undoStack.length>1?h(t.toolbar.elements,["undo"]):m(t.toolbar.elements,["undo"]),0!==this[t.currentMode].redoStack.length?h(t.toolbar.elements,["redo"]):m(t.toolbar.elements,["redo"])},e.prototype.resetStack=function(){this.ir={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.sv={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.wysiwyg={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]}},e.prototype.addCaret=function(e,t){var n;if(void 0===t&&(t=!1),0!==getSelection().rangeCount&&!e[e.currentMode].element.querySelector("wbr")){var r=getSelection().getRangeAt(0);if(e[e.currentMode].element.contains(r.startContainer)){n=r.cloneRange();var i=document.createElement("span");i.className="vditor-wbr",r.insertNode(i)}}e.ir.element.cloneNode(!0).querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='1']").forEach((function(e){(e.firstElementChild.classList.contains("language-echarts")||e.firstElementChild.classList.contains("language-plantuml")||e.firstElementChild.classList.contains("language-mindmap"))&&(e.firstElementChild.removeAttribute("_echarts_instance_"),e.firstElementChild.removeAttribute("data-processed"),e.firstElementChild.innerHTML=e.previousElementSibling.firstElementChild.innerHTML,e.setAttribute("data-render","2")),e.firstElementChild.classList.contains("language-math")&&(e.setAttribute("data-render","2"),e.firstElementChild.textContent=e.firstElementChild.getAttribute("data-math"),e.firstElementChild.removeAttribute("data-math"))}));var o=e[e.currentMode].element.innerHTML;return e[e.currentMode].element.querySelectorAll(".vditor-wbr").forEach((function(e){e.remove()})),t&&n&&Object(L.h)(n),o.replace('<span class="vditor-wbr"></span>',"<wbr>")},e}(),Un=n(24),qn=function(){function e(e){this.defaultOptions={after:void 0,cache:{enable:!0},cdn:a.a.CDN,classes:{preview:""},comment:{enable:!1},counter:{enable:!1,type:"markdown"},debugger:!1,fullscreen:{index:90},height:"auto",hint:{delay:200,emoji:{"+1":"\ud83d\udc4d","-1":"\ud83d\udc4e",confused:"\ud83d\ude15",eyes:"\ud83d\udc40\ufe0f",heart:"\u2764\ufe0f",rocket:"\ud83d\ude80\ufe0f",smile:"\ud83d\ude04",tada:"\ud83c\udf89\ufe0f"},emojiPath:a.a.CDN+"/dist/images/emoji",extend:[],parse:!0},icon:"ant",lang:"zh_CN",mode:"ir",outline:{enable:!1,position:"left"},placeholder:"",preview:{actions:["desktop","tablet","mobile","mp-wechat","zhihu"],delay:1e3,hljs:a.a.HLJS_OPTIONS,markdown:a.a.MARKDOWN_OPTIONS,math:a.a.MATH_OPTIONS,maxWidth:800,mode:"both",theme:a.a.THEME_OPTIONS},resize:{enable:!1,position:"bottom"},theme:"classic",bubbleToolbar:["bold","italic","strike"],toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","upload","record","table","|","undo","redo","|","fullscreen","edit-mode",{name:"more",toolbar:["both","code-theme","content-theme","export","outline","preview","devtools","info","help"]}],toolbarConfig:{hide:!1,pin:!1,bubbleHide:!1},typewriterMode:!1,undoDelay:800,upload:{extraData:{},fieldName:"file[]",filename:function(e){return e.replace(/\W/g,"")},linkToImgUrl:"",max:10485760,multiple:!0,url:"",withCredentials:!1},value:"",width:"auto"},this.options=e}return e.prototype.merge=function(){var e,t,n;this.options&&(this.options.toolbar?this.options.toolbar=this.mergeToolbar(this.options.toolbar):this.options.toolbar=this.mergeToolbar(this.defaultOptions.toolbar),this.options.bubbleToolbar?this.options.bubbleToolbar=this.mergeToolbar(this.options.bubbleToolbar):this.options.bubbleToolbar=this.mergeToolbar(this.defaultOptions.bubbleToolbar),(null===(t=null===(e=this.options.preview)||void 0===e?void 0:e.theme)||void 0===t?void 0:t.list)&&(this.defaultOptions.preview.theme.list=this.options.preview.theme.list),(null===(n=this.options.hint)||void 0===n?void 0:n.emoji)&&(this.defaultOptions.hint.emoji=this.options.hint.emoji),this.options.comment&&(this.defaultOptions.comment=this.options.comment));var r=Object(Un.a)(this.defaultOptions,this.options);if(r.cache.enable&&!r.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");return r},e.prototype.mergeToolbar=function(e){var t=this,n=[{icon:'<svg><use xlink:href="#vditor-icon-export"></use></svg>',name:"export",tipPosition:"ne"},{hotkey:"\u2318E",icon:'<svg><use xlink:href="#vditor-icon-emoji"></use></svg>',name:"emoji",tipPosition:"ne"},{hotkey:"\u2318H",icon:'<svg><use xlink:href="#vditor-icon-headings"></use></svg>',name:"headings",tipPosition:"ne"},{hotkey:"\u2318B",icon:'<svg><use xlink:href="#vditor-icon-bold"></use></svg>',name:"bold",prefix:"**",suffix:"**",tipPosition:"ne"},{hotkey:"\u2318I",icon:'<svg><use xlink:href="#vditor-icon-italic"></use></svg>',name:"italic",prefix:"*",suffix:"*",tipPosition:"ne"},{hotkey:"\u2318D",icon:'<svg><use xlink:href="#vditor-icon-strike"></use></svg>',name:"strike",prefix:"~~",suffix:"~~",tipPosition:"ne"},{hotkey:"\u2318K",icon:'<svg><use xlink:href="#vditor-icon-link"></use></svg>',name:"link",prefix:"[",suffix:"](https://)",tipPosition:"n"},{name:"|"},{hotkey:"\u2318L",icon:'<svg><use xlink:href="#vditor-icon-list"></use></svg>',name:"list",prefix:"* ",tipPosition:"n"},{hotkey:"\u2318O",icon:'<svg><use xlink:href="#vditor-icon-ordered-list"></use></svg>',name:"ordered-list",prefix:"1. ",tipPosition:"n"},{hotkey:"\u2318J",icon:'<svg><use xlink:href="#vditor-icon-check"></use></svg>',name:"check",prefix:"* [ ] ",tipPosition:"n"},{hotkey:"\u21e7\u2318I",icon:'<svg><use xlink:href="#vditor-icon-outdent"></use></svg>',name:"outdent",tipPosition:"n"},{hotkey:"\u21e7\u2318O",icon:'<svg><use xlink:href="#vditor-icon-indent"></use></svg>',name:"indent",tipPosition:"n"},{name:"|"},{hotkey:"\u2318;",icon:'<svg><use xlink:href="#vditor-icon-quote"></use></svg>',name:"quote",prefix:"> ",tipPosition:"n"},{hotkey:"\u21e7\u2318H",icon:'<svg><use xlink:href="#vditor-icon-line"></use></svg>',name:"line",prefix:"---",tipPosition:"n"},{hotkey:"\u2318U",icon:'<svg><use xlink:href="#vditor-icon-code"></use></svg>',name:"code",prefix:"```",suffix:"\n```",tipPosition:"n"},{hotkey:"\u2318G",icon:'<svg><use xlink:href="#vditor-icon-inline-code"></use></svg>',name:"inline-code",prefix:"`",suffix:"`",tipPosition:"n"},{hotkey:"\u21e7\u2318B",icon:'<svg><use xlink:href="#vditor-icon-before"></use></svg>',name:"insert-before",tipPosition:"n"},{hotkey:"\u21e7\u2318E",icon:'<svg><use xlink:href="#vditor-icon-after"></use></svg>',name:"insert-after",tipPosition:"n"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-upload"></use></svg>',name:"upload",tipPosition:"n"},{icon:'<svg><use xlink:href="#vditor-icon-record"></use></svg>',name:"record",tipPosition:"n"},{hotkey:"\u2318M",icon:'<svg><use xlink:href="#vditor-icon-table"></use></svg>',name:"table",prefix:"| col1",suffix:" | col2 | col3 |\n| --- | --- | --- |\n|  |  |  |\n|  |  |  |",tipPosition:"n"},{name:"|"},{hotkey:"\u2318Z",icon:'<svg><use xlink:href="#vditor-icon-undo"></use></svg>',name:"undo",tipPosition:"nw"},{hotkey:"\u2318Y",icon:'<svg><use xlink:href="#vditor-icon-redo"></use></svg>',name:"redo",tipPosition:"nw"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-more"></use></svg>',name:"more",tipPosition:"e"},{hotkey:"\u2318'",icon:'<svg><use xlink:href="#vditor-icon-fullscreen"></use></svg>',name:"fullscreen",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-edit"></use></svg>',name:"edit-mode",tipPosition:"nw"},{hotkey:"\u2318P",icon:'<svg><use xlink:href="#vditor-icon-both"></use></svg>',name:"both",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-preview"></use></svg>',name:"preview",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',name:"outline",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-theme"></use></svg>',name:"content-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-code-theme"></use></svg>',name:"code-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-bug"></use></svg>',name:"devtools",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-info"></use></svg>',name:"info",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-help"></use></svg>',name:"help",tipPosition:"nw"},{name:"br"}],r=[];return e.forEach((function(e){var i=e;n.forEach((function(t){"string"==typeof e&&t.name===e&&(i=t),"object"==typeof e&&t.name===e.name&&(i=Object.assign({},t,e))})),e.toolbar&&(i.toolbar=t.mergeToolbar(e.toolbar)),r.push(i)})),r},e}(),Vn=function(){function e(e){var t=this;this.composingLock=!1,this.commentIds=[];var n=document.createElement("div");n.className="vditor-wysiwyg",n.innerHTML='<pre class="vditor-reset" placeholder="'+e.options.placeholder+'"\n contenteditable="true" spellcheck="false"></pre>\n<div class="vditor-panel vditor-panel--none"></div>\n<div class="vditor-panel vditor-panel--none">\n    <button type="button" aria-label="'+F.a[e.options.lang].comment+'" class="vditor-icon vditor-tooltipped vditor-tooltipped__n">\n        <svg><use xlink:href="#vditor-icon-comment"></use></svg>\n    </button>\n</div>',this.element=n.firstElementChild,this.popover=n.firstElementChild.nextElementSibling,this.selectPopover=n.lastElementChild,this.bindEvent(e),_e(e,this.element),we(e,this.element),Oe(e,this.element),Te(e,this.element),ke(e,this.element),xe(e,this.element),Se(e,this.element,this.copy),je(e,this.element,this.copy),e.options.comment.enable&&(this.selectPopover.querySelector("button").onclick=function(){var n,r,i=Lute.NewNodeID(),o=getSelection().getRangeAt(0),s=o.cloneRange(),c=o.extractContents(),l=!1,u=!1;c.childNodes.forEach((function(e,t){var o=!1;if(3===e.nodeType?o=!0:e.classList.contains("vditor-comment")?e.classList.contains("vditor-comment")&&e.setAttribute("data-cmtids",e.getAttribute("data-cmtids")+" "+i):o=!0,o)if(3!==e.nodeType&&"0"===e.getAttribute("data-block")&&0===t&&s.startOffset>0)e.innerHTML='<span class="vditor-comment" data-cmtids="'+i+'">'+e.innerHTML+"</span>",n=e;else if(3!==e.nodeType&&"0"===e.getAttribute("data-block")&&t===c.childNodes.length-1&&s.endOffset<s.endContainer.textContent.length)e.innerHTML='<span class="vditor-comment" data-cmtids="'+i+'">'+e.innerHTML+"</span>",r=e;else if(3!==e.nodeType&&"0"===e.getAttribute("data-block"))0===t?l=!0:t===c.childNodes.length-1&&(u=!0),e.innerHTML='<span class="vditor-comment" data-cmtids="'+i+'">'+e.innerHTML+"</span>";else{var a=document.createElement("span");a.classList.add("vditor-comment"),a.setAttribute("data-cmtids",i),e.parentNode.insertBefore(a,e),a.appendChild(e)}}));var d=Object(_.c)(s.startContainer);d&&(n?(d.insertAdjacentHTML("beforeend",n.innerHTML),n.remove()):""===d.textContent.trim().replace(a.a.ZWSP,"")&&l&&d.remove());var f=Object(_.c)(s.endContainer);f&&(r?(f.insertAdjacentHTML("afterbegin",r.innerHTML),r.remove()):""===f.textContent.trim().replace(a.a.ZWSP,"")&&u&&f.remove()),o.insertNode(c),e.options.comment.add(i,o.toString(),t.getComments(e,!0)),Q(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),t.hideComment()})}return e.prototype.getComments=function(e,t){var n=this;if(void 0===t&&(t=!1),"wysiwyg"!==e.currentMode||!e.options.comment.enable)return[];this.commentIds=[],this.element.querySelectorAll(".vditor-comment").forEach((function(e){n.commentIds=n.commentIds.concat(e.getAttribute("data-cmtids").split(" "))})),this.commentIds=Array.from(new Set(this.commentIds));var r=[];return t?(this.commentIds.forEach((function(e){r.push({id:e,top:n.element.querySelector('.vditor-comment[data-cmtids="'+e+'"]').offsetTop})})),r):void 0},e.prototype.triggerRemoveComment=function(e){var t,n,r;if("wysiwyg"===e.currentMode&&e.options.comment.enable&&e.wysiwyg.commentIds.length>0){var i=JSON.parse(JSON.stringify(this.commentIds));this.getComments(e);var o=(t=i,n=this.commentIds,r=new Set(n),t.filter((function(e){return!r.has(e)})));o.length>0&&e.options.comment.remove(o)}},e.prototype.showComment=function(){var e=Object(L.a)(this.element);this.selectPopover.setAttribute("style","left:"+e.left+"px;display:block;top:"+Math.max(-8,e.top-21)+"px")},e.prototype.hideComment=function(){this.selectPopover.setAttribute("style","display:none")},e.prototype.copy=function(e,t){var n=getSelection().getRangeAt(0);if(""!==n.toString()){e.stopPropagation(),e.preventDefault();var r=Object(_.f)(n.startContainer,"CODE"),i=Object(_.f)(n.endContainer,"CODE");if(r&&i&&i.isSameNode(r)){var o="";return o="PRE"===r.parentElement.tagName?n.toString():"`"+n.toString()+"`",e.clipboardData.setData("text/plain",o),void e.clipboardData.setData("text/html","")}var a=Object(_.f)(n.startContainer,"A"),s=Object(_.f)(n.endContainer,"A");if(a&&s&&s.isSameNode(a)){var c=a.getAttribute("title")||"";return c&&(c=' "'+c+'"'),e.clipboardData.setData("text/plain","["+n.toString()+"]("+a.getAttribute("href")+c+")"),void e.clipboardData.setData("text/html","")}var l=document.createElement("div");l.appendChild(n.cloneContents()),e.clipboardData.setData("text/plain",t.lute.VditorDOM2Md(l.innerHTML).trim()),e.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(e){var t=this;window.addEventListener("scroll",(function(){if(g(e,["hint"]),"block"===t.popover.style.display&&"block"===t.selectPopover.style.display){var n=parseInt(t.popover.getAttribute("data-top"),10);if("auto"===e.options.height){if(e.options.toolbarConfig.pin){var r=Math.max(n,window.scrollY-e.element.offsetTop-8)+"px";"block"===t.popover.style.display&&(t.popover.style.top=r),"block"===t.selectPopover.style.display&&(t.selectPopover.style.top=r)}}else if(e.options.toolbarConfig.pin&&0===e.toolbar.element.getBoundingClientRect().top){var i=Math.max(window.scrollY-e.element.offsetTop-8,Math.min(n-e.wysiwyg.element.scrollTop,t.element.clientHeight-21))+"px";"block"===t.popover.style.display&&(t.popover.style.top=i),"block"===t.selectPopover.style.display&&(t.selectPopover.style.top=i)}}})),this.element.addEventListener("scroll",(function(){if(g(e,["hint"]),e.options.comment&&e.options.comment.enable&&e.options.comment.scroll&&e.options.comment.scroll(e.wysiwyg.element.scrollTop),"block"===t.popover.style.display){var n=parseInt(t.popover.getAttribute("data-top"),10)-e.wysiwyg.element.scrollTop,r=-8;e.options.toolbarConfig.pin&&0===e.toolbar.element.getBoundingClientRect().top&&(r=window.scrollY-e.element.offsetTop+r);var i=Math.max(r,Math.min(n,t.element.clientHeight-21))+"px";t.popover.style.top=i,t.selectPopover.style.top=i}})),this.element.addEventListener("paste",(function(t){xt(e,t,{pasteCode:function(t){var n=Object(L.b)(e),r=document.createElement("template");r.innerHTML=t,n.insertNode(r.content.cloneNode(!0));var i=Object(_.d)(n.startContainer,"data-block","0");i?i.outerHTML=e.lute.SpinVditorDOM(i.outerHTML):e.wysiwyg.element.innerHTML=e.lute.SpinVditorDOM(e.wysiwyg.element.innerHTML),Object(L.f)(e.wysiwyg.element,n)}})})),this.element.addEventListener("compositionstart",(function(){t.composingLock=!0})),this.element.addEventListener("compositionend",(function(n){var r=Object(w.a)(getSelection().getRangeAt(0).startContainer);r&&""===r.textContent?N(e):(Object(d.e)()||Ve(e,getSelection().getRangeAt(0).cloneRange(),n),t.composingLock=!1)})),this.element.addEventListener("input",(function(n){if("deleteByDrag"!==n.inputType&&"insertFromDrop"!==n.inputType)if(t.preventInput)t.preventInput=!1;else if(!t.composingLock&&"\u2018"!==n.data&&"\u201c"!==n.data&&"\u300a"!==n.data){var r=getSelection().getRangeAt(0),i=Object(_.c)(r.startContainer);if(i||($(e,r),i=Object(_.c)(r.startContainer)),i){for(var o=Object(L.c)(i,e.wysiwyg.element,r).start,a=!0,s=o-1;s>i.textContent.substr(0,o).lastIndexOf("\n");s--)if(" "!==i.textContent.charAt(s)&&"\t"!==i.textContent.charAt(s)){a=!1;break}0===o&&(a=!1);var c=!0;for(s=o-1;s<i.textContent.length;s++)if(" "!==i.textContent.charAt(s)&&"\n"!==i.textContent.charAt(s)){c=!1;break}var l=Object(w.a)(getSelection().getRangeAt(0).startContainer);l&&""===l.textContent&&(N(e),l.remove()),a&&"code-block"!==i.getAttribute("data-type")||c||at(i.innerHTML)||ot(i.innerHTML)&&i.previousElementSibling||Ve(e,r,n)}}})),this.element.addEventListener("click",(function(n){if("INPUT"===n.target.tagName){var r=n.target;return r.checked?r.setAttribute("checked","checked"):r.removeAttribute("checked"),t.preventInput=!0,void Q(e)}if("IMG"!==n.target.tagName||n.target.parentElement.classList.contains("vditor-wysiwyg__preview")){"A"===n.target.tagName&&window.open(n.target.getAttribute("href"));var i=Object(L.b)(e);if(n.target.isEqualNode(t.element)&&t.element.lastElementChild&&i.collapsed){var o=t.element.lastElementChild.getBoundingClientRect();n.y>o.top+o.height&&("P"===t.element.lastElementChild.tagName&&""===t.element.lastElementChild.textContent.trim().replace(a.a.ZWSP,"")?(i.selectNodeContents(t.element.lastElementChild),i.collapse(!1)):(t.element.insertAdjacentHTML("beforeend",'<p data-block="0">'+a.a.ZWSP+"<wbr></p>"),Object(L.f)(t.element,i)))}ie(e);var s=Object(_.e)(n.target,"vditor-wysiwyg__preview");s||(s=Object(_.e)(Object(L.b)(e).startContainer,"vditor-wysiwyg__preview")),s&&ne(s,e),D(n,e)}else"link-ref"===n.target.getAttribute("data-type")?ae(e,n.target):function(e,t){var n=e.target;t.wysiwyg.popover.innerHTML="";var r=function(){n.setAttribute("src",o.value),n.setAttribute("alt",s.value),n.setAttribute("title",l.value)},i=document.createElement("span");i.setAttribute("aria-label",F.a[t.options.lang].imageURL),i.className="vditor-tooltipped vditor-tooltipped__n";var o=document.createElement("input");i.appendChild(o),o.className="vditor-input",o.setAttribute("placeholder",F.a[t.options.lang].imageURL),o.value=n.getAttribute("src")||"",o.oninput=function(){r()},o.onkeydown=function(e){re(t,e)};var a=document.createElement("span");a.setAttribute("aria-label",F.a[t.options.lang].alternateText),a.className="vditor-tooltipped vditor-tooltipped__n";var s=document.createElement("input");a.appendChild(s),s.className="vditor-input",s.setAttribute("placeholder",F.a[t.options.lang].alternateText),s.style.width="52px",s.value=n.getAttribute("alt")||"",s.oninput=function(){r()},s.onkeydown=function(e){re(t,e)};var c=document.createElement("span");c.setAttribute("aria-label",F.a[t.options.lang].title),c.className="vditor-tooltipped vditor-tooltipped__n";var l=document.createElement("input");c.appendChild(l),l.className="vditor-input",l.setAttribute("placeholder",F.a[t.options.lang].title),l.value=n.getAttribute("title")||"",l.oninput=function(){r()},l.onkeydown=function(e){re(t,e)},le(n,t),t.wysiwyg.popover.insertAdjacentElement("beforeend",i),t.wysiwyg.popover.insertAdjacentElement("beforeend",a),t.wysiwyg.popover.insertAdjacentElement("beforeend",c),oe(t,n)}(n,e)})),this.element.addEventListener("keyup",(function(t){if(!t.isComposing&&!Object(d.d)(t)){"Enter"===t.key&&Ee(e),"Backspace"!==t.key&&"Delete"!==t.key||""===e.wysiwyg.element.innerHTML||1!==e.wysiwyg.element.childNodes.length||!e.wysiwyg.element.firstElementChild||"P"!==e.wysiwyg.element.firstElementChild.tagName||0!==e.wysiwyg.element.firstElementChild.childElementCount||""!==e.wysiwyg.element.textContent&&"\n"!==e.wysiwyg.element.textContent||(e.wysiwyg.element.innerHTML="");var n=Object(L.b)(e);if("Backspace"===t.key&&Object(d.e)()&&"\n"===n.startContainer.textContent&&1===n.startOffset&&(n.startContainer.textContent=""),$(e,n),ie(e),"ArrowDown"===t.key||"ArrowRight"===t.key||"Backspace"===t.key||"ArrowLeft"===t.key||"ArrowUp"===t.key){"ArrowLeft"!==t.key&&"ArrowRight"!==t.key||e.hint.render(e);var r=Object(_.e)(n.startContainer,"vditor-wysiwyg__preview");if(!r&&3!==n.startContainer.nodeType&&n.startOffset>0&&(o=n.startContainer).classList.contains("vditor-wysiwyg__block")&&(r=o.lastElementChild),r)if("none"!==r.previousElementSibling.style.display){var i=r.previousElementSibling;if("PRE"===i.tagName&&(i=i.firstElementChild),"ArrowDown"===t.key||"ArrowRight"===t.key){var o,a=function(e){for(var t=e;t&&!t.nextSibling;)t=t.parentElement;return t.nextSibling}(o=r.parentElement);if(a&&3!==a.nodeType){var s=a.querySelector(".vditor-wysiwyg__preview");if(s)return void ne(s,e)}if(3===a.nodeType){for(;0===a.textContent.length&&a.nextSibling;)a=a.nextSibling;n.setStart(a,1)}else n.setStart(a.firstChild,0)}else n.selectNodeContents(i),n.collapse(!1)}else"ArrowDown"===t.key||"ArrowRight"===t.key?ne(r,e):ne(r,e,!1)}}}))},e}(),Fn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wn="vditor-bubble-toolbar",zn=function(e){function t(t){var n=e.call(this,t)||this;return n.element=n.createDocument("div","",{className:Wn}),n.init(t),n}return Fn(t,e),t.prototype.createDocument=function(e,t,n){void 0===e&&(e="div"),void 0===t&&(t=""),void 0===n&&(n={});var r=document.createElement(e);return r.textContent=t,Object.keys(n).forEach((function(e){r[e]=n[e]})),r},t.prototype.init=function(e){var t=this;e.options.bubbleToolbar.forEach((function(n,r){var i=t.genItem(e,n,r);t.element.appendChild(i)})),this.bubbleBottomDom=this.createDocument("div","",{className:Wn+"__bottom"}),this.bubbelTopDom=this.createDocument("div","",{className:Wn+"__top"}),this.element.appendChild(this.bubbleBottomDom),this.element.appendChild(this.bubbelTopDom),this.hide()},t.prototype.hide=function(){"none"!==this.element.style.display&&(this.element.style.display="none")},t.prototype.show=function(e){if("flex"!==this.element.style.display){this.element.style.display="flex";try{var t=e.element.getBoundingClientRect(),n=window.getSelection().getRangeAt(0).getClientRects(),r=this.element.getBoundingClientRect(),i=n[0],o=i.y-t.y,a=i.top-r.height-10-t.y,s=(i.width-r.width)/2+i.left-t.x;o<2*r.height?(a=i.top+r.height-t.y,this.bubbleBottomDom.style.display="none",this.bubbelTopDom.style.display="block",this.bubbelTopDom.style.top="-8px",this.bubbelTopDom.style.left=r.width/2-4+"px"):(this.bubbelTopDom.style.display="none",this.bubbleBottomDom.style.display="block",this.bubbleBottomDom.style.top=r.height+"px",this.bubbleBottomDom.style.left=r.width/2-4+"px"),this.element.style.top=a+"px",this.element.style.left=s>0?s+"px":"0px"}catch(e){console.error(e)}}},t}(Dn),Xn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yn=function(e){function t(t,n){var r=e.call(this)||this;r.version=a.b,"string"==typeof t&&(n?n.cache?n.cache.id||(n.cache.id="vditor"+t):n.cache={id:"vditor"+t}:n={cache:{id:"vditor"+t}},t=document.getElementById(t));var i=new qn(n).merge();if(!["en_US","ja_JP","ko_KR","ru_RU","zh_CN"].includes(i.lang))throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");return r.vditor={currentMode:i.mode,element:t,hint:new Ct(i.hint.extend),lute:void 0,options:i,originalInnerHTML:t.innerHTML,outline:new Lt(F.a[i.lang].outline),tip:new Ht},r.vditor.sv=new Bt(r.vditor),r.vditor.undo=new Hn,r.vditor.wysiwyg=new Vn(r.vditor),r.vditor.ir=new At(r.vditor),r.vditor.toolbar=new Dn(r.vditor),r.vditor.bubbleToolbar=new zn(r.vditor),i.resize.enable&&(r.vditor.resize=new It(r.vditor)),r.vditor.toolbar.elements.devtools&&(r.vditor.devtools=new u),(i.upload.url||i.upload.handler)&&(r.vditor.upload=new Ue),Object(l.a)(n._lutePath||i.cdn+"/dist/js/lute/lute.min.js","vditorLuteScript").then((function(){r.vditor.lute=Object(Pt.a)({autoSpace:r.vditor.options.preview.markdown.autoSpace,codeBlockPreview:r.vditor.options.preview.markdown.codeBlockPreview,emojiSite:r.vditor.options.hint.emojiPath,emojis:r.vditor.options.hint.emoji,fixTermTypo:r.vditor.options.preview.markdown.fixTermTypo,footnotes:r.vditor.options.preview.markdown.footnotes,headingAnchor:!1,inlineMathDigit:r.vditor.options.preview.math.inlineDigit,linkBase:r.vditor.options.preview.markdown.linkBase,linkPrefix:r.vditor.options.preview.markdown.linkPrefix,listStyle:r.vditor.options.preview.markdown.listStyle,mark:r.vditor.options.preview.markdown.mark,mathBlockPreview:r.vditor.options.preview.markdown.mathBlockPreview,paragraphBeginningSpace:r.vditor.options.preview.markdown.paragraphBeginningSpace,sanitize:r.vditor.options.preview.markdown.sanitize,toc:r.vditor.options.preview.markdown.toc}),r.vditor.preview=new Dt(r.vditor),function(e){e.element.innerHTML="",e.element.classList.add("vditor"),z(e),Object(W.a)(e.options.preview.theme.current,e.options.preview.theme.path),"number"==typeof e.options.height&&(e.element.style.height=e.options.height+"px"),"number"==typeof e.options.minHeight&&(e.element.style.minHeight=e.options.minHeight+"px"),"number"==typeof e.options.width?e.element.style.width=e.options.width+"px":e.element.style.width=e.options.width,e.element.appendChild(e.toolbar.element),e.element.appendChild(e.bubbleToolbar.element);var t=document.createElement("div");if(t.className="vditor-content","left"===e.options.outline.position&&t.appendChild(e.outline.element),t.appendChild(e.wysiwyg.element.parentElement),t.appendChild(e.sv.element),t.appendChild(e.ir.element.parentElement),t.appendChild(e.preview.element),e.toolbar.elements.devtools&&t.appendChild(e.devtools.element),"right"===e.options.outline.position&&(e.outline.element.classList.add("vditor-outline--right"),t.appendChild(e.outline.element)),e.upload&&t.appendChild(e.upload.element),e.options.resize.enable&&t.appendChild(e.resize.element),t.appendChild(e.hint.element),t.appendChild(e.tip.element),e.element.appendChild(t),e.toolbar.elements.export&&e.element.insertAdjacentHTML("beforeend",'<iframe style="width: 100%;height: 0;border: 0"></iframe>'),ge(e,e.options.mode,K(e,t)),document.execCommand("DefaultParagraphSeparator",!1,"p"),navigator.userAgent.indexOf("iPhone")>-1&&void 0!==window.visualViewport){var n=!1,r=function(t){n||(n=!0,requestAnimationFrame((function(){n=!1;var t=e.toolbar.element;t.style.transform="none",t.getBoundingClientRect().top<0&&(t.style.transform="translate(0, "+-t.getBoundingClientRect().top+"px)")})))};window.visualViewport.addEventListener("scroll",r),window.visualViewport.addEventListener("resize",r)}}(r.vditor),i.after&&i.after(),i.icon&&Object(l.b)(i.cdn+"/dist/js/icons/"+i.icon+".js","vditorIconScript")})),r}return Xn(t,e),t.prototype.setTheme=function(e,t,n,r){this.vditor.options.theme=e,z(this.vditor),t&&(this.vditor.options.preview.theme.current=t,Object(W.a)(t,r||this.vditor.options.preview.theme.path)),n&&(this.vditor.options.preview.hljs.style=n,Object(Wt.a)(n,this.vditor.options.cdn))},t.prototype.getValue=function(){return c(this.vditor)},t.prototype.getCurrentMode=function(){return this.vditor.currentMode},t.prototype.focus=function(){"sv"===this.vditor.currentMode?this.vditor.sv.element.focus():"wysiwyg"===this.vditor.currentMode?this.vditor.wysiwyg.element.focus():"ir"===this.vditor.currentMode&&this.vditor.ir.element.focus()},t.prototype.blur=function(){"sv"===this.vditor.currentMode?this.vditor.sv.element.blur():"wysiwyg"===this.vditor.currentMode?this.vditor.wysiwyg.element.blur():"ir"===this.vditor.currentMode&&this.vditor.ir.element.blur()},t.prototype.disabled=function(){g(this.vditor,["subToolbar","hint","popover"]),m(this.vditor.toolbar.elements,a.a.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","false")},t.prototype.enable=function(){h(this.vditor.toolbar.elements,a.a.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor.undo.resetIcon(this.vditor),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","true")},t.prototype.getSelection=function(){return"wysiwyg"===this.vditor.currentMode?he(this.vditor.wysiwyg.element):"sv"===this.vditor.currentMode?he(this.vditor.sv.element):"ir"===this.vditor.currentMode?he(this.vditor.ir.element):void 0},t.prototype.renderPreview=function(e){this.vditor.preview.render(this.vditor,e)},t.prototype.getCursorPosition=function(){return Object(L.a)(this.vditor[this.vditor.currentMode].element)},t.prototype.isUploading=function(){return this.vditor.upload.isUploading},t.prototype.clearCache=function(){localStorage.removeItem(this.vditor.options.cache.id)},t.prototype.disabledCache=function(){this.vditor.options.cache.enable=!1},t.prototype.enableCache=function(){if(!this.vditor.options.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");this.vditor.options.cache.enable=!0},t.prototype.html2md=function(e){return this.vditor.lute.HTML2Md(e)},t.prototype.getHTML=function(){return Mt(this.vditor)},t.prototype.tip=function(e,t){this.vditor.tip.show(e,t)},t.prototype.setPreviewMode=function(e){Ut(e,this.vditor)},t.prototype.deleteValue=function(){window.getSelection().isCollapsed||document.execCommand("delete",!1)},t.prototype.updateValue=function(e){document.execCommand("insertHTML",!1,e)},t.prototype.insertValue=function(e,t){void 0===t&&(t=!0);var n=Object(L.b)(this.vditor);n.collapse(!0);var r=document.createElement("template");r.innerHTML=e,n.insertNode(r.content.cloneNode(!0)),"sv"===this.vditor.currentMode?(this.vditor.sv.preventInput=!0,t&&V(this.vditor)):"wysiwyg"===this.vditor.currentMode?(this.vditor.wysiwyg.preventInput=!0,t&&Ve(this.vditor,n,{inputType:"insertValue"},e)):"ir"===this.vditor.currentMode&&(this.vditor.ir.preventInput=!0,t&&B(this.vditor,getSelection().getRangeAt(0),!0))},t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t=!1),"sv"===this.vditor.currentMode?(this.vditor.sv.element.innerHTML=this.vditor.lute.SpinVditorSVDOM(e),Re(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})):"wysiwyg"===this.vditor.currentMode?pe(this.vditor,e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}):(this.vditor.ir.element.innerHTML=this.vditor.lute.Md2VditorIRDOM(e),this.vditor.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach((function(e){R(e,n.vditor)})),jt(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})),this.vditor.outline.render(this.vditor),e||(g(this.vditor,["emoji","headings","submenu","hint"]),this.vditor.wysiwyg.popover&&(this.vditor.wysiwyg.popover.style.display="none"),this.clearCache()),t&&this.clearStack()},t.prototype.clearStack=function(){this.vditor.undo.clearStack(this.vditor),this.vditor.undo.addToUndoStack(this.vditor)},t.prototype.destroy=function(){this.vditor.element.innerHTML=this.vditor.originalInnerHTML,this.vditor.element.classList.remove("vditor"),this.vditor.element.removeAttribute("style"),document.getElementById("vditorIconScript").remove(),this.clearCache()},t.prototype.getCommentIds=function(){return"wysiwyg"!==this.vditor.currentMode?[]:this.vditor.wysiwyg.getComments(this.vditor,!0)},t.prototype.hlCommentIds=function(e){if("wysiwyg"===this.vditor.currentMode){var t=function(t){t.classList.remove("vditor-comment--hover"),e.forEach((function(e){t.getAttribute("data-cmtids").indexOf(e)>-1&&t.classList.add("vditor-comment--hover")}))};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach((function(e){t(e)})),"none"!==this.vditor.preview.element.style.display&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach((function(e){t(e)}))}},t.prototype.unHlCommentIds=function(e){if("wysiwyg"===this.vditor.currentMode){var t=function(t){e.forEach((function(e){t.getAttribute("data-cmtids").indexOf(e)>-1&&t.classList.remove("vditor-comment--hover")}))};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach((function(e){t(e)})),"none"!==this.vditor.preview.element.style.display&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach((function(e){t(e)}))}},t.prototype.removeCommentIds=function(e){var t=this;if("wysiwyg"===this.vditor.currentMode){var n=function(e,n){var r=e.getAttribute("data-cmtids").split(" ");r.find((function(e,t){if(e===n)return r.splice(t,1),!0})),0===r.length?(e.outerHTML=e.innerHTML,Object(L.b)(t.vditor).collapse(!0)):e.setAttribute("data-cmtids",r.join(" "))};e.forEach((function(e){t.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach((function(t){n(t,e)})),"none"!==t.vditor.preview.element.style.display&&t.vditor.preview.element.querySelectorAll(".vditor-comment").forEach((function(t){n(t,e)}))})),Q(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})}},t.prototype.getEditorRange=function(){return Object(L.b)(this.vditor)},t}(o.default);t.default=Yn}]).default},YGK4:function(e,t,n){"use strict";var r=n("bWFh"),i=n("ZWaQ");e.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},YKlV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoWebAdapter=void 0;t.VideoWebAdapter={abs:function(){return"abc"}}},YL0P:function(e,t,n){"use strict";var r=n("2oRo"),i=n("67WC"),o=n("4mDm"),a=n("tiKp")("iterator"),s=r.Uint8Array,c=o.values,l=o.keys,u=o.entries,d=i.aTypedArray,f=i.exportTypedArrayMethod,p=s&&s.prototype[a],h=!!p&&("values"==p.name||void 0==p.name),m=function(){return c.call(d(this))};f("entries",(function(){return u.call(d(this))})),f("keys",(function(){return l.call(d(this))})),f("values",m,!h),f(a,m,!h)},"YZm+":function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var root="object"===typeof window?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"===typeof process&&process.versions&&process.versions.node;NODE_JS&&(root=global);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&"object"===typeof module&&module.exports,AMD=__webpack_require__("qpuh"),HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(e){return function(t){return new Sha1(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Sha1},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"===typeof e)return crypto.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return method(e);return crypto.createHash("sha1").update(new Buffer(e)).digest("hex")};return nodeMethod};function Sha1(e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(e){if(!this.finalized){var t="string"!==typeof e;t&&e.constructor===root.ArrayBuffer&&(e=new Uint8Array(e));for(var n,r,i=0,o=e.length||0,a=this.blocks;i<o;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)for(r=this.start;i<o&&r<64;++i)a[r>>2]|=e[i]<<SHIFT[3&r++];else for(r=this.start;i<o&&r<64;++i)(n=e.charCodeAt(i))<128?a[r>>2]|=n<<SHIFT[3&r++]:n<2048?(a[r>>2]|=(192|n>>6)<<SHIFT[3&r++],a[r>>2]|=(128|63&n)<<SHIFT[3&r++]):n<55296||n>=57344?(a[r>>2]|=(224|n>>12)<<SHIFT[3&r++],a[r>>2]|=(128|n>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&n)<<SHIFT[3&r++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++i)),a[r>>2]|=(240|n>>18)<<SHIFT[3&r++],a[r>>2]|=(128|n>>12&63)<<SHIFT[3&r++],a[r>>2]|=(128|n>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&n)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=a[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var e,t,n=this.h0,r=this.h1,i=this.h2,o=this.h3,a=this.h4,s=this.blocks;for(e=16;e<80;++e)t=s[e-3]^s[e-8]^s[e-14]^s[e-16],s[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r&i|~r&o)+a+1518500249+s[e]<<0)<<5|a>>>27)+(n&(r=r<<30|r>>>2)|~n&i)+o+1518500249+s[e+1]<<0)<<5|o>>>27)+(a&(n=n<<30|n>>>2)|~a&r)+i+1518500249+s[e+2]<<0)<<5|i>>>27)+(o&(a=a<<30|a>>>2)|~o&n)+r+1518500249+s[e+3]<<0)<<5|r>>>27)+(i&(o=o<<30|o>>>2)|~i&a)+n+1518500249+s[e+4]<<0,i=i<<30|i>>>2;for(;e<40;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r^i^o)+a+1859775393+s[e]<<0)<<5|a>>>27)+(n^(r=r<<30|r>>>2)^i)+o+1859775393+s[e+1]<<0)<<5|o>>>27)+(a^(n=n<<30|n>>>2)^r)+i+1859775393+s[e+2]<<0)<<5|i>>>27)+(o^(a=a<<30|a>>>2)^n)+r+1859775393+s[e+3]<<0)<<5|r>>>27)+(i^(o=o<<30|o>>>2)^a)+n+1859775393+s[e+4]<<0,i=i<<30|i>>>2;for(;e<60;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r&i|r&o|i&o)+a-1894007588+s[e]<<0)<<5|a>>>27)+(n&(r=r<<30|r>>>2)|n&i|r&i)+o-1894007588+s[e+1]<<0)<<5|o>>>27)+(a&(n=n<<30|n>>>2)|a&r|n&r)+i-1894007588+s[e+2]<<0)<<5|i>>>27)+(o&(a=a<<30|a>>>2)|o&n|a&n)+r-1894007588+s[e+3]<<0)<<5|r>>>27)+(i&(o=o<<30|o>>>2)|i&a|o&a)+n-1894007588+s[e+4]<<0,i=i<<30|i>>>2;for(;e<80;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r^i^o)+a-899497514+s[e]<<0)<<5|a>>>27)+(n^(r=r<<30|r>>>2)^i)+o-899497514+s[e+1]<<0)<<5|o>>>27)+(a^(n=n<<30|n>>>2)^r)+i-899497514+s[e+2]<<0)<<5|i>>>27)+(o^(a=a<<30|a>>>2)^n)+r-899497514+s[e+3]<<0)<<5|r>>>27)+(i^(o=o<<30|o>>>2)^a)+n-899497514+s[e+4]<<0,i=i<<30|i>>>2;this.h0=this.h0+n<<0,this.h1=this.h1+r<<0,this.h2=this.h2+i<<0,this.h3=this.h3+o<<0,this.h4=this.h4+a<<0},Sha1.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4;return HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,i>>24&255,i>>16&255,i>>8&255,255&i]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}).call(this,__webpack_require__("KCCg"),__webpack_require__("ntbh"))},Yhre:function(e,t,n){"use strict";var r=n("2oRo"),i=n("g6v/"),o=n("qYE9"),a=n("kRJp"),s=n("4syw"),c=n("0Dky"),l=n("GarU"),u=n("ppGB"),d=n("UMSQ"),f=n("CyXQ"),p=n("d6cI"),h=n("4WOD"),m=n("0rvr"),v=n("JBy8").f,b=n("m/L8").f,g=n("gdVl"),y=n("1E5z"),_=n("afO8"),w=_.get,O=_.set,x="ArrayBuffer",S="DataView",j="Wrong index",E=r.ArrayBuffer,T=E,k=r.DataView,C=k&&k.prototype,A=Object.prototype,M=r.RangeError,P=p.pack,R=p.unpack,L=function(e){return[255&e]},N=function(e){return[255&e,e>>8&255]},D=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},I=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},B=function(e){return P(e,23,4)},H=function(e){return P(e,52,8)},U=function(e,t){b(e.prototype,t,{get:function(){return w(this)[t]}})},q=function(e,t,n,r){var i=f(n),o=w(e);if(i+t>o.byteLength)throw M(j);var a=w(o.buffer).bytes,s=i+o.byteOffset,c=a.slice(s,s+t);return r?c:c.reverse()},V=function(e,t,n,r,i,o){var a=f(n),s=w(e);if(a+t>s.byteLength)throw M(j);for(var c=w(s.buffer).bytes,l=a+s.byteOffset,u=r(+i),d=0;d<t;d++)c[l+d]=u[o?d:t-d-1]};if(o){if(!c((function(){E(1)}))||!c((function(){new E(-1)}))||c((function(){return new E,new E(1.5),new E(NaN),E.name!=x}))){for(var F,W=(T=function(e){return l(this,T),new E(f(e))}).prototype=E.prototype,z=v(E),X=0;z.length>X;)(F=z[X++])in T||a(T,F,E[F]);W.constructor=T}m&&h(C)!==A&&m(C,A);var Y=new k(new T(2)),K=C.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||s(C,{setInt8:function(e,t){K.call(this,e,t<<24>>24)},setUint8:function(e,t){K.call(this,e,t<<24>>24)}},{unsafe:!0})}else T=function(e){l(this,T,x);var t=f(e);O(this,{bytes:g.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},k=function(e,t,n){l(this,k,S),l(e,T,S);var r=w(e).byteLength,o=u(t);if(o<0||o>r)throw M("Wrong offset");if(o+(n=void 0===n?r-o:d(n))>r)throw M("Wrong length");O(this,{buffer:e,byteLength:n,byteOffset:o}),i||(this.buffer=e,this.byteLength=n,this.byteOffset=o)},i&&(U(T,"byteLength"),U(k,"buffer"),U(k,"byteLength"),U(k,"byteOffset")),s(k.prototype,{getInt8:function(e){return q(this,1,e)[0]<<24>>24},getUint8:function(e){return q(this,1,e)[0]},getInt16:function(e){var t=q(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=q(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return I(q(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return I(q(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return R(q(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return R(q(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){V(this,1,e,L,t)},setUint8:function(e,t){V(this,1,e,L,t)},setInt16:function(e,t){V(this,2,e,N,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){V(this,2,e,N,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){V(this,4,e,D,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){V(this,4,e,D,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){V(this,4,e,B,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){V(this,8,e,H,t,arguments.length>2?arguments[2]:void 0)}});y(T,x),y(k,S),e.exports={ArrayBuffer:T,DataView:k}},Ylwr:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));n("ma9I");var r=n("lSNA"),i=n.n(r),o=n("nKUr"),a=n("QILm"),s=n.n(a),c=(n("q1tI"),n("MCNy")),l=n.n(c),u=n("+pgT"),d=n.n(u),f=n("5f2u"),p=n.n(f),h="_1ovnRAXYxIv9uf7-Dbe84J",m="_19fV-WvE6LRptkPGIwzDOb",v="_1tKFlaDh05MnmcRhDLskZs",b="_1mSPtN33i2hPPtLSKtdJyu",g="_8Ho8pi8fjmJNZ-HG1QDxY",y=n("bfFJ");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){var t=e.title,n=e.children,r=e.onClose,i=void 0===r?function(){}:r,a=e.onCacel,c=void 0===a?function(){}:a,u=e.onConfirm,f=void 0===u?function(){}:u,_=e.confirmDisabled,O=void 0!==_&&_,x=e.isCustomBtn,S=void 0!==x&&x,j=e.className,E=e.confirmText,T=void 0===E?"\u786e\u5b9a":E,k=e.confirmType,C=void 0===k?"":k,A=e.beforeUpload,M=void 0===A?function(){return!0}:A,P=e.onUploadChange,R=void 0===P?function(){}:P,L=e.limit,N=void 0===L?1:L,D=e.accept,I=void 0===D?"*/*":D,B=s()(e,["title","children","onClose","onCacel","onConfirm","confirmDisabled","isCustomBtn","className","confirmText","confirmType","beforeUpload","onUploadChange","limit","accept"]),H=Object(o.jsxs)("div",{className:m,children:[t,Object(o.jsx)(l.a,{className:v,name:"CloseOutlined",size:12,onClick:i})]});return Object(o.jsxs)(d.a,w(w({className:"".concat(j," ").concat(h),header:H,onClose:i},B),{},{children:[n,!S&&Object(o.jsxs)("div",{className:b,children:[Object(o.jsx)(p.a,{onClick:function(){return c()},children:"\u53d6\u6d88"}),Object(o.jsx)(y.a,{isChoose:"upload"===C,beforeUpload:M,onChange:R,accept:I,limit:N,children:Object(o.jsx)(p.a,{className:g,type:"primary",disabled:O,onClick:function(){return f()},children:T})})]})]}))}},ZJ55:function(e,t,n){"use strict";var r=n("67WC"),i=n("tycR").some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},ZWaQ:function(e,t,n){"use strict";var r=n("m/L8").f,i=n("fHMY"),o=n("4syw"),a=n("A2ZE"),s=n("GarU"),c=n("ImZN"),l=n("fdAy"),u=n("JiZb"),d=n("g6v/"),f=n("8YOa").fastKey,p=n("afO8"),h=p.set,m=p.getterFor;e.exports={getConstructor:function(e,t,n,l){var u=e((function(e,r){s(e,u,t),h(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=r&&c(r,e[l],{that:e,AS_ENTRIES:n})})),p=m(t),v=function(e,t,n){var r,i,o=p(e),a=b(e,t);return a?a.value=n:(o.last=a={index:i=f(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),d?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},b=function(e,t){var n,r=p(e),i=f(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return o(u.prototype,{clear:function(){for(var e=p(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,d?e.size=0:this.size=0},delete:function(e){var t=this,n=p(t),r=b(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),d?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=p(this),r=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!b(this,e)}}),o(u.prototype,n?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),d&&r(u.prototype,"size",{get:function(){return p(this).size}}),u},setStrong:function(e,t,n){var r=t+" Iterator",i=m(t),o=m(r);l(e,t,(function(e,t){h(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(t)}}},a20H:function(e,t,n){"use strict";n("pjDv"),n("2B1R"),n("07d7"),n("5s+n"),n("PKPk"),Object.defineProperty(t,"__esModule",{value:!0}),t.getRect=function(e,t){return new Promise((function(n,r){e.current?n(t?Array.from(e.current.querySelectorAll(t)).map((function(e){return e.getBoundingClientRect()})):[e.current.getBoundingClientRect()]):r()}))}},a5PV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{render:function(t){var n=t.renderData,s=t.site,c=t.onConfirm,u=void 0===c?function(){}:c,d=t.showPluginDialog,f=void 0===d?function(){}:d,p=t.closePluginDialog,h=void 0===p?function(){}:p;if(!(0,a.default)(t))return console.warn("".concat(e.pluginName," -> \u7f3a\u5931\u63d2\u4ef6\u5fc5\u987b\u63d0\u4f9b\u53c2\u6570\uff01")),null;var m=null;return n&&n[e.pluginName]&&(m=n[e.pluginName]),r.default.createElement(i.default,{onConfirm:(0,o.default)(e,u),renderData:m,siteData:s,showPluginDialog:(0,o.default)(e,f),closePluginDialog:(0,o.default)(e,h),_pluginInfo:l({},e)})},pluginInfo:l({},e)}};var r=s(n("q1tI")),i=s(n("I1Go")),o=s(n("WDfI")),a=s(n("IUnV"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},b0Xh:function(e,t,r){var i;(function(){var r=!1,o=function(e){return e instanceof o?e:this instanceof o?void(this.EXIFwrapped=e):new o(e)};e.exports&&(t=e.exports=o),t.EXIF=o;var a=o.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},s=o.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},c=o.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},l=o.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},u=o.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function d(e){return!!e.exifdata}function f(e,t){function n(n){var i=p(n);e.exifdata=i||{};var a=function(e){var t=new DataView(e);r;if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;var n=2,i=e.byteLength,o=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;n<i;){if(o(t,n)){var a=t.getUint8(n+7);return a%2!==0&&(a+=1),0===a&&(a=4),m(e,n+8+a,t.getUint16(n+6+a))}n++}}(n);if(e.iptcdata=a||{},o.isXmpEnabled){var s=function(e){if(!("DOMParser"in self))return;var t=new DataView(e);r;if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;var n=2,i=e.byteLength,o=new DOMParser;for(;n<i-4;){if("http"==g(t,n,4)){var a=n-1,s=t.getUint16(n-2)-1,c=g(t,a,s),l=c.indexOf("xmpmeta>")+8,u=(c=c.substring(c.indexOf("<x:xmpmeta"),l)).indexOf("x:xmpmeta")+10;return c=c.slice(0,u)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+c.slice(u),w(o.parseFromString(c,"text/xml"))}n++}}(n);e.xmpdata=s||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))n(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),r=n.length,i=new ArrayBuffer(r),o=new Uint8Array(i),a=0;a<r;a++)o[a]=n.charCodeAt(a);return i}(e.src));else if(/^blob\:/i.test(e.src)){(a=new FileReader).onload=function(e){n(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}(e.src,(function(e){a.readAsArrayBuffer(e)}))}else{var i=new XMLHttpRequest;i.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(i.response),i=null},i.open("GET",e.src,!0),i.responseType="arraybuffer",i.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var a;(a=new FileReader).onload=function(e){n(e.target.result)},a.readAsArrayBuffer(e)}}function p(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,r=e.byteLength;n<r;){if(255!=t.getUint8(n))return!1;if(225==t.getUint8(n+1))return y(t,n+4,t.getUint16(n+2));n+=2+t.getUint16(n+2)}}var h={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function m(e,t,n){for(var r,i,o,a,s=new DataView(e),c={},l=t;l<t+n;)28===s.getUint8(l)&&2===s.getUint8(l+1)&&(a=s.getUint8(l+2))in h&&((o=s.getInt16(l+3))+5,i=h[a],r=g(s,l+5,o),c.hasOwnProperty(i)?c[i]instanceof Array?c[i].push(r):c[i]=[c[i],r]:c[i]=r),l++;return c}function v(e,t,n,r,i){var o,a,s=e.getUint16(n,!i),c={};for(a=0;a<s;a++)o=n+12*a+2,c[r[e.getUint16(o,!i)]]=b(e,o,t,n,i);return c}function b(e,t,n,r,i){var o,a,s,c,l,u,d=e.getUint16(t+2,!i),f=e.getUint32(t+4,!i),p=e.getUint32(t+8,!i)+n;switch(d){case 1:case 7:if(1==f)return e.getUint8(t+8,!i);for(o=f>4?p:t+8,a=[],c=0;c<f;c++)a[c]=e.getUint8(o+c);return a;case 2:return g(e,o=f>4?p:t+8,f-1);case 3:if(1==f)return e.getUint16(t+8,!i);for(o=f>2?p:t+8,a=[],c=0;c<f;c++)a[c]=e.getUint16(o+2*c,!i);return a;case 4:if(1==f)return e.getUint32(t+8,!i);for(a=[],c=0;c<f;c++)a[c]=e.getUint32(p+4*c,!i);return a;case 5:if(1==f)return l=e.getUint32(p,!i),u=e.getUint32(p+4,!i),(s=new Number(l/u)).numerator=l,s.denominator=u,s;for(a=[],c=0;c<f;c++)l=e.getUint32(p+8*c,!i),u=e.getUint32(p+4+8*c,!i),a[c]=new Number(l/u),a[c].numerator=l,a[c].denominator=u;return a;case 9:if(1==f)return e.getInt32(t+8,!i);for(a=[],c=0;c<f;c++)a[c]=e.getInt32(p+4*c,!i);return a;case 10:if(1==f)return e.getInt32(p,!i)/e.getInt32(p+4,!i);for(a=[],c=0;c<f;c++)a[c]=e.getInt32(p+8*c,!i)/e.getInt32(p+4+8*c,!i);return a}}function g(e,t,r){var i="";for(n=t;n<t+r;n++)i+=String.fromCharCode(e.getUint8(n));return i}function y(e,t){if("Exif"!=g(e,t,4))return!1;var n,r,i,o,d,f=t+6;if(18761==e.getUint16(f))n=!1;else{if(19789!=e.getUint16(f))return!1;n=!0}if(42!=e.getUint16(f+2,!n))return!1;var p=e.getUint32(f+4,!n);if(p<8)return!1;if((r=v(e,f,f+p,s,n)).ExifIFDPointer)for(i in o=v(e,f,f+r.ExifIFDPointer,a,n)){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[i]=u[i][o[i]];break;case"ExifVersion":case"FlashpixVersion":o[i]=String.fromCharCode(o[i][0],o[i][1],o[i][2],o[i][3]);break;case"ComponentsConfiguration":o[i]=u.Components[o[i][0]]+u.Components[o[i][1]]+u.Components[o[i][2]]+u.Components[o[i][3]]}r[i]=o[i]}if(r.GPSInfoIFDPointer)for(i in d=v(e,f,f+r.GPSInfoIFDPointer,c,n)){switch(i){case"GPSVersionID":d[i]=d[i][0]+"."+d[i][1]+"."+d[i][2]+"."+d[i][3]}r[i]=d[i]}return r.thumbnail=function(e,t,n,r){var i=function(e,t,n){var r=e.getUint16(t,!n);return e.getUint32(t+2+12*r,!n)}(e,t+n,r);if(!i)return{};if(i>e.byteLength)return{};var o=v(e,t,t+i,l,r);if(o.Compression)switch(o.Compression){case 6:if(o.JpegIFOffset&&o.JpegIFByteCount){var a=t+o.JpegIFOffset,s=o.JpegIFByteCount;o.blob=new Blob([new Uint8Array(e.buffer,a,s)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",o.Compression)}else 2==o.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return o}(e,f,p,n),r}function _(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);t["@attributes"][r.nodeName]=r.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++){var o=e.childNodes.item(i),a=o.nodeName;if(null==t[a])t[a]=_(o);else{if(null==t[a].push){var s=t[a];t[a]=[],t[a].push(s)}t[a].push(_(o))}}return t}function w(e){try{var t={};if(e.children.length>0)for(var n=0;n<e.children.length;n++){var r=e.children.item(n),i=r.attributes;for(var o in i){var a=i[o],s=a.nodeName,c=a.nodeValue;void 0!==s&&(t[s]=c)}var l=r.nodeName;if("undefined"==typeof t[l])t[l]=_(r);else{if("undefined"==typeof t[l].push){var u=t[l];t[l]=[],t[l].push(u)}t[l].push(_(r))}}else t=e.textContent;return t}catch(d){console.log(d.message)}}o.enableXmp=function(){o.isXmpEnabled=!0},o.disableXmp=function(){o.isXmpEnabled=!1},o.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)&&(d(e)?t&&t.call(e):f(e,t),!0)},o.getTag=function(e,t){if(d(e))return e.exifdata[t]},o.getIptcTag=function(e,t){if(d(e))return e.iptcdata[t]},o.getAllTags=function(e){if(!d(e))return{};var t,n=e.exifdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},o.getAllIptcTags=function(e){if(!d(e))return{};var t,n=e.iptcdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},o.pretty=function(e){if(!d(e))return"";var t,n=e.exifdata,r="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?r+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":r+=t+" : ["+n[t].length+" values]\r\n":r+=t+" : "+n[t]+"\r\n");return r},o.readFromBinaryFile=function(e){return p(e)},void 0===(i=function(){return o}.apply(t,[]))||(e.exports=i)}).call(this)},b9ng:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!1,r=0;r<t.length;r++)if(e.indexOf(t[r])>0){n=!0;break}var i=window.screen.width,o=window.screen.height;return i<500&&o<800&&(n=!0),n};t.default=r},bAjH:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return l}));n("oVuX");var r=n("uPFr"),i=[{src:"/dzq-img/jingdong.svg",name:"\u4eac\u4e1c",width:20,height:20},{src:"/dzq-img/taobao.svg",name:"\u6dd8\u5b9d",width:20,height:20},{src:"/dzq-img/tmall.svg",name:"\u5929\u732b",width:20,height:20},{src:"/dzq-img/pinduoduo.svg",name:"\u62fc\u591a\u591a",width:20,height:20},{src:"/dzq-img/youzan.svg",name:"\u6709\u8d5e",width:20,height:20}],o={emoji:"emoji",at:"at",topic:"topic",attach:"attach",redpacket:"redpacket",pay:"pay"},a="#2469f6",s=[{name:"SmilingFaceOutlined",id:o.emoji,type:r.j.emoji},{name:"AtOutlined",id:o.at,type:r.j.at},{name:"SharpOutlined",id:o.topic,type:r.j.topic},{name:"PaperClipOutlined",active:a,id:o.attach,type:r.j.file},{name:"RedPacketOutlined",active:a,id:o.redpacket,type:r.j.redPacket},{name:"GoldCoinOutlined",active:a,id:o.pay,menu:[{id:"threadpay",name:"\u5e16\u5b50\u4ed8\u8d39"},{id:"attachpay",name:"\u9644\u4ef6\u4ed8\u8d39"}],type:r.j.paid}],c=[{name:"PictureOutlinedBig",active:a,type:r.j.image},{name:"VideoOutlined",active:a,type:r.j.video,isUpload:!1,limit:1,accept:r.c.join(","),data:{type:r.d.video}},{name:"MicroOutlined",active:a,type:r.j.voice},{name:"ShoppingCartOutlined",active:a,type:r.j.goods},{name:"QuestionOutlined",active:a,type:r.j.reward},{name:"VoteOutlined",active:a,type:r.j.vote},{name:"AnonymityOutlined",active:a,type:r.j.anonymity}],l=[{name:"\u5e16\u5b50\u4ed8\u8d39",type:r.j.paidPost},{name:"\u9644\u4ef6\u4ed8\u8d39",type:r.j.paidAttachment}];r.j.saveDraft,r.j.abandonDraft},bWFh:function(e,t,n){"use strict";var r=n("I+eb"),i=n("2oRo"),o=n("lMq5"),a=n("busE"),s=n("8YOa"),c=n("ImZN"),l=n("GarU"),u=n("hh1v"),d=n("0Dky"),f=n("HH4o"),p=n("1E5z"),h=n("cVYH");e.exports=function(e,t,n){var m=-1!==e.indexOf("Map"),v=-1!==e.indexOf("Weak"),b=m?"set":"add",g=i[e],y=g&&g.prototype,_=g,w={},O=function(e){var t=y[e];a(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(v&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!u(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(o(e,"function"!=typeof g||!(v||y.forEach&&!d((function(){(new g).entries().next()})))))_=n.getConstructor(t,e,m,b),s.REQUIRED=!0;else if(o(e,!0)){var x=new _,S=x[b](v?{}:-0,1)!=x,j=d((function(){x.has(1)})),E=f((function(e){new g(e)})),T=!v&&d((function(){for(var e=new g,t=5;t--;)e[b](t,t);return!e.has(-0)}));E||((_=t((function(t,n){l(t,_,e);var r=h(new g,t,_);return void 0!=n&&c(n,r[b],{that:r,AS_ENTRIES:m}),r}))).prototype=y,y.constructor=_),(j||T)&&(O("delete"),O("has"),m&&O("get")),(T||S)&&O(b),v&&y.clear&&delete y.clear}return w[e]=_,r({global:!0,forced:_!=g},w),p(_,e),v||n.setStrong(_,e,m),_}},bfFJ:function(e,t,n){"use strict";var r=n("nKUr"),i=n("q1tI"),o=n.n(i),a="_2FfH8y4zGiYzNHXGQTg_ye",s=n("pGE/"),c=function(){};t.a=function(e){var t=e.children,n=e.isChoose,i=void 0===n||n,l=e.limit,u=void 0===l?1:l,d=e.accept,f=void 0===d?"*/*":d,p=e.onChange,h=void 0===p?c:p,m=e.beforeUpload,v=void 0===m?function(){return!0}:m,b=o.a.createRef(null),g=function(e){if(e.target instanceof HTMLInputElement){var t=e.target.files;if(!t)return;s.a.isFunction(h)&&h(t),b.current.value=null}};return i?Object(r.jsxs)("div",{onClick:function(){s.a.isFunction(v)&&v()&&b.current.click(),s.a.isFunction(v)||b.current.click()},className:a,children:[t,Object(r.jsx)("input",{style:{display:"none"},type:"file",ref:b,onChange:function(e){g(e)},multiple:u>1,accept:f})]}):t}},bihr:function(e,t,n){"use strict";var r=n("284h"),i=n("TqRt");n("07d7"),n("JfAA"),Object.defineProperty(t,"__esModule",{value:!0}),t.DialogWebLayout=void 0;var o=i(n("lwsE")),a=i(n("W8MJ")),s=i(n("7W2i")),c=i(n("a1gu")),l=i(n("Nsbk")),u=i(n("lSNA")),d=r(n("q1tI")),f=n("VTYn"),p=i(n("TSYQ")),h=i(n("mZzD")),m=i(n("MCNy")),v=i(n("5f2u"));function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var _=function(e){(0,s.default)(n,e);var t=y(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,a.default)(n,[{key:"getDialogWidth",value:function(){var e=this.props.width,t="number"===typeof e?"".concat(e,"px"):e;return"undefined"!==typeof window&&e&&parseInt(e.toString(),10)>=window.innerWidth&&(t="".concat(window.innerWidth-20,"px")),{width:t}}},{key:"render",value:function(){var e=this,t=this.context.clsPrefix,n=this.props,r=n.children,i=n.style,o=n.zIndex,a=n.attach,s=n.onClose,c=n.title,l=n.header,u=n.footer,f=n.cancelBtn,b=n.confirmBtn,y=n.confirmDisabled,_=n.confirmLoading,w=n.onCancel,O=n.type,x=n.onConfirm,S=g(g({},i),{},{zIndex:o}),j=this.props.visible?this.getDialogWidth():{},E=d.default.createElement("div",{className:(0,p.default)("".concat(t,"-modal__header"),this.props.headerClassName),style:this.props.headerStyle},l&&l,!l&&(this.props.isNew||this.props.inContext)&&d.default.createElement(d.default.Fragment,null,c,d.default.createElement(m.default,{className:"".concat(t,"-header__closeicon"),name:"CloseOutlined",size:12,onClick:function(){return s()}}))),T=d.default.createElement("div",{className:(0,p.default)("".concat(t,"-modal__footer"),this.props.footerClassName),style:this.props.footerStyle},u&&u,!u&&(this.props.isNew||this.props.inContext)&&d.default.createElement(d.default.Fragment,null,"confirm"===O&&d.default.createElement(v.default,{className:"".concat(t,"-modal_cancel"),onClick:function(){return w()}},f),d.default.createElement(v.default,{type:"primary",disabled:y,loading:_,onClick:function(){return x()}},b)));l||this.props.isNew||(E=null),u||this.props.isNew||(T=null);var k=d.default.createElement("div",{className:(0,p.default)("".concat(t,"-modal"),{"is-active":this.props.visible},this.props.className),style:S},d.default.createElement("div",{className:(0,p.default)("".concat(t,"-modal__overlay"),{"animated animated-fadeIn":this.props.visible,"animated animated-fadeOut":!this.props.visible}),style:this.props.maskStyle,onClick:function(){e.props.maskClosable&&e.props.onClose()}}),d.default.createElement("div",{className:(0,p.default)("".concat(t,"-modal__container"),{"animated animated-zoomIn":this.props.visible,"animated animated-zoomOut":!this.props.visible}),style:j},E,d.default.createElement("div",{className:(0,p.default)("".concat(t,"-modal__body"),this.props.bodyClassName),style:this.props.bodyStyle},r),T));return d.default.createElement(h.default,{attach:a},k)}}]),n}(d.Component);t.DialogWebLayout=_,(0,u.default)(_,"contextType",f.ConfigContext)},c162:function(e,t,n){"use strict";var r=n("67WC"),i=n("gdVl"),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){return i.apply(o(this),arguments)}))},cvf0:function(e,t,n){"use strict";var r=n("67WC").exportTypedArrayMethod,i=n("0Dky"),o=n("2oRo").Uint8Array,a=o&&o.prototype||{},s=[].toString,c=[].join;i((function(){s.call({})}))&&(s=function(){return c.call(this)});var l=a.toString!=s;r("toString",s,l)},d6cI:function(e,t){var n=1/0,r=Math.abs,i=Math.pow,o=Math.floor,a=Math.log,s=Math.LN2;e.exports={pack:function(e,t,c){var l,u,d,f=new Array(c),p=8*c-t-1,h=(1<<p)-1,m=h>>1,v=23===t?i(2,-24)-i(2,-77):0,b=e<0||0===e&&1/e<0?1:0,g=0;for((e=r(e))!=e||e===n?(u=e!=e?1:0,l=h):(l=o(a(e)/s),e*(d=i(2,-l))<1&&(l--,d*=2),(e+=l+m>=1?v/d:v*i(2,1-m))*d>=2&&(l++,d/=2),l+m>=h?(u=0,l=h):l+m>=1?(u=(e*d-1)*i(2,t),l+=m):(u=e*i(2,m-1)*i(2,t),l=0));t>=8;f[g++]=255&u,u/=256,t-=8);for(l=l<<t|u,p+=t;p>0;f[g++]=255&l,l/=256,p-=8);return f[--g]|=128*b,f},unpack:function(e,t){var r,o=e.length,a=8*o-t-1,s=(1<<a)-1,c=s>>1,l=a-7,u=o-1,d=e[u--],f=127&d;for(d>>=7;l>0;f=256*f+e[u],u--,l-=8);for(r=f&(1<<-l)-1,f>>=-l,l+=t;l>0;r=256*r+e[u],u--,l-=8);if(0===f)f=1-c;else{if(f===s)return r?NaN:d?-1/0:n;r+=i(2,t),f-=c}return(d?-1:1)*r*i(2,f-t)}}},dJxt:function(e,t){function n(e,t){for(var n in e)t[n]=e[n]}function r(e,t){var r=e.prototype;if(Object.create){var i=Object.create(t.prototype);r.__proto__=i}if(!(r instanceof t)){function o(){}o.prototype=t.prototype,n(r,o=new o),e.prototype=r=o}r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}var i={},o=i.ELEMENT_NODE=1,a=i.ATTRIBUTE_NODE=2,s=i.TEXT_NODE=3,c=i.CDATA_SECTION_NODE=4,l=i.ENTITY_REFERENCE_NODE=5,u=i.ENTITY_NODE=6,d=i.PROCESSING_INSTRUCTION_NODE=7,f=i.COMMENT_NODE=8,p=i.DOCUMENT_NODE=9,h=i.DOCUMENT_TYPE_NODE=10,m=i.DOCUMENT_FRAGMENT_NODE=11,v=i.NOTATION_NODE=12,b={},g={},y=(b.INDEX_SIZE_ERR=(g[1]="Index size error",1),b.DOMSTRING_SIZE_ERR=(g[2]="DOMString size error",2),b.HIERARCHY_REQUEST_ERR=(g[3]="Hierarchy request error",3)),_=(b.WRONG_DOCUMENT_ERR=(g[4]="Wrong document",4),b.INVALID_CHARACTER_ERR=(g[5]="Invalid character",5),b.NO_DATA_ALLOWED_ERR=(g[6]="No data allowed",6),b.NO_MODIFICATION_ALLOWED_ERR=(g[7]="No modification allowed",7),b.NOT_FOUND_ERR=(g[8]="Not found",8)),w=(b.NOT_SUPPORTED_ERR=(g[9]="Not supported",9),b.INUSE_ATTRIBUTE_ERR=(g[10]="Attribute in use",10));b.INVALID_STATE_ERR=(g[11]="Invalid state",11),b.SYNTAX_ERR=(g[12]="Syntax error",12),b.INVALID_MODIFICATION_ERR=(g[13]="Invalid modification",13),b.NAMESPACE_ERR=(g[14]="Invalid namespace",14),b.INVALID_ACCESS_ERR=(g[15]="Invalid access",15);function O(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,g[e]),this.message=g[e],Error.captureStackTrace&&Error.captureStackTrace(this,O);return n.code=e,t&&(this.message=this.message+": "+t),n}function x(){}function S(e,t){this._node=e,this._refresh=t,j(this)}function j(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);re(e,"length",r.length),n(r,e),e._inc=t}}function E(){}function T(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function k(e,t,n,r){if(r?t[T(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(r&&N(i,e,r),function(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(i,e,n))}}function C(e,t,n){var r=T(t,n);if(!(r>=0))throw O(_,new Error(e.tagName+"@"+n));for(var i=t.length-1;r<i;)t[r]=t[++r];if(t.length=i,e){var o=e.ownerDocument;o&&(N(o,e,n),n.ownerElement=null)}}function A(e){if(this._features={},e)for(var t in e)this._features=e[t]}function M(){}function P(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function R(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(R(e,t))return!0}while(e=e.nextSibling)}function L(){}function N(e,t,n,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function D(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var i=t.firstChild,o=0;i;)r[o++]=i,i=i.nextSibling;r.length=o}}}function I(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,D(e.ownerDocument,e),t}function B(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===m){var i=t.firstChild;if(null==i)return t;var o=t.lastChild}else i=o=t;var a=n?n.previousSibling:e.lastChild;i.previousSibling=a,o.nextSibling=n,a?a.nextSibling=i:e.firstChild=i,null==n?e.lastChild=o:n.previousSibling=o;do{i.parentNode=e}while(i!==o&&(i=i.nextSibling));return D(e.ownerDocument||e,e),t.nodeType==m&&(t.firstChild=t.lastChild=null),t}function H(){this._nsMap={}}function U(){}function q(){}function V(){}function F(){}function W(){}function z(){}function X(){}function Y(){}function K(){}function G(){}function Q(){}function Z(){}function J(e,t){var n=[],r=9==this.nodeType?this.documentElement:this,i=r.prefix,o=r.namespaceURI;if(o&&null==i&&null==(i=r.lookupPrefix(o)))var a=[{namespace:o,prefix:null}];return ee(this,n,e,t,a),n.join("")}function $(e,t,n){var r=e.prefix||"",i=e.namespaceURI;if(!r&&!i)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var o=n.length;o--;){var a=n[o];if(a.prefix==r)return a.namespace!=i}return!0}function ee(e,t,n,r,i){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case o:i||(i=[]);i.length;var u=e.attributes,v=u.length,b=e.firstChild,g=e.tagName;n="http://www.w3.org/1999/xhtml"===e.namespaceURI||n,t.push("<",g);for(var y=0;y<v;y++){"xmlns"==(_=u.item(y)).prefix?i.push({prefix:_.localName,namespace:_.value}):"xmlns"==_.nodeName&&i.push({prefix:"",namespace:_.value})}for(y=0;y<v;y++){var _;if($(_=u.item(y),0,i)){var w=_.prefix||"",O=_.namespaceURI,x=w?" xmlns:"+w:" xmlns";t.push(x,'="',O,'"'),i.push({prefix:w,namespace:O})}ee(_,t,n,r,i)}if($(e,0,i)){w=e.prefix||"",O=e.namespaceURI,x=w?" xmlns:"+w:" xmlns";t.push(x,'="',O,'"'),i.push({prefix:w,namespace:O})}if(b||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(g)){if(t.push(">"),n&&/^script$/i.test(g))for(;b;)b.data?t.push(b.data):ee(b,t,n,r,i),b=b.nextSibling;else for(;b;)ee(b,t,n,r,i),b=b.nextSibling;t.push("</",g,">")}else t.push("/>");return;case p:case m:for(b=e.firstChild;b;)ee(b,t,n,r,i),b=b.nextSibling;return;case a:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,P),'"');case s:return t.push(e.data.replace(/[<&]/g,P));case c:return t.push("<![CDATA[",e.data,"]]>");case f:return t.push("\x3c!--",e.data,"--\x3e");case h:var S=e.publicId,j=e.systemId;if(t.push("<!DOCTYPE ",e.name),S)t.push(' PUBLIC "',S),j&&"."!=j&&t.push('" "',j),t.push('">');else if(j&&"."!=j)t.push(' SYSTEM "',j,'">');else{var E=e.internalSubset;E&&t.push(" [",E,"]"),t.push(">")}return;case d:return t.push("<?",e.target," ",e.data,"?>");case l:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function te(e,t,n){var r;switch(t.nodeType){case o:(r=t.cloneNode(!1)).ownerDocument=e;case m:break;case a:n=!0}if(r||(r=t.cloneNode(!1)),r.ownerDocument=e,r.parentNode=null,n)for(var i=t.firstChild;i;)r.appendChild(te(e,i,n)),i=i.nextSibling;return r}function ne(e,t,n){var r=new t.constructor;for(var i in t){var s=t[i];"object"!=typeof s&&s!=r[i]&&(r[i]=s)}switch(t.childNodes&&(r.childNodes=new x),r.ownerDocument=e,r.nodeType){case o:var c=t.attributes,l=r.attributes=new E,u=c.length;l._ownerElement=r;for(var d=0;d<u;d++)r.setAttributeNode(ne(e,c.item(d),!0));break;case a:n=!0}if(n)for(var f=t.firstChild;f;)r.appendChild(ne(e,f,n)),f=f.nextSibling;return r}function re(e,t,n){e[t]=n}O.prototype=Error.prototype,n(b,O),x.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)ee(this[r],n,e,t);return n.join("")}},S.prototype.item=function(e){return j(this),this[e]},r(S,x),E.prototype={length:0,item:x.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new O(w);var n=this.getNamedItem(e.nodeName);return k(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new O(w);return t=this.getNamedItemNS(e.namespaceURI,e.localName),k(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return C(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return C(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},A.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new L;if(r.implementation=this,r.childNodes=new x,r.doctype=n,n&&r.appendChild(n),t){var i=r.createElementNS(e,t);r.appendChild(i)}return r},createDocumentType:function(e,t,n){var r=new z;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},M.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return B(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return I(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return ne(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==s&&e.nodeType==s?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=t.nodeType==a?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==a?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},n(i,M),n(i,M.prototype),L.prototype={nodeName:"#document",nodeType:p,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==m){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return null==this.documentElement&&e.nodeType==o&&(this.documentElement=e),B(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),I(this,e)},importNode:function(e,t){return te(this,e,t)},getElementById:function(e){var t=null;return R(this.documentElement,(function(n){if(n.nodeType==o&&n.getAttribute("id")==e)return t=n,!0})),t},createElement:function(e){var t=new H;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new x,(t.attributes=new E)._ownerElement=t,t},createDocumentFragment:function(){var e=new G;return e.ownerDocument=this,e.childNodes=new x,e},createTextNode:function(e){var t=new V;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new F;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new W;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new Q;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new U;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new K;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new H,r=t.split(":"),i=n.attributes=new E;return n.childNodes=new x,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new U,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},r(L,M),H.prototype={nodeType:o,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===m?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t),r=e.lastChild}return r=e.lastChild,t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,D(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new S(this,(function(t){var n=[];return R(t,(function(r){r===t||r.nodeType!=o||"*"!==e&&r.tagName!=e||n.push(r)})),n}))},getElementsByTagNameNS:function(e,t){return new S(this,(function(n){var r=[];return R(n,(function(i){i===n||i.nodeType!==o||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||r.push(i)})),r}))}},L.prototype.getElementsByTagName=H.prototype.getElementsByTagName,L.prototype.getElementsByTagNameNS=H.prototype.getElementsByTagNameNS,r(H,M),U.prototype.nodeType=a,r(U,M),q.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(g[y])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},r(q,M),V.prototype={nodeName:"#text",nodeType:s,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},r(V,q),F.prototype={nodeName:"#comment",nodeType:f},r(F,q),W.prototype={nodeName:"#cdata-section",nodeType:c},r(W,q),z.prototype.nodeType=h,r(z,M),X.prototype.nodeType=v,r(X,M),Y.prototype.nodeType=u,r(Y,M),K.prototype.nodeType=l,r(K,M),G.prototype.nodeName="#document-fragment",G.prototype.nodeType=m,r(G,M),Q.prototype.nodeType=d,r(Q,M),Z.prototype.serializeToString=function(e,t,n){return J.call(e,t,n)},M.prototype.toString=J;try{if(Object.defineProperty){function ie(e){switch(e.nodeType){case o:case m:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(ie(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(S.prototype,"length",{get:function(){return j(this),this.$$length}}),Object.defineProperty(M.prototype,"textContent",{get:function(){return ie(this)},set:function(e){switch(this.nodeType){case o:case m:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),re=function(e,t,n){e["$$"+t]=n}}}catch(oe){}t.DOMImplementation=A,t.XMLSerializer=Z},dOgj:function(e,t,n){"use strict";var r=n("I+eb"),i=n("2oRo"),o=n("g6v/"),a=n("iqeF"),s=n("67WC"),c=n("Yhre"),l=n("GarU"),u=n("XGwC"),d=n("kRJp"),f=n("UMSQ"),p=n("CyXQ"),h=n("GC2F"),m=n("wE6v"),v=n("UTVS"),b=n("9d/t"),g=n("hh1v"),y=n("fHMY"),_=n("0rvr"),w=n("JBy8").f,O=n("oHi+"),x=n("tycR").forEach,S=n("JiZb"),j=n("m/L8"),E=n("Bs8V"),T=n("afO8"),k=n("cVYH"),C=T.get,A=T.set,M=j.f,P=E.f,R=Math.round,L=i.RangeError,N=c.ArrayBuffer,D=c.DataView,I=s.NATIVE_ARRAY_BUFFER_VIEWS,B=s.TYPED_ARRAY_TAG,H=s.TypedArray,U=s.TypedArrayPrototype,q=s.aTypedArrayConstructor,V=s.isTypedArray,F="BYTES_PER_ELEMENT",W="Wrong length",z=function(e,t){for(var n=0,r=t.length,i=new(q(e))(r);r>n;)i[n]=t[n++];return i},X=function(e,t){M(e,t,{get:function(){return C(this)[t]}})},Y=function(e){var t;return e instanceof N||"ArrayBuffer"==(t=b(e))||"SharedArrayBuffer"==t},K=function(e,t){return V(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},G=function(e,t){return K(e,t=m(t,!0))?u(2,e[t]):P(e,t)},Q=function(e,t,n){return!(K(e,t=m(t,!0))&&g(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?M(e,t,n):(e[t]=n.value,e)};o?(I||(E.f=G,j.f=Q,X(U,"buffer"),X(U,"byteOffset"),X(U,"byteLength"),X(U,"length")),r({target:"Object",stat:!0,forced:!I},{getOwnPropertyDescriptor:G,defineProperty:Q}),e.exports=function(e,t,n){var o=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",c="get"+e,u="set"+e,m=i[s],v=m,b=v&&v.prototype,j={},E=function(e,t){M(e,t,{get:function(){return function(e,t){var n=C(e);return n.view[c](t*o+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=C(e);n&&(r=(r=R(r))<0?0:r>255?255:255&r),i.view[u](t*o+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};I?a&&(v=t((function(e,t,n,r){return l(e,v,s),k(g(t)?Y(t)?void 0!==r?new m(t,h(n,o),r):void 0!==n?new m(t,h(n,o)):new m(t):V(t)?z(v,t):O.call(v,t):new m(p(t)),e,v)})),_&&_(v,H),x(w(m),(function(e){e in v||d(v,e,m[e])})),v.prototype=b):(v=t((function(e,t,n,r){l(e,v,s);var i,a,c,u=0,d=0;if(g(t)){if(!Y(t))return V(t)?z(v,t):O.call(v,t);i=t,d=h(n,o);var m=t.byteLength;if(void 0===r){if(m%o)throw L(W);if((a=m-d)<0)throw L(W)}else if((a=f(r)*o)+d>m)throw L(W);c=a/o}else c=p(t),i=new N(a=c*o);for(A(e,{buffer:i,byteOffset:d,byteLength:a,length:c,view:new D(i)});u<c;)E(e,u++)})),_&&_(v,H),b=v.prototype=y(U)),b.constructor!==v&&d(b,"constructor",v),B&&d(b,B,s),j[s]=v,r({global:!0,forced:v!=m,sham:!I},j),F in v||d(v,F,o),F in b||d(b,F,o),S(s)}):e.exports=function(){}},dQ0f:function(e,t,n){"use strict";n("R5XZ");t.a=function(e,t){var n=null;return function(){var r=arguments,i=this;n||(n=setTimeout((function(){e.apply(i,r),n=null}),t))}}},dhkc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadioViewAdapter=void 0;t.RadioViewAdapter=function(){return n("4zmG").RadioWebLayout}},dkxo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e instanceof Uint8Array?e:new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0)},i=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,r(e));try{return decodeURIComponent(escape(t))}catch(n){}return t},o=function(e,t){void 0===t&&(t=0);var n=(e=r(e))[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},a=function e(t,n){return void 0===n&&(n=0),(t=r(t)).length-n<10||"ID3"!==i(t.subarray(n,n+3))?n:e(t,n+=o(t,n))},s={aac:function(e){var t=a(e);return e.length>=t+2&&255===(255&e[t])&&224===(224&e[t+1])&&16===(22&e[t+1])},mp3:function(e){var t=a(e);return e.length>=t+2&&255===(255&e[t])&&224===(224&e[t+1])&&2===(6&e[t+1])},webm:function(e){return e.length>=4&&26===(255&e[0])&&69===(255&e[1])&&223===(255&e[2])&&163===(255&e[3])},mp4:function(e){return e.length>=8&&/^(f|s)typ$/.test(i(e.subarray(4,8)))&&!/^ftyp3g$/.test(i(e.subarray(4,10)))},"3gp":function(e){return e.length>=10&&/^ftyp3g$/.test(i(e.subarray(4,10)))},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){return e.length>=4&&/^fLaC$/.test(i(e.subarray(0,4)))},ogg:function(e){return e.length>=4&&/^OggS$/.test(i(e.subarray(0,4)))}},c=Object.keys(s).filter((function(e){return"ts"!==e})).concat("ts");c.forEach((function(e){var t=s[e];s[e]=function(e){return t(r(e))}}));t.detectContainerForBytes=function(e){e=r(e);for(var t=0;t<c.length;t++){var n=c[t];if(s[n](e))return n}return""},t.getId3Offset=a,t.id3Size=o,t.isLikely=s,t.isLikelyFmp4MediaSegment=function(e){e=r(e);for(var t=0;t<e.length;){var n=(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0;if("moof"===i(e.subarray(t+4,t+8)))return!0;0===n||n+t>e.length?t=e.length:t+=n}return!1}},eCtc:function(e,t,n){"use strict";var r=n("TqRt");n("ma9I"),n("pjDv"),n("4mDm"),n("sMBO"),n("07d7"),n("YGK4"),n("PKPk"),n("3bBZ"),Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxGroup=function(e){var t=e.value,n=e.defaultValue,r=void 0===n?[]:n,o=e.onChange,f=void 0===o?l.noop:o,h=e.disabled,m=void 0!==h&&h,v=e.type,b=e.block,g=e.className,y=e.style,_=e.children,w=(0,u.useDefault)(t,r,f),O=(0,a.default)(w,2),x=O[0],S=O[1],j=new Set(x||[]),E={inject:function(e){if(e.radio)return e;if("boolean"===typeof e.checked)return e;var t=e.name;return"undefined"===typeof t?(console.warn('<Checkbox> managed by <CheckboxGroup> must include the "name" prop'),e):p(p({},e),{},{type:v,block:b,checked:j.has(t),disabled:e.disabled||m,onChange:function(n,r){if("function"!==typeof e.onChange){if("function"===typeof S){var o=n?[].concat((0,i.default)(x),[t]):(j.delete(t),Array.from(j));S(o,r)}}else e.onChange(n,r)}})}};return s.default.createElement("div",{className:(0,c.default)("tea-checkbox-group",g,{"tea-checkbox-group--outline":"button"===v}),style:y},s.default.createElement(d.CheckContext.Provider,{value:E},_))};var i=r(n("RIqP")),o=r(n("lSNA")),a=r(n("J4zp")),s=r(n("q1tI")),c=r(n("TSYQ")),l=n("AItd"),u=n("0UJW"),d=n("uafh");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},eHcb:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("4mDm"),n("07d7"),n("5s+n"),n("PKPk"),n("3bBZ"),n("Kz25");var r=n("b0Xh"),i=n.n(r),o=n("9Xmw");function a(e){return new Promise((function(t){try{var n=new Image;n.src=window.URL.createObjectURL(e),n.onerror=function(){return t(e)},n.onload=function(){Object(o.a)().then((function(r){i.a.getData(n,(function(){var o=i.a.getTag(this,"Orientation");if(3!==o&&6!==o&&8!==o)return t(e);var a=document.createElement("canvas"),s=a.getContext("2d");switch(o){case 3:a.width=n.width,a.height=n.height,s.rotate(180*Math.PI/180),s.drawImage(n,-n.width,-n.height,n.width,n.height);break;case 6:r?(a.height=n.height,a.width=n.width,s.drawImage(n,0,0)):(a.width=n.height,a.height=n.width,s.rotate(90*Math.PI/180),s.drawImage(n,0,-n.height,n.width,n.height));break;case 8:a.width=n.height,a.height=n.width,s.rotate(-90*Math.PI/180),s.drawImage(n,-n.width,0,n.width,n.height)}a.toBlob((function(e){return t(e)}),"image/jpeg",.92)}))}))}}catch(r){console.error(r),t(e)}}))}},eUBB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebAdapter=void 0;t.WebAdapter={}},emxO:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n("oVuX");var r=n("lSNA"),i=n.n(r),o=n("nKUr"),a=n("QILm"),s=n.n(a),c=(n("q1tI"),n("lT1C")),l=n("uPFr"),u=n("StJS");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){var t=e.onChange,n=e.onComplete,r=e.fileList,a=e.className,f=s()(e,["onChange","onComplete","fileList","className"]),p={type:l.d.image};return Object(o.jsx)(c.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:"dzq-post-image-upload ".concat(a),listType:"card",btnText:"\u4e0a\u4f20\u56fe\u7247",data:p,limit:9,wxChooseImage:u.a,accept:l.b.join(","),onChange:t,onComplete:n,fileList:r},f))}},"f+Ey":function(e,t){e.exports={toUnsigned:function(e){return e>>>0},toHexString:function(e){return("00"+e.toString(16)).slice(-2)}}},f3qo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("S1Q7").WebLayout}});t.viewAdapter=r},g2LC:function(e,t){e.exports=function(e){if(!e)return!1;var t=n.call(e);return"[object Function]"===t||"function"===typeof e&&"[object RegExp]"!==t||"undefined"!==typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var n=Object.prototype.toString},gWAJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxViewAdapter=void 0;t.CheckboxViewAdapter=function(){return n("rQI+").CheckboxWebLayout}},gcCN:function(e,t){var n=Math.pow(2,32);e.exports=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},i=12;0===r.version?(r.earliestPresentationTime=t.getUint32(i),r.firstOffset=t.getUint32(i+4),i+=8):(r.earliestPresentationTime=t.getUint32(i)*n+t.getUint32(i+4),r.firstOffset=t.getUint32(i+8)*n+t.getUint32(i+12),i+=16),i+=2;var o=t.getUint16(i);for(i+=2;o>0;i+=12,o--)r.references.push({referenceType:(128&e[i])>>>7,referencedSize:2147483647&t.getUint32(i),subsegmentDuration:t.getUint32(i+4),startsWithSap:!!(128&e[i+8]),sapType:(112&e[i+8])>>>4,sapDeltaTime:268435455&t.getUint32(i+8)});return r}},gvgV:function(e,t,n){"use strict";var r=n("67WC"),i=n("TWQb").includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},gzjk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressViewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("oWYc").ProgressWebLayout}});t.ProgressViewAdapter=r},h29V:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("lwsE")),o=r(n("W8MJ")),a=r(n("7W2i")),s=r(n("a1gu")),c=r(n("Nsbk")),l=r(n("lSNA")),u=r(n("q1tI")),d=n("f3qo"),f=n("U5R6"),p=n("GDuN"),h=n("AItd");function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var v=function(e){(0,a.default)(n,e);var t=m(n);function n(e){return(0,i.default)(this,n),t.call(this,e)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.RenderComponent;return u.default.createElement(e,this.props)}}]),n}((0,p.baseComponentFactory)({viewAdapter:d.viewAdapter,logicalAdapter:f.logicalAdapter}));t.default=v,(0,l.default)(v,"defaultProps",{controls:!0,autoplay:!1,loop:!1,muted:!1,initialTime:0,onReady:h.noop,onPlay:h.noop,onPause:h.noop,onEnded:h.noop,onError:h.noop,onTimeUpdate:h.noop,onFullscreenChange:h.noop,onProgress:h.noop,onLoadedMetaData:h.noop,onWaiting:h.noop,singleton:!0})},hIRe:function(e,t,n){"use strict";n.d(t,"a",(function(){return J})),n.d(t,"b",(function(){return Q})),n.d(t,"c",(function(){return Z}));var r=n("X8+f"),i=n.n(r),o=n("vgmO"),a=n.n(o),s=n("hQev"),c=n.n(s),l=n("KdhP"),u=function(e){return!!e&&"object"===typeof e},d=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(t,n){return"object"!==typeof n||Object.keys(n).forEach((function(r){Array.isArray(t[r])&&Array.isArray(n[r])?t[r]=t[r].concat(n[r]):u(t[r])&&u(n[r])?t[r]=e(t[r],n[r]):t[r]=n[r]})),t}),{})},f=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},p=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},h="INVALID_NUMBER_OF_PERIOD",m="DASH_EMPTY_MANIFEST",v="DASH_INVALID_XML",b="NO_BASE_URL",g="SEGMENT_TIME_UNSPECIFIED",y="UNSUPPORTED_UTC_TIMING_SCHEME",_=function(e){var t=e.baseUrl,n=void 0===t?"":t,r=e.source,o=void 0===r?"":r,a=e.range,s=void 0===a?"":a,c=e.indexRange,l=void 0===c?"":c,u={uri:o,resolvedUri:i()(n||"",o)};if(s||l){var d=(s||l).split("-"),f=parseInt(d[0],10),p=parseInt(d[1],10);u.byterange={length:p-f+1,offset:f}}return u},w=function(e){var t=e.offset+e.length-1;return e.offset+"-"+t},O={static:function(e){var t=e.duration,n=e.timescale,r=void 0===n?1:n,i=e.sourceDuration;return{start:0,end:Math.ceil(i/(t/r))}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,r=e.availabilityStartTime,i=e.timescale,o=void 0===i?1:i,a=e.duration,s=e.start,c=void 0===s?0:s,l=e.minimumUpdatePeriod,u=void 0===l?0:l,d=e.timeShiftBufferDepth,f=void 0===d?1/0:d,p=(t+n)/1e3,h=r+c,m=p+u-h,v=Math.ceil(m*o/a),b=Math.floor((p-h-f)*o/a),g=Math.floor((p-h)*o/a);return{start:Math.max(0,b),end:Math.min(v,g)}}},x=function(e){var t=e.type,n=void 0===t?"static":t,r=e.duration,i=e.timescale,o=void 0===i?1:i,a=e.sourceDuration,s=O[n](e),c=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n}(s.start,s.end).map(function(e){return function(t,n){var r=e.duration,i=e.timescale,o=void 0===i?1:i,a=e.periodIndex,s=e.startNumber;return{number:(void 0===s?1:s)+t,duration:r/o,timeline:a,time:n*r}}}(e));if("static"===n){var l=c.length-1;c[l].duration=a-r/o*l}return c},S=function(e){var t=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,i=e.sourceDuration,o=e.indexRange,a=void 0===o?"":o,s=e.duration;if(!t)throw new Error(b);var c=_({baseUrl:t,source:r.sourceURL,range:r.range}),l=_({baseUrl:t,source:t,indexRange:a});if(l.map=c,s){var u=x(e);u.length&&(l.duration=u[0].duration,l.timeline=u[0].timeline)}else i&&(l.duration=i,l.timeline=0);return l.number=0,[l]},j=function(e,t,n){for(var r=e.sidx.map?e.sidx.map:null,i=e.sidx.duration,o=e.timeline||0,a=e.sidx.byterange,s=a.offset+a.length,c=t.timescale,l=t.references.filter((function(e){return 1!==e.referenceType})),u=[],d=s+t.firstOffset,f=0;f<l.length;f++){var p=t.references[f],h=p.referencedSize,m=p.subsegmentDuration,v=S({baseUrl:n,timescale:c,timeline:o,periodIndex:o,duration:m,sourceDuration:i,indexRange:d+"-"+(d+h-1)})[0];r&&(v.map=r),u.push(v),d+=h}return e.segments=u,e},E=function(e){var t;return(t=e.reduce((function(e,t){var n,r=t.attributes.id+(t.attributes.lang||"");return e[r]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[r].segments).push.apply(n,t.segments),t.attributes.contentProtection&&(e[r].attributes.contentProtection=t.attributes.contentProtection)):e[r]=t,e}),{}),Object.keys(t).map((function(e){return t[e]}))).map((function(e){var t,n;return e.discontinuityStarts=(t=e.segments,n="discontinuity",t.reduce((function(e,t,r){return t[n]&&e.push(r),e}),[])),e}))},T=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e){var r=e[n];if(r.sidx){var i=r.sidx.uri+"-"+w(r.sidx.byterange),o=t[i]&&t[i].sidx;r.sidx&&o&&j(r,o,r.sidx.resolvedUri)}}return e},k=function(e){var t,n=e.attributes,r=e.segments,i=e.sidx,o={attributes:(t={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1};return n.contentProtection&&(o.contentProtection=n.contentProtection),i&&(o.sidx=i),o},C=function(e){var t,n=e.attributes,r=e.segments;"undefined"===typeof r&&(r=[{uri:n.baseUrl,timeline:n.periodIndex,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var i=((t={NAME:n.id,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,t);return n.codecs&&(i.CODECS=n.codecs),{attributes:i,uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:n.baseUrl||"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1}},A=function(e){var t,n=e.attributes,r=e.segments,i=e.sidx,o={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1};return n.contentProtection&&(o.contentProtection=n.contentProtection),i&&(o.sidx=i),o},M=function(e,t,n){var r;if(void 0===n&&(n={}),!e.length)return{};var i=e[0].attributes,o=i.sourceDuration,a=i.type,s=void 0===a?"static":a,c=i.suggestedPresentationDelay,l=i.minimumUpdatePeriod,u=E(e.filter((function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType}))).map(A),d=E(e.filter((function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType}))),f=e.filter((function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType})),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(r={AUDIO:{},VIDEO:{}},r["CLOSED-CAPTIONS"]={},r.SUBTITLES={},r),uri:"",duration:o,playlists:T(u,n)};return l>=0&&(p.minimumUpdatePeriod=1e3*l),t&&(p.locations=t),"dynamic"===s&&(p.suggestedPresentationDelay=c),d.length&&(p.mediaGroups.AUDIO.audio=function(e,t){var n;void 0===t&&(t={});var r=e.reduce((function(e,r){var i=r.attributes.role&&r.attributes.role.value||"",o=r.attributes.lang||"",a="main";if(o){var s=i?" ("+i+")":"";a=""+r.attributes.lang+s}return e[a]&&e[a].playlists[0].attributes.BANDWIDTH>r.attributes.bandwidth||(e[a]={language:o,autoselect:!0,default:"main"===i,playlists:T([k(r)],t),uri:""},"undefined"===typeof n&&"main"===i&&((n=r).default=!0)),e}),{});return n||(r[Object.keys(r)[0]].default=!0),r}(d,n)),f.length&&(p.mediaGroups.SUBTITLES.subs=function(e,t){return void 0===t&&(t={}),e.reduce((function(e,n){var r=n.attributes.lang||"text";return e[r]||(e[r]={language:r,default:!1,autoselect:!1,playlists:T([C(n)],t),uri:""}),e}),{})}(f,n)),p},P=function(e,t,n){var r=e.NOW,i=e.clientOffset,o=e.availabilityStartTime,a=e.timescale,s=void 0===a?1:a,c=e.start,l=void 0===c?0:c,u=e.minimumUpdatePeriod,d=(r+i)/1e3+(void 0===u?0:u)-(o+l);return Math.ceil((d*s-t)/n)},R=function(e,t){for(var n=e.type,r=void 0===n?"static":n,i=e.minimumUpdatePeriod,o=void 0===i?0:i,a=e.media,s=void 0===a?"":a,c=e.sourceDuration,l=e.timescale,u=void 0===l?1:l,d=e.startNumber,f=void 0===d?1:d,p=e.periodIndex,h=[],m=-1,v=0;v<t.length;v++){var b=t[v],g=b.d,y=b.r||0,_=b.t||0;m<0&&(m=_),_&&_>m&&(m=_);var w=void 0;if(y<0){var O=v+1;w=O===t.length?"dynamic"===r&&o>0&&s.indexOf("$Number$")>0?P(e,m,g):(c*u-m)/g:(t[O].t-m)/g}else w=y+1;for(var x=f+h.length+w,S=f+h.length;S<x;)h.push({number:S,duration:g/u,time:m,timeline:p}),m+=g,S++}return h},L=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,N=function(e,t){return e.replace(L,function(e){return function(t,n,r,i){if("$$"===t)return"$";if("undefined"===typeof e[n])return t;var o=""+e[n];return"RepresentationID"===n?o:(i=r?parseInt(i,10):1,o.length>=i?o:""+new Array(i-o.length+1).join("0")+o)}}(t))},D=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},r=e.initialization,o=void 0===r?{sourceURL:"",range:""}:r,a=_({baseUrl:e.baseUrl,source:N(o.sourceURL,n),range:o.range});return function(e,t){return e.duration||t?e.duration?x(e):R(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}(e,t).map((function(t){n.Number=t.number,n.Time=t.time;var r=N(e.media||"",n);return{uri:r,timeline:t.timeline,duration:t.duration,resolvedUri:i()(e.baseUrl||"",r),map:a,number:t.number}}))},I=function(e,t){var n=e.duration,r=e.segmentUrls,i=void 0===r?[]:r;if(!n&&!t||n&&t)throw new Error(g);var o,a=i.map((function(t){return function(e,t){var n=e.baseUrl,r=e.initialization,i=void 0===r?{}:r,o=_({baseUrl:n,source:i.sourceURL,range:i.range}),a=_({baseUrl:n,source:t.media,range:t.mediaRange});return a.map=o,a}(e,t)}));return n&&(o=x(e)),t&&(o=R(e,t)),o.map((function(e,t){if(a[t]){var n=a[t];return n.timeline=e.timeline,n.duration=e.duration,n.number=e.number,n}})).filter((function(e){return e}))},B=function(e){var t,n,r=e.attributes,i=e.segmentInfo;i.template?(n=D,t=d(r,i.template)):i.base?(n=S,t=d(r,i.base)):i.list&&(n=I,t=d(r,i.list));var o={attributes:r};if(!n)return o;var a=n(t,i.timeline);if(t.duration){var s=t,c=s.duration,l=s.timescale,u=void 0===l?1:l;t.duration=c/u}else a.length?t.duration=a.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return o.attributes=t,o.segments=a,i.base&&t.indexRange&&(o.sidx=a[0],o.segments=[]),o},H=function(e,t){return p(e.childNodes).filter((function(e){return e.tagName===t}))},U=function(e){return e.textContent.trim()},q=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=t.slice(1),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5];return 31536e3*parseFloat(r||0)+2592e3*parseFloat(i||0)+86400*parseFloat(o||0)+3600*parseFloat(a||0)+60*parseFloat(s||0)+parseFloat(c||0)},V={mediaPresentationDuration:function(e){return q(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return q(e)},suggestedPresentationDelay:function(e){return q(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return q(e)},start:function(e){return q(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?q(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},F=function(e){return e&&e.attributes?p(e.attributes).reduce((function(e,t){var n=V[t.name]||V.DEFAULT;return e[t.name]=n(t.value),e}),{}):{}},W={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},z=function(e,t){return t.length?f(e.map((function(e){return t.map((function(t){return i()(e,U(t))}))}))):e},X=function(e){var t=H(e,"SegmentTemplate")[0],n=H(e,"SegmentList")[0],r=n&&H(n,"SegmentURL").map((function(e){return d({tag:"SegmentURL"},F(e))})),i=H(e,"SegmentBase")[0],o=n||t,a=o&&H(o,"SegmentTimeline")[0],s=n||i||t,c=s&&H(s,"Initialization")[0],l=t&&F(t);l&&c?l.initialization=c&&F(c):l&&l.initialization&&(l.initialization={sourceURL:l.initialization});var u={template:l,timeline:a&&H(a,"S").map((function(e){return F(e)})),list:n&&d(F(n),{segmentUrls:r,initialization:F(c)}),base:i&&d(F(i),{initialization:F(c)})};return Object.keys(u).forEach((function(e){u[e]||delete u[e]})),u},Y=function(e,t,n){return function(r){var i=F(r),o=z(t,H(r,"BaseURL")),a=H(r,"Role")[0],s={role:F(a)},l=d(e,i,s),u=H(r,"ContentProtection").reduce((function(e,t){var n=F(t),r=W[n.schemeIdUri];if(r){e[r]={attributes:n};var i=H(t,"cenc:pssh")[0];if(i){var o=U(i),a=o&&c()(o);e[r].pssh=a}}return e}),{});Object.keys(u).length&&(l=d(l,{contentProtection:u}));var p=X(r),h=H(r,"Representation"),m=d(n,p);return f(h.map(function(e,t,n){return function(r){var i=H(r,"BaseURL"),o=z(t,i),a=d(e,F(r)),s=X(r);return o.map((function(e){return{segmentInfo:d(n,s),attributes:d(a,{baseUrl:e})}}))}}(l,o,m)))}},K=function(e,t){return function(n,r){var i=z(t,H(n,"BaseURL")),o=F(n),s=parseInt(o.id,10),c=a.a.isNaN(s)?r:s,l=d(e,{periodIndex:c}),u=H(n,"AdaptationSet"),p=X(n);return f(u.map(Y(l,i,p)))}},G=function(e){if(""===e)throw new Error(m);var t,n,r=new l.DOMParser;try{n=(t=r.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(i){}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(v);return n},Q=function(e,t){void 0===t&&(t={});var n=function(e,t){void 0===t&&(t={});var n=t,r=n.manifestUri,i=void 0===r?"":r,o=n.NOW,a=void 0===o?Date.now():o,s=n.clientOffset,c=void 0===s?0:s,l=H(e,"Period");if(!l.length)throw new Error(h);var u=H(e,"Location"),d=F(e),p=z([i],H(e,"BaseURL"));return d.sourceDuration=d.mediaPresentationDuration||0,d.NOW=a,d.clientOffset=c,u.length&&(d.locations=u.map(U)),{locations:d.locations,representationInfo:f(l.map(K(d,p)))}}(G(e),t),r=n.representationInfo.map(B);return M(r,n.locations,t.sidxMapping)},Z=function(e){return function(e){var t=H(e,"UTCTiming")[0];if(!t)return null;var n=F(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(y)}return n}(G(e))},J=j},hQev:function(e,t,n){"use strict";(function(t){var r,i=(r=n("vgmO"))&&"object"===typeof r&&"default"in r?r.default:r;e.exports=function(e){for(var n,r=(n=e,i.atob?i.atob(n):t.from(n,"base64").toString("binary")),o=new Uint8Array(r.length),a=0;a<r.length;a++)o[a]=r.charCodeAt(a);return o}}).call(this,n("HDXh").Buffer)},ii1t:function(e,t,n){var r=n("zyNV");e.exports=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),o=1&n.flags[2],a=4&n.flags[2],s=1&n.flags[1],c=2&n.flags[1],l=4&n.flags[1],u=8&n.flags[1],d=i.getUint32(4),f=8;for(o&&(n.dataOffset=i.getInt32(f),f+=4),a&&d&&(t={flags:r(e.subarray(f,f+4))},f+=4,s&&(t.duration=i.getUint32(f),f+=4),c&&(t.size=i.getUint32(f),f+=4),u&&(1===n.version?t.compositionTimeOffset=i.getInt32(f):t.compositionTimeOffset=i.getUint32(f),f+=4),n.samples.push(t),d--);d--;)t={},s&&(t.duration=i.getUint32(f),f+=4),c&&(t.size=i.getUint32(f),f+=4),l&&(t.flags=r(e.subarray(f,f+4)),f+=4),u&&(1===n.version?t.compositionTimeOffset=i.getInt32(f):t.compositionTimeOffset=i.getUint32(f),f+=4),n.samples.push(t);return n}},iqeF:function(e,t,n){var r=n("2oRo"),i=n("0Dky"),o=n("HH4o"),a=n("67WC").NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;e.exports=!a||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new s(2),1,void 0).length}))},isGe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderLogicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("RiCf").SliderWebAdapter}});t.SliderLogicalAdapter=r},jBAH:function(e,t){e.exports=function(e,t){var n,r=null;try{n=JSON.parse(e,t)}catch(i){r=i}return[r,n]}},jW6v:function(e,t,n){"use strict";var r=n("284h"),i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.hideInstance=t.WebLayout=void 0;var o=i(n("J4zp")),a=i(n("lwsE")),s=i(n("7W2i")),c=i(n("a1gu")),l=i(n("Nsbk")),u=r(n("q1tI")),d=i(n("TSYQ")),f=n("VTYn"),p=i(n("DxNY")),h=i(n("S+ZJ")),m=i(n("+Ycc")),v=i(n("4hN0")),b=i(n("b9ng")),g=i(n("i8i4"));function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var _=new(function(e){(0,s.default)(n,e);var t=y(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}(i(n("uhBA")).default)),w=function(e){var t;return{afterOpen:function(){t=document.scrollingElement.scrollTop,document.body.classList.add(e),document.body.style.top="".concat(-t,"px")},beforeClose:function(){document.body.classList.remove(e),document.scrollingElement.scrollTop=t}}}("modal-open"),O=(0,u.forwardRef)((function(e,t){var n=e.imgs,r=void 0===n?[]:n,i=e.currentUrl,a=void 0===i?"":i,s=e.visible,c=e.onClose,l=void 0===c?function(){}:c,y=e.onError,O=void 0===y?function(){return""}:y,x=u.default.useRef(null),S=(0,f.useConfig)().clsPrefix,j=u.default.useState(0),E=(0,o.default)(j,2),T=E[0],k=E[1],C=u.default.useState(!1),A=(0,o.default)(C,2),M=A[0],P=A[1],R=u.default.useState(!1),L=(0,o.default)(R,2),N=L[0],D=L[1],I=u.default.useRef(null),B=u.default.useRef(!1),H=u.default.useRef(!1);u.default.useEffect((function(){var e=function(){P(!1)},t=function(){P(!0)};return _.on("hide",e),_.on("show",t),function(){_.removeListener("hide",e),_.removeListener("show",t)}}),[]),u.default.useEffect((function(){return I.current=M?setTimeout((function(){D(!0)}),100):setTimeout((function(){D(!1)}),100),function(){clearTimeout(I.current)}}),[M]),u.default.useEffect((function(){s?(B.current=!0,w.afterOpen()):B.current&&(B.current=!1,w.beforeClose())}),[M]),u.default.useEffect((function(){var e=function(e){("boolean"!==typeof e.cancelable||e.cancelable)&&e.preventDefault()},t=function(e){("boolean"!==typeof e.cancelable||e.cancelable)&&e.preventDefault()};return"undefined"!==typeof window&&M&&(document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("toouchend",t,{passive:!1})),function(){"undefined"!==typeof window&&(document.removeEventListener("touchmove",e),document.removeEventListener("toouchend",t))}}),[M]);var U=(0,u.useCallback)((function(){P(!0)}),[r,l]),q=(0,u.useCallback)((function(){P(!1)}),[]);if((0,u.useImperativeHandle)(t,(function(){return{show:U,hide:q}}),[U,q]),(0,u.useEffect)((function(){P(s)}),[s]),(0,u.useEffect)((function(){var e=r.indexOf(a);-1===e&&(e=0),k(e)}),[a,r]),"undefined"===typeof window)return null;var V=!1;"undefined"!==typeof window&&(V=(0,b.default)());var F=function(){D(!1),setTimeout((function(){P(!1),l()}),300)};return g.default.createPortal(M&&u.default.createElement("div",{ref:x,onClick:function(e){e.stopPropagation(),e.preventDefault(),V||H.current||(P(!1),l())},className:(0,d.default)("".concat(S,"-img-previewer"),{"is-mobile":V,"is-active":N})},u.default.createElement(v.default,{imgUrls:r,currentImgIdx:T}),u.default.createElement(p.default,{imgUrls:r,currentImgIdx:T,onSwipLeft:function(){k((function(e){return e<r.length-1?e+1:e}))},onSwipRight:function(){k((function(e){return e>0?e-1:e}))},onClose:F}),u.default.createElement(m.default,{imgUrls:r,currentImgIdx:T,onSwipLeft:function(){k((function(e){return e<r.length-1?e+1:e}))},onSwipRight:function(){k((function(e){return e>0?e-1:e}))},onError:O,onClose:F,onClickLock:function(){H.current=!0},onClickUnLock:function(){H.current=!1}}),u.default.createElement(h.default,{imgUrls:r,onError:O,currentImgIdx:T,onImgClick:function(e){k(e)}})),document.getElementsByTagName("body")[0])}));t.WebLayout=O;t.hideInstance=function(){_.emit("hide")}},jZg7:function(e,t,n){"use strict";var r=n("TqRt");n("ma9I"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("pVnL")),o=r(n("lwsE")),a=r(n("W8MJ")),s=r(n("PJYZ")),c=r(n("7W2i")),l=r(n("a1gu")),u=r(n("Nsbk")),d=r(n("lSNA")),f=r(n("q1tI")),p=n("GDuN"),h=n("/8xE"),m=n("EeQS");function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var b=function(e){(0,c.default)(n,e);var t=v(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),(0,d.default)((0,s.default)(e),"setChildrenRef",(function(t){e.setState({childrenRef:t})})),(0,d.default)((0,s.default)(e),"getState",(function(){return e.state.childrenRef.state})),e}return(0,a.default)(n,[{key:"render",value:function(){var e=this.RenderComponent;return f.default.createElement(e,(0,i.default)({ref:this.setChildrenRef},this.props),this.props.children)}}]),n}((0,p.baseComponentFactory)({viewAdapter:h.ViewAdapter,logicalAdapter:m.LogicalAdapter}));t.default=b,(0,d.default)(b,"defaultProps",{onError:function(){},onPlay:function(){},onPause:function(){},onEnded:function(){},onRef:function(){},loop:!1})},jbJk:function(e,t,n){"use strict";n.r(t);n("sMBO"),n("07d7"),n("5s+n");var r=n("o0o1"),i=n.n(r),o=(n("ls82"),n("yXPU")),a=n.n(o),s=n("sho3"),c=n("AR36"),l=n.n(c),u=n("YZm+"),d=n.n(u);t.default=function(e){return new Promise(function(){var t=a()(i.a.mark((function t(r,o){var c,u,f,p,h,m,v,b,g,y,_,w,O;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=e.file,u=e.type,f=e.qcloudCos,p=e.qcloudCosBucketName,h=e.qcloudCosBucketArea,m=e.qcloudCosSignUrl,f&&"string"!==typeof c){t.next=4;break}return o("error"),t.abrupt("return");case 4:return t.next=6,n.e(86).then(n.t.bind(null,"NDg5",7));case 6:v=t.sent.default,b=c.name||"dzq-cos\u56fe\u7247\u4e0a\u4f20.jpg",g=c.size,y="public/attachments/".concat(l.a.formatDate(new Date,"YYYY/MM/DD"),"/"),_=d()((new Date).getTime()+b)+b,w=y+_,(O=new v({getAuthorization:function(){var e=a()(i.a.mark((function e(t,n){var r,a,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.getCosTmpKey)({type:u,fileSize:g,fileName:_});case 2:r=e.sent,a=r.code,c=r.data,0===a?(l=c&&c.credentials,n({TmpSecretId:l.tmpSecretId,TmpSecretKey:l.tmpSecretKey,SecurityToken:l.sessionToken,StartTime:c.startTime,ExpiredTime:c.expiredTime})):o("error");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()})).putObject({Bucket:p,Region:h,Key:w,StorageClass:"STANDARD",Body:c,onProgress:function(){}},(function(e){null===e?O.getObjectUrl({Bucket:p,Region:h,Key:w,Sign:m},function(){var e=a()(i.a.mark((function e(t,n){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=8;break}return a=n.Url,e.next=4,Object(s.updateAttachment)({type:u,cosUrl:a,fileName:b});case 4:c=e.sent,r(c),e.next=9;break;case 8:t&&o("error");case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()):e&&o("error")}));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}},jv9p:function(e,t){e.exports=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])}},kGPg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("5h7R").AudioWebLayout}});t.ViewAdapter=r},kPfF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("eUBB").WebAdapter}});t.LogicalAdapter=r},kSko:function(e,t,n){n("I+eb")({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},lGLX:function(e,t,n){"use strict";var r=n("284h"),i=n("TqRt");n("ma9I"),n("TeQF"),n("x0AG"),n("4mDm"),n("2B1R"),n("+2oP"),n("pDQq"),n("sMBO"),n("toAj"),n("07d7"),n("5s+n"),n("p532"),n("rB9j"),n("JfAA"),n("PKPk"),n("EnZy"),n("FZtP"),n("3bBZ"),n("Kz25"),Object.defineProperty(t,"__esModule",{value:!0}),t.UploadWebLayout=void 0;var o=i(n("o0o1")),a=i(n("RIqP"));n("ls82");var s=i(n("yXPU")),c=i(n("J4zp")),l=r(n("q1tI")),u=n("VTYn"),d=i(n("TSYQ")),f=n("tPP9"),p=n("//rY"),h=i(n("MCNy")),m=i(n("Jw8/"));function v(e){var t=e.children,n=e.onFile;return l.default.createElement("div",{className:"dragger",onDrop:function(e){e.preventDefault(),"function"===typeof n&&n(e.dataTransfer.files)},onDragOver:function(e){e.preventDefault()},onDragLeave:function(e){e.preventDefault()}},t)}var b=function(e){var t,n=(null===e||void 0===e||null===(t=e.toString())||void 0===t?void 0:t.toUpperCase().split("/")[1])||"",r="";switch(n=n.substr(n.lastIndexOf(".")+1)){case"XLS":case"XLSX":case"SHEET":r="xls-outlined.86ffbb304f441a3ac39d0a2b6559d119a876b992.png";break;case"DOC":case"DOCX":case"DOCUMENT":r="doc-outlined.2c3f996d6c8e141beea3a4dd2e4f92e72927241c.png";break;case"PPT":case"PPTX":case"PRESENTATION":r="ppt-outlined.c633840874bf2f06dd0dddc96f19f2698619e51e.png";break;case"RAR":case"ZIP":case"X-ZIP-COMPRESSED":r="zip-outlined.8c5d95e8746ea9a5b940a03e8f83d5b1ddba0211.png";break;case"PDF":r="pdf-outlined.e06cb6e0559e2f2abebaa07a54ff3b34b05a4165.png";break;case"TXT":case"PLAIN":r="text-outlined.3422bac383a7d71bba912db8b3912471ec2869f6.png";break;case"MP4":r="video-outlined.75403451dd41be304dfcbefd530ec1d560f978f4.png";break;case"M4A":case"MP3":case"MPEG":r="audio-outlined.d04f8b9380204fe1b1b671f59145695f56cc222d.png";break;case"PNG":case"JPEG":r="image-outlined.8aa1c2bd1fb9a0645e09136670cfb4020aa30be3.png";break;case"FORM":r="form-outlined.7edcdca23038bdd7f2b72f2b897388e5d8acb79f.png";break;default:r="file-outlined.8dafcd0a20ee70430ba1d3420e015a232a64fa05.png"}return"https://imgcache.qq.com/operation/dianshi/other/".concat(r)};function g(e){var t=e.file,n=e.listType,r=(0,l.useContext)(u.ConfigContext).clsPrefix,i=(0,d.default)("".concat(r,"-upload-list-").concat(n)),o=(0,l.useState)(t.percent||0),a=(0,c.default)(o,2),s=a[0],f=a[1];return(0,l.useEffect)((function(){setTimeout((function(){f(t.percent||0)}),0)}),[t.percent]),l.default.createElement("div",{className:"".concat(i,"-process")},l.default.createElement(h.default,{className:"".concat(i,"-process__icon"),name:"LoadingOutlined",size:20}),s>0&&l.default.createElement("span",{className:"".concat(i,"-process__text")},s,"%"))}function y(e){var t=e.listType,n=e.fileList,r=void 0===n?[]:n,i=e.onRemove,o=e.onPreview,a=e.progressRender,s=(0,l.useContext)(u.ConfigContext).clsPrefix,f=(0,d.default)("".concat(s,"-upload-list-").concat(t)),v=l.default.useState(!1),y=(0,c.default)(v,2),_=y[0],w=y[1],O=l.default.useState(null),x=(0,c.default)(O,2),S=x[0],j=x[1],E=l.default.useState([]),T=(0,c.default)(E,2),k=T[0],C=T[1],A=l.default.useRef(null);(0,l.useEffect)((function(){C(r.filter((function(e){return(0,p.isImageFileType)(null===e||void 0===e?void 0:e.type)&&(e.url||e.thumbUrl)})).map((function(e){return e.url||e.thumbUrl})))}),[r.length]);var M=function(e){i(e)},P=function(e,t){o(e),(0,p.isImageFileType)(null===e||void 0===e?void 0:e.type)&&(e.url||e.thumbUrl)&&(j(k[t]),setTimeout((function(){A.current.show()}),0))},R=r.map((function(e,n){return l.default.createElement("div",{key:e.uid,className:(0,d.default)("".concat(f,"__item"),{"is-error":"error"===e.status,"is-success":"success"===e.status})},l.default.createElement("div",{className:"".concat(f,"__info"),onClick:function(){return P(e,n)}},(0,p.isImageFileType)(e.type)&&e.thumbUrl?l.default.createElement("img",{src:e.thumbUrl,alt:e.name,className:"".concat(f,"__thumbUrl")}):l.default.createElement("img",{src:b(null===e||void 0===e?void 0:e.type),className:"".concat(f,"__icon"),alt:e.name}),l.default.createElement("div",{className:"".concat(f,"__name")},e.name),l.default.createElement("div",{className:"".concat(f,"__filesize")},(r=e.size||(null===e||void 0===e?void 0:e.fileSize))?r>1024e3?"".concat((r/1024e3).toFixed(2)," MB"):r>1024?"".concat((r/1024).toFixed(2)," KB"):"".concat(r," B"):"")),l.default.createElement("div",{className:"".concat(f,"__operate"),onClick:function(){return M(e)}},l.default.createElement(h.default,{name:"DeleteOutlined"})),"uploading"===e.status&&("function"===typeof a?l.default.createElement("div",{className:"".concat(f,"__process")},a(e)):l.default.createElement(g,{listType:t,file:e})));var r}));return"card"===t&&(R=r.map((function(e,n){return l.default.createElement("div",{key:e.uid,className:(0,d.default)("".concat(f,"__item"),{"is-error":"error"===e.status})},(0,p.isImageFileType)(e.type)&&e.thumbUrl?l.default.createElement("img",{src:e.thumbUrl,alt:e.name,className:"".concat(f,"__thumbUrl"),onClick:function(){return P(e,n)}}):l.default.createElement("div",{className:"".concat(f,"__info"),onClick:function(){return P(e,n)}},l.default.createElement("img",{src:b(null===e||void 0===e?void 0:e.type),className:"".concat(f,"__thumbUrl"),alt:e.name}),l.default.createElement("div",{className:"".concat(f,"__name")},e.name," ",e.status," ",e.percent)),"uploading"===e.status?"function"===typeof a?a(e):l.default.createElement(g,{listType:t,file:e}):l.default.createElement("div",{className:"".concat(f,"__operate"),onClick:function(){return M(e)}},l.default.createElement(h.default,{name:"DeleteOutlined"})))}))),l.default.createElement("div",{className:f},R,e.children,l.default.createElement(m.default,{visible:_,ref:A,onClose:function(){w(!1)},imgUrls:k,currentUrl:S}))}var _=function(e,t){var n=e.className,r=e.style,i=e.listType,h=e.fileList,m=e.children,b=e.multiple,g=e.accept,_=e.limit,w=e.progressRender,O=e.onChange,x=e.onPreview,S=e.beforeUpload,j=e.customRequest,E=e.wxChooseImage,T=(0,l.useContext)(u.ConfigContext).clsPrefix;h.forEach((function(e,t){var n;e.uid=null!==(n=e.uid)&&void 0!==n?n:"".concat(t,"__").concat((0,f.uuid)())}));var k=(0,l.useRef)(null),C="".concat(T,"-upload"),A=(0,d.default)(n,C,{"is-card":"card"===i}),M=(0,l.useState)(h),P=(0,c.default)(M,2),R=P[0],L=P[1],N=function(){_&&R.splice(_),R.forEach((function(e){try{e.thumbUrl=URL.createObjectURL(e.originFileObj)}catch(t){return}})),L(R),"function"===typeof O&&O(R)},D=function(){var e=(0,s.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(n=(0,a.default)(t)).map((function(e,t){var n;return e.uid=null!==(n=e.uid)&&void 0!==n?n:"".concat(t,"__").concat((0,f.uuid)()),(0,p.fileToObject)(e)})),"function"!==typeof S){e.next=8;break}return e.next=5,S(n,R);case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:R.push.apply(R,(0,a.default)(n)),N(),_&&(n=n.slice(0,_)),I(n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e){e.forEach((function(e){"function"===typeof j&&j(e,R,N).then((function(t){e.status=t?"success":"error"})).catch((function(t){e.status="error"})).finally((function(){N()}))}))},B=function(e,t){if(t)D(t);else if(e.target instanceof HTMLInputElement){var n=e.target.files;if(!n)return;D(n),k.current.value=null}},H=function(){var e=(0,s.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("trgger-file-choose-input"!==t.target.id){e.next=2;break}return e.abrupt("return");case 2:if("function"!==typeof E){e.next=9;break}return e.next=5,E();case 5:(n=e.sent)&&n instanceof Array&&n.length?B("",n):k.current.click(),e.next=10;break;case 9:k.current.click();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.default.createElement("div",{className:A,style:r},l.default.createElement(y,{onRemove:function(e){R.splice(R.findIndex((function(t){return t.uid===e.uid})),1),N()},onPreview:function(e){"function"===typeof x&&x(e)},listType:i,fileList:R,progressRender:w},_&&(null===R||void 0===R?void 0:R.length)>=_?"":l.default.createElement("div",{className:"".concat(C,"__area"),onClick:H},l.default.createElement(v,{onFile:D},m),l.default.createElement("input",{id:"trgger-file-choose-input",className:"".concat(C,"__input"),type:"file",ref:k,onChange:B,multiple:b,accept:g}))))};t.UploadWebLayout=_,_.defaultProps={listType:"list",fileList:[]}},lT1C:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));n("ma9I"),n("QWBl"),n("2B1R"),n("tkto"),n("07d7"),n("5s+n"),n("JfAA"),n("FZtP");var r=n("nKUr"),i=n("o0o1"),o=n.n(i),a=n("lSNA"),s=n.n(a),c=(n("ls82"),n("yXPU")),l=n.n(c),u=(n("q1tI"),n("MRl3")),d=n.n(u),f=n("5f2u"),p=n.n(f),h=n("MCNy"),m=n.n(h),v=n("sho3"),b="_1rF8nZyzac5-dhGnPB-e0j",g="_2VetdXndOpbG3mn1Mvjju4",y="_3ECq1EkCI0B-gN8ctfilJL",_="_10olUbNElYrKMe6LePZ4_T",w=n("TSYQ"),O=n.n(w);n("R5XZ");var x=n("eHcb"),S=n("UQAj");function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){var t=e.cosOptions,n=e.listType,i=e.fileList,a=e.btnText,s=e.isCustomUploadIcon,c=e.limit,u=e.children,f=e.onRemove,h=e.beforeUpload,w=e.onChange,j=e.onSuccess,T=e.onFail,k=e.onComplete,C=e.data,A=e.accept,M=e.className,P=e.wxChooseImage,R=void 0===P?function(){return new Promise((function(e){return e([])}))}:P,L=C.type,N=c>1,D=function(){var e=l()(o.a.mark((function e(n,r,i){var a,s,c,l,u,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.a)(n.originFileObj);case 2:if(a=e.sent,!t){e.next=26;break}return n.status="uploading",i(r),e.next=8,Object(S.a)(E({files:[a],type:L},t));case 8:if(s=e.sent,c=s[0],l=c.code,c.data,0!==l){e.next=18;break}n.status="success",i(r),j(E(E({},c),{},{type:n.type}),n),k(E(E({},c),{},{type:n.type}),n,r),e.next=23;break;case 18:return n.status="error",i(r),T(c,n),k(c,n,r),e.abrupt("return",!1);case 23:return e.abrupt("return",E(E({},c),{},{type:n.type}));case 26:return(u=new FormData).append("file",a),Object.keys(C).forEach((function(e){u.append(e,C[e])})),e.next=31,Object(v.createAttachment)(u,(function(e){var t=e.loaded/e.total*100|0;n.status="uploading",n.percent=100===t?99:t,i(r)}));case 31:if(0!==(d=e.sent).code){e.next=39;break}n.status="success",i(r),j(E(E({},d),{},{type:n.type}),n),k(E(E({},d),{},{type:n.type}),n,r),e.next=44;break;case 39:return n.status="error",i(r),T(d,n),k(d,n,r),e.abrupt("return",!1);case 44:return e.abrupt("return",E(E({},d),{},{type:n.type}));case 45:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),I=s?"".concat(y," ").concat(_," ").concat(M):"".concat(_,"  ").concat(M),B=(i||[]).map((function(e){var t,n,r=(null===e||void 0===e||null===(t=e.fileType)||void 0===t?void 0:t.toString())||(null===e||void 0===e||null===(n=e.type)||void 0===n?void 0:n.toString()),i=(null===e||void 0===e?void 0:e.fileSize)||(null===e||void 0===e?void 0:e.size);return E(E({},e),{},{type:r,size:i})}));return Object(r.jsx)("div",{className:I,onClick:function(e){return e.stopPropagation()},children:Object(r.jsxs)(d.a,{listType:n,fileList:B,limit:c,multiple:N,onRemove:function(e){f(e)},wxChooseImage:R,beforeUpload:function(e,t){return"function"!==typeof h||h(e,t)},onChange:function(e){w(e)},customRequest:D,accept:A,children:[!s&&Object(r.jsxs)(p.a,{type:"text",className:O()(g,b),children:[Object(r.jsx)(m.a,{name:"PlusOutlined",size:16}),Object(r.jsx)("span",{className:"dzq-upload__btntext",children:a})]}),s&&u]})})}T.defaultProps={data:{type:1},cosOptions:null,listType:"list",fileList:[],btnText:"",limit:1,accept:"",isCustomUploadIcon:!1,onRemove:function(){},beforeUpload:function(){},onChange:function(){},onSuccess:function(){},onFail:function(){},onComplete:function(){}}},lW1z:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("qePV"),n("toAj"),n("07d7"),n("rB9j"),n("JfAA"),n("UxlC"),n("EnZy");var r=function(e,t){if(isNaN(e)||isNaN(t))return 0;var n=0,r=0;e.toString().split(".").length>1&&(n=e.toString().split(".")[1].length),t.toString().split(".").length>1&&(r=t.toString().split(".")[1].length);var o=n>r?n:r;return(((0|i(e,o))+(0|i(t,o)))/Math.pow(10,o)).toFixed(2)},i=function(e,t){if(e.toString().split(".").length<=1)return e*Math.pow(10,t);var n=e.toString().split(".")[1].length,r=e.toString();if(t===n)return Number(r.replace(".",""));for(var i=0;i<t-n;i++)r+="0";return Number(r.replace(".",""))}},mG8q:function(e,t,n){"use strict";n.r(t);var r=n("sho3");t.default=function(e){var t=e.file,n=e.type,i=new FormData;return i.append("type",n),"string"===typeof t?i.append("fileUrl",t):i.append("file",t),Object(r.createAttachment)(i)}},mYIm:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n("oVuX");var r=n("lSNA"),i=n.n(r),o=n("nKUr"),a=n("QILm"),s=n.n(a),c=(n("q1tI"),n("lT1C")),l=n("uPFr");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){var t=e.onChange,n=e.onComplete,r=e.fileList,a=e.limit,d=void 0===a?9:a,f=e.className,p=s()(e,["onChange","onComplete","fileList","limit","className"]),h={type:l.d.file};return Object(o.jsx)(c.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:"dzq-post-file-upload ".concat(f),listType:"list",btnText:"\u6dfb\u52a0\u9644\u4ef6",data:h,limit:d,accept:l.a.join(","),onChange:t,onComplete:n,fileList:r},p))}},mZzD:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getAttach=l,t.default=void 0;var i=r(n("J4zp")),o=r(n("cDf5")),a=n("q1tI"),s=n("i8i4"),c=function(){return"undefined"!==typeof document};function l(e){var t;return"string"===typeof e&&e&&c()&&(t=document.querySelector(e)),"function"===typeof e&&(t=e()),"object"===(0,o.default)(e)&&e instanceof window.HTMLElement&&(t=e),c()?t||document.body:t}var u=(0,a.forwardRef)((function(e,t){var n=e.attach,r=e.children,o=(0,a.useMemo)((function(){var e=l(n);if(e&&c()){var t=document.createElement("div");return e.appendChild(t),[e,t]}return[null,r]}),[n]),u=(0,i.default)(o,2),d=u[0],f=u[1];return(0,a.useEffect)((function(){return function(){f instanceof window.HTMLElement&&f.remove()}}),[]),(0,a.useImperativeHandle)(t,(function(){return d})),d?(0,s.createPortal)(r,f):f}));u.displayName="Portal";var d=u;t.default=d},mkfw:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=new(r(n("uhBA")).default);t.default=i},moxL:function(e,t,n){"use strict";var r=n("67WC"),i=n("FF6l"),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(e,t){return i.call(o(this),e,t,arguments.length>2?arguments[2]:void 0)}))},nrUO:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("lSNA"));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e,t){e.on("play",(function(e){t.onPlay&&t.onPlay(e)})),e.on("pause",(function(e){t.onPause&&t.onPause(e)})),e.on("waiting",(function(e){t.onWaiting&&t.onWaiting(e)})),e.on("timeupdate",(function(n){var r=e.currentTime(),i=e.duration();t.onTimeUpdate&&t.onTimeUpdate(a(a({},n),{},{detail:{currentTime:r,duration:i}}))})),e.on("seeking",(function(t){e.off("timeupdate",(function(){})),e.one("seeked",(function(){}))})),e.on("ended",(function(e){t.onEnded&&t.onEnded(e)})),e.on("error",(function(e){t.onError&&t.onError(e)})),e.on("loadedmetadata",(function(e){t.onLoadedMetaData&&t.onLoadedMetaData(e)})),e.on("fullscreenchange",(function(n){var r=e.isFullscreen();t.onFullscreenChange&&t.onFullscreenChange(a(a({},n),{},{detail:{fullScreen:r,fullscreen:r}}))})),e.on("progress",(function(n){var r=e.bufferedPercent();t.onProgress&&t.onProgress(a(a({},n),{},{detail:{buffered:r}}))}))};t.default=s},"oHi+":function(e,t,n){var r=n("ewvW"),i=n("UMSQ"),o=n("NaFW"),a=n("6VoE"),s=n("A2ZE"),c=n("67WC").aTypedArrayConstructor;e.exports=function(e){var t,n,l,u,d,f,p=r(e),h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,b=o(p);if(void 0!=b&&!a(b))for(f=(d=b.call(p)).next,p=[];!(u=f.call(d)).done;)p.push(u.value);for(v&&h>2&&(m=s(m,arguments[2],2)),n=i(p.length),l=new(c(this))(n),t=0;n>t;t++)l[t]=v?m(p[t],t):p[t];return l}},oWYc:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressWebLayout=void 0;var i=r(n("lSNA")),o=r(n("q1tI")),a=n("VTYn"),s=r(n("TSYQ")),c=n("vNgL"),l=r(n("AwrB"));t.ProgressWebLayout=function(e){var t,n=e.type,r=e.percent,u=e.text,d=(e.tips,e.theme),f=e.className,p=e.style,h=(e.isShowText,e.lineWidth,e.width,e.children,(0,a.useConfig)().clsPrefix);return"circle"===n?o.default.createElement(l.default,e):o.default.createElement("div",{className:(0,s.default)("".concat(h,"-progress"),f,(t={},(0,i.default)(t,"".concat(h,"-progress--error"),"danger"===d),(0,i.default)(t,"".concat(h,"-progress--succeed"),"success"===d),t)),style:p},o.default.createElement("div",{className:"".concat(h,"-progress__value"),style:{width:"".concat(r,"%"),transition:"width .2s"}},u&&o.default.createElement("span",{className:"".concat(h,"-progress__text")},(0,c.injectValue)(u)(r))))}},p532:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("/qmn"),a=n("0Dky"),s=n("0GbY"),c=n("SEBh"),l=n("zfnd"),u=n("busE");r({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}}),i||"function"!=typeof o||o.prototype.finally||u(o.prototype,"finally",s("Promise").prototype.finally)},pDQq:function(e,t,n){"use strict";var r=n("I+eb"),i=n("I8vh"),o=n("ppGB"),a=n("UMSQ"),s=n("ewvW"),c=n("ZfDv"),l=n("hBjN"),u=n("Hd5f"),d=n("rkAj"),f=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,m=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!p},{splice:function(e,t){var n,r,u,d,f,p,g=s(this),y=a(g.length),_=i(e,y),w=arguments.length;if(0===w?n=r=0:1===w?(n=0,r=y-_):(n=w-2,r=m(h(o(t),0),y-_)),y+n-r>v)throw TypeError(b);for(u=c(g,r),d=0;d<r;d++)(f=_+d)in g&&l(u,d,g[f]);if(u.length=r,n<r){for(d=_;d<y-r;d++)p=d+n,(f=d+r)in g?g[p]=g[f]:delete g[p];for(d=y;d>y-r+n;d--)delete g[d-1]}else if(n>r)for(d=y-r;d>_;d--)p=d+n-1,(f=d+r-1)in g?g[p]=g[f]:delete g[p];for(d=0;d<n;d++)g[d+_]=arguments[d+2];return g.length=y-r+n,u}})},q1fC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderViewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("OEh5").SliderWebLayout}});t.SliderViewAdapter=r},qMd1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){return n("83zQ").useWebAdapter};t.default=r},qT12:function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,b=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,_=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function O(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case d:case f:case a:case c:case s:case h:return e;default:switch(e=e&&e.$$typeof){case u:case p:case b:case v:case l:return e;default:return t}}case o:return t}}}function x(e){return O(e)===f}t.AsyncMode=d,t.ConcurrentMode=f,t.ContextConsumer=u,t.ContextProvider=l,t.Element=i,t.ForwardRef=p,t.Fragment=a,t.Lazy=b,t.Memo=v,t.Portal=o,t.Profiler=c,t.StrictMode=s,t.Suspense=h,t.isAsyncMode=function(e){return x(e)||O(e)===d},t.isConcurrentMode=x,t.isContextConsumer=function(e){return O(e)===u},t.isContextProvider=function(e){return O(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return O(e)===p},t.isFragment=function(e){return O(e)===a},t.isLazy=function(e){return O(e)===b},t.isMemo=function(e){return O(e)===v},t.isPortal=function(e){return O(e)===o},t.isProfiler=function(e){return O(e)===c},t.isStrictMode=function(e){return O(e)===s},t.isSuspense=function(e){return O(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===c||e===s||e===h||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===v||e.$$typeof===l||e.$$typeof===u||e.$$typeof===p||e.$$typeof===y||e.$$typeof===_||e.$$typeof===w||e.$$typeof===g)},t.typeOf=O},qXVe:function(e,t,n){"use strict";var r=n("67WC"),i=n("tycR").every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},qYE9:function(e,t){e.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},qpuh:function(e,t){(function(t,n){e.exports=function(){var e={929:function(e){e.exports=t}},r={};function i(t){if(r[t])return r[t].exports;var n=r[t]={exports:{}},o=!0;try{e[t](n,n.exports,i),o=!1}finally{o&&delete r[t]}return n.exports}return i.ab=n+"/",i(929)}()}).call(this,{},"/")},"r+ot":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e instanceof Uint8Array?e:new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0)};t.bytesToString=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,r(e));try{return decodeURIComponent(escape(t))}catch(n){}return t},t.concatTypedArrays=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.reduce((function(e,t){return e+=t&&(t.byteLength||t.length)||0}),0),o=new Uint8Array(i),a=0;return t.forEach((function(e){e=r(e),o.set(e,a),a+=e.byteLength})),o},t.isTypedArray=function(e){return ArrayBuffer.isView(e)},t.stringToBytes=function(e,t){void 0===t&&(t=!1);return"string"!==typeof e&&e&&"function"===typeof e.toString&&(e=e.toString()),"string"!==typeof e?[]:(t||(e=unescape(encodeURIComponent(e))),e.split("").map((function(e){return 255&e.charCodeAt(0)})))},t.toUint8=r},rA37:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));n("rB9j"),n("UxlC");var r=function(e){return e.replace(/alt="(\w+)"/g,'alt=":--$1:dzqemoji"')},i=function(e){return e.replace(/alt=":(\w+):dzqemoji"/g,'alt=":--$1:dzqemoji"')},o=function(e){return e.replace(/alt=":--(\w+):dzqemoji"/g,'alt=":$1:emoji"')}},rOQg:function(e,t,n){"use strict";var r=n("I+eb"),i=n("0Dky"),o=n("Yhre"),a=n("glrk"),s=n("I8vh"),c=n("UMSQ"),l=n("SEBh"),u=o.ArrayBuffer,d=o.DataView,f=u.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new u(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==f&&void 0===t)return f.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(l(this,u))(c(i-r)),p=new d(this),h=new d(o),m=0;r<i;)h.setUint8(m++,p.getUint8(r++));return o}})},"rQI+":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxWebLayout=void 0;var i=r(n("pVnL")),o=r(n("q1tI")),a=n("/j3c"),s=n("eCtc"),c=r(n("T4r6")),l=(0,a.forwardRefWithStatics)((function(e,t){return o.default.createElement(c.default,(0,i.default)({ref:t},e))}),{Group:s.CheckboxGroup});t.CheckboxWebLayout=l},rnXk:function(e,t,n){"use strict";e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},"s/rW":function(e,t,n){"use strict";n.r(t);n("ma9I"),n("TeQF"),n("QWBl"),n("yq1k"),n("yXV3"),n("oVuX"),n("2B1R"),n("pDQq"),n("sMBO"),n("qePV"),n("tkto"),n("B6y2"),n("rB9j"),n("JTJg"),n("Rm1S"),n("UxlC"),n("EnZy"),n("FZtP"),n("R5XZ");var r=n("nKUr"),i=n("lSNA"),o=n.n(i),a=n("RIqP"),s=n.n(a),c=n("J4zp"),l=n.n(c),u=n("o0o1"),d=n.n(u),f=(n("ls82"),n("yXPU")),p=n.n(f),h=n("lwsE"),m=n.n(h),v=n("W8MJ"),b=n.n(v),g=n("7W2i"),y=n.n(g),_=n("a1gu"),w=n.n(_),O=n("Nsbk"),x=n.n(O),S=n("q1tI"),j=n.n(S),E=n("kMSe"),T=(n("4l63"),n("Xw8k")),k=n.n(T),C=n("TSYQ"),A=n.n(C),M=[{name:"bold",icon:'<div class="dzq-icon dzq-icon-MakeSthOutlined" style="font-size:16px"></div>'},{name:"italic",icon:'<div class="dzq-icon dzq-icon-BiasOutlined" style="font-size:16px"></div>'},{name:"strike",icon:'<div class="dzq-icon dzq-icon-CentralLineOutlined" style="font-size:16px"></div>'}],P={mode:"wysiwyg",placeholder:"\u8bf7\u586b\u5199\u60a8\u7684\u53d1\u5e03\u5185\u5bb9\u2026",cache:{enable:!1},toolbar:[].concat(M),toolbarConfig:{hide:!1,pin:!1},outline:{enable:!1},hint:{parse:!1}},R=n("uPFr"),L=n("P8WL"),N=n("rA37"),D=(n("FCMH"),n("UiVq"),n("wdT/")),I=n.n(D),B=n("lY1M"),H=n("UQAj"),U=n("n4oF");function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=Object(E.c)("threadPost","site")(Object(E.d)((function(e){var t=e.pc,n=e.emoji,i=void 0===n?{}:n,o=e.atList,a=void 0===o?[]:o,c=e.topic,l=e.value,u=void 0===l?"":l,f=e.isResetContentText,h=e.onChange,m=void 0===h?function(){}:h,v=e.onFocus,b=void 0===v?function(){}:v,g=e.onBlur,y=void 0===g?function(){}:g,_=e.onInit,w=void 0===_?function(){}:_,O=e.onInput,x=void 0===O?function(){}:O,j=e.setState,E=void 0===j?function(){}:j,T=e.onCountChange,C=void 0===T?function(){}:T,D=e.hintCustom,q=void 0===D?function(){}:D,F=e.hintHide,W=void 0===F?function(){}:F,z=e.site,X=void 0===z?{}:z,Y="dzq-vditor",K=null,G=Object(S.useState)(!1),Q=G[0],Z=G[1],J=Object(S.useState)(null),$=J[0],ee=J[1],te=function(e){try{if(!$)return"";var t=e?$.html2md(e):"";$.setValue&&$.setValue(t)}catch(n){console.error("html2mdSetValue",n)}},ne=function(e,t){try{if(!$&&!window.vditorInstance)return;var n=$||window.vditorInstance,r=n.html2md&&n.html2md(e);r=r.substr(0,r.length-1),t&&(r="<p>".concat(r,"</p>")),n.insertValue&&n.insertValue(r)}catch(i){console.error("html2mdInserValue",i)}};Object(S.useEffect)((function(){return $||le(),function(){return clearTimeout(K)}}),[]),Object(S.useEffect)((function(){if(i&&i.code){E({emoji:{}});var e='<img alt="'.concat(i.code,'dzqemoji" src="').concat(i.url,'" class="qq-emotion" />');e=Object(N.c)(e),ne(e),B.b.env(B.a.ANDROID)&&!t&&getSelection().rangeCount>0&&getSelection().removeAllRanges()}}),[i]),Object(S.useEffect)((function(){if(!a||a.length){var t=a.map((function(e){return e?" @".concat(e," &nbsp; "):""}));E({atList:[]}),t.length&&($.insertValue&&$.insertValue(t.join("")),e.threadPost.setEditorHintAtKey(""))}}),[a]),Object(S.useEffect)((function(){c&&(E({topic:""}),$.insertValue&&$.insertValue(" ".concat(c," &nbsp; ")),e.threadPost.setEditorHintTopicKey(""))}),[c]);var re=0,ie=function e(){var t=setTimeout((function(){clearTimeout(t);try{if(f&&u)return re=0,void te(u);if(!u||$&&$.getValue&&"\n"!==$.getValue())return void(re=0);$&&$.getValue&&"\n"===$.getValue()&&$.getValue()!==u&&(re=0,te(u))}catch(n){console.log(n),(re+=1)<=5&&e()}}),300)};Object(S.useEffect)((function(){ie()}),[u,$]),Object(S.useEffect)((function(){Object(U.a)()||(console.log("try to focus"),window.vditorInstance.focus())}),[u,$]);var oe=function(){var e=setTimeout((function(){clearTimeout(e),Z(!1),y()}),100)},ae=function(){var t=e.threadPost.postData,n=t.images,r=t.video,i=t.files,o=t.audio,a=t.vote;return!!(t.contentText||r.id||a.voteTitle||o.id||Object.values(n).length||Object.values(i).length)},se=function(e){var t,n=e.vditor,r=null===(t=n[n.currentMode])||void 0===t?void 0:t.element;if(null===r||void 0===r||r.addEventListener("click",(function(e){Z(!1),b("focus",e)})),!/Chrome/i.test(navigator.userAgent)&&/(iPhone|Safari|Mac OS)/i.test(navigator.userAgent)){!function e(){K=setTimeout((function(){n[n.currentMode].range=function(e){var t,n=e[e.currentMode].element;return getSelection().rangeCount>0&&(t=getSelection().getRangeAt(0),n.isEqualNode(t.startContainer)||n.contains(t.startContainer))?t:e[e.currentMode].range?e[e.currentMode].range:(n.focus(),(t=n.ownerDocument.createRange()).setStart(n,0),t.collapse(!0),t)}(n),e()}),200)}()}},ce=function(e,t,n){var r=document.querySelector("#post-inner"),i=r.getBoundingClientRect(),o=i.width,a=i.height,s=e.vditor,c=s[s.currentMode].element,l=t.left+("left"===s.options.outline.position?s.outline.element.offsetWidth:0),u=t.top,d=parseInt(document.defaultView.getComputedStyle(c,null).getPropertyValue("line-height"),10),f="".concat(l,"px"),p="auto";("@"===n&&l+300>o||"#"===n&&l+404>o)&&(p="0px",f="auto");var h=u-r.scrollTop,m="".concat(h+(d||22)+16,"px"),v="auto";return("@"===n&&a-h<150||"#"===n&&a-h<190)&&(m="auto",v="".concat(a-h+(d||22)+40,"px")),{top:m,bottom:v,left:f,right:p}},le=function(){var n=new k.a(Y,V(V({_lutePath:"https://cdn.jsdelivr.net/npm/@discuzq/vditor@1.0.22/dist/js/lute/lute.min.js"},P),{},{minHeight:t&&!ae()?450:44,tab:"  ",value:u,after:function(){w(n),n.setValue(""),ie(),n.focus()},focus:function(e,t){B.b.env(B.a.ANDROID)&&b("edior-focus",t)},input:function(){Z(!1),x(n),m(n)},blur:function(){m(n),oe()},select:function(e){e?(b("select"),Z(!0)):oe()},outline:{enable:!1},counter:{enable:!0,after:function(e){C(e),e>=R.h&&I.a.info({content:"\u6700\u591a\u8f93\u5165".concat(R.h,"\u5b57")})},type:"text",max:R.h},toolbarConfig:{hide:!!t,pin:!0,bubbleHide:!1},bubbleToolbar:t?s()(M):[],preview:{theme:{current:""}},hint:{extend:t?[{key:"@",hintCustom:function(t,r,i){e.threadPost.setEditorHintAtKey(t);var o=ce(n,r,"@");q("@",t,o,i,n.vditor)}},{key:"#",hintCustom:function(t,r,i){e.threadPost.setEditorHintTopicKey(t);var o=ce(n,r,"#");q("#",t,o,i,n.vditor)}}]:[],hide:function(){e.threadPost.setEditorHintAtKey(""),e.threadPost.setEditorHintTopicKey(""),W()}},upload:{url:"upload",accept:"image/*",handler:function(){var e=p()(d.a.mark((function e(t){var n,r,i,o,a,s,c,l,u,f,p,h,m,v,b,g,y,_,w,O,x,S,j,E;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=X.webConfig,r=n.other,i=n.setAttach,o=n.qcloud,a=r.canInsertThreadImage,s=i.supportImgExt,c=i.supportMaxSize,l=o.qcloudCosBucketName,u=o.qcloudCosBucketArea,f=o.qcloudCosSignUrl,p=o.qcloudCos,h=c,p&&(h=c>15?15:c),a){e.next=9;break}return I.a.error({content:"\u60a8\u6ca1\u6709\u4e0a\u4f20\u56fe\u7247\u7684\u6743\u9650",duration:3e3}),e.abrupt("return");case 9:m=0;case 10:if(!(m<t.length)){e.next=28;break}if(v=t[m],b=v.name,g=b.split(".").pop().toUpperCase(),v.type.includes("image")){e.next=18;break}return I.a.error({content:"\u6682\u4e0d\u652f\u6301\u62d6\u62fd/\u590d\u5236\u4e0a\u4f20\u975e\u56fe\u7247\u6587\u4ef6",duration:3e3}),e.abrupt("return");case 18:if(s.toUpperCase().split(",").includes(g)){e.next=22;break}return I.a.error({content:"\u4ec5\u652f\u6301\u4e0a\u4f20\u683c\u5f0f\u4e3a".concat(s,"\u7684\u56fe\u7247\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),duration:3e3}),e.abrupt("return");case 22:if(!(v.size>1024*h*1024)){e.next=25;break}return I.a.error({content:"\u4ec5\u652f\u6301\u4e0a\u4f20\u5c0f\u4e8e".concat(h,"MB\u7684\u56fe\u7247\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),duration:3e3}),e.abrupt("return");case 25:m++,e.next=10;break;case 28:if(!window.vditorInstance){e.next=35;break}if(y=window.vditorInstance.getHTML(),_=y.match(/<img.*?\/>/g),100,!(_&&_.length+t.length>100)){e.next=35;break}return I.a.error({content:"\u56fe\u6587\u6df7\u6392\u6700\u591a\u652f\u6301\u63d2\u5165".concat(100,"\u5f20\u56fe\u7247\uff0c\u73b0\u5728\u8fd8\u53ef\u4ee5\u63d2\u5165").concat(100-_.length,"\u5f20"),duration:3e3}),e.abrupt("return");case 35:return w=I.a.loading({content:"\u56fe\u7247\u4e0a\u4f20\u4e2d...",hasMask:!0,duration:0}),e.next=38,Object(H.a)({files:t,type:1,supportImgExt:s,supportMaxSize:c,qcloudCosBucketName:l,qcloudCosBucketArea:u,qcloudCosSignUrl:f,qcloudCos:p});case 38:O=e.sent,x=[],O.forEach((function(e){var t=e.code,n=e.data,r=void 0===n?{}:n;if(0===t){var i=r.url,o=r.id;ne('<img src="'.concat(i,'" alt="attachmentId-').concat(o,'" />'),!0)}else x.push(e)})),w.destroy(),x.length&&(S=x.length,j="".concat(S,"\u5f20\u56fe\u7247\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u5c1d\u8bd5\u4e0a\u4f20\u3002"),E=x.filter((function(e){return null===e||void 0===e?void 0:e.msg.includes("\u654f\u611f\u56fe")})).length,S===E&&(j="\u6709".concat(E,"\u5f20\u654f\u611f\u56fe\u7247\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u66f4\u6362\u56fe\u7247\u91cd\u65b0\u4e0a\u4f20\u3002")),S>E&&E&&(j="".concat(x.length,"\u5f20\u56fe\u7247\u4e0a\u4f20\u5931\u8d25\uff0c\u5176\u4e2d\u6709").concat(E,"\u5f20\u4e3a\u654f\u611f\u56fe\uff0c\u8bf7\u5904\u7406\u540e\u91cd\u65b0\u5c1d\u8bd5\u4e0a\u4f20\u3002")),I.a.info({content:j,duration:2e3}));case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}));se(n),ee(n),window.vditorInstance=n},ue=t?"dvditor pc":A()("dvditor h5",{"no-focus":!t&&!Q});return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{id:Y,className:ue,onClick:function(e){e.stopPropagation(),E({currentDefaultOperation:""})},children:Object(r.jsx)(L.a,{children:"\u7f16\u8f91\u5668\u52a0\u8f7d\u4e2d..."})})})}))),W=(n("4mDm"),n("07d7"),n("JfAA"),n("PKPk"),n("3bBZ"),n("Kz25"),n("MCNy")),z=n.n(W),X=n("eWjQ"),Y=n("bAjH"),K=n("sho3"),G=(n("5s+n"),function(){var e=p()(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.readYundianboSignature)();case 2:return t=e.sent,n=t.code,r=t.data,e.abrupt("return",0===n?r.token:"");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),Q=function(){var e=p()(d.a.mark((function e(t){var r,i,o,a,s,c,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.file,i=t.onUploading,o=void 0===i?function(){}:i,a=t.onComplete,s=void 0===a?function(){}:a,c=t.onError,l=void 0===c?function(){}:c,e.next=3,n.e(85).then(n.t.bind(null,"Bhkv",7));case 3:new(0,e.sent.default)({getSignature:G}).upload({mediaFile:r}).on("media_progress",(function(){o()})).done().then((function(e){s(e,r)})).catch((function(e){l(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=n("4x5+"),J=n.n(Z);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e){return ee(ee({},e),{},{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e})}function ne(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return"".concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())}function re(e){var t=null;return void 0!==window.createObjcectURL?t=window.createOjcectURL(e):void 0!==window.URL?t=window.URL.createObjectURL(e):void 0!==window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t}var ie=function(e){var t,n,i=null,o=null,a=Object(S.useState)(!0),c=a[0],l=a[1],u=Object(S.useState)(""),f=u[0],h=u[1],m=j.a.createRef(null),v=e.onVideoUpload,b=void 0===v?function(){}:v;function g(t,n){var r=n.type,i=n,o=e.currentSelectedToolbar;o===n.type&&o!==R.j.anonymity&&(r="",i={type:""}),h(r),e.onAttachClick(i),l(!1)}var y=function(e){e.stopPropagation(),l(!c)},_=function(){var t=p()(d.a.mark((function t(n){var r,a,c=arguments;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:{},a=e.onUploadComplete,r.type!==R.j.video){t.next=10;break}if(i=n[0],b(!0)){t.next=7;break}return t.abrupt("return",!1);case 7:Q({file:i,onUploading:function(){o=I.a.loading({content:"\u4e0a\u4f20\u4e2d...",duration:0})},onComplete:function(e,t){var n;a(e,t,r.type),null===(n=o)||void 0===n||n.destroy()},onError:function(e){a(null,i,r.type),I.a.error({content:e.message})}}),t.next=13;break;case 10:s()(n).map((function(e,t){var n;return e.thumbUrl=re(e),e.uid=null!==(n=e.uid)&&void 0!==n?n:"".concat(t,"__").concat(ne()),te(e)})).forEach(function(){var t=p()(d.a.mark((function t(n){var i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=new FormData).append("file",n.originFileObj),Object.keys(r.data||[]).forEach((function(e){i.append(e,r.data[e])})),t.next=5,Object(K.createAttachment)(i);case 5:o=t.sent,e.onUploadComplete(o,n,r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){l(!1)};Object(S.useEffect)((function(){return window.document.body.addEventListener("click",w),function(){window.document.body.removeEventListener("click",w)}}),[]);var O=function(t){var n,r,i,o,a,s=X.a["dvditor-attachment-toolbar__item"];if(!t)return s;var c="".concat(X.a["dvditor-attachment-toolbar__item"]," ").concat(X.a.active),l=e.currentSelectedToolbar;if(t.type===l&&t.type!==R.j.anonymity)return c;var u=e.postData;return t.type===R.j.reward&&null!==u&&void 0!==u&&null!==(n=u.rewardQa)&&void 0!==n&&n.value||t.type===R.j.goods&&null!==u&&void 0!==u&&null!==(r=u.product)&&void 0!==r&&r.id||t.type===R.j.voice&&null!==u&&void 0!==u&&null!==(i=u.audio)&&void 0!==i&&i.id||t.type===R.j.video&&null!==u&&void 0!==u&&null!==(o=u.video)&&void 0!==o&&o.id||t.type===R.j.image&&Object.values((null===u||void 0===u?void 0:u.images)||[]).length>0||t.type===R.j.anonymity&&null!==u&&void 0!==u&&u.anonymous||t.type===R.j.vote&&null!==u&&void 0!==u&&null!==(a=u.vote)&&void 0!==a&&a.voteTitle?c:s},x=function(){var t=Y.a.map((function(t){var n=e.permission;if(e.pc&&t.type===R.j.voice)return null;var i=O(t),o=n[t.type];return t.type!==R.j.video&&t.type!==R.j.voice||(o=n[t.type]&&(null===e||void 0===e?void 0:e.isOpenQcloudVod)),t.isUpload?o?Object(r.jsxs)("div",{className:i,children:[Object(r.jsx)(z.a,{onClick:function(e){g(0,t),function(e){if(e.type===R.j.video){if(!b())return!1;m.current.click()}else m.current.click()}(t)},name:t.name,size:"20"}),Object(r.jsx)("input",{style:{display:"none"},type:"file",ref:m,onChange:function(e){!function(e,t){if(e.target instanceof HTMLInputElement){var n=e.target.files;if(!n)return;_(n,t),m.current.value=null}}(e,t)},multiple:t.limit>1,accept:t.accept})]},t.name):null:o?Object(r.jsx)(z.a,{onClick:function(e){return g(0,t)},className:i,name:t.name,size:"20"},t.name):null}));return t=t.concat(J.a.injection("plugin_post","post_extension_entry_hook").map((function(t){var n=t.render,i=t.pluginInfo,o=O(null);return Object(r.jsx)("div",{className:o,children:n({site:e.site,onConfirm:e.onPluginSetPostData,renderData:e.postData.plugin})},i.pluginName)})))};if(e.pc)return x();var E=c?{}:{display:"none"},T=e.currentSelectedToolbar||f,k=(null===(t=Y.a.filter((function(e){return e.type===T}))[0])||void 0===t?void 0:t.name)||(null===(n=Y.a.filter((function(e){return e.type===R.j.image}))[0])||void 0===n?void 0:n.name);return Object(r.jsxs)("div",{className:X.a["dvditor-attachment-toolbar"],children:[!c&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:X.a["dvditor-attachment-toolbar__left"],children:e.category}),Object(r.jsxs)("div",{className:X.a["dvditor-attachment-toolbar__right"],onClick:y,children:[k&&e.permission[T]&&Object(r.jsx)(z.a,{name:k,size:"20"}),Object(r.jsx)(z.a,{name:"MoreBOutlined",size:"20"})]})]}),Object(r.jsxs)("div",{className:X.a["dvditor-attachment-toolbar__inner"],style:E,children:[Object(r.jsx)("div",{className:X.a["dvditor-attachment-toolbar__left"],children:x()}),Object(r.jsx)("div",{className:A()(X.a["dvditor-attachment-toolbar__right"],X.a.show),onClick:y,children:Object(r.jsx)(z.a,{name:"MoreBOutlined",size:"20"})})]})]})},oe=n("nfQ1"),ae=n.n(oe);function se(e){var t=e.children,n=e.onClick,i=e.onSubmit,o=e.value,a=e.pc,s=e.permission,c=Object(S.useState)(""),l=c[0],u=c[1];Object(S.useEffect)((function(){o||u(o)}),[o]);function d(e){var t,r,i,o=document.querySelector("#".concat("dzq-toolbar-emoji")),a=document.querySelector("#".concat("dzq-toolbar-topic")),s=document.querySelector("#".concat("dzq-toolbar-at"));(o&&"none"!==(null===o||void 0===o||null===(t=o.style)||void 0===t?void 0:t.display)||a&&"none"!==(null===a||void 0===a||null===(r=a.style)||void 0===r?void 0:r.display)||s&&"none"!==(null===s||void 0===s||null===(i=s.style)||void 0===i?void 0:i.display))&&(u(""),n({id:""}))}Object(S.useEffect)((function(){return window.document.body.addEventListener("click",d),function(){window.document.body.removeEventListener("click",d)}}),[]);var f=Object(r.jsx)(r.Fragment,{children:Y.b.map((function(t){var i=function(t){var n,r=X.a["dvditor-toolbar__item"],i="".concat(X.a["dvditor-toolbar__item"]," ").concat(X.a.active);if(t.type===l||t.id===l)return i;var o=e.postData;return t.type===R.j.file&&Object.values((null===o||void 0===o?void 0:o.files)||[]).length>0||t.type===R.j.redPacket&&null!==o&&void 0!==o&&null!==(n=o.redpacket)&&void 0!==n&&n.price||t.type===R.j.paid&&(null!==o&&void 0!==o&&o.price||null!==o&&void 0!==o&&o.attachmentPrice)?i:r}(t),o=s[t.id]?Object(r.jsx)(z.a,{onClick:function(e){t.menu||e.stopPropagation(),t.id===l?t.menu||n({id:""}):(u(t.id),a&&t.menu||n(t))},className:i,name:t.name,size:"20"},t.name):null;if(a&&t.menu){var c=Object(r.jsx)(ae.a.Menu,{children:t.menu.map((function(e){return Object(r.jsx)(ae.a.Item,{id:e.name,children:e.name},e.id)}))});return Object(r.jsx)(ae.a,{trigger:"hover",menu:c,arrow:!1,onChange:function(e){u(""),n(t,{id:e})},children:o},t.id)}return o}))});return a?Object(r.jsxs)("div",{className:"".concat(X.a["dvditor-toolbar"]," ").concat(X.a.pc),children:[f,t]}):Object(r.jsxs)("div",{className:X.a["dvditor-toolbar"],id:"dvditor-toolbar",children:[Object(r.jsx)("div",{className:X.a["dvditor-toolbar__left"],children:f}),Object(r.jsx)("div",{className:X.a["dvditor-toolbar__right"],onClick:function(){i(),u("")},children:"\u53d1\u5e03"}),t]})}var ce=n("9j6m");function le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x()(e);if(t){var i=x()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}var ue=function(e){y()(n,e);var t=le(n);function n(){return m()(this,n),t.apply(this,arguments)}return b()(n,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.categoryChoose,i=n.parent,o=n.child;return i&&!i.pid?null:Object(r.jsxs)("div",{className:ce.a["dzq-tools-category"],onClick:t,children:[Object(r.jsx)(z.a,{name:"MenuOutlined",size:14}),Object(r.jsx)("span",{className:ce.a["dzq-tools-category__text"],children:"\u5206\u7c7b"}),Object(r.jsxs)("span",{className:ce.a["dzq-tools-category__tag"],children:[i.name||"",o.name&&"\\",o.name||""]})]})}}]),n}(j.a.Component),de=n("/1yQ"),fe=n("emxO"),pe=n("mYIm"),he=n("64aw"),me=n.n(he),ve=n("jZg7"),be=n.n(ve),ge=(n("+2oP"),n("k8W2")),ye=n.n(ge),_e=n("5f2u"),we=n.n(_e),Oe=n("o5G0"),xe=n("pGE/"),Se=n("20a2"),je=function(e){var t,n=e.pc,i=e.show,o=e.onVisibleChange,a=e.onClick,s=void 0===a?function(){}:a,c=e.categoryId,l=Object(S.useState)([]),u=l[0],f=l[1],h=Object(S.useState)({}),m=h[0],v=h[1],b=Object(S.useState)({}),g=b[0],y=b[1],_=function(){o(!1)},w=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.pid||t.pid;t.children&&xe.a.isArray(t.children.slice())&&t.children.length>0?(f(t.children),r.pid&&y(r),r.pid||null!==g&&void 0!==g&&g.pid||(y(t.children[0]),i=null===(n=t.children[0])||void 0===n?void 0:n.pid)):(f([]),y({}));i&&(null===e||void 0===e||e.threadPost.setPostData({categoryId:i}))},O=function(){var t,n,r,i,o=(null===e||void 0===e||null===(t=e.threadPost)||void 0===t||null===(n=t.postData)||void 0===n?void 0:n.categoryId)||"",a=null===e||void 0===e||null===(r=e.threadPost)||void 0===r?void 0:r.getCategorySelectById(o),s=a.parent,c=a.child;null!==s&&void 0!==s&&s.pid&&(null===e||void 0===e||null===(i=e.threadPost)||void 0===i||i.setCategorySelected(a),v(s),w(s,c))};Object(S.useEffect)((function(){var t=e.threadPost,n=e.router.query;p()(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readPostCategory(n.id);case 2:O();case 3:case"end":return e.stop()}}),e)})))()}),[e.threadPost.categories.length,e.router.query.id]),Object(S.useEffect)((function(){O()}),[c]);var x=n?A()(Oe.a.pc,Oe.a.wrapper):Oe.a.wrapper,j=null===(t=e.threadPost)||void 0===t?void 0:t.getCurrentCategories(),E=Object(r.jsxs)("div",{className:x,onClick:s,children:[Object(r.jsxs)("div",{className:Oe.a["popup-title"],children:[n&&Object(r.jsx)(z.a,{name:"MenuOutlined",size:"16"}),"\u9009\u62e9\u5206\u7c7b"]}),Object(r.jsx)("div",{className:Oe.a["popup-content"],children:(j||[]).map((function(e){return Object(r.jsx)(we.a,{className:A()({active:m.pid===e.pid,"is-pc":n}),onClick:function(){!function(e){v(e),w(e),e.children&&!e.children.length&&_()}(e)},children:e.name},e.pid)}))},1),u.length>0&&Object(r.jsx)("div",{className:A()(Oe.a["popup-content"],Oe.a["popup-content__children"]),children:(u||[]).map((function(t){return Object(r.jsx)(we.a,{className:A()({active:g.pid===t.pid,"is-pc":n}),onClick:function(){!function(t){t.pid!==g.pid&&(y(t),null===e||void 0===e||e.threadPost.setPostData({categoryId:t.pid||m.pid})),_()}(t)},children:t.name},t.pid)}))})]});return n?E:Object(r.jsxs)(ye.a,{className:Oe.a.tan,position:"bottom",maskClosable:!0,visible:i,onClose:function(){_()},children:[E,Object(r.jsx)("div",{className:"popup-cacel",onClick:function(){_()},children:"\u53d6\u6d88"})]})};je.defaultProps={show:!1,category:[],onVisibleChange:function(){},onChange:function(){}};var Ee=Object(E.c)("threadPost")(Object(E.d)(Object(Se.withRouter)(je))),Te=n("DetZ"),ke=n.n(Te),Ce=n("Ylwr"),Ae=n("9E0X"),Me=Object(E.c)("threadPost")(Object(E.d)((function(e){var t=Object(S.useState)(""),n=t[0],i=t[1],o=function(){var t=p()(d.a.mark((function t(){var r,i,o,a,s,c,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==n){t.next=2;break}return t.abrupt("return");case 2:return r=e.onAnalyseSuccess,i=e.threadPost,t.next=5,i.fetchProductAnalysis({address:n});case 5:o=t.sent,a=o.code,s=o.data,c=void 0===s?{}:s,l=o.msg,0===a?r(c):I.a.error({content:l});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=Object(r.jsx)("div",{className:Ae.a["parse-goods-box"],children:Object(r.jsxs)("div",{className:Ae.a.wrapper,children:[Object(r.jsx)("div",{className:Ae.a["parse-goods-title"],children:"\u73b0\u652f\u6301\u4ee5\u4e0b\u5546\u54c1\u94fe\u63a5"}),Object(r.jsx)("div",{className:Ae.a["parse-goods-image"],children:Y.d.map((function(e){return Object(r.jsxs)("div",{className:Ae.a["image-item"],children:[Object(r.jsx)("img",{src:e.src,alt:e.name,width:e.width,height:e.height}),Object(r.jsx)("span",{className:Ae.a["image-text"],children:e.name})]},e.name)}))}),Object(r.jsx)(ke.a.Textarea,{value:n,placeholder:"\u8bf7\u7c98\u8d34\\\u8f93\u5165\u5546\u54c1\u7684\u5206\u4eab\u94fe\u63a5",maxLength:49999,rows:8,onChange:function(e){return i(e.target.value)}}),!e.pc&&Object(r.jsxs)("div",{className:Ae.a["parse-goods-btn"],children:[Object(r.jsx)(we.a,{onClick:e.cancel,children:"\u53d6\u6d88"}),Object(r.jsx)(we.a,{type:"primary",onClick:o,children:"\u786e\u5b9a"})]})]})});return e.pc?Object(r.jsx)(Ce.a,{visible:e.visible,className:Ae.a.pc,onClose:e.cancel,title:"\u6dfb\u52a0\u5546\u54c1",onCacel:e.cancel,onConfirm:o,children:a}):a}))),Pe=n("bD8t"),Re=n("17x9"),Le=n.n(Re);function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e){var t=e.good,n=e.onDelete;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:Pe.a.content,children:[Object(r.jsx)("div",{className:Pe.a["content-left"],children:Object(r.jsx)("img",{className:Pe.a.image,src:t.imagePath,alt:t.title})}),Object(r.jsxs)("div",{className:Pe.a["content-right"],children:[Object(r.jsx)("p",{className:Pe.a["content-title"],children:t.title}),Object(r.jsxs)("span",{className:Pe.a["content-price"],children:["\uffe5",t.price]}),Object(r.jsx)("div",{className:Pe.a["delete-icon"],onClick:n,children:Object(r.jsx)(z.a,{name:"DeleteOutlined",size:16,color:"#8590A6"})})]})]})})}function Be(e){var t=e.addGood;return Object(r.jsxs)("div",{className:Pe.a["good-add-box"],onClick:t,children:[Object(r.jsx)(z.a,{name:"PlusOutlined",size:16,color:"#8590A6"}),Object(r.jsx)("span",{className:Pe.a["good-add-text"],children:"\u6dfb\u52a0\u5546\u54c1"})]})}var He=function(e){var t=Object(Se.useRouter)(),n=e.good,i=void 0===n?{}:n,o=e.pc?A()(Pe.a["post-good-box"],Pe.a.pc):Pe.a["post-good-box"];return Object(r.jsx)("div",{className:o,onClick:function(e){return e.stopPropagation()},children:i.title?Object(r.jsx)(Ie,De({},e)):Object(r.jsx)(Be,{addGood:function(){t.push("thread/100")}})})};He.PropTypes={good:Le.a.object.isRequired,clear:Le.a.func};var Ue=Object(S.memo)(He),qe=n("3adH"),Ve=n("NRhA"),Fe=n.n(Ve),We=n("0KMJ"),ze=(n("kSko"),n("toAj"),n("5Buo"),n("ouPs")),Xe=function(e){var t=e.confirm,n=e.cancel,i=e.data,o=e.pc,a=e.visible,s=Object(S.useState)(""),c=s[0],l=s[1],u=(new Date).getTime()+9e7,d=Object(S.useState)(Object(We.a)(u,"yyyy/MM/dd hh:mm")),f=d[0],p=d[1],h=Object(S.useState)(!1),m=h[0],v=h[1];Object(S.useEffect)((function(){void 0!==i&&Object.keys(i).length>0&&(i.value&&l(i.value),i.times&&p(i.times))}),[]);var b=function(){c<.1||c>1e6?I.a.warning({content:"\u8f93\u5165\u7684\u91d1\u989d\u6570\u9700\u8981\u57280.1\u5143\u52301000000\u5143\u4e4b\u95f4"}):new Date(f).getTime()-(new Date).getTime()<864e5?I.a.warning({content:"\u60ac\u8d4f\u65f6\u95f4\u8981\u5927\u4e8e\u5f53\u524d\u65f6\u95f424\u5c0f\u65f6"}):t({value:c,times:Object(We.a)(f,"yyyy/MM/dd hh:mm")})},g=Object(r.jsxs)("div",{className:ze.a.rewards,children:[Object(r.jsxs)("div",{className:ze.a["line-box"],children:[Object(r.jsx)("div",{className:ze.a.label,children:"\u60ac\u8d4f\u91d1\u989d"}),Object(r.jsxs)("div",{className:ze.a.item,children:[Object(r.jsx)(ke.a,{mode:"number",min:"0",max:"1000000",value:c,placeholder:"\u91d1\u989d",onChange:function(e){return l(e.target.value.replace(/\D*(\d*)(\.?)(\d{0,2})\d*/,"$1$2$3"))},pattern:"[0-9]*\\.?[0-9]{0,2}"}),"\u5143"]})]}),Object(r.jsxs)("div",{className:ze.a["line-box"],children:[Object(r.jsx)("div",{className:ze.a.label,children:"\u60ac\u8d4f\u7ed3\u675f\u65f6\u95f4"}),Object(r.jsx)("div",{className:ze.a.item,children:o?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Fe.a,{selected:new Date(f),minDate:new Date,onChange:function(e){return p(Object(We.a)(e,"yyyy/MM/dd hh:mm"))},showTimeSelect:!0,dateFormat:"yyyy/MM/dd HH:mm:ss",locale:"zh"}),Object(r.jsx)(z.a,{name:"RightOutlined"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{onClick:function(){return v(!0)},children:[" ",f," "]}),Object(r.jsx)(z.a,{name:"RightOutlined"})]})})]}),o?"":Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(qe.a,{onSelects:function(e){p(e),v(!1)},isOpen:m,onCancels:function(){return v(!1)}}),Object(r.jsxs)("div",{className:ze.a.btn,children:[Object(r.jsx)(we.a,{onClick:function(){return n()},children:"\u53d6\u6d88"}),Object(r.jsx)(we.a,{type:"primary",onClick:b,children:"\u786e\u5b9a"})]})]})]});return o?Object(r.jsx)(Ce.a,{visible:a,className:ze.a.pc,onClose:n,onCacel:n,onConfirm:b,title:"\u60ac\u8d4f\u95ee\u7b54",children:g}):g};Xe.defaultProps={confirm:function(){},cancel:function(){}};var Ye=Object(S.memo)(Xe),Ke=n("tlMM"),Ge=n("QILm"),Qe=n.n(Ge),Ze=n("4/hO");function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var et=function(e){var t=e.title,n=e.placeholder,i=e.isDisplay,o=e.onChange,a=e.onFocus,s=e.onBlur,c=Qe()(e,["title","placeholder","isDisplay","onChange","onFocus","onBlur"]),l=c.pc?"".concat(Ze.a.wrapper," ").concat(Ze.a.pc):Ze.a.wrapper;return Object(r.jsx)("div",{id:"dzq-threadpost-title",className:"".concat(i?l:Ze.a["is-display"]),onClick:function(e){return e.stopPropagation()},children:Object(r.jsx)(ke.a,$e($e({className:"".concat(Ze.a.title," ").concat(i?Ze.a["is-display"]:""),value:t,placeholder:n,onChange:function(e){return o(e.target.value)},onFocus:a,onBlur:s,maxLength:100},c),{},{focus:!1}))})};et.defaultProps={title:"",isDisplay:!1,placeholder:"\u6807\u9898\uff08\u53ef\u9009\uff09",onChange:function(){},onFocus:function(){},onBlur:function(){}};var tt,nt=Object(S.memo)(et),rt=n("882Z"),it=n.n(rt),ot=n("uXsA"),at=n("PJYZ"),st=n.n(at),ct=n("TNTI");function lt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x()(e);if(t){var i=x()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}var ut=Object(E.c)("site")(tt=Object(E.c)("mapUrl")(tt=Object(E.c)("onChange")(tt=Object(E.c)("onClose")(tt=function(e){y()(n,e);var t=lt(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).setLocation=r.setLocation.bind(st()(r)),r}return b()(n,[{key:"render",value:function(){return this.props.site.isPC?Object(r.jsx)(Ce.a,{pc:!0,visible:!0,className:ct.a.dialog,onClose:this.props.onClose,title:"\u4f60\u5728\u54ea\u91cc\uff1f",isCustomBtn:!0,children:Object(r.jsx)("iframe",{src:this.props.mapUrl,frameBorder:"0",scrolling:"no"})}):Object(r.jsxs)(ye.a,{className:ct.a.popup,position:"center",visible:!0,children:[Object(r.jsxs)("div",{className:ct.a.header,children:["\u4f60\u5728\u54ea\u91cc\uff1f",Object(r.jsx)(z.a,{className:ct.a["header-close"],name:"CloseOutlined",size:12,onClick:this.props.onClose})]}),Object(r.jsx)("div",{className:ct.a["iframe-box"],children:Object(r.jsx)("iframe",{src:this.props.mapUrl,frameBorder:"0",scrolling:"no"})})]})}},{key:"setLocation",value:function(e){var t=e.data;if(t&&"locationPicker"===t.module){var n=t.cityname,r=t.poiname,i=t.poiaddress,o=t.latlng,a=o.lat,s={longitude:o.lng,latitude:a,cityname:n,address:i,location:r};this.props.onChange(s),this.props.onClose()}}},{key:"componentDidMount",value:function(){window.addEventListener("message",this.setLocation,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.setLocation)}}]),n}(j.a.Component))||tt)||tt)||tt)||tt,dt=Object(S.memo)(ut);function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var pt=function(e){var t=e.position,n=e.lbskey,i=e.onChange,a=Object(S.useState)(""),s=a[0],c=a[1],l=Object(S.useState)(!1),u=l[0],f=l[1];Object(S.useEffect)((function(){n&&h(t)}),[t]);var h=function(e){var t="https://apis.map.qq.com/tools/locpicker?search=1&type=1&key=".concat(n,"&referer=myapp");if(Object.keys(e).length>0){var r="".concat(e.latitude,",").concat(e.longitude);t="".concat(t,"&coord=").concat(r)}c(t)},m=function(){var e=p()(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return I.a.error({content:"\u8bf7\u68c0\u67e5\u914d\u7f6e\u7684\u817e\u8baf\u4f4d\u7f6e\u670d\u52a1\u7684key\u662f\u5426\u8bbe\u7f6e\u6b63\u786e"}),e.abrupt("return");case 3:f(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:ot.a.position,children:[Object(r.jsxs)(it.a,{type:"primary",closeable:t.location,onClick:m,onClose:function(){return i({})},className:A()(ot.a.tag,o()({},ot.a.checked,!!t.location)),children:[Object(r.jsx)(z.a,{name:"PositionOutlined",size:12}),t.location||"\u4f60\u5728\u54ea\u91cc\uff1f"]}),u?Object(r.jsx)(dt,{mapUrl:s,onClose:function(){f(!u)},onChange:function(e){if(e.latitude!==t.latitude){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);"\u6211\u7684\u4f4d\u7f6e"===n.location&&(n.location=n.cityname),i(n)}}}):""]})};pt.defaultProps={position:{},lbskey:"",onChange:function(){}};var ht,mt=pt,vt=n("FhbE"),bt=n("zh2w"),gt=n("VVxn");function yt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x()(e);if(t){var i=x()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}var _t=Object(E.c)("threadPost")(ht=Object(E.d)(ht=function(e){y()(n,e);var t=yt(n);function n(e){var i;return m()(this,n),(i=t.call(this,e)).getSearchKeyword=function(){return i.state.keywords||i.props.threadPost.editorHintTopicKey},i.updateKeywords=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i.setState({keywords:e,page:1,finish:!1}),i.searchInput()},i.searchInput=function(){clearTimeout(i.timer),i.timer=setTimeout((function(){i.fetchTopics(1)}),300)},i.handleItemClick=function(e){var t=" #".concat(e.content,"# ");i.props.clickTopic(t),i.props.cancelTopic()},i.renderItem=function(e){return Object(r.jsx)("div",{className:bt.a["topic-item"],onClick:function(){return i.handleItemClick(e)},children:Object(r.jsxs)("div",{className:bt.a["topic-item__inner"],children:[Object(r.jsx)("div",{className:bt.a["item-left"],children:Object(r.jsxs)("div",{className:bt.a.name,children:["#",e.content,"#"]})}),Object(r.jsx)("div",{className:bt.a["item-right"],children:e.newTopic?e.newTopic:"".concat(e.viewCount,"\u70ed\u5ea6")})]})})},i.state={keywords:"",page:1,perPage:20,finish:!1},i.timer=null,i}return b()(n,[{key:"componentDidMount",value:function(){var e=p()(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.fetchTopics();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTopics",value:function(){var e=p()(d.a.mark((function e(t){var n,r,i,o,a,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.threadPost.fetchTopic,r=this.state.perPage,i=t||this.state.page,(o={page:i,perPage:r}).filter={},this.getSearchKeyword()?o.filter.content=this.getSearchKeyword():o.filter.recommended=1,e.next=8,n(o);case 8:a=e.sent,s=a.code,c=a.data,0===s?this.setState({page:i+1,finish:i>=c.totalPage}):(this.setState({finish:!0}),I.a.error({content:a.msg}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.pc,i=t.visible,o=void 0!==i&&i,a=t.cancelTopic,s=t.threadPost,c=t.style,l=void 0===c?{}:c,u=s.topics,d=void 0===u?[]:u,f=s.showNewTopic,p=this.state.finish,h=n?"pc":"h5",m=this.getSearchKeyword(),v=Object(r.jsxs)("div",{className:bt.a.wrapper,onClick:function(e){return e.stopPropagation()},children:[Object(r.jsxs)("div",{className:bt.a.header,children:[Object(r.jsxs)("div",{className:bt.a["input-box"],children:[!n&&Object(r.jsx)("div",{className:bt.a["icon-box"],children:Object(r.jsx)(z.a,{className:bt.a["search-icon"],name:"SearchOutlined",size:16})}),Object(r.jsx)(ke.a,{value:m,placeholder:"\u8bf7\u9009\u62e9\u6216\u76f4\u63a5\u8f93\u5165\u8bdd\u9898",onChange:function(t){return e.updateKeywords(t.target.value)}}),!n&&m&&Object(r.jsx)("div",{className:bt.a["icon-box"],onClick:function(){return e.updateKeywords()},children:Object(r.jsx)(z.a,{className:bt.a["delete-icon"],name:"WrongOutlined",size:16})})]}),!n&&Object(r.jsx)("div",{className:bt.a["btn-cancel"],onClick:a,children:"\u53d6\u6d88"})]}),Object(r.jsxs)(gt.a,{className:bt.a.list,wrapperClass:bt.a.list__inner,height:n?"auto":"calc(100vh - 50px)",noMore:p,onRefresh:function(){return e.fetchTopics()},immediateCheck:!1,platform:h,children:[f&&this.renderItem({content:m,newTopic:"\u65b0\u8bdd\u9898"}),d.map((function(t){return Object(r.jsx)(j.a.Fragment,{children:e.renderItem(t)},t.topicId)}))]})]});return n?Object(r.jsxs)("div",{className:bt.a.pc,style:l,id:"dzq-toolbar-topic",children:[Object(r.jsx)("div",{className:bt.a.pcHeader,children:"#\u6dfb\u52a0\u8bdd\u9898#"}),v]}):Object(r.jsx)(ye.a,{className:bt.a.popup,position:"center",visible:o,children:v})}}]),n}(S.Component))||ht)||ht,wt=(n("rNhl"),n("BGqZ")),Ot=n.n(wt),xt=n("qg4Y"),St=function(e){var t=e.data,n=e.confirm,i=e.cancel,o=e.pc,a=e.visible,s=Object(S.useState)(1),c=s[0],l=s[1],u=Object(S.useState)(0),d=u[0],f=u[1],p=Object(S.useState)(""),h=p[0],m=p[1],v=Object(S.useState)(""),b=v[0],g=v[1],y=Object(S.useState)(""),_=y[0],w=y[1],O=function(){i()};Object(S.useEffect)((function(){void 0!==t&&Object.keys(t).length>0&&(l(t.rule),f(t.condition),m(t.price),g(t.number),w(t.likenum))}),[]);var x=function(){(h?parseFloat(h)<.1||parseFloat(h)>200?(I.a.warning({content:"\u53ef\u8f93\u5165\u7ea2\u5305\u91d1\u989d\u4e3a0.1 ~ 200\u5143",duration:2e3}),0):b?parseInt(b)>100||parseInt(b)<1?(I.a.warning({content:"\u53ef\u8f93\u5165\u7ea2\u5305\u4e2a\u6570\u4e3a1 ~ 100\u4e2a",duration:2e3}),0):1===c&&.01*parseInt(b)>parseFloat(h)?(I.a.warning({content:"\u5f53\u524d\u968f\u673a\u6a21\u5f0f\u4e0b\u7ea2\u5305\u91d1\u989d\u3001\u6570\u91cf\u4e0d\u5339\u914d",duration:2e3}),0):1!==d||_?!(1===d&&parseInt(_)>250)||(I.a.warning({content:"\u53ef\u8f93\u5165\u70b9\u8d5e\u6570\u4e3a1 ~ 250\u4e2a",duration:2e3}),0):(I.a.warning({content:"\u8bf7\u8f93\u5165\u70b9\u8d5e\u6570",duration:2e3}),0):(I.a.warning({content:"\u8bf7\u8f93\u5165\u7ea2\u5305\u4e2a\u6570",duration:2e3}),0):(I.a.warning({content:"\u8bf7\u8f93\u5165\u7ea2\u5305\u91d1\u989d",duration:2e3}),0))&&(n({rule:c,price:parseFloat(h),number:parseInt(b),condition:d,likenum:parseInt(_)}),O())},j=Object(r.jsxs)("div",{className:xt.a["redpacket-box"],onClick:function(e){return e.stopPropagation()},children:[Object(r.jsxs)("div",{className:xt.a["line-box"],children:[Object(r.jsx)("div",{className:xt.a.label,children:"\u53d1\u653e\u89c4\u5219"}),Object(r.jsx)("div",{className:xt.a.item,children:Object(r.jsxs)(Ot.a.Group,{value:c,onChange:function(e){l(e)},children:[Object(r.jsx)(Ot.a,{name:1,children:" \u968f\u673a "})," ",Object(r.jsx)(Ot.a,{name:0,children:" \u5b9a\u989d "})]})})]}),Object(r.jsxs)("div",{className:xt.a["line-box"],children:[Object(r.jsx)("div",{className:xt.a.label,children:1===c?"\u7ea2\u5305\u603b\u91d1\u989d":"\u7ea2\u5305\u5355\u4e2a\u91d1\u989d"}),Object(r.jsxs)("div",{className:xt.a.item,children:[Object(r.jsx)(ke.a,{mode:"number",placeholder:"\u91d1\u989d",value:h,onChange:function(e){return function(e){var t=e.match(/([1-9]\d{0,2}|0)(\.\d{0,2})?/);m(t?t[0]:"")}(e.target.value)}}),"\u5143"]})]}),Object(r.jsxs)("div",{className:xt.a["line-box"],children:[Object(r.jsx)("div",{className:xt.a.label,children:"\u7ea2\u5305\u4e2a\u6570"}),Object(r.jsxs)("div",{className:xt.a.item,children:[Object(r.jsx)(ke.a,{mode:"number",htmlType:"number",value:b,placeholder:"\u4e2a\u6570",onChange:function(e){return function(e){var t=e.match(/[1-9]\d{0,2}/);g(t?t[0]:"")}(e.target.value)}}),"\u4e2a"]})]}),Object(r.jsxs)("div",{className:xt.a["line-box"],children:[Object(r.jsx)("div",{className:xt.a.label,children:"\u83b7\u5229\u6761\u4ef6"}),Object(r.jsx)("div",{className:xt.a.item,children:Object(r.jsxs)(Ot.a.Group,{value:d,onChange:function(e){f(e)},children:[Object(r.jsx)(Ot.a,{name:0,children:" \u56de\u590d\u9886\u7ea2\u5305 "})," ",Object(r.jsx)(Ot.a,{name:1,children:" \u96c6\u8d5e\u9886\u7ea2\u5305 "})]})})]}),1===d&&Object(r.jsx)("div",{className:xt.a.likenum,children:Object(r.jsxs)("div",{className:xt.a["likenum-input"],children:[Object(r.jsx)(ke.a,{mode:"number",htmlType:"number",placeholder:"\u4e2a\u6570",value:_,onChange:function(e){return function(e){var t=e.match(/[1-9]\d{0,2}/);w(t?t[0]:"")}(e.target.value)}}),"\u4e2a"]})}),!o&&Object(r.jsxs)("div",{className:xt.a.btn,children:[Object(r.jsx)(we.a,{onClick:function(){O()},children:"\u53d6\u6d88"}),Object(r.jsx)(we.a,{type:"primary",onClick:x,children:"\u786e\u5b9a"})]})]});return o?Object(r.jsx)(Ce.a,{visible:a,className:xt.a.pc,onClose:O,title:"\u6dfb\u52a0\u7ea2\u5305",onCacel:O,onConfirm:x,children:j}):j};St.defaultProps={visible:!1,data:{},confirm:function(){},cancel:function(){}};var jt=Object(S.memo)(St),Et=n("qN/V"),Tt=function(e){var t=e.list,n=e.onClick,i=e.cancel,o=e.visible,a=function(e){n(e),i()};return Object(r.jsx)(ye.a,{position:"bottom",maskClosable:!0,visible:o,onClose:function(){i()},children:Object(r.jsxs)("div",{className:Et.a.container,children:[Object(r.jsx)("div",{className:Et.a.list,children:t.map((function(e){return Object(r.jsx)("p",{className:Et.a.item,onClick:function(){a(e)},children:e},e)}))}),Object(r.jsx)("p",{className:Et.a.cancel,onClick:function(){i()},children:"\u53d6\u6d88"})]})})};Tt.defaultProps={list:["\u4fdd\u5b58\u8349\u7a3f","\u4e0d\u4fdd\u5b58"]};var kt=Object(S.memo)(Tt),Ct=n("40Bt"),At=n.n(Ct),Mt=n("pWTg"),Pt=n("dQ0f");function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nt=Object(E.c)("threadPost")(Object(E.d)((function(e){var t=e.threadPost,n=e.cancel,i=e.paidType,o=e.pc,a=e.visible,s="\u5e16\u5b50\u4ed8\u8d39"===i,c="\u9644\u4ef6\u4ed8\u8d39"===i,l=parseInt(i)===R.j.voice,u=Object(S.useState)(""),d=u[0],f=u[1],p=Object(S.useState)(!1),h=p[0],m=p[1],v=Object(S.useState)(0),b=v[0],g=v[1];Object(S.useEffect)((function(){var e,n,r=t.postData;(s&&(r.price&&f(r.price),g(100*r.freeWords)),c&&r.attachmentPrice&&f(r.attachmentPrice),l)&&((null===(e=r.audio)||void 0===e?void 0:e.price)&&f(null===(n=r.audio)||void 0===n?void 0:n.price))}),[]),Object(S.useEffect)((function(){l&&""!==d&&h&&m(!1)}),[d]);var y=function(e){var t=e.match(/([1-9]\d{0,5}|0)(\.\d{0,2})?/);f(t?t[0]:"")},_=function(){if(l&&h||(d?parseFloat(d)<.1?(I.a.info({content:"\u4ed8\u8d39\u91d1\u989d\u6700\u4f4e0.1\u5143",duration:2e3}),0):!(parseFloat(d)>1e5)||(I.a.info({content:"\u4ed8\u8d39\u91d1\u989d\u6700\u9ad810w\u5143",duration:2e3}),0):(I.a.info({content:"\u8bf7\u8f93\u5165\u4ed8\u8d39\u91d1\u989d",duration:2e3}),0))){var e=t.setPostData,r=t.postData;s&&e({price:parseFloat(d),freeWords:b/100}),c&&e({attachmentPrice:parseFloat(d)}),l&&e({audio:Lt(Lt({},r.audio),{},{price:d?parseFloat(d):0})}),n()}},w=Object(r.jsxs)("div",{className:Mt.a.wrapper,children:[s&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:Mt.a["paid-item"],children:[Object(r.jsx)("div",{className:Mt.a.left,children:"\u652f\u4ed8\u91d1\u989d"}),Object(r.jsxs)("div",{className:Mt.a.right,children:[Object(r.jsx)(ke.a,{mode:"number",value:d,placeholder:"\u91d1\u989d",maxLength:9,onChange:function(e){return y(e.target.value)}}),"\xa0\u5143"]})]}),Object(r.jsxs)("div",{className:Mt.a.free,children:[Object(r.jsx)("div",{className:Mt.a["free-title"],children:"\u514d\u8d39\u67e5\u770b\u5b57\u6570"}),Object(r.jsx)(At.a,{value:b,defaultValue:b,formatter:function(e){return"".concat(e," %")},onChange:Object(Pt.a)((function(e){return g(e)}),100)})]})]}),c&&Object(r.jsxs)("div",{className:Mt.a["paid-item"],children:[Object(r.jsx)("div",{className:Mt.a.left,children:"\u9644\u4ef6\u5185\u5bb9\u67e5\u770b\u4ef7\u683c"}),Object(r.jsxs)("div",{className:Mt.a.right,children:[Object(r.jsx)(ke.a,{mode:"number",value:d,placeholder:"\u91d1\u989d",maxLength:9,onChange:function(e){return y(e.target.value)}}),"\xa0\u5143"]})]}),l&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:Mt.a["paid-item"],children:[Object(r.jsx)("div",{className:Mt.a.left,children:"\u514d\u8d39"}),Object(r.jsx)("div",{className:Mt.a.right,children:Object(r.jsx)(Ot.a,{value:h,onChange:function(e){return(t=e)&&f(""),void m(t);var t}})})]}),Object(r.jsxs)("div",{className:Mt.a["paid-item"],children:[Object(r.jsx)("div",{className:Mt.a.left,children:"\u652f\u4ed8\u91d1\u989d"}),Object(r.jsxs)("div",{className:Mt.a.right,children:[Object(r.jsx)(ke.a,{mode:"number",value:d,placeholder:"\u91d1\u989d",maxLength:9,onChange:function(e){return y(e.target.value)}}),"\xa0\u5143"]})]})]}),!o&&Object(r.jsxs)("div",{className:Mt.a.btn,children:[Object(r.jsx)(we.a,{onClick:n,children:"\u53d6\u6d88"}),Object(r.jsx)(we.a,{className:Mt.a["btn-confirm"],onClick:_,children:"\u786e\u5b9a"})]})]});return o?Object(r.jsx)(Ce.a,{title:i,visible:a,className:Mt.a.pc,onClose:n,onCacel:n,onConfirm:_,children:w}):w})));Nt.defaultProps={visible:!1,paidType:"\u5e16\u5b50\u4ed8\u8d39",cancel:function(){}};var Dt=Nt,It=n("ISD9"),Bt=n("z8Av"),Ht=n("B5JU"),Ut=n.n(Ht),qt=n("/xc8"),Vt=n("h29V"),Ft=n.n(Vt);function Wt(e){var t=e.pc,n=e.src,i=e.onReady,o=void 0===i?function(){}:i,a=e.onDelete,s=void 0===a?function(){}:a,c=t?qt.a.pc:qt.a.h5;return Object(r.jsxs)("div",{id:"dzq-post-video",className:"".concat(qt.a["post-video"]," ").concat(c),onClick:function(e){return e.stopPropagation()},children:[Object(r.jsx)(Ft.a,{src:n,onReady:o}),Object(r.jsx)("div",{className:qt.a["post-video__delete"],onClick:s,children:Object(r.jsx)(z.a,{name:"DeleteOutlined"})})]})}var zt=n("K4C1"),Xt=n("lW1z");var Yt=Object(E.c)("threadPost")(Object(E.d)(Object(Se.withRouter)((function(e){var t=e.canEditRedpacket,n=e.canEditReward,i=e.postData,o=void 0===i?{}:i,a=e.onAttachClick,s=void 0===a?function(){}:a,c=e.onDefaultClick,l=void 0===c?function(){}:c,u=e.payTotalMoney,d=e.redTotalMoney,f=e.pc?zt.a.pc:zt.a.h5,p=Object(r.jsxs)(r.Fragment,{children:[!(!o.price&&!o.attachmentPrice)&&Object(r.jsxs)(it.a,{closeable:!0,onClose:function(){return e.setPostData({price:0,attachmentPrice:0})},onClick:function(){var t=o.price?Y.e[0].name:Y.e[1].name;e.handleSetState({curPaySelect:t})},children:["\u4ed8\u8d39\u603b\u989d",u,"\u5143"]}),o.redpacket.price&&Object(r.jsxs)(it.a,{closeable:t,onClose:function(){l({id:Y.c.redpacket,type:R.j.redPacket},{},{redpacket:{}})},onClick:function(){l({id:Y.c.redpacket,type:R.j.redPacket},{})},children:[1===o.redpacket.rule?"\u968f\u673a\u7ea2\u5305":"\u5b9a\u989d\u7ea2\u5305","\\\u603b\u91d1\u989d",d,"\u5143\\",o.redpacket.number,"\u4e2a",1===o.redpacket.condition&&"\\\u96c6\u8d5e\u4e2a\u6570".concat(o.redpacket.likenum)]}),o.rewardQa.value&&o.rewardQa.times&&Object(r.jsx)(it.a,{closeable:n,onClose:function(){return s({type:R.j.reward},{rewardQa:{}})},onClick:function(){s({type:R.j.reward})},children:"\u60ac\u8d4f\u91d1\u989d".concat(Object(Xt.a)(o.rewardQa.value,0),"\u5143\\\u7ed3\u675f\u65f6\u95f4 ").concat(o.rewardQa.times)})]});return e.pc?p:Object(r.jsx)("div",{id:"dzq-money-box",className:"".concat(zt.a["money-box"]," ").concat(f),onClick:function(e){return e.stopPropagation()},children:p})})))),Kt=n("X6IV"),Gt="__dzq-thread-postdata",Qt=function(e,t){var n,r=Kt.a.get(Gt);return r&&e===(null===r||void 0===r?void 0:r.userId)?t&&parseInt(t,10)!==parseInt(null===r||void 0===r||null===(n=r.postData)||void 0===n?void 0:n.threadId,10)?null:null===r||void 0===r?void 0:r.postData:null},Zt=n("pEr4");function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var en,tn,nn=Object(E.c)("threadPost","user")(Object(E.d)(Object(Se.withRouter)((function(e){var t=e.threadPost,n=e.user,i=e.className,o=void 0===i?"":i,a=e.pc,s=e.router,c=a?Zt.a.pc:Zt.a.h5;return t.isHaveLocalData?Object(r.jsxs)(it.a,{className:A()(o,c,Zt.a["tag-local-data"]),closeable:!0,onClose:function(){t.setLocalDataStatus(!1)},onClick:function(){var e=Qt(n.userInfo.id,s.query.id)||{},r=e.contentText||"";t.setLocalDataStatus(!1),t.setPostData($t($t({},e),{},{contentText:r.replace(/<br \/>\n/g,"<br />"),autoSaveTime:"",isResetContentText:!0}))},children:["\u6709\u672c\u5730\u7f13\u5b58",Object(r.jsx)("span",{className:Zt.a["local-open"],children:"\u6253\u5f00"})]}):null})))),rn=n("qqkn"),on=function(e){var t=e.onDelete,n=e.isPc,i=e.onClick;return Object(r.jsxs)("div",{className:rn.a["vote-widget"],style:{margin:n?0:"0 16px"},onClick:i,children:[Object(r.jsxs)("div",{className:rn.a.left,children:[Object(r.jsx)(z.a,{className:rn.a.icon,name:"VoteOutlined"}),Object(r.jsx)("span",{className:rn.a.text,children:"\u6295\u7968"})]}),Object(r.jsx)(z.a,{className:rn.a.right,name:"DeleteOutlined",onClick:function(e){e.stopPropagation(),t()}})]})},an=(n("SYor"),n("fw8D")),sn=Object(E.c)("threadPost")(Object(E.d)((function(e){var t,n,i=e.cancel,o=e.pc,a=e.visible,c=e.threadPost,l=JSON.parse(JSON.stringify(c.postData)),u=null===l||void 0===l||null===(t=l.vote)||void 0===t?void 0:t.voteTitle,d=(null===l||void 0===l||null===(n=l.vote)||void 0===n?void 0:n.voteId)||"",f=Object(S.useState)(u?l.vote.subitems:[{id:0,content:""},{id:0,content:""}]),p=f[0],h=f[1],m=Object(S.useState)(u?l.vote.voteTitle:""),v=m[0],b=m[1],g=Object(S.useState)(u?l.vote.choiceType:1),y=g[0],_=g[1],w=Object(S.useState)(u?l.vote.expiredAt:Object(We.a)(new Date((new Date).getTime()+36e5),"yyyy/MM/dd hh:mm")),O=w[0],x=w[1],j=Object(S.useState)(!1),E=j[0],T=j[1],k=function(){var e=s()(p);e=e.filter((function(e){return!!e.content})),v?e.length<2?I.a.info({content:"\u81f3\u5c11\u9700\u8981\u63d0\u4f9b\u4e24\u4e2a\u6709\u6548\u9009\u9879"}):new Date(O)<new Date?I.a.info({content:"\u6295\u7968\u7ed3\u675f\u65f6\u95f4\u5fc5\u987b\u5927\u4e8e\u5f53\u524d\u65f6\u95f4"}):(h(e),c.setPostData({vote:{voteId:d,voteTitle:v,choiceType:y,expiredAt:Object(We.a)(new Date(O),"yyyy/MM/dd hh:mm:ss"),subitems:e}}),i()):I.a.info({content:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a"})},C=Object(r.jsxs)("div",{className:an.a["vote-editor"],onClick:function(e){return e.stopPropagation()},style:o?{}:{overflow:"auto",paddingBottom:"59px"},children:[Object(r.jsxs)("div",{className:an.a["line-box"],style:{justifyContent:"unset"},children:[Object(r.jsx)("div",{className:an.a.label,children:"\u6807\u9898"}),Object(r.jsx)("div",{className:an.a.item,style:{marginLeft:"16px"},children:Object(r.jsx)(ke.a,{mode:"text",placeholder:"\u6807\u9898\u6700\u591a\u652f\u630125\u4e2a\u5b57",value:v,onChange:function(e){return b(e.target.value.trim().substr(0,25))}})})]}),Object(r.jsx)("div",{className:an.a["line-box"],children:Object(r.jsxs)("div",{className:an.a.label,children:[Object(r.jsx)("span",{children:"\u6295\u7968\u9009\u9879"}),Object(r.jsx)("span",{className:an.a.tips,children:"\u6700\u591a\u652f\u630120\u4e2a\u5b57"})]})}),p.map((function(e,t){return Object(r.jsxs)("div",{className:an.a["line-box"],style:{justifyContent:"unset"},children:[Object(r.jsx)("div",{className:an.a.label,children:"".concat(t+1,".")}),Object(r.jsx)("div",{className:an.a.item,style:{marginLeft:"16px"},children:Object(r.jsx)(ke.a,{mode:"text",value:e.content,onChange:function(e){var n=s()(p);n[t].content=e.target.value.trim().substr(0,20),h(n)}})}),Object(r.jsx)(z.a,{style:{visibility:p.length>2?"visible":"hidden"},name:"DeleteOutlined",className:an.a["delete-icon"],onClick:function(e){var n=s()(p);n.splice(t,1),h(n)}})]},t)})),Object(r.jsx)("div",{className:"".concat(an.a["line-box"]," ").concat(an.a["add-btn"]),children:Object(r.jsxs)(we.a,{style:{visibility:p.length<20?"visible":"hidden"},onClick:function(){var e=s()(p);e.push({id:0,content:""}),h(e)},children:[Object(r.jsx)(z.a,{name:"PlusOutlined",size:10}),Object(r.jsx)("span",{children:"\u6dfb\u52a0\u9009\u9879"})]})}),Object(r.jsxs)("div",{className:an.a["line-box"],children:[Object(r.jsx)("div",{className:an.a.label,children:"\u6295\u7968\u65b9\u5f0f"}),Object(r.jsx)("div",{className:an.a.item,children:Object(r.jsxs)(Ot.a.Group,{value:y,onChange:function(e){_(e)},children:[Object(r.jsx)(Ot.a,{name:1,children:" \u5355\u9009 "}),Object(r.jsx)(Ot.a,{name:2,children:" \u591a\u9009 "})]})})]}),Object(r.jsxs)("div",{className:an.a["line-box"],children:[Object(r.jsx)("div",{className:an.a.label,children:"\u7ed3\u675f\u65f6\u95f4"}),Object(r.jsx)("div",{className:"".concat(an.a.item," ").concat(an.a.times),children:o?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Fe.a,{selected:new Date(O),minDate:new Date,onChange:function(e){return x(Object(We.a)(e,"yyyy/MM/dd hh:mm"))},showTimeSelect:!0,dateFormat:"yyyy/MM/dd HH:mm:ss",locale:"zh"}),Object(r.jsx)(z.a,{name:"RightOutlined"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{onClick:function(){return T(!0)},children:O}),Object(r.jsx)(z.a,{name:"RightOutlined"})]})})]}),o?"":Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(qe.a,{onSelects:function(e){x(e),T(!1)},isOpen:E,onCancels:function(){return T(!1)}}),Object(r.jsxs)("div",{className:an.a.btn,style:{position:o?"absolute":"fixed"},children:[Object(r.jsx)(we.a,{onClick:function(){return i()},children:"\u53d6\u6d88"}),Object(r.jsx)(we.a,{type:"primary",onClick:function(){},children:"\u786e\u5b9a"})]})]}),!o&&Object(r.jsxs)("div",{className:an.a.btn,style:{position:o?"absolute":"fixed"},children:[Object(r.jsx)(we.a,{onClick:function(){i()},children:"\u53d6\u6d88"}),Object(r.jsx)(we.a,{type:"primary",onClick:k,children:"\u53d1\u8d77\u6295\u7968"})]})]});return o?Object(r.jsx)(Ce.a,{maskClosable:!1,visible:a,className:an.a.pc,onClose:i,title:u?"\u7f16\u8f91\u6295\u7968":"\u521b\u5efa\u6295\u7968",onCacel:i,onConfirm:k,confirmText:"\u53d1\u8d77\u6295\u7968",children:C}):C}))),cn=n("bfFJ"),ln=n("iIZw"),un="local",dn="network",fn=(en={},o()(en,un,"\u672c\u5730\u4e0a\u4f20"),o()(en,dn,"\u7f51\u7edc\u63d2\u5165"),en),pn=["player.bilibili.com","em.iq.com","player.youku.com","music.163.com","iqiyi","youku","xigua"],hn=Object(E.c)("threadPost")(Object(E.d)((function(e){var t=e.visible,n=e.pc,i=e.onCancel,o=void 0===i?function(){}:i,a=e.onUploadChange,s=void 0===a?function(){}:a,c=e.beforeUpload,u=e.threadPost,d=Object(S.useState)(un),f=d[0],p=d[1],h=Object(S.useState)("\u4e0a\u4f20"),m=h[0],v=h[1],b=Object(S.useState)(""),g=b[0],y=b[1],_=function(){if(f===un)return!0;var e=!1;if(/iframe/gi.test(g)){var t=g.match(/src=["']([\S]*[^\s<>"']*)["']/gi)||[],n=l()(t,1)[0];pn.map((function(t){return n.indexOf(t)>-1&&(e=!0),t}))}e?(u.setPostData({iframe:{content:g,type:"iframe"}}),o()):I.a.info({content:"iframe\u5730\u5740\u4e0d\u7b26\u5408\u8981\u6c42"})},w=Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ot.a.Group,{defaultValue:f,className:ln.a["radio-reverse"],onChange:function(e){return p(e)},children:Object.keys(fn).map((function(e){return Object(r.jsx)(Ot.a,{name:e,children:fn[e]},e)}))}),f===dn&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:ln.a.item,children:[Object(r.jsx)("span",{className:ln.a.label,children:"\u7f51\u7edc\u97f3\u89c6\u9891iframe\u4ee3\u7801"}),Object(r.jsx)(ke.a,{value:g,onChange:function(e){return function(e){var t=e.target.value;y(t)}(e)}})]}),Object(r.jsxs)("div",{className:A()(ln.a.item,ln.a.flextop),children:[Object(r.jsx)("span",{className:ln.a.left,children:"*"}),Object(r.jsx)("span",{className:ln.a.right,children:"\u76ee\u524d\u4ec5\u652f\u6301\u63d2\u5165\u7231\u5947\u827a\u3001\u4f18\u9177\u3001\u897f\u74dc\u89c6\u9891\u3001B\u7ad9\u89c6\u9891\uff1b\u7f51\u6613\u4e91\u97f3\u4e50\u97f3\u9891"})]})]})]});return Object(S.useEffect)((function(){f===un&&v("\u4e0a\u4f20"),f===dn&&v("\u63d2\u5165")}),[f]),n?Object(r.jsx)(Ce.a,{accept:"video/*",limit:1,visible:t,confirmText:m,confirmType:f===un?"upload":"",beforeUpload:c,onUploadChange:s,onCacel:o,onClose:o,onConfirm:_,confirmDisabled:f===dn&&!g,className:f===un?ln.a.local:ln.a.network,children:w}):Object(r.jsxs)(ye.a,{className:ln.a.popup,position:"bottom",maskClosable:!0,visible:t,onClose:o,children:[w,Object(r.jsxs)("div",{className:ln.a.btn,children:[Object(r.jsx)(we.a,{onClick:o,children:"\u53d6\u6d88"}),Object(r.jsx)(cn.a,{isChoose:f===un,onChange:s,accept:"video/*",limit:1,beforeUpload:c,children:Object(r.jsx)(we.a,{className:ln.a.confirmbtn,type:"primary",disabled:f===dn&&!g,onClick:_,children:m})})]})]})}))),mn=n("uYGS");function vn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x()(e);if(t){var i=x()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function bn(){var e=window.navigator.userAgent.toLowerCase();return{isIOS:/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i.test(e),isAndroid:/android/.test(e),isMiuiBrowser:/miuibrowser/i.test(e)}}function gn(){return bn().isIOS||bn().isMiuiBrowser}var yn,_n=Object(E.c)("threadPost")(tn=Object(E.c)("site")(tn=Object(E.c)("index")(tn=Object(E.c)("thread")(tn=Object(E.c)("user")(tn=Object(E.d)(tn=function(e){y()(n,e);var t=vn(n);function n(){var e;m()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).handler=function(){gn()&&Object(Pt.a)(e.setBottomBarStyle(window.scrollY),50)},e.androidHandler=function(){if(!e.props.currentDefaultOperation&&!e.props.currentAttachOperation){var t=Object(It.b)();bn().isAndroid&&(window.innerHeight===t?e.clearBottomFixed():e.props.handleSetState({currentDefaultOperation:""}))}},e.positionDisplay=function(e){var t=document.querySelector("#post-position");t&&(t.style.display="select"===e?"none":"flex")},e.moneyboxDisplay=function(e){var t=document.querySelector("#dzq-money-box");t&&(t.style.display=e?"flex":"none")},e.localdataTagDisplay=function(e){var t=document.querySelector("#post-localdata");t&&(t.style.display=e?"block":"none")},e.setBottomBarStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=Object(It.b)();if(window.clientHeight!==i||!bn().isIOS){var o=document.querySelector("#dzq-vditor .vditor-toolbar");e.positionDisplay(n),gn()?o&&"select"===n&&(o.style.position="fixed",o.style.top="".concat(i-132+t,"px")):o&&"select"===n&&(o.style.position="fixed",o.style.bottom="88px",o.style.top="auto"),e.moneyboxDisplay(!1),e.localdataTagDisplay(!1),e.setPostBox(n,r,t)}},e.setPostBox=function(t,n,r){var i=setTimeout((function(){clearTimeout(i);var o=Object(It.b)(),a=document.querySelector("#post-inner"),s=document.querySelector("#dzq-threadpost-title"),c=e.getBottombarHeight(t),l=o-c-10;if(a&&("none"!==(null===s||void 0===s?void 0:s.display)&&(l=o-c-54),a.style.height="".concat(l,"px")),n){var u,d=null===n||void 0===n?void 0:n.clientY,f=(null===n||void 0===n||null===(u=n.target)||void 0===u?void 0:u.offsetTop)||0;d>l&&(e.props.handleEditorBoxScroller(f),gn()&&window.scrollTo(0,0))}"clear"!==t&&e.setPostBottombar(t,r)}),0)},e.getBottombarHeight=function(t){var n,r=document.querySelector("#post-position"),i=document.querySelector("#dvditor-toolbar"),o=document.querySelector("#dzq-money-box"),a=123;return"select"===t&&(a=88),r||(a=88),e.props.currentDefaultOperation===Y.c.emoji?(a+=218,i&&(i.className+=" ".concat(X.a.emoji))):i&&(i.className=X.a["dvditor-toolbar"]),o&&"none"!==(null===o||void 0===o||null===(n=o.style)||void 0===n?void 0:n.display)&&(a+=50),a},e.setPostBottombar=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=setTimeout((function(){clearTimeout(r);var i=Object(It.b)(),o=document.querySelector("#post-bottombar");if(gn()){var a=e.getBottombarHeight(t);o.style.top="".concat(i-a+n,"px")}}),100)},e.setBottomFixed=function(t,n){var r=setTimeout((function(){r&&clearTimeout(r),e.setBottomBarStyle(0,t,n)}),150)},e.clearBottomFixed=function(){e.moneyboxDisplay(!0);var t=setTimeout((function(){t&&clearTimeout(t);var n=document.querySelector("#post-bottombar");n&&(e.positionDisplay(),e.setPostBox("clear"),n.style.top="auto",n.style.bottom="0px",e.localdataTagDisplay(!0))}),300)},e.handleCategoryClick=function(){e.props.handleSetState({categoryChooseShow:!0,currentDefaultOperation:""})},e.handlePageJump=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=e.props,r=n.postType,i=n.threadPost.postData,o=i.contentText,a=i.images,s=i.video,c=i.files,l=i.audio;e.props.checkAudioRecordStatus()&&("isEdit"!==r&&(o||s.id||l.id||Object.values(a).length||Object.values(c).length)?e.props.handleSetState({draftShow:!0,jumpLink:t}):t?Ut.a.push({url:t}):window.history.length<=1?Ut.a.redirect({url:"/"}):Ut.a.back())},e}return b()(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handler),window.addEventListener("resize",this.androidHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handler),window.removeEventListener("resize",this.androidHandler)}},{key:"render",value:function(){var e,t,n,i,o,a=this,s=this.props,c=s.threadPost,l=s.user,u=s.site,d=l.threadExtendPermissions,f=l.permissions,p=c.postData,h=c.setPostData,m=u.webConfig,v=void 0===m?{}:m,b=v.setAttach,g=v.qcloud,y=b.supportImgExt,_=b.supportMaxSize,w=g.qcloudCosBucketName,O=g.qcloudCosBucketArea,x=g.qcloudCosSignUrl,S=g.qcloudCos,j=this.props,E=j.emoji,T=j.topic,k=j.atList,C=j.currentDefaultOperation,A=j.currentAttachOperation,M=j.categoryChooseShow;return Object(r.jsxs)("div",{className:Ke.a["dzq-post-body"],children:[Object(r.jsx)(Bt.a,{allowJump:!1,customJum:this.handlePageJump}),Object(r.jsxs)("div",{className:Ke.a["post-inner"],id:"post-inner",onClick:this.props.handleVditorFocus,children:[Object(r.jsx)(nt,{onClick:function(e){return e.stopPropagation()},isDisplay:this.props.isTitleShow,title:p.title,onChange:function(e){return a.props.setPostData({title:e})}}),Object(r.jsx)(F,{value:p.contentText,isResetContentText:p.isResetContentText,emoji:E,atList:k,topic:T,onCountChange:function(e){return a.props.handleSetState({count:e})},onInput:function(e){return a.props.handleVditorChange(e,"input")},onChange:this.props.handleVditorChange,onFocus:function(e,t){a.setBottomFixed(e,t);var n="edior-focus"===e&&a.props.currentDefaultOperation===Y.c.emoji?Y.c.emoji:"";a.props.handleSetState({isVditorFocus:!0,currentDefaultOperation:n})},onBlur:function(){a.props.handleSetState({isVditorFocus:!1}),a.clearBottomFixed()},onInit:this.props.handleVditorInit,setState:this.props.handleSetState,site:u}),(A===R.j.image||Object.keys(p.images).length>0)&&Object(r.jsx)(fe.a,{cosOptions:{supportImgExt:y,supportMaxSize:_,qcloudCosBucketName:w,qcloudCosBucketArea:O,qcloudCosSignUrl:x,qcloudCos:S},className:Ke.a.imageUpload,fileList:Object.values(p.images),onChange:function(e){return a.props.handleUploadChange(e,R.j.image)},onComplete:function(e,t){return a.props.handleUploadComplete(e,t,R.j.image)},beforeUpload:function(e,t){return a.props.beforeUpload(e,t,R.j.image)}}),p.video&&p.video.thumbUrl&&Object(r.jsx)(Wt,{src:p.video.thumbUrl,onDelete:function(){return a.props.setPostData({video:{}})},onReady:this.props.onVideoReady}),p.iframe&&p.iframe.content&&Object(r.jsx)(mn.a,{content:p.iframe.content,isDeleteShow:!0,h5:!0}),A===R.j.voice&&!p.audio.mediaUrl&&Object(r.jsx)("div",{className:Ke.a["audio-record"],id:"dzq-post-audio-record",onClick:function(e){return e.stopPropagation()},children:Object(r.jsx)(be.a,{duration:60.4,onUpload:function(e){a.props.handleAudioUpload(e)},onRecordBegan:function(){h({audioRecordStatus:"began"})},onRecordCompleted:function(){h({audioRecordStatus:"completed"})},onRecordReset:function(){h({audioRecordStatus:"reset"})}})}),Boolean(p.audio.mediaUrl)&&Object(r.jsxs)("div",{className:"".concat(Ke.a["audio-record"]," ").concat(Ke.a["audio-record-display"]),onClick:function(e){return e.stopPropagation()},children:[Object(r.jsx)(me.a,{src:p.audio.mediaUrl}),Object(r.jsx)(z.a,{className:Ke.a.delete,name:"DeleteOutlined",onClick:function(){return a.props.setPostData({audio:{}})}})]}),(C===Y.c.attach||Object.keys(p.files).length>0)&&Object(r.jsx)(pe.a,{limit:9,fileList:Object.values(p.files),onChange:function(e){return a.props.handleUploadChange(e,R.j.file)},onComplete:function(e,t){return a.props.handleUploadComplete(e,t,R.j.file)},beforeUpload:function(e,t){return a.props.beforeUpload(e,t,R.j.file)}}),(null===p||void 0===p||null===(e=p.vote)||void 0===e?void 0:e.voteTitle)&&Object(r.jsx)(on,{onDelete:function(){return a.props.setPostData({vote:{}})},onClick:function(){a.props.handleAttachClick({type:R.j.vote})}}),p.product&&p.product.readyContent&&Object(r.jsx)(Ue,{good:p.product,onDelete:function(){return a.props.setPostData({product:{}})}}),J.a.injection("plugin_post","post_extension_content_hook").map((function(e){var t=e.render,n=e.pluginInfo;return Object(r.jsx)("div",{children:t({site:a.props.site,renderData:p.plugin,deletePlugin:a.props.threadPost.deletePluginPostData,updatePlugin:a.props.threadPost.setPluginPostData})},n.pluginName)}))]}),Object(r.jsxs)("div",{id:"post-bottombar",className:Ke.a["post-bottombar"],children:[c.isHaveLocalData&&Object(r.jsx)("div",{id:"post-localdata",className:Ke.a["post-localdata"],children:Object(r.jsx)(nn,{})}),((null===f||void 0===f||null===(t=f.insertPosition)||void 0===t?void 0:t.enable)&&(null===v||void 0===v||null===(n=v.lbs)||void 0===n?void 0:n.lbs)||p.autoSaveTime)&&Object(r.jsxs)("div",{id:"post-position",className:Ke.a["position-box"],children:[(null===f||void 0===f||null===(i=f.insertPosition)||void 0===i?void 0:i.enable)&&(null===v||void 0===v||null===(o=v.lbs)||void 0===o?void 0:o.lbs)&&Object(r.jsx)(mt,{lbskey:v.lbs.qqLbsKey,position:p.position,onChange:function(e){return a.props.setPostData({position:e})}}),p.autoSaveTime&&Object(r.jsxs)("div",{className:Ke.a["post-autosave"],children:["\u6700\u8fd1\u4fdd\u5b58",p.autoSaveTime]})]}),(p.rewardQa.value&&p.rewardQa.times||p.redpacket.price||!(!p.price&&!p.attachmentPrice))&&Object(r.jsx)(Yt,{canEditReward:this.props.canEditReward,canEditRedpacket:this.props.canEditRedpacket,payTotalMoney:c.payTotalMoney,redTotalMoney:c.redpacketTotalAmount,postData:p,setPostData:function(e){a.props.setPostData(e),a.clearBottomFixed()},handleSetState:function(e){a.props.handleSetState(e)},onAttachClick:function(e,t){a.props.handleAttachClick(e,t),a.clearBottomFixed()},onDefaultClick:function(e,t,n){a.props.handleDefaultIconClick(e,t,n),a.clearBottomFixed()}}),Object(r.jsx)(ie,{site:this.props.site,isOpenQcloudVod:this.props.site.isOpenQcloudVod,onPluginSetPostData:this.props.threadPost.setPluginPostData,postData:p,onAttachClick:this.props.handleAttachClick,onVideoUpload:this.props.handleVideoUpload,onUploadComplete:this.props.handleVideoUploadComplete,category:Object(r.jsx)(ue,{categoryChoose:c.categorySelected,onClick:this.handleCategoryClick}),permission:d,currentSelectedToolbar:c.currentSelectedToolbar}),Object(r.jsx)(se,{postData:p,value:C,onClick:function(e){a.props.handleDefaultIconClick(e),e.type===Y.c.emoji?a.setPostBox():a.clearBottomFixed()},permission:d,onSubmit:this.props.handleSubmit}),Object(r.jsx)(de.a,{show:C===Y.c.emoji,emojis:c.emojis,onClick:function(e){a.props.handleEmojiClick(e)}})]}),Object(r.jsx)(Ee,{show:M,categoryId:c.postData.categoryId,onVisibleChange:function(e){return a.props.handleSetState({categoryChooseShow:e})}}),C===Y.c.at&&Object(r.jsx)(vt.a,{visible:C===Y.c.at,getAtList:this.props.handleAtListChange,onCancel:function(){return a.props.handleSetState({currentDefaultOperation:""})}}),C===Y.c.topic&&Object(r.jsx)(_t,{visible:C===Y.c.topic,cancelTopic:function(){return a.props.handleSetState({currentDefaultOperation:""})},clickTopic:function(e){return a.props.handleSetState({topic:e})}}),C===Y.c.pay&&Object(r.jsx)(kt,{list:this.props.paySelectText,onClick:function(e){var t="\u5e16\u5b50\u4ed8\u8d39\u548c\u9644\u4ef6\u4ed8\u8d39\u4e0d\u80fd\u540c\u65f6\u8bbe\u7f6e";return p.price&&"\u9644\u4ef6\u4ed8\u8d39"===e||p.attachmentPrice&&"\u5e16\u5b50\u4ed8\u8d39"===e?(I.a.error({content:t}),!1):void a.props.handleSetState({curPaySelect:e})},cancel:function(){return a.props.handleSetState({currentDefaultOperation:""})},visible:C===Y.c.pay}),this.props.draftShow&&Object(r.jsx)(kt,{list:["\u4fdd\u5b58\u8349\u7a3f","\u4e0d\u4fdd\u5b58\u8349\u7a3f"],onClick:function(e){return a.props.handleDraft(e)},cancel:function(){return a.props.handleDraft()},visible:this.props.draftShow}),A===R.j.reward&&Object(r.jsx)(Ye,{confirm:function(e){a.props.setPostData({rewardQa:e}),a.props.handleSetState({currentAttachOperation:!1}),a.clearBottomFixed()},cancel:function(){a.props.handleSetState({currentAttachOperation:!1})},data:p.rewardQa}),A===R.j.vote&&Object(r.jsx)(sn,{visible:A===R.j.vote,cancel:function(){a.props.handleSetState({currentAttachOperation:!1}),a.props.threadPost.setCurrentSelectedToolbar(!1)}}),C===Y.c.redpacket&&Object(r.jsx)(jt,{data:p.redpacket,cancel:function(){return a.props.handleSetState({currentDefaultOperation:""})},confirm:function(e){a.props.setPostData({redpacket:e}),a.clearBottomFixed()}}),A===R.j.goods&&Object(r.jsx)(Me,{onAnalyseSuccess:function(e){a.props.handleSetState({currentAttachOperation:!1}),a.props.setPostData({product:e}),a.clearBottomFixed()},cancel:function(){return a.props.handleSetState({currentAttachOperation:!1})}}),this.props.curPaySelect&&Object(r.jsx)(Dt,{paidType:this.props.curPaySelect,cancel:function(){a.props.handleSetState({curPaySelect:"",currentDefaultOperation:""}),a.clearBottomFixed()}}),A===R.j.video&&Object(r.jsx)(hn,{visible:A===R.j.video,onCancel:function(){a.props.handleSetState({currentAttachOperation:!1}),a.props.threadPost.setCurrentSelectedToolbar(!1)},beforeUpload:this.props.handleVideoUpload,onUploadChange:function(e){a.props.handleSetState({currentAttachOperation:!1}),a.props.threadPost.setCurrentSelectedToolbar(!1),a.props.handleVideoUpload(e)}})]})}}]),n}(j.a.Component))||tn)||tn)||tn)||tn)||tn)||tn,wn=Object(Se.withRouter)(_n),On=n("Mb5h"),xn=n("wXCO");function Sn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x()(e);if(t){var i=x()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}var jn,En=Object(E.c)("threadPost")(yn=Object(E.c)("index")(yn=Object(E.c)("thread")(yn=Object(E.c)("user")(yn=Object(E.c)("site")(yn=Object(E.d)(yn=function(e){y()(n,e);var t=Sn(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).hintCustom=function(e,t,n,i,o){r.hintHide(),"#"===e&&r.setState({editorTopicShow:!0,topicStyle:n,lastindex:i,vditor:o}),"@"===e&&r.setState({editorAtShow:!0,atStyle:n,lastindex:i,vditor:o})},r.hintHide=function(){r.setState({editorTopicShow:!1,editorAtShow:!1})},r.setEditorRange=function(){var e=r.state.vditor[r.state.vditor.currentMode].range;e&&(e.setStart(e.startContainer,r.state.lastindex),e.deleteContents(),e.collapse(!1),r.setSelectionFocus(e))},r.setSelectionFocus=function(e){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)},r.state={editorTopicShow:!1,editorAtShow:!1,topicStyle:{},atStyle:{},lastindex:-1,vditor:null},r.pluginContainer=j.a.createRef(),r}return b()(n,[{key:"componentDidMount",value:function(){var e=this;new ResizeObserver((function(){var t=e.pluginContainer.current;t&&t.offsetHeight?document.querySelector("#dzq-vditor").style.minHeight="44px":document.querySelector("#dzq-vditor").style.minHeight="450px"})).observe(this.pluginContainer.current)}},{key:"render",value:function(){var e,t,n,i,o=this,a=this.props,s=a.threadPost,c=a.user,l=a.site,u=a.emoji,d=a.topic,f=a.atList,p=a.currentDefaultOperation,h=a.currentAttachOperation,m=s.postData,v=l.webConfig,b=void 0===v?{}:v,g=b.setAttach,y=b.qcloud,_=g.supportImgExt,w=g.supportMaxSize,O=y.qcloudCosBucketName,x=y.qcloudCosBucketArea,S=y.qcloudCosSignUrl,j=y.qcloudCos;return Object(r.jsxs)("div",{className:On.a.container,children:[Object(r.jsx)(Bt.a,{}),Object(r.jsxs)("div",{className:On.a.wrapper,children:[Object(r.jsxs)("div",{className:On.a["wrapper-inner"],children:[Object(r.jsx)(nt,{pc:!0,title:m.title,isDisplay:!0,onChange:function(e){return o.props.setPostData({title:e})}}),Object(r.jsxs)("div",{className:On.a.editor,onClick:this.props.handleVditorFocus,children:[Object(r.jsxs)("div",{className:On.a["editor-inner"],id:"post-inner",onScroll:function(){o.hintHide()},children:[Object(r.jsx)(F,{pc:!0,value:m.contentText,isResetContentText:m.isResetContentText,emoji:u,atList:f,topic:d,onChange:this.props.handleVditorChange,onCountChange:function(e){return o.props.handleSetState({count:e})},onFocus:function(){},onBlur:function(){},onInit:this.props.handleVditorInit,setState:this.props.handleSetState,hintCustom:function(e,t,n,r,i){return o.hintCustom(e,t,n,r,i)},hintHide:this.hintHide}),Object(r.jsxs)("div",{ref:this.pluginContainer,children:[this.state.editorTopicShow&&Object(r.jsx)(_t,{pc:!0,visible:this.state.editorTopicShow,style:this.state.topicStyle,cancelTopic:this.hintHide,clickTopic:function(e){o.setEditorRange(),o.props.handleSetState({topic:e})}}),this.state.editorAtShow&&Object(r.jsx)(vt.a,{pc:!0,style:this.state.atStyle,visible:this.state.editorAtShow,getAtList:function(e){o.setEditorRange(),o.props.handleAtListChange(e)},onCancel:this.hintHide}),(h===R.j.image||Object.keys(m.images).length>0)&&Object(r.jsx)(fe.a,{cosOptions:{supportImgExt:_,supportMaxSize:w,qcloudCosBucketName:O,qcloudCosBucketArea:x,qcloudCosSignUrl:S,qcloudCos:j},className:On.a["no-padding"],fileList:Object.values(m.images),onChange:function(e){return o.props.handleUploadChange(e,R.j.image)},onComplete:function(e,t){return o.props.handleUploadComplete(e,t,R.j.image)},beforeUpload:function(e,t){return o.props.beforeUpload(e,t,R.j.image)}}),m.video&&m.video.thumbUrl&&Object(r.jsx)(Wt,{pc:!0,src:m.video.thumbUrl,onDelete:function(){return o.props.setPostData({video:{}})},onReady:this.props.onVideoReady}),m.iframe&&m.iframe.content&&Object(r.jsx)(mn.a,{content:m.iframe.content,isDeleteShow:!0}),h===R.j.voice&&Object(r.jsx)("div",{id:"dzq-post-audio-record",children:Object(r.jsx)(be.a,{duration:60,onUpload:function(e){o.props.handleAudioUpload(e)}})}),Boolean(m.audio.mediaUrl)&&Object(r.jsx)(me.a,{src:m.audio.mediaUrl}),(p===Y.c.attach||Object.keys(m.files).length>0)&&Object(r.jsx)(pe.a,{limit:9,cosOptions:{supportImgExt:_,supportMaxSize:w,qcloudCosBucketName:O,qcloudCosBucketArea:x,qcloudCosSignUrl:S,qcloudCos:j},className:On.a["no-padding"],fileList:Object.values(m.files),onChange:function(e){return o.props.handleUploadChange(e,R.j.file)},onComplete:function(e,t){return o.props.handleUploadComplete(e,t,R.j.file)},beforeUpload:function(e,t){return o.props.beforeUpload(e,t,R.j.file)}}),(null===m||void 0===m||null===(e=m.vote)||void 0===e?void 0:e.voteTitle)&&Object(r.jsx)(on,{isPc:!0,onDelete:function(){return o.props.setPostData({vote:{}})},onClick:function(){o.props.handleAttachClick({type:R.j.vote})}}),m.product&&m.product.readyContent&&Object(r.jsx)(Ue,{pc:!0,good:m.product,onDelete:function(){return o.props.setPostData({product:{}})}}),J.a.injection("plugin_post","post_extension_content_hook").map((function(e){var t=e.render,n=e.pluginInfo;return Object(r.jsx)("div",{children:t({site:o.props.site,renderData:m.plugin,deletePlugin:o.props.threadPost.deletePluginPostData,updatePlugin:o.props.threadPost.setPluginPostData})},n.pluginName)}))]})]}),Object(r.jsxs)("div",{className:On.a["editor-footer"],children:[Object(r.jsxs)("div",{className:On.a["editor-footer--left"],children:[s.isHaveLocalData&&Object(r.jsx)(nn,{pc:!0}),Object(r.jsx)(Yt,{pc:!0,canEditReward:this.props.canEditReward,canEditRedpacket:this.props.canEditRedpacket,payTotalMoney:s.payTotalMoney,redTotalMoney:s.redpacketTotalAmount,postData:m,setPostData:this.props.setPostData,handleSetState:this.props.handleSetState,onAttachClick:this.props.handleAttachClick,onDefaultClick:this.props.handleDefaultIconClick})]}),m.autoSaveTime&&Object(r.jsxs)("div",{className:On.a["editor-footer--right"],children:["\u6700\u8fd1\u4fdd\u5b58",m.autoSaveTime]})]})]}),Object(r.jsxs)("div",{className:On.a.toolbar,children:[Object(r.jsxs)("div",{className:On.a["toolbar-left"],children:[Object(r.jsxs)(se,{pc:!0,postData:m,permission:c.threadExtendPermissions,value:p,onClick:function(e,t){o.hintHide(),o.props.handleDefaultIconClick(e,t)},onSubmit:this.props.handleSubmit,children:[Object(r.jsx)(de.a,{pc:!0,show:p===Y.c.emoji,emojis:s.emojis,onClick:this.props.handleEmojiClick}),p===Y.c.topic&&Object(r.jsx)(_t,{pc:!0,visible:p===Y.c.topic,cancelTopic:function(){return o.props.handleSetState({currentDefaultOperation:""})},clickTopic:function(e){return o.props.handleSetState({topic:e})}}),p===Y.c.at&&Object(r.jsx)(vt.a,{pc:!0,visible:p===Y.c.at,getAtList:function(e){return o.props.handleAtListChange(e)},onCancel:function(){return o.props.handleSetState({currentDefaultOperation:""})}})]}),Object(r.jsx)("div",{className:On.a.divider}),Object(r.jsx)(ie,{pc:!0,isOpenQcloudVod:this.props.site.isOpenQcloudVod,site:this.props.site,postData:m,onAttachClick:function(e){var t;o.hintHide();for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=o.props).handleAttachClick.apply(t,[e].concat(r))},onPluginSetPostData:this.props.threadPost.setPluginPostData,onVideoUpload:this.props.handleVideoUpload,onUploadComplete:this.props.handleVideoUploadComplete,permission:c.threadExtendPermissions,currentSelectedToolbar:s.currentSelectedToolbar})]}),Object(r.jsx)("div",{className:On.a["toolbar-right"],children:(null===c||void 0===c||null===(t=c.permissions)||void 0===t||null===(n=t.insertPosition)||void 0===n?void 0:n.enable)&&(null===b||void 0===b||null===(i=b.lbs)||void 0===i?void 0:i.lbs)&&Object(r.jsx)(mt,{lbskey:b.lbs.qqLbsKey,position:m.position,onChange:function(e){return o.props.setPostData({position:e})}})})]}),Object(r.jsx)(Ee,{pc:!0,onClick:this.hintHide,categoryId:s.postData.categoryId}),Object(r.jsxs)("div",{className:On.a.footer,children:[Object(r.jsx)(we.a,{type:"info",disabled:"isEdit"===this.props.postType&&!m.isDraft,onClick:function(){return o.props.handleDraft()},children:"\u4fdd\u5b58\u81f3\u8349\u7a3f\u7bb1"}),Object(r.jsx)(we.a,{type:"primary",onClick:function(){return o.props.handleSubmit()},children:"\u53d1\u5e03"})]})]}),Object(r.jsx)(xn.a,{center:!0}),h===R.j.goods&&Object(r.jsx)(Me,{pc:!0,visible:h===R.j.goods,onAnalyseSuccess:function(e){o.props.handleSetState({currentAttachOperation:!1}),o.props.setPostData({product:e})},cancel:function(){o.props.handleSetState({currentAttachOperation:!1}),o.props.threadPost.setCurrentSelectedToolbar(!1)}}),h===R.j.vote&&Object(r.jsx)(sn,{pc:!0,visible:h===R.j.vote,cancel:function(){o.props.handleSetState({currentAttachOperation:!1}),o.props.threadPost.setCurrentSelectedToolbar(!1)}}),h===R.j.video&&Object(r.jsx)(hn,{pc:!0,visible:h===R.j.video,onCancel:function(){o.props.handleSetState({currentAttachOperation:!1}),o.props.threadPost.setCurrentSelectedToolbar(!1)},beforeUpload:this.props.handleVideoUpload,onUploadChange:function(e){o.props.handleSetState({currentAttachOperation:!1}),o.props.threadPost.setCurrentSelectedToolbar(!1),o.props.handleVideoUpload(e)}}),!!this.props.curPaySelect&&Object(r.jsx)(Dt,{pc:!0,visible:!!this.props.curPaySelect,paidType:this.props.curPaySelect,cancel:function(){o.props.handleSetState({curPaySelect:"",currentDefaultOperation:""})}}),p===Y.c.redpacket&&Object(r.jsx)(jt,{pc:!0,visible:p===Y.c.redpacket,data:m.redpacket,cancel:function(){return o.props.handleSetState({currentDefaultOperation:""})},confirm:function(e){return o.props.setPostData({redpacket:e})}}),h===R.j.reward&&Object(r.jsx)(Ye,{pc:!0,visible:h===R.j.reward,confirm:function(e){o.props.setPostData({rewardQa:e}),o.props.handleSetState({currentAttachOperation:!1})},cancel:function(){o.props.handleSetState({currentAttachOperation:!1}),o.props.threadPost.setCurrentSelectedToolbar(!1)},data:m.rewardQa})]})]})}}]),n}(j.a.Component))||yn)||yn)||yn)||yn)||yn)||yn,Tn=Object(Se.withRouter)(En),kn=n("C3nd"),Cn=n("QcND"),An=n("zZWi"),Mn=n("u/Lb"),Pn=n("STnV"),Rn=n("J0pL");function Ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x()(e);if(t){var i=x()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}var In=Object(E.c)("site")(jn=Object(E.c)("threadPost")(jn=Object(E.c)("index")(jn=Object(E.c)("thread")(jn=Object(E.c)("user")(jn=Object(E.c)("payBox")(jn=Object(E.c)("vlist")(jn=Object(E.c)("baselayout")(jn=Object(E.d)(jn=function(e){y()(n,e);var t=Dn(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).toastInstance=null,r.handleRouteChange=function(e){-1===(e||"").indexOf("/my/edit/paypwd")&&-1===(e||"").indexOf("/pay/middle")&&(r.vditor&&r.vditor.setValue(""),r.props.threadPost.resetPostData())},r.saveDataLocal=function(){var e,t=r.props,n=t.threadPost,i=t.user;e={postData:n.postData,userId:i.userInfo.id},Kt.a.set(Gt,e)},r.getPostDataFromLocal=function(){return Qt(r.props.user.userInfo.id,r.props.router.query.id)},r.removeLocalData=function(){Kt.a.remove(Gt)},r.postToast=function(e){I.a.info({content:e,duration:2e3,hasMask:!0})},r.handleAudioUpload=function(){var e=p()(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.isAudioUploadDone=!1,t.name="".concat((new Date).getTime(),".mp3"),Q({file:t,onUploading:function(){r.toastInstance=I.a.loading({content:"\u4e0a\u4f20\u4e2d...",duration:0})},onComplete:function(e,t){r.handleVodUploadComplete(e,t,R.j.voice)},onError:function(e){r.handleVodUploadComplete(null,t,R.j.voice),I.a.error({content:e.message})}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleVideoUpload=function(e){var t=r.props.threadPost.postData;if(t.video&&t.video.id||t.iframe&&t.iframe.content)return I.a.info({content:"\u53ea\u80fd\u4e0a\u4f20\u4e00\u4e2a\u89c6\u9891"}),!1;if(!e)return!0;var n,i=l()(e,1)[0];n=I.a.loading({content:"\u4e0a\u4f20\u4e2d...",duration:0,hasMask:!0}),Q({file:i,onUploading:function(){},onComplete:function(e,t){var i;r.handleVodUploadComplete(e,t,R.j.video),null===(i=n)||void 0===i||i.destroy()},onError:function(e){var t;r.handleVodUploadComplete(null,i,R.j.video),I.a.error({content:e.message}),null===(t=n)||void 0===t||t.destroy()}})},r.handleVodUploadComplete=function(){var e=p()(d.a.mark((function e(t,n,i){var o,a,s,c,l,u,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return r.isVideoUploadDone=!0,r.isAudioUploadDone=!0,e.abrupt("return");case 4:return a=t.fileId,s=t.video,c={fileId:a,mediaUrl:s.url},i===R.j.voice&&(c.type=1),e.next=9,r.props.threadPost.createThreadVideoAudio(c);case 9:l=e.sent,null===(o=r.toastInstance)||void 0===o||o.destroy(),u=l.code,f=l.data,0===u?i===R.j.video?(r.setPostData({video:{id:null===f||void 0===f?void 0:f.id,thumbUrl:f.mediaUrl,type:n.type}}),r.isVideoUploadDone=!0,r.scrollIntoView("#dzq-post-video")):i===R.j.voice&&(r.setPostData({audio:{id:null===f||void 0===f?void 0:f.id,mediaUrl:f.mediaUrl,type:n.type},audioSrc:f.mediaUrl,audioRecordStatus:"uploaded"}),r.isAudioUploadDone=!0):(r.isVideoUploadDone=!0,r.isAudioUploadDone=!0,I.a.error({content:l.msg}));case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.handleEmojiClick=function(e){r.setState({emoji:e})},r.handleAttachClick=function(e,t){var n;if(r.setState({currentDefaultOperation:""}),r.checkAudioRecordStatus()){if(!r.props.site.isPc&&e.type===R.j.voice){var i=navigator.userAgent.toLocaleLowerCase();if(i.indexOf("iphone")>-1){if(i.indexOf("micromessenger")>-1)return void I.a.info({content:"iOS\u7248\u5fae\u4fe1\u6682\u4e0d\u652f\u6301\u5f55\u97f3\u529f\u80fd"});var o=i.match(/cpu iphone os (.*?) like mac os/);if(o){var a=o[1].replace(/_/g,".").split(".").splice(0,2).join(".");if(Number(a)<14.3&&!(i.indexOf("safari")>-1&&i.indexOf("chrome")<0&&i.indexOf("qqbrowser")<0&&i.indexOf("360")<0))return void I.a.info({content:"iOS\u7248\u672c\u592a\u4f4e\uff0c\u8bf7\u5347\u7ea7\u81f3iOS 14.3\u53ca\u4ee5\u4e0a\u7248\u672c\u6216\u4f7f\u7528Safari\u6d4f\u89c8\u5668\u8bbf\u95ee"})}}if(i.indexOf("ucbrowser")>-1)return void I.a.info({content:"\u6b64\u6d4f\u89c8\u5668\u6682\u4e0d\u652f\u6301\u5f55\u97f3\u529f\u80fd"})}var s=r.props.threadPost.postData;if(e.type===R.j.reward&&!r.state.canEditReward)return I.a.info({content:"\u60ac\u8d4f\u5185\u5bb9\u4e0d\u53ef\u7f16\u8f91"}),!1;if(e.type===R.j.vote&&(null===s||void 0===s||null===(n=s.vote)||void 0===n?void 0:n.voteUsers)>0)return I.a.info({content:"\u6295\u7968\u5df2\u751f\u6548\uff0c\u4e0d\u5141\u8bb8\u7f16\u8f91"}),!1;if(e.type===R.j.video&&(s.video&&s.video.id||s.iframe&&s.iframe.content))return I.a.info({content:"\u53ea\u80fd\u4e0a\u4f20\u4e00\u4e2a\u89c6\u9891"}),!1;if(e.type===R.j.anonymity&&(s.anonymous?r.setPostData({anonymous:0}):r.setPostData({anonymous:1})),t)return r.setPostData(t),!1;r.props.threadPost.setCurrentSelectedToolbar(e.type),r.setState({currentAttachOperation:e.type},(function(){e.type===R.j.image&&r.scrollIntoView(".dzq-post-image-upload"),e.type===R.j.voice&&r.scrollIntoView("#dzq-post-audio-record")}))}},r.scrollIntoView=function(e){var t=setTimeout((function(){clearTimeout(t);var n={},i=document.querySelector(e);i&&(n=i.getBoundingClientRect());var o=n.y||0;r.handleEditorBoxScroller(o)}),0)},r.handleDefaultIconClick=function(e,t,n){if(r.checkAudioRecordStatus()){var i=r.props.threadPost.postData;if(e.type===R.j.redPacket&&!r.state.canEditRedpacket)return r.setState({currentDefaultOperation:e.id},(function(){r.setState({currentDefaultOperation:""}),r.postToast("\u7ea2\u5305\u5185\u5bb9\u4e0d\u80fd\u7f16\u8f91")})),!1;if(n)return r.setPostData(n),!1;if(t&&t.id){var o="\u5e16\u5b50\u4ed8\u8d39\u548c\u9644\u4ef6\u4ed8\u8d39\u4e0d\u80fd\u540c\u65f6\u8bbe\u7f6e";if(i.price&&"\u9644\u4ef6\u4ed8\u8d39"===t.id)return r.postToast(o),!1;if(i.attachmentPrice&&"\u5e16\u5b50\u4ed8\u8d39"===t.id)return I.a.error({content:o}),!1;r.setState({currentDefaultOperation:e.id,curPaySelect:t.id,emoji:{}})}else r.setState({currentDefaultOperation:e.id,emoji:{}},(function(){e.id===Y.c.attach&&r.scrollIntoView(".dzq-post-file-upload")}))}},r.checkFileType=function(e,t){var n=e.name,r=e.imageType,i=r;if(!r){var o,a,s=null===(o=n||"")||void 0===o||null===(a=o.toLowerCase())||void 0===a?void 0:a.split(".");i=s[s.length-1]}return-1!==t.indexOf(i)},r.beforeUpload=function(e,t,n){var i=r.props.site.webConfig;if(!i)return!1;var o=i.setAttach,a=o.supportFileExt,c=o.supportImgExt,l=o.supportMaxSize,u=i.qcloud.qcloudCos,d=l;n===R.j.image&&u&&(d=l>15?15:l);var f=9-t.length;e.splice(f,e.length-f);for(var p=!0,h=!0,m=0;m<e.length;m++){var v=e[m].size,b=n===R.j.image?r.checkFileType(e[m],c):r.checkFileType(e[m],a),g=v>0&&v<1024*d*1024;b&&g||(e.splice(m,1),m-=1,b||(p=!1),g||(h=!1))}var y=n===R.j.image?c:a,_=n===R.j.file?"\u9644\u4ef6":"\u56fe\u7247";return!p&&I.a.info({content:"\u4ec5\u652f\u6301".concat(y,"\u7c7b\u578b\u7684").concat(_)}),!h&&I.a.info({content:"\u5927\u5c0f\u57280\u5230".concat(d,"MB\u4e4b\u95f4")}),n===R.j.file&&(r.fileList=s()(e)),n===R.j.image&&(r.imageList=s()(e)),!0},r.handleUploadChange=function(e,t){var n=r.props.threadPost.postData,i=n.images,o=n.files,a={};(e||[]).map((function(e){var n=i[e.id]||i[e.uid];return t===R.j.file&&(n=o[e.id]||o[e.uid]),n?e.id?a[e.id]=n:a[e.uid]=n:a[e.uid]=e,e})),t===R.j.image&&r.setPostData({images:a}),t===R.j.file&&r.setPostData({files:a})},r.handleUploadComplete=function(e,t,n){if(r.imageList=r.imageList.filter((function(e){return e.uid!==t.uid})),r.fileList=r.fileList.filter((function(e){return e.uid!==t.uid})),0!==e.code){var i=413===e.code?"\u4e0a\u4f20\u5927\u5c0f\u8d85\u8fc7\u4e86\u670d\u52a1\u5668\u9650\u5236":e.msg;return I.a.error({content:"\u4e0a\u4f20\u5931\u8d25\uff1a".concat(i)}),!1}var o=t.uid,a=e.data,s=r.props.threadPost.postData,c=s.images,l=s.files;n===R.j.image&&(c[o]=a),n===R.j.file&&(l[o]=a),r.setPostData({images:c,files:l})},r.onVideoReady=function(e){var t=r.props.threadPost.postData,n={src:t.video.thumbUrl,type:t.video.type};e&&e.src(n)},r.handleVditorChange=function(e,t){if(e){r.vditor=e;var n=e.getHTML();if(r.setPostData({contentText:n,isResetContentText:!1}),!r.props.threadPost.postData.title){if(!r.state.isTitleShow||"pc"===r.props.site.platform||!t)return;r.setState({isTitleShow:!1})}}},r.handleVditorInit=function(e){e&&(r.vditor=e)},r.handleVditorFocus=function(){r.vditor&&r.vditor.focus()},r.handleAtListChange=function(e){r.setState({atList:e})},r.checkAttachPrice=function(){var e,t,n=r.props.threadPost.postData;return!n.attachmentPrice||!!(n.audio.id||n.video.id||null!==(e=Object.keys(n.images))&&void 0!==e&&e.length||null!==(t=Object.keys(n.files))&&void 0!==t&&t.length)},r.handleSubmit=function(){var e=p()(d.a.mark((function e(t){var n,i,o,a,s,c,l,u,f,h,m,v,b,g,y,_,w;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||r.setPostData({draft:0}),!(r.state.count>=R.h)){e.next=4;break}return r.postToast("\u4e0d\u80fd\u8d85\u8fc7".concat(R.h,"\u5b57")),e.abrupt("return");case 4:if(r.props.user.threadExtendPermissions.createThread){e.next=8;break}return I.a.info({content:"\u60a8\u6ca1\u6709\u53d1\u5e16\u6743\u9650"}),r.postToast("\u60a8\u6ca1\u6709\u53d1\u5e16\u6743\u9650"),e.abrupt("return");case 8:if(r.isAudioUploadDone){e.next=11;break}return r.postToast("\u8bf7\u7b49\u5f85\u8bed\u97f3\u4e0a\u4f20\u5b8c\u6210\u518d\u53d1\u5e03"),e.abrupt("return");case 11:if(r.isVideoUploadDone){e.next=14;break}return r.postToast("\u8bf7\u7b49\u5f85\u89c6\u9891\u4e0a\u4f20\u5b8c\u6210\u518d\u53d1\u5e03"),e.abrupt("return");case 14:if(!(r.imageList.length>0)){e.next=17;break}return r.postToast("\u8bf7\u7b49\u5f85\u56fe\u7247\u4e0a\u4f20\u5b8c\u6210\u518d\u53d1\u5e03"),e.abrupt("return");case 17:if(!(r.fileList.length>0)){e.next=20;break}return r.postToast("\u8bf7\u7b49\u5f85\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u518d\u53d1\u5e03"),e.abrupt("return");case 20:if(r.checkAudioRecordStatus()){e.next=22;break}return e.abrupt("return");case 22:if(r.isHaveContent()){e.next=25;break}return r.postToast("\u8bf7\u81f3\u5c11\u586b\u5199\u60a8\u8981\u53d1\u5e03\u7684\u5185\u5bb9\u6216\u8005\u4e0a\u4f20\u56fe\u7247\u3001\u9644\u4ef6\u3001\u89c6\u9891\u3001\u8bed\u97f3\u3001\u6295\u7968\u7b49"),e.abrupt("return");case 25:if(r.checkAttachPrice()){e.next=28;break}return r.postToast("\u8bf7\u5148\u4e0a\u4f20\u9644\u4ef6\u3001\u56fe\u7247\u3001\u89c6\u9891\u6216\u8005\u8bed\u97f3"),e.abrupt("return");case 28:if(r.saveDataLocal(),n=r.props.threadPost,!(i=r.props.site.webConfig)){e.next=42;break}if(s=null===i||void 0===i||null===(o=i.qcloud)||void 0===o?void 0:o.qcloudCaptcha,c=null===i||void 0===i||null===(a=i.other)||void 0===a?void 0:a.createThreadWithCaptcha,!s||!c){e.next=42;break}return e.next=37,r.props.showCaptcha();case 37:if(l=e.sent,u=l.captchaTicket,f=l.captchaRandStr,u||f){e.next=42;break}return e.abrupt("return",!1);case 42:if(h=n.postData.rewardQa,m=n.redpacketTotalAmount,v=n.isThreadPaid?0:Object(Xt.a)(h.value,0),b=n.isThreadPaid?0:Object(Xt.a)(m,0),g=Object(Xt.a)(v,b),y={amount:g},t||!(g>0)){e.next=56;break}return _=Pn.b.ORDER_TYPE_REDPACKET,w="\u652f\u4ed8\u7ea2\u5305",b>0&&(y.redAmount=b),v>0&&(_=Pn.b.ORDER_TYPE_QUESTION_REWARD,w="\u652f\u4ed8\u60ac\u8d4f",y.rewardAmount=v),v>0&&b>0&&(_=Pn.b.ORDER_TYPE_MERGE,w="\u652f\u4ed8\u7ea2\u5305\u548c\u60ac\u8d4f"),Mn.a.createPayBox({data:Nn(Nn({},y),{},{title:w,type:_}),currentPage:{type:2},orderCreated:function(){var e=p()(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.orderSn,r.setPostData({orderInfo:t}),n&&r.props.payBox.hide(),r.createThread(!0,!1,!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),success:function(){var e=p()(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setIndexPageData(),r.removeLocalData(),(t=r.props.threadPost.postData.threadId)&&r.props.router.replace("/thread/".concat(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return");case 56:return r.createThread(t),e.abrupt("return",!1);case 58:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.setIndexPageData=function(){var e=r.state.data,t=r.props.threadPost.postData,n=r.props.router.query;if(n&&n.id)r.props.index.updateAssignThreadAllData(t.threadId,e);else{var i=e.categoryId,o=void 0===i?"":i;r.props.index.isNeedAddThread(o)&&null!==e&&void 0!==e&&e.isApproved&&(r.props.vlist.resetPosition(),r.props.baselayout.setJumpingToTop(),r.props.index.addThread(e),r.props.index.getReadCategories(),r.props.site.getSiteInfo())}},r.handleDraft=function(e){if(r.props.site.isPC)return r.setPostData({draft:1}),void r.handleSubmit(!0);if(r.setState({draftShow:!1}),"\u4fdd\u5b58\u8349\u7a3f"===e&&(r.setPostData({draft:1}),r.handleSubmit(!0)),"\u4e0d\u4fdd\u5b58\u8349\u7a3f"===e){var t=r.state.jumpLink;t?Ut.a.push({url:t}):Ut.a.back()}},r.handleEditorBoxScroller=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=document.querySelector("#post-inner"),i=document.querySelector("#dzq-vditor"),o=n.getBoundingClientRect();t<i.clientHeight&&(t=i.clientHeight);var a=null!==(e=r.props.site)&&void 0!==e&&e.isPc?o.top-t:t;n.scrollTo({top:a,behavior:"smooth"})},r.state={postType:"isFirst",canEditRedpacket:!0,canEditReward:!0,emoji:{},categoryChooseShow:!1,atList:[],topic:"",isVditorFocus:!1,currentDefaultOperation:"",currentAttachOperation:!1,productShow:!1,paySelectText:["\u5e16\u5b50\u4ed8\u8d39","\u9644\u4ef6\u4ed8\u8d39"],curPaySelect:"",count:0,draftShow:!1,isTitleShow:!0,jumpLink:"",data:{}},r.vditor=null,r.isAudioUploadDone=!0,r.isVideoUploadDone=!0,r.imageList=[],r.fileList=[],r.autoSaveInterval=null,r}return b()(n,[{key:"componentDidMount",value:function(){this.props.threadPost.setThreadStatus(R.i.create),this.redirectToHome(),this.props.router.events.on("routeChangeStart",this.handleRouteChange),this.fetchPermissions();var e=this.props.threadPost,t=e.fetchEmoji;0===e.emojis.length&&t(),this.fetchDetail()}},{key:"componentWillUnmount",value:function(){this.captcha="",this.autoSaveInterval&&clearInterval(this.autoSaveInterval),this.props.router.events.off("routeChangeStart",this.handleRouteChange)}},{key:"componentDidUpdate",value:function(){this.redirectToHome()}},{key:"redirectToHome",value:function(){var e=this;if(!this.props.user.threadExtendPermissions.createThread){I.a.info({content:"\u60a8\u6ca1\u6709\u53d1\u5e16\u6743\u9650\uff0c\u5373\u5c06\u56de\u5230\u9996\u9875"});var t=setTimeout((function(){clearTimeout(t),e.props.router.replace("/")}),1e3)}}},{key:"fetchPermissions",value:function(){var e=this.props.user;e.permissions||e.updateUserInfo()}},{key:"fetchDetail",value:function(){var e=p()(d.a.mark((function e(){var t,n,r,i,o,a,s,c,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.thread,r=t.threadPost,!(i=this.props.router.query)||!i.id){e.next=14;break}if(o=Number(i.id),a={},o!==(n.threadData&&n.threadData.id)||!n.threadData){e.next=10;break}a.data=n.threadData,a.code=0,e.next=13;break;case 10:return e.next=12,n.fetchThreadDetail(o);case 12:a=e.sent;case 13:0===a.code?(s=this.props.threadPost.postData,c=s.isDraft,this.setState({postType:c?"isDraft":"isEdit",canEditRedpacket:c,canEditReward:c}),l=c?R.i.draft:R.i.edit,r.setThreadStatus(l),r.formatThreadDetailToPostData(a.data)):I.a.error({content:a.msg});case 14:this.getPostDataFromLocal()&&this.props.threadPost.setLocalDataStatus(!0),this.autoSaveData();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPostData",value:function(e){this.props.threadPost.setPostData(e)}},{key:"checkAudioRecordStatus",value:function(){var e=this.props.threadPost.postData.audioRecordStatus;return"began"===e?(I.a.info({content:"\u60a8\u6709\u5f55\u5236\u4e2d\u7684\u5f55\u97f3\u672a\u5904\u7406\uff0c\u8bf7\u5148\u4e0a\u4f20\u6216\u64a4\u9500\u5f55\u97f3",duration:3e3}),!1):"completed"!==e||(I.a.info({content:"\u60a8\u6709\u5f55\u5236\u5b8c\u6210\u7684\u5f55\u97f3\u672a\u5904\u7406\uff0c\u8bf7\u5148\u4e0a\u4f20\u6216\u64a4\u9500\u5f55\u97f3",duration:3e3}),!1)}},{key:"isHaveContent",value:function(){var e=this.props.threadPost.postData,t=e.images,n=e.video,r=e.files,i=e.audio,o=e.vote,a=e.iframe,s=void 0===a?{}:a,c=e.plugin;return!!(e.contentText||n.id||o.voteTitle||i.id||!xe.a.isEmptyObject(c)||Object.values(t).length||Object.values(r).length||s.content)}},{key:"autoSaveData",value:function(){var e=this;this.autoSaveInterval&&clearInterval(this.autoSaveInterval),this.autoSaveInterval=setInterval((function(){if(e.isHaveContent()){e.saveDataLocal();var t=Object(We.a)(new Date,"hh:mm");e.setPostData({autoSaveTime:t})}}),3e4)}},{key:"createThread",value:function(){var e=p()(d.a.mark((function e(t){var n,r,i,o,a,s,c,l,u,f,p,h,m,v,b,g,y,_,w,O,x,S,j,E,T,k,C,A,M,P,R,L,N,D,B=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=B.length>1&&void 0!==B[1]&&B[1],i=B.length>2&&void 0!==B[2]&&B[2],o=this.props,a=o.threadPost,s=o.thread,c=o.site,l=c.webConfig,u=l.setAttach,f=l.qcloud,p=u.supportImgExt,h=u.supportMaxSize,m=f.qcloudCosBucketName,v=f.qcloudCosBucketArea,b=f.qcloudCosSignUrl,g=f.qcloudCos,y="\u5e16\u5b50\u5185\u5bb9\u4e2d\uff0c\u6709\u90e8\u5206\u56fe\u7247\u8f6c\u5b58\u5931\u8d25\uff0c\u8bf7\u5148\u66ff\u6362\u76f8\u5173\u56fe\u7247\u518d\u91cd\u65b0\u53d1\u5e03",!(_=document.getElementById("dzq-vditor"))){e.next=13;break}if(!_.querySelectorAll(".editor-upload-error").length){e.next=13;break}return I.a.error({content:y,hasMask:!0,duration:3e3}),e.abrupt("return");case 13:if(w=a.postData.contentText,!(O=null===(n=w.match(/<img.*?\/>/g))||void 0===n?void 0:n.filter((function(e){return!e.match('alt="attachmentId-')&&!e.includes("emoji")})))||!O.length){e.next=35;break}return x=O.map((function(e){var t=e.match(/\"(.*?)\"/);return!!t&&t[1]})),S=I.a.loading({content:"\u56fe\u7247\u8f6c\u5b58\u4e2d...",hasMask:!0,duration:0}),e.next=20,Object(H.a)({files:x,type:1,supportImgExt:p,supportMaxSize:h,qcloudCosBucketName:m,qcloudCosBucketArea:v,qcloudCosSignUrl:b,qcloudCos:g});case 20:for(j=e.sent,E=[],T=[],j.forEach((function(e,t){var n=e.code,r=e.data,i=void 0===r?{}:r;if(0===n){var o=i.url,a=i.id;w=w.replace(O[t],'<img src="'.concat(o,'" alt="attachmentId-').concat(a,'" />'))}else-7075===n?(E.push(""),w=w.replace(O[t],O[t].replace('alt=""','alt="uploadError"'))):(T.push(""),w=w.replace(O[t],O[t].replace('alt=""','alt="uploadError"')))})),a.setPostData({contentText:w}),this.vditor.setValue(this.vditor.html2md(w)),S.destroy(),k=document.querySelectorAll("img[alt=uploadError]"),C=0;C<k.length;C++)k[C].setAttribute("class","editor-upload-error");if(!E.length){e.next=32;break}return I.a.error({content:"\u5e16\u5b50\u5185\u5bb9\u4e2d\u542b\u6709\u654f\u611f\u56fe\u7247\uff0c\u8bf7\u5148\u5904\u7406\u76f8\u5173\u56fe\u7247\u518d\u91cd\u65b0\u53d1\u5e03",hasMask:!0,duration:4e3}),e.abrupt("return");case 32:if(!T.length){e.next=35;break}return I.a.error({content:"\u5e16\u5b50\u5185\u5bb9\u4e2d\uff0c\u6709\u90e8\u5206\u56fe\u7247\u8f6c\u5b58\u5931\u8d25\uff0c\u8bf7\u5148\u5904\u7406\u76f8\u5173\u56fe\u7247\u518d\u91cd\u65b0\u53d1\u5e03",hasMask:!0,duration:4e3}),e.abrupt("return");case 35:if(A={},r||i||(this.toastInstance=I.a.loading({content:t?"\u4fdd\u5b58\u8349\u7a3f\u4e2d":"\u53d1\u5e03\u4e2d...",hasMask:!0})),!a.postData.threadId){e.next=43;break}return e.next=40,a.updateThread(a.postData.threadId);case 40:A=e.sent,e.next=46;break;case 43:return e.next=45,a.createThread();case 45:A=e.sent;case 46:if(console.log(A),P=(M=A).code,R=M.data,L=M.msg,0!==P){e.next=58;break}if(this.setState({data:R}),s.reset({}),this.toastInstance&&(null===(N=this.toastInstance)||void 0===N||N.destroy()),this.setPostData({threadId:R.threadId}),!t||r||!a.postData.orderInfo.orderSn||a.postData.orderInfo.status||a.postData.draft){e.next=56;break}return this.props.payBox.show(),e.abrupt("return");case 56:return t?(D=this.state.jumpLink,!r&&I.a.info({content:"\u4fdd\u5b58\u8349\u7a3f\u6210\u529f"}),this.props.site.isPC||r||(D?Ut.a.push({url:D}):Ut.a.back())):(this.setIndexPageData(),this.removeLocalData(),this.props.router.replace("/thread/".concat(R.threadId))),e.abrupt("return",!0);case 58:this.saveDataLocal(),I.a.error({content:L});case 60:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=Object(r.jsx)(Tn,Nn({setPostData:function(t){return e.setPostData(t)},handleAttachClick:this.handleAttachClick,handleDefaultIconClick:this.handleDefaultIconClick,handleVideoUpload:this.handleVideoUpload,handleVideoUploadComplete:this.handleVodUploadComplete,beforeUpload:this.beforeUpload,handleUploadChange:this.handleUploadChange,handleUploadComplete:this.handleUploadComplete,handleAudioUpload:this.handleAudioUpload,handleEmojiClick:this.handleEmojiClick,handleSetState:function(t){return e.setState(Nn({},t))},handleSubmit:this.handleSubmit,saveDataLocal:this.saveDataLocal,handleAtListChange:this.handleAtListChange,handleVditorChange:this.handleVditorChange,handleVditorFocus:this.handleVditorFocus,handleVditorInit:this.handleVditorInit,onVideoReady:this.onVideoReady,handleDraft:this.handleDraft},this.state)),n=Object(r.jsx)(wn,Nn({setPostData:function(t){return e.setPostData(t)},handleAttachClick:this.handleAttachClick,handleDefaultIconClick:this.handleDefaultIconClick,handleVideoUpload:this.handleVideoUpload,handleVideoUploadComplete:this.handleVodUploadComplete,beforeUpload:this.beforeUpload,handleUploadChange:this.handleUploadChange,handleUploadComplete:this.handleUploadComplete,handleAudioUpload:this.handleAudioUpload,handleEmojiClick:this.handleEmojiClick,handleSetState:function(t){return e.setState(Nn({},t))},handleSubmit:this.handleSubmit,saveDataLocal:this.saveDataLocal,handleAtListChange:this.handleAtListChange,handleVditorChange:this.handleVditorChange,handleVditorFocus:this.handleVditorFocus,handleVditorInit:this.handleVditorInit,onVideoReady:this.onVideoReady,handleDraft:this.handleDraft,handleEditorBoxScroller:this.handleEditorBoxScroller,checkAudioRecordStatus:this.checkAudioRecordStatus.bind(this)},this.state));return Object(r.jsx)(Rn.a,{h5:n,pc:t,title:"\u53d1\u5e03"})}}]),n}(j.a.Component))||jn)||jn)||jn)||jn)||jn)||jn)||jn)||jn)||jn;t.default=Object(kn.a)(Object(Cn.a)(Object(An.a)(Object(Se.withRouter)(In))))},s5qe:function(e,t,n){"use strict";var r=n("2oRo"),i=n("67WC"),o=n("0Dky"),a=r.Int8Array,s=i.aTypedArray,c=i.exportTypedArrayMethod,l=[].toLocaleString,u=[].slice,d=!!a&&o((function(){l.call(new a(1))}));c("toLocaleString",(function(){return l.apply(d?u.call(s(this)):s(this),arguments)}),o((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!o((function(){a.prototype.toLocaleString.call([1,2])})))},sDzi:function(e,t){var n={"":1,lr:1,rl:1},r={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function i(e){return"string"===typeof e&&(!!r[e.toLowerCase()]&&e.toLowerCase())}function o(e,t,r){this.hasBeenReset=!1;var o="",a=!1,s=e,c=t,l=r,u=null,d="",f=!0,p="auto",h="start",m="auto",v="auto",b=100,g="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return o},set:function(e){o=""+e}},pauseOnExit:{enumerable:!0,get:function(){return a},set:function(e){a=!!e}},startTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return c},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(e){l=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(e){u=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return d},set:function(e){var t=function(e){return"string"===typeof e&&!!n[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");d=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return f},set:function(e){f=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return p},set:function(e){if("number"!==typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");p=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=i(e);t?(h=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return v},set:function(e){var t=i(e);t?(v=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");b=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){var t=i(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");g=t,this.hasBeenReset=!0}}}),this.displayState=void 0}o.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=o},sr3F:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,i=/^application\/dash\+xml/i;t.simpleTypeFromSourceType=function(e){return r.test(e)?"hls":i.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null}},tPP9:function(e,t,n){"use strict";n("ma9I"),n("07d7"),n("JfAA"),Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return"".concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())}},"u/Lb":function(e,t,n){"use strict";n.d(t,"a",(function(){return nn}));n("qePV");var r,i=n("nKUr"),o=n("o0o1"),a=n.n(o),s=n("lSNA"),c=n.n(s),l=(n("ls82"),n("yXPU")),u=n.n(l),d=n("W8MJ"),f=n.n(d),p=n("PJYZ"),h=n.n(p),m=n("lwsE"),v=n.n(m),b=n("7W2i"),g=n.n(b),y=n("a1gu"),_=n.n(y),w=n("Nsbk"),O=n.n(w),x=n("q1tI"),S=n.n(x),j=n("kMSe"),E=n("uhBA"),T=n.n(E),k=n("+3IH"),C=(n("ma9I"),n("k8W2")),A=n.n(C),M=n("STnV"),P=(n("toAj"),n("R5XZ"),n("5f2u")),R=n.n(P),L=n("MCNy"),N=n.n(L),D=n("jqTq"),I=n.n(D),B="_3XcBGEKLCciFjOLG3DKjlQ",H="_3566nR9qEh9REI1EVIfI0_",U="_2QNE4hRnOAn-u5LAYAYeuX",q="_1d4A36wWqb_GtBNxO1CmEz",V="_1o1o91XHSRkYBk6Qva2Gtd",F=(n("2B1R"),{amountTitle:"_3KbvwO0q6uFID5cS1TwJkW",amountContent:"_26QalcfOeQY6eP4m4MismY",acExplain:"uKkVzRecbAeVyScvx3zyl",acExplainH5:"_2cTyY6-Gwth62-S--EdMaC",acExplainLabel:"_3YtkJ5WBl5KsdamMj8L2aE",acExplainValue:"CEK7qs6qmBqXBrimJ9bgs",acExplainNum:"_3aD85JA7JV3ytRpCNfsiuP",acExplainDivider:"_35brO9NPYRCF1Hz0CrnGyW",ampuntLineWrap:"_3-VCAjQK6LbsOmowJcRe3z",ampuntLine:"BAz3-Z68DJ9JSgp9yWUP9",title:"E8aadqxHO9IwSuaASAqMR",payList:"_1XQ3qAqpdDoM0670Uc9IL1",payListItem:"_2cs3kZpYMzhVUEbsd9M43C",payListItem01:"_3KGDZ7RzfWD5eyz6K3IgLX",amountContentPC:"_3NVDrOuexDrfAxpBxPtpaM"}),W=n("V+Sr"),z=n.n(W),X=n("x2xJ"),Y=n.n(X);function K(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var G=Object(j.c)("site")(r=Object(j.c)("payBox")(r=Object(j.d)(r=function(e){g()(n,e);var t=K(n);function n(e){var r;return v()(this,n),(r=t.call(this,e)).renderDiffTradeType=function(e){var t="";switch(e){case M.b.ORDER_TYPE_REGISTER:t="\u4ed8\u8d39\u52a0\u5165";break;case M.b.ORDER_TYPE_REWARD:t="\u6253\u8d4f";break;case M.b.ORDER_TYPE_THREAD:t="\u4ed8\u8d39\u5e16";break;case M.b.ORDER_TYPE_GROUP:t="\u8d2d\u4e70\u6743\u9650\u7ec4";break;case M.b.ORDER_TYPE_QUESTION:t="\u4ed8\u8d39\u63d0\u95ee";break;case M.b.ORDER_TYPE_ONLOOKER:t="\u95ee\u7b54\u56f4\u89c2";break;case M.b.ORDER_TYPE_ATTACHMENT:t="\u9644\u4ef6";break;case M.b.ORDER_TYPE_RENEW:t="\u7ad9\u70b9\u4ed8\u8d39";break;case M.b.ORDER_TYPE_REDPACKET:t="\u7ea2\u5305";break;case M.b.ORDER_TYPE_QUESTION_REWARD:t="\u60ac\u8d4f";break;case M.b.ORDER_TYPE_MERGE:t="\u7ea2\u5305+\u60ac\u8d4f";break;case M.b.ORDER_TYPE_TEXT:t="\u6587\u5b57\u5e16\u7ea2\u5305"}return t},r.transMoneyToFixed=function(e){return Number(e).toFixed(2)},r.handleChangeIsAnonymous=function(e){r.props.payBox.isAnonymous=e},r.state={tradeContent:[{type:M.b.ORDER_TYPE_REDPACKET,name:"\u7ea2\u5305"},{type:M.b.ORDER_TYPE_QUESTION_REWARD,name:"\u60ac\u8d4f"}]},r}return f()(n,[{key:"render",value:function(){var e,t=this,n=this.props.currentPaymentData,r=void 0===n?{}:n,o=r.type,a=r.amount,s=(r.isAnonymous,r.title),c=r.redAmount,l=r.rewardAmount,u=(null===(e=this.props)||void 0===e?void 0:e.site).platform,d=this.state.tradeContent,f=void 0===d?[]:d;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:F.amountTitle,style:{textAlign:"pc"===u?"center":"left"},children:"\u786e\u8ba4\u91d1\u989d"}),Object(i.jsx)("div",{className:"".concat(F.amountContent," ").concat("pc"===u&&F.amountContentPC),children:o===M.b.ORDER_TYPE_MERGE?Object(i.jsx)(i.Fragment,{children:f.map((function(e,n){var r=e.type===M.b.ORDER_TYPE_REDPACKET?c:l;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:F.acExplain,children:[Object(i.jsx)("span",{className:F.acExplainLabel,children:"\u4ea4\u6613\u7c7b\u578b"})," ",Object(i.jsx)("span",{className:F.acExplainValue,children:t.renderDiffTradeType(e.type)})]}),Object(i.jsx)(Y.a,{className:F.acExplainDivider}),Object(i.jsxs)("div",{className:F.acExplain,children:[Object(i.jsx)("span",{className:F.acExplainLabel,children:"\u5546\u54c1\u540d\u79f0"})," ",Object(i.jsx)("span",{className:F.acExplainValue,children:s})]}),Object(i.jsx)(Y.a,{className:F.acExplainDivider}),Object(i.jsxs)("div",{className:F.acExplain,children:[Object(i.jsx)("span",{className:F.acExplainLabel,children:"\u652f\u4ed8\u91d1\u989d"}),Object(i.jsxs)("span",{className:F.acExplainNum,children:["\uffe5",t.transMoneyToFixed(r)]})]}),0===n&&Object(i.jsx)("div",{className:F.ampuntLineWrap,children:Object(i.jsx)("div",{className:F.ampuntLine})})]})}))}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:F.acExplain,children:[Object(i.jsx)("span",{className:F.acExplainLabel,children:"\u4ea4\u6613\u7c7b\u578b"})," ",Object(i.jsx)("span",{className:F.acExplainValue,children:this.renderDiffTradeType(o)})]}),Object(i.jsx)(Y.a,{className:F.acExplainDivider}),Object(i.jsxs)("div",{className:F.acExplain,children:[Object(i.jsx)("span",{className:F.acExplainLabel,children:"\u5546\u54c1\u540d\u79f0"})," ",Object(i.jsx)("span",{className:F.acExplainValue,children:s})]}),Object(i.jsx)(Y.a,{className:F.acExplainDivider}),Object(i.jsxs)("div",{className:F.acExplain,children:[Object(i.jsx)("span",{className:F.acExplainLabel,children:"\u652f\u4ed8\u91d1\u989d"}),Object(i.jsxs)("span",{className:F.acExplainNum,children:["\uffe5",this.transMoneyToFixed(a)]})]}),o===M.b.REGEISTER_SITE&&Object(i.jsxs)("div",{className:"".concat(F.acExplain," ").concat("h5"===u&&F.acExplainH5),children:[Object(i.jsx)(z.a,{checked:this.props.payBox.isAnonymous,onChange:this.handleChangeIsAnonymous})," \u9690\u85cf\u6211\u7684\u4ed8\u8d39\u4fe1\u606f"]})]})})]})}}]),n}(x.Component))||r)||r)||r;G.defaultProps={currentPaymentData:{},isNotShowTitle:!1};var Q,Z=n("wdT/"),J=n.n(Z),$=n("dQ0f");function ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var te,ne=Object(j.c)("payBox")(Q=Object(j.d)(Q=function(e){g()(n,e);var t=ee(n);function n(e){var r;return v()(this,n),(r=t.call(this,e)).onClose=function(){r.props.payBox.visible=!1,setTimeout((function(){r.props.payBox.clear()}),300)},r.goToThePayConfirmPage=Object($.a)(u()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.state.isLoading){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,r.setState({isLoading:!0}),e.next=6,r.props.payBox.createOrder();case 6:r.setState({isLoading:!1}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),J.a.error({content:e.t0.Message,hasMask:!1,duration:1e3}),r.onClose(),r.setState({isLoading:!1});case 14:case"end":return e.stop()}}),e,null,[[2,9]])}))),300),r.transMoneyToFixed=function(e){return Number(e).toFixed(2)},r.renderAmountRecognizedContent=function(){var e=r.props.payBox.options,t=void 0===e?{}:e,n=t.amount,o=void 0===n?0:n,a=r.state.isLoading;return Object(i.jsxs)("div",{className:B,children:[Object(i.jsx)("div",{className:q,children:Object(i.jsx)(G,{currentPaymentData:t})}),Object(i.jsx)("div",{className:H,children:Object(i.jsx)(R.a,{type:"primary",onClick:r.goToThePayConfirmPage,size:"large",className:U,full:!0,disabled:a,children:a?Object(i.jsx)(I.a,{type:"spinner",children:"\u751f\u6210\u8ba2\u5355\u4e2d..."}):"\u652f\u4ed8 \uffe5".concat(r.transMoneyToFixed(o))})}),Object(i.jsx)("div",{className:V,onClick:r.onClose,children:Object(i.jsx)(N.a,{name:"CloseOutlined",size:14})})]})},r.state={isLoading:!1},r}return f()(n,[{key:"render",value:function(){return Object(i.jsx)("div",{children:this.renderAmountRecognizedContent()})}}]),n}(x.Component))||Q)||Q,re=(n("sMBO"),"_1QNRA_hi_DtyO8siBDx_v-"),ie="_35RTTgMUo7fJRQbeX7orB1",oe="yKwyHwvLoNhyS2LNlNVX6",ae="dVPElrwnepceCCApaTkqF",se="_3us4HFNdBNpcKdlnGLpDuF",ce="_21SdSEDBqmQeImpk8PqEtR",le="AFlC8i9MmS_9eOXos2bdo",ue="_3QWC32Wbyt1wGHZuZ4-7x_",de="_1tdxTgNdnH0NfMqpeoNuVb",fe="_2Hq8lrrqDig0xQ9jaEzRFe",pe="_14DQ9tnhRwpla6M1Pgumu9",he="ZF_3hA7CVClTdeySQL_p4",me="_1ik4dI_VIR4dKK-FLCBkEw",ve="_18bp_V56LwLrUcowIDyhxX",be=n("BGqZ"),ge=n.n(be),ye=n("B5JU"),_e=n.n(ye),we=n("RiVy"),Oe=(n("07d7"),n("5s+n"),n("lY1M")),xe=function(e){return new Promise((function(t,n){var r=e.appId,i=e.timeStamp,o=e.nonceStr,a=e.package,s=e.paySign;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:r,timeStamp:i,nonceStr:o,package:a,signType:"MD5",paySign:s},(function(e){var r=Object(k.a)(e,"err_msg","");r===M.g.WX_PAY_OK&&t(),r===M.g.WX_PAY_CANCEL&&n(M.d.WX_PAY_CANCEL),r===M.g.WX_PAY_FAIL&&n(M.d.WX_PAY_FAIL)}))})).catch((function(e){console.log(e)}))},Se=function(e){return new Promise((function(t,n){var r="/pay/middle?link=".concat(encodeURIComponent(e));_e.a.push({url:r}),t()}))},je=function(e){"undefined"===typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e),document.attachEvent("onWeixinJSBridgeReady",e)):e()},Ee=function(e){e()},Te=function(){},ke=M.e.WX_OFFICAL,Ce=n("lN2P");function Ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var Me,Pe=Object(j.c)("site")(te=Object(j.c)("user")(te=Object(j.c)("payBox")(te=Object(j.d)(te=function(e){g()(n,e);var t=Ae(n);function n(e){var r;v()(this,n),(r=t.call(this,e)).initState=function(){r.setState({isSubmit:!1}),r.props.payBox.payWay=M.c.WALLET},r.componentDidMount=u()(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=r.props)||void 0===t?void 0:t.user,i=n.id,e.prev=1,e.next=4,r.props.payBox.getWalletInfo(i);case 4:r.initState(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),J.a.error({content:"\u83b7\u53d6\u7528\u6237\u94b1\u5305\u4fe1\u606f\u5931\u8d25",duration:2e3});case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),r.handleChangePaymentType=function(e){r.props.payBox.payWay=e},r.handlePayConfirmed=Object($.a)(u()(a.a.mark((function e(){var t,n,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.props.payBox.payWay!==M.c.WALLET){e.next=9;break}if(n=r.props.payBox.options,i=(void 0===n?{}:n).amount,o=void 0===i?0:i,!(Number(null===(t=r.props.payBox)||void 0===t?void 0:t.walletAvaAmount)<Number(o))){e.next=6;break}return J.a.error({content:"\u94b1\u5305\u4f59\u989d\u4e0d\u8db3",duration:2e3}),e.abrupt("return");case 6:r.props.payBox.walletPayEnsure(),e.next=28;break;case 9:if(r.props.payBox.payWay!==M.c.WX){e.next=28;break}if(e.prev=10,r.setState({isSubmit:!0}),Object(we.a)()){e.next=18;break}return e.next=15,r.props.payBox.wechatPayOrder({listenWXJsBridgeAndExecCallback:Ee,onBridgeReady:Se,wxValidator:Te,mode:M.e.WX_H5});case 15:return r.props.payBox.visible=!1,r.setState({isSubmit:!1}),e.abrupt("return");case 18:return e.next=20,r.props.payBox.wechatPayOrder({listenWXJsBridgeAndExecCallback:je,onBridgeReady:xe,wxValidator:Te,mode:ke});case 20:r.setState({isSubmit:!1}),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(10),console.error(e.t0),J.a.error({content:e.t0.Message||"\u62c9\u8d77\u5fae\u4fe1\u652f\u4ed8\u5931\u8d25",duration:2e3}),r.setState({isSubmit:!1});case 28:case"end":return e.stop()}}),e,null,[[10,23]])}))),500),r.handleCancel=function(){r.props.payBox.step=M.f.SURE,r.props.payBox.payWay=null},r.transMoneyToFixed=function(e){return Number(e).toFixed(2)},r.getDisabledWithButton=function(){var e,t,n=r.state.isSubmit,i=null===(e=r.props.user)||void 0===e?void 0:e.canWalletPay,o=r.props.payBox.options,a=(void 0===o?{}:o).amount,s=void 0===a?0:a,c=!r.props.payBox.payWay||n;r.props.payBox.payWay===M.c.WALLET&&(i||(c=!0),Number(null===(t=r.props.payBox)||void 0===t?void 0:t.walletAvaAmount)<Number(s)&&(c=!0));return c},r.gotoBind=function(){r.props.payBox.visible=!1;var e=r.props.payBox.currentPage,t=e.type,n=e.threadId,i=void 0===n?"":n,o="";if("miniProgram"===r.props.site.wechatEnv)switch(t){case 1:o="/indexPages/thread/index?id=".concat(i);break;case 2:o="/indexPages/thread/post/index"}"openPlatform"===r.props.site.wechatEnv&&(Ce.a.saveCurrentUrl(),o=Ce.a.getUrl()),_e.a.push({url:"/user/wx-bind-qrcode?toPage=".concat(encodeURIComponent(o))})},r.renderRightChoices=function(e){var t,n,o=r.props.payBox.options,a=void 0===o?{}:o,s=null===(t=r.props.user)||void 0===t?void 0:t.canWalletPay;return e.paymentType===M.c.WALLET?s&&Number(null===(n=r.props.payBox)||void 0===n?void 0:n.walletAvaAmount)>=Number(a.amount)?Object(i.jsxs)(i.Fragment,{children:[r.walletPaySubText(),Object(i.jsx)(ge.a,{name:e.paymentType})]}):r.walletPaySubText():e.paymentType===M.c.WX?r.props.user.isBindWechat?Object(i.jsx)(ge.a,{name:e.paymentType}):Object(i.jsx)(R.a,{className:pe,type:"text",onClick:r.gotoBind,children:"\u7ed1\u5b9a\u5fae\u4fe1"}):void 0};var o=[{name:"\u94b1\u5305\u652f\u4ed8",icon:"PurseOutlined",color:"#1878f3",paymentType:"wallet"}];return r.props.site.isWechatPayOpen&&o.unshift({name:"\u5fae\u4fe1\u652f\u4ed8",icon:"WechatPaymentOutlined",color:"#09bb07",paymentType:"weixin"}),r.state={payConfig:o,isSubmit:!1},r.goSetPayPwa=r.goSetPayPwa.bind(h()(r)),r}return f()(n,[{key:"walletPaySubText",value:function(){var e,t,n,r,o=null===(e=this.props.user)||void 0===e?void 0:e.canWalletPay,a=this.props.payBox.options,s=(void 0===a?{}:a).amount,c=void 0===s?0:s;return o?Number(null===(t=this.props.payBox)||void 0===t?void 0:t.walletAvaAmount)<Number(c)?Object(i.jsx)("p",{className:fe,children:"\u4f59\u989d\u4e0d\u8db3"}):Object(i.jsx)(i.Fragment,{children:null!==(n=this.props.payBox)&&void 0!==n&&n.walletAvaAmount?Object(i.jsxs)("p",{className:fe,children:["\u94b1\u5305\u4f59\u989d\uff1a\uffe5",null===(r=this.props.payBox)||void 0===r?void 0:r.walletAvaAmount]}):Object(i.jsx)(I.a,{type:"spinner",size:14})}):Object(i.jsx)(R.a,{type:"text",className:pe,onClick:this.goSetPayPwa,children:"\u8bf7\u8bbe\u7f6e\u652f\u4ed8\u5bc6\u7801"})}},{key:"goSetPayPwa",value:function(){_e.a.push({url:"/my/edit/paypwd?type=paybox"}),this.props.payBox.visible=!1}},{key:"render",value:function(){var e=this,t=this.props.payBox.options,n=void 0===t?{}:t,r=this.state,o=r.payConfig,a=r.isSubmit;return Object(i.jsxs)("div",{className:re,children:[Object(i.jsx)("div",{className:oe,children:Object(i.jsxs)("p",{children:[Object(i.jsx)("span",{className:ie,children:"\uffe5"}),this.transMoneyToFixed(n.amount)]})}),Object(i.jsx)("div",{className:ae,children:Object(i.jsx)(ge.a.Group,{value:this.props.payBox.payWay,onChange:function(t){e.handleChangePaymentType(t)},children:o.map((function(t,n){return Object(i.jsxs)("div",{className:se,children:[Object(i.jsxs)("div",{className:ce,children:[Object(i.jsx)(N.a,{className:le,name:t.icon,color:t.color,size:20}),Object(i.jsx)("p",{className:ue,children:t.name})]}),Object(i.jsx)("div",{className:de,children:e.renderRightChoices(t)})]},n)}))})}),Object(i.jsx)("div",{className:he,children:Object(i.jsx)(R.a,{disabled:this.getDisabledWithButton(),className:me,type:"primary",size:"large",full:!0,onClick:this.handlePayConfirmed,children:a?Object(i.jsx)(I.a,{type:"spinner",children:"\u62c9\u8d77\u652f\u4ed8\u4e2d..."}):"\u786e\u8ba4\u652f\u4ed8"})}),Object(i.jsx)("div",{className:ve,onClick:this.handleCancel,children:Object(i.jsx)(N.a,{name:"CloseOutlined",size:14})})]})}}]),n}(S.a.Component))||te)||te)||te)||te,Re=n("+pgT"),Le=n.n(Re),Ne="_2E10PfW1sfXbCkzfNCPsiN",De="_1pclj7DDi2LZfgjhsRZLOA",Ie="_3ZUj980OXjLY4WBPybx7Xc",Be="_2_rCPsMywUpuNY2Rtb7X5f",He="_3fJO2G9NRT_tb4NQqSFAkv",Ue="yoEQp_iOr_zp-f7XNBLDg",qe="_lFF6sfJFS4bPs-qyTmmy",Ve=n("X6IV");function Fe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var We,ze=Object(j.c)("site")(Me=Object(j.c)("user")(Me=Object(j.c)("payBox")(Me=Object(j.d)(Me=function(e){g()(n,e);var t=Fe(n);function n(){var e;v()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).clearPayBox=function(){setTimeout((function(){e.props.payBox.clear()}),500)},e.goBack=function(){(Oe.b.env("uc")||Oe.b.env("safari"))&&window.history.back()},e.handleCancel=function(){e.clearPayBox(),e.props.payBox.visible=!1,e.props.payBox.h5SureDialogVisible=!1,e.goBack()},e.handleSure=function(){e.props.payBox.visible=!1,e.props.payBox.h5SureDialogVisible=!1,e.props.payBox.getOrderDetail(),e.clearPayBox(),e.goBack()},e}return f()(n,[{key:"componentDidMount",value:function(){if(Oe.b.env("uc")||Oe.b.env("safari")){var e=Ve.a.get("PAY_ORDER_INFO"),t=Ve.a.get("PAY_ORDER_OPTIONS");if(e)try{var n=JSON.parse(e);this.props.payBox.orderInfo=n}catch(i){console.error(i)}if(t)try{var r=JSON.parse(t);this.props.payBox.options=r}catch(i){console.error(i)}}}},{key:"render",value:function(){return Object(i.jsx)(Le.a,{style:{zIndex:1500},className:Ne,visible:this.props.visible,children:Object(i.jsxs)("div",{className:De,children:[Object(i.jsx)("div",{className:Ie,children:"\u8bf7\u786e\u8ba4\u5fae\u4fe1\u652f\u4ed8\u662f\u5426\u5df2\u5b8c\u6210"}),Object(i.jsxs)("div",{className:Be,children:[Object(i.jsx)("p",{children:"1.\u5982\u679c\u60a8\u5df2\u5728\u6253\u5f00\u5fae\u4fe1\u652f\u4ed8\u6210\u529f\uff0c\u8bf7\u70b9\u51fb \u201c\u5df2\u5b8c\u6210\u4ed8\u6b3e\u201d\u6309\u94ae"}),Object(i.jsx)("p",{children:"2.\u5982\u679c\u60a8\u6ca1\u6709\u5b89\u88c5\u5fae\u4fe1\u652f\u4ed8\u5ba2\u6237\u7aef\uff0c\u8bf7\u70b9\u51fb\u201c\u53d6\u6d88\u201d\u5e76\u9009\u62e9\u5176\u5b83\u652f\u4ed8\u65b9\u5f0f\u4ed8\u6b3e"})]}),Object(i.jsxs)("div",{className:He,children:[Object(i.jsx)("div",{className:Ue,children:Object(i.jsx)(R.a,{className:qe,onClick:this.handleCancel,children:"\u53d6\u6d88"})}),Object(i.jsx)("div",{className:Ue,children:Object(i.jsx)(R.a,{type:"primary",onClick:this.handleSure,children:"\u5df2\u5b8c\u6210\u4ed8\u6b3e"})})]})]})})}}]),n}(S.a.Component))||Me)||Me)||Me)||Me,Xe=(n("oVuX"),n("+2oP"),n("RIqP")),Ye=n.n(Xe),Ke="_3IjL8gMwPf5yAe4izl5irP",Ge="_2-c2ZWnGzz-W0GYyltejdp",Qe="_2M89luuK6aX9Tyf8ptAkSu",Ze="_LpG0TxAKCeY_VKzDMKL6",Je="_1GBA5FnVXpjgRuxLOr2IPr",$e="_1UUvZTwbAp2zBgW5papTY-",et="_3xSNOtKmn2GwYgzc3kDwlg",tt="_26IOACC9Ne5REYItNEUbrO",nt="_1Qbu31_uNfOf3YtFlL5q7R",rt="_1T34kwFXqB_JtZdCT7AqLJ",it="_2QIVnLoTiCxrX_iZd25Tp8",ot="_38b6j1kKbvEBSgh3INEIup",at="_1hptFode9xmGq9SQ7aa9OK",st="_3fpCR_v3K2c-ewT6EAnEyW",ct="_2Z-4DHJBCWRi_YQyft8F6D",lt="_3URzO5svVAPHS86PYbtasQ";n("z8Av");function ut(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var dt=Object(j.c)("payBox")(We=Object(j.d)(We=function(e){g()(n,e);var t=ut(n);function n(e){var r;return v()(this,n),(r=t.call(this,e)).toMarryNumber=function(e){var t;switch(e){case 48:case 96:t="0";break;case 49:case 97:t="1";break;case 50:case 98:t="2";break;case 51:case 99:t="3";break;case 52:case 100:t="4";break;case 53:case 101:t="5";break;case 54:case 102:t="6";break;case 55:case 103:t="7";break;case 56:case 104:t="8";break;case 57:case 105:t="9"}return t},r.handleKeyDown=function(e){if(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105){var t=r.toMarryNumber(e.keyCode);r.props.updatePwd&&r.props.updatePwd(t,"add")}else 13==e.keyCode||8==e.keyCode&&r.props.updatePwd&&r.props.updatePwd("","delete")},r.state={list:[]},r}return f()(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"renderPwdItem",value:function(){var e=this.props,t=e.list,n=void 0===t?[]:t,r=e.whetherIsShowPwdBox,o=n.map((function(e,t){return Object(i.jsx)("div",{className:"".concat(F.payListItem," ").concat(F.activation," ").concat(r&&F.payListItem01),children:"\u25cf"},t)}));if(o.length<6)for(var a=!1,s=o.length;s<6;s++)a?o.push(Object(i.jsx)("div",{className:"".concat(F.payListItem," ").concat(r&&F.payListItem01)},s)):(a=!0,o.push(Object(i.jsx)("div",{className:"".concat(F.payListItem," ").concat(F.curr," ").concat(r&&F.payListItem01)},s)));return o}},{key:"render",value:function(){return Object(i.jsx)("div",{children:Object(i.jsx)("div",{className:F.payList,children:this.renderPwdItem()})})}}]),n}(x.Component))||We)||We;dt.defaultProps={updatePwd:function(){},whetherIsShowPwdBox:!1};var ft,pt=n("i8i4"),ht=n.n(pt);function mt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var vt,bt=Object(j.c)("site")(ft=Object(j.c)("user")(ft=Object(j.c)("payBox")(ft=Object(j.d)(ft=function(e){g()(n,e);var t=mt(n);function n(e){var r;return v()(this,n),(r=t.call(this,e)).initState=function(){r.setState({list:[],isShow:!1})},r.updatePwd=function(e,t){var n=r.state.list,i=void 0===n?[]:n;if("add"==t){var o=Ye()(i);if(i.length>=6)return;r.setState({list:[].concat(o,[e])},(function(){6===r.state.list.length&&Object($.a)(r.submitPwa(),500)}))}else"delete"==t&&r.setState({list:i.slice(0,i.length-1)})},r.handleForgetPayPwd=Object($.a)((function(){if(!r.props.user.mobile)return J.a.error({content:"\u9700\u8981\u9996\u5148\u7ed1\u5b9a\u624b\u673a\u53f7\u624d\u80fd\u8fdb\u884c\u6b64\u64cd\u4f5c",duration:2e3}),void setTimeout((function(){r.props.payBox.visible=!1,_e.a.push({url:"/user/bind-phone?from=paybox"})}),1e3);_e.a.push({url:"/my/edit/find-paypwd?type=paybox"}),r.initState(),r.props.payBox.visible=!1}),1e3),r.handleCancel=function(){r.props.payBox.step=M.f.PAYWAY,r.initState()},r.renderDialogPayment=function(){var e,t,n=r.state,o=n.list,a=void 0===o?[]:o,s=(n.isShow,(null===(e=r.props)||void 0===e?void 0:e.payBox).options),c=void 0===s?{}:s,l=r.props.site.isSmsOpen;null===(t=r.props.user)||void 0===t||t.mobile;return Object(i.jsx)("div",{children:Object(i.jsx)(Le.a,{className:$e,visible:r.props.payBox.visible&&r.props.payBox.step===M.f.WALLET_PASSWORD,position:"center",maskClosable:!0,children:Object(i.jsxs)("div",{className:tt,children:[Object(i.jsx)("div",{className:nt,children:"\u7acb\u5373\u652f\u4ed8"}),Object(i.jsxs)("div",{className:rt,children:[Object(i.jsx)("span",{className:et,children:"\uffe5"}),Number(c.amount).toFixed(2)]}),Object(i.jsx)(Y.a,{className:st}),Object(i.jsxs)("div",{className:it,children:[Object(i.jsx)("span",{className:ot,children:"\u652f\u4ed8\u65b9\u5f0f"}),Object(i.jsxs)("span",{children:[Object(i.jsx)(N.a,{className:at,name:"PurseOutlined"}),Object(i.jsx)("span",{style:{verticalAlign:"middle"},children:"\u94b1\u5305\u652f\u4ed8"})]})]}),Object(i.jsx)("div",{className:it,children:Object(i.jsx)("span",{className:ot,children:"\u652f\u4ed8\u5bc6\u7801"})}),Object(i.jsx)(dt,{list:a,updatePwd:r.updatePwd,whetherIsShowPwdBox:!0}),Object(i.jsx)("div",{className:lt,onClick:r.handleForgetPayPwd,children:l&&Object(i.jsx)("span",{children:"\u5fd8\u8bb0\u652f\u4ed8\u5bc6\u7801?"})}),Object(i.jsx)("div",{className:ct,onClick:r.handleCancel,children:Object(i.jsx)(N.a,{name:"CloseOutlined",size:12})})]})})})},r.state={list:[],isShow:!1},r.keyboardClickHander=r.keyboardClickHander.bind(h()(r)),r}return f()(n,[{key:"componentDidMount",value:function(){this.setState({isShow:!0})}},{key:"componentWillUnmount",value:function(){this.initState()}},{key:"keyboardClickHander",value:function(e){var t=this,n=e.target.getAttribute("data-key");if(null==n)return null;var r=this.state.list,i=void 0===r?[]:r;"-1"===n?0===i.length?this.handleCancel():this.setState({list:i.slice(0,i.length-1)}):i.length<6&&this.setState({list:[].concat(i,[n])},(function(){6===t.state.list.length&&Object($.a)(t.submitPwa(),500)}))}},{key:"submitPwa",value:function(){var e=u()(a.a.mark((function e(){var t,n,r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.list,n=(void 0===t?[]:t).join(""),this.props.payBox.password=n,this.props.payBox.step!==M.f.WALLET_PASSWORD){e.next=15;break}return e.prev=4,e.next=7,this.props.payBox.walletPayOrder();case 7:J.a.success({content:"\u652f\u4ed8\u6210\u529f",hasMask:!1,duration:1e3}),setTimeout((function(){r.props.payBox.clear()}),500),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),J.a.error({content:e.t0.Message||"\u652f\u4ed8\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",hasMask:!1,duration:1e3}),this.setState({list:[]});case 15:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=(e.list,e.isShow),n=Object(i.jsxs)("div",{className:Ke,children:[this.renderDialogPayment(),Object(i.jsxs)("div",{style:{display:!t&&"none"},className:Ge,onClick:this.keyboardClickHander,children:[Object(i.jsxs)("div",{className:Qe,children:[Object(i.jsx)("div",{"data-key":"1",className:Ze,children:"1"}),Object(i.jsx)("div",{"data-key":"2",className:Ze,children:"2"}),Object(i.jsx)("div",{"data-key":"3",className:Ze,children:"3"})]}),Object(i.jsxs)("div",{className:Qe,children:[Object(i.jsx)("div",{"data-key":"4",className:Ze,children:"4"}),Object(i.jsx)("div",{"data-key":"5",className:Ze,children:"5"}),Object(i.jsx)("div",{"data-key":"6",className:Ze,children:"6"})]}),Object(i.jsxs)("div",{className:Qe,children:[Object(i.jsx)("div",{"data-key":"7",className:Ze,children:"7"}),Object(i.jsx)("div",{"data-key":"8",className:Ze,children:"8"}),Object(i.jsx)("div",{"data-key":"9",className:Ze,children:"9"})]}),Object(i.jsxs)("div",{className:Qe,children:[Object(i.jsx)("div",{className:"".concat(Ze," ").concat(Je)}),Object(i.jsx)("div",{"data-key":"0",className:Ze,children:"0"}),Object(i.jsx)("div",{"data-key":"-1",className:"".concat(Ze," ").concat(Je),children:Object(i.jsx)(N.a,{name:"BackspaceOutlined",size:18})})]})]})]});return ht.a.createPortal(n,document.body)}}]),n}(S.a.Component))||ft)||ft)||ft)||ft,gt="kucYJGkOsehW4V0YuYEHu";function yt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var _t,wt=Object(j.c)("payBox")(vt=Object(j.d)(vt=function(e){g()(n,e);var t=yt(n);function n(){var e;v()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onClose=function(){e.props.payBox.clear()},e}return f()(n,[{key:"render",value:function(){var e=this.props.payBox.step;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(A.a,{position:"bottom",maskClosable:!0,visible:this.props.payBox.visible,onClose:this.onClose,className:gt,children:[e===M.f.SURE&&Object(i.jsx)(ne,{}),e===M.f.PAYWAY&&Object(i.jsx)(Pe,{})]}),this.props.payBox.visible&&e===M.f.WALLET_PASSWORD&&Object(i.jsx)(bt,{}),this.props.payBox.visible&&Object(i.jsx)(ze,{visible:this.props.payBox.h5SureDialogVisible})]})}}]),n}(x.Component))||vt)||vt,Ot="_2MPU-H_HgChuI9oGx4pmnW",xt="_1If5ogoD2GFmeYo9eQScci",St="_3kAp4Ifa-u8M4svrnBCR0z",jt="Bs4vo7m3nVqp0C3xewx5D",Et="dKDsexn7TGpSD-4GYLrsm",Tt="_3DN6iEZdCX2C2KOQhy6QPt",kt="_1NoX2Xc5z9LkT8vDGRc0Da";function Ct(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var At,Mt=Object(j.c)("payBox")(_t=function(e){g()(n,e);var t=Ct(n);function n(e){var r;return v()(this,n),(r=t.call(this,e)).onClose=function(){r.props.payBox.visible=!1,setTimeout((function(){r.props.payBox.clear()}),500)},r.goToThePayConfirmPage=Object($.a)(u()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.state.isLoading){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,r.setState({isLoading:!0}),e.next=6,r.props.payBox.createOrder();case 6:r.setState({isLoading:!1}),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),J.a.error({content:e.t0.Message||"\u521b\u5efa\u8ba2\u5355\u5931\u8d25",hasMask:!1,duration:1e3}),r.onClose(),r.setState({isLoading:!1});case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),500),r.transMoneyToFixed=function(e){return Number(e).toFixed(2)},r.state={isLoading:!1},r}return f()(n,[{key:"render",value:function(){var e=this.state.isLoading,t=this.props.payBox.options,n=void 0===t?{}:t,r=n.amount;return Object(i.jsx)("div",{children:Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:St,id:Ot,children:[Object(i.jsx)(G,{currentPaymentData:n}),Object(i.jsxs)("div",{className:jt,children:["\u5408\u8ba1\uff1a",Object(i.jsxs)("span",{className:Et,children:["\uffe5",this.transMoneyToFixed(r)," "]})]}),Object(i.jsx)("div",{className:Tt,children:Object(i.jsx)(R.a,{type:"primary",onClick:this.goToThePayConfirmPage,size:"large",className:xt,full:!0,disabled:e,children:e?Object(i.jsx)(I.a,{type:"spinner",children:"\u751f\u6210\u8ba2\u5355\u4e2d..."}):"\u786e\u8ba4\u652f\u4ed8"})}),Object(i.jsx)("div",{onClick:this.onClose,className:kt,children:Object(i.jsx)(N.a,{name:"CloseOutlined",size:12})})]})})})}}]),n}(x.Component))||_t,Pt={payconfirmWrapper:"_1Y9PRwuLc-EXymjL08GtMN",icon:"qPmVcySkbryfcz-ym-Iu-",payTitle:"lw-11c14_0UjI60IHbeH7",payMoney:"_2rLW01UM_HWCB2vvCe8l3j",payM:"_30v8Fr1Dz5qhJbzzYPhn0X",payTab_top:"_1iXCu2yJOrxlXgJtjVIxAQ",payTab:"_1ZnlroNc1xNlpuWMKLb8Kc",payLine:"_1M3XjaJWFuqJa004tOrHEP",payTabActive:"_16K4ZskSy8qbKbLqapPJJH",wechatPayment:"_2NFjOm86V_LDKRHNi_i9LR",wPaymentDec:"MWATj79LiUm8BpWJUsiC_",wPayment_01:"_2iZTgnLkSW9mY3U5A_HcRc",wPayment_02:"_11QLm1GYLBvmYv_9lzD4z6",wPayment_03:"_2H8EDTRvAsG3Om2ztcLK3r",wPaymentCode:"_2N0662WBZG2W5mZx-3oAjc",walletPayment:"MZqafky4om8T3gwJ93gW7",walletTitle:"_22dVi5QnnVe2SkbI_eZSLG",walletDec:"_3zAuM6CLU5rOn01HoUq_-v",walletPay:"_2gLTSsbTDXNNdZjOUcUqzv",walletPayPwd:"hIX-rIRl4QDaxSd_6DHaW",walletBalance:"_1rl1tQGY17YaUch9uchOBc",walletSettingPwd:"_2xNmVI7UfZT6THjqUYz11B",walletText:"_14gRjL_9B2Unn3O_rf9D19",walletWarn:"_2IeY-uwKgd8I44hCP34280",walletChangePwd:"_2meNYO-RaU6SQ8meYrfck6",walletConfirmBc:"jIoAOmpbOklEC3BvCk9iB",walletConfirmBtn:"_33gPswNlGZol7NGEFWVLZm",walletPayment_01:"_3w2xAIxZnHTqyxHdrpODbI",paymentCloseBtn:"_1SoQzCxc0pwcGhclpbfHNE",forgetPassword:"_5GMZCqVizrW-1jQF1bd2t",payList:"_3SNT14VNGA-BfDNwrh6BKn",payListItem:"_2PouhOhoZOKEIduPuD-Py_",timeout:"_3J87k7er4Kd2eaDQWqKxBO"};function Rt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var Lt,Nt=Object(j.c)("site")(At=Object(j.c)("user")(At=Object(j.c)("payBox")(At=Object(j.d)(At=function(e){g()(n,e);var t=Rt(n);function n(e){var r;return v()(this,n),(r=t.call(this,e)).onClose=function(){r.props.payBox.visible=!1,setTimeout((function(){r.props.payBox.clear()}),500)},r.toMarryNumber=function(e){var t;switch(e){case 48:case 96:t="0";break;case 49:case 97:t="1";break;case 50:case 98:t="2";break;case 51:case 99:t="3";break;case 52:case 100:t="4";break;case 53:case 101:t="5";break;case 54:case 102:t="6";break;case 55:case 103:t="7";break;case 56:case 104:t="8";break;case 57:case 105:t="9"}return t},r.handleKeyDown=function(e){if(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105){var t=r.toMarryNumber(e.keyCode);r.updatePwd(t,"add")}else if(13==e.keyCode);else if(8==e.keyCode)return r.updatePwd("","delete"),e.returnValue&&(e.returnValue=!1),e.preventDefault&&e.preventDefault(),!1},r.updatePwd=function(e,t){var n=r.state.list,i=void 0===n?[]:n;if("add"==t){var o=Ye()(i);if(i.length>=6)return;r.setState({list:[].concat(o,[e])},(function(){r.state.list.length}))}else"delete"==t&&r.setState({list:i.slice(0,i.length-1)})},r.initState=function(){r.setState({paymentType:"wallet",list:[],imageShow:!1,isSubmit:!1}),r.props.payBox.payWay=M.c.WALLET,r.props.payBox.password=null},r.goSetPayPwa=function(){r.props.payBox.step=M.f.SET_PASSWORD},r.handleChangePaymentType=function(e){r.props.payBox.payWay=e,r.props.payBox.payWay===M.c.WX?r.props.payBox.wechatPayOrderQRCode():r.props.payBox.clearOrderStatusTimer()},r.handlePayConfirmed=Object($.a)(u()(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.state.isSubmit){e.next=2;break}return e.abrupt("return");case 2:if(r.setState({isSubmit:!0}),r.props.payBox.payWay!==M.c.WALLET){e.next=22;break}if(6===r.state.list.length){e.next=8;break}return J.a.error({content:"\u8bf7\u8f93\u5165\u652f\u4ed8\u5bc6\u7801",hasMask:!1,duration:1e3}),r.setState({isSubmit:!1}),e.abrupt("return");case 8:return t=r.state.list,n=void 0===t?[]:t,r.props.payBox.password=n.join(""),e.prev=10,e.next=13,r.props.payBox.walletPayOrder();case 13:J.a.success({content:"\u652f\u4ed8\u6210\u529f",hasMask:!1,duration:1e3}),r.onClose(),r.setState({isSubmit:!1}),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(10),J.a.error({content:e.t0.Message||"\u652f\u4ed8\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",hasMask:!1,duration:1e3}),r.initState();case 22:case"end":return e.stop()}}),e,null,[[10,18]])}))),500),r.transMoneyToFixed=function(e){return Number(e).toFixed(2)},r.renderDiffPaymementContent=function(){return r.props.payBox.payWay===M.c.WX?r.renderWechatCodePaymementContent():r.props.payBox.payWay===M.c.WALLET?r.renderWalletPaymementContent():void 0},r.handleImgFetchingError=function(){r.setState({imageShow:!1})},r.handleImgFetching=function(){r.setState({imageShow:!0})},r.handleTimeoutRefresh=u()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.payBox.wechatPayOrderQRCode();case 2:case"end":return e.stop()}}),e)}))),r.renderWechatCodePaymementContent=function(){return Object(i.jsxs)("div",{className:Pt.wechatPayment,children:[Object(i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(i.jsxs)("div",{className:Pt.wPaymentCode,children:[r.props.payBox.qrCodeTimeout&&Object(i.jsx)("div",{className:Pt.timeout,onClick:r.handleTimeoutRefresh,children:"\u5df2\u8d85\u65f6\uff0c\u70b9\u51fb\u5237\u65b0"}),!r.state.imageShow&&Object(i.jsx)(I.a,{type:"spinner",size:14,children:"\u52a0\u8f7d\u4e2d"}),Object(i.jsx)("img",{style:{display:r.state.imageShow?"block":"none"},onLoad:r.handleImgFetching,onError:r.handleImgFetchingError,src:r.props.payBox.wechatQRCode,alt:"\u4e8c\u7ef4\u7801"})]}),Object(i.jsxs)("div",{className:Pt.wPaymentDec,children:[Object(i.jsxs)("div",{className:Pt.wPayment_01,children:[Object(i.jsx)(N.a,{className:Pt.icon,name:"WechatPaymentOutlined",color:"#09bb07",size:16}),"\u5fae\u4fe1\u652f\u4ed8"]}),Object(i.jsxs)("div",{className:Pt.wPayment_02,children:[Object(i.jsx)(N.a,{className:Pt.icon,name:"ScanOutlined",color:"#09bb07",size:20}),Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{children:"\u6253\u5f00\u624b\u673a\u5fae\u4fe1\u626b\u4e00\u626b"}),Object(i.jsx)("p",{children:"\u626b\u63cf\u4e8c\u7ef4\u7801\u5b8c\u6210\u652f\u4ed8"})]})]})]})]}),Object(i.jsx)("div",{className:Pt.wPayment_03,children:Object(i.jsx)("p",{children:"\u4e8c\u7ef4\u7801\u6709\u6548\u65f6\u957f\u4e3a5\u5206\u949f\uff0c\u8bf7\u5c3d\u5feb\u652f\u4ed8"})})]})},r.renderWalletPaymementContent=function(){var e,t,n,o,a,s,c,l=r.props.user.userInfo,u=((void 0===l?{}:l)||{}).canWalletPay,d=r.props.payBox.options,f=(void 0===d?{}:d).amount,p=void 0===f?0:f,h=r.state,m=h.list,v=void 0===m?[]:m,b=h.isSubmit,g=v.join(""),y=!g||6!==g.length||b;return Object(i.jsxs)("div",{className:"".concat(Pt.walletPayment),children:[Object(i.jsxs)("div",{className:Pt.walletTitle,children:[Object(i.jsx)(N.a,{className:Pt.icon,name:"PurseOutlined",size:"20",color:"#1878f3"}),Object(i.jsx)("span",{className:Pt.text,children:"\u94b1\u5305\u652f\u4ed8"})]}),u?Object(i.jsxs)(i.Fragment,{children:[Number(null===(n=r.props.payBox)||void 0===n?void 0:n.walletAvaAmount)<Number(p)?Object(i.jsxs)("div",{className:Pt.walletDec,children:[Object(i.jsx)("span",{children:"\u94b1\u5305\u4f59\u989d"}),null!==(o=r.props.payBox)&&void 0!==o&&o.walletAvaAmount?Object(i.jsxs)("span",{className:Pt.walletBalance,children:["\uffe5",null===(a=r.props.payBox)||void 0===a?void 0:a.walletAvaAmount]}):Object(i.jsx)(I.a,{type:"spinner",size:14}),Object(i.jsx)("span",{className:Pt.walletWarn,children:"\u4f59\u989d\u4e0d\u8db3"})]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"".concat(Pt.walletDec," ").concat(Pt.walletPay),children:[Object(i.jsx)("span",{children:"\u94b1\u5305\u4f59\u989d"}),null!==(s=r.props.payBox)&&void 0!==s&&s.walletAvaAmount?Object(i.jsxs)("span",{className:Pt.walletBalance,children:["\uffe5",null===(c=r.props.payBox)||void 0===c?void 0:c.walletAvaAmount]}):Object(i.jsx)(I.a,{type:"spinner",size:14})]}),Object(i.jsxs)("div",{className:"".concat(Pt.walletDec," ").concat(Pt.walletPayPwd),children:[Object(i.jsx)("span",{children:"\u652f\u4ed8\u5bc6\u7801"}),Object(i.jsx)("div",{className:Pt.payList,children:r.renderPwdItem()})]})]}),Object(i.jsx)("div",{className:Pt.walletConfirmBc,children:Object(i.jsx)(R.a,{onClick:r.handlePayConfirmed,size:"large",className:Pt.walletConfirmBtn,type:"primary",disabled:y,full:!0,children:b?Object(i.jsx)(I.a,{type:"spinner",children:"\u652f\u4ed8\u4e2d..."}):"\u786e\u8ba4\u652f\u4ed8"})})]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"".concat(Pt.walletDec," ").concat(Pt.walletPay),children:[Object(i.jsx)("span",{children:"\u94b1\u5305\u4f59\u989d"}),null!==(e=r.props.payBox)&&void 0!==e&&e.walletAvaAmount?Object(i.jsxs)("span",{className:Pt.walletBalance,children:["\uffe5",null===(t=r.props.payBox)||void 0===t?void 0:t.walletAvaAmount]}):Object(i.jsx)(I.a,{type:"spinner",size:14})]}),Object(i.jsxs)("div",{className:Pt.walletDec,children:[Object(i.jsx)("span",{children:"\u652f\u4ed8\u5bc6\u7801"}),Object(i.jsxs)("span",{children:[Object(i.jsx)("span",{className:Pt.walletText,children:"\u94b1\u5305\u652f\u4ed8\uff0c\u9700 "}),Object(i.jsx)("span",{onClick:r.goSetPayPwa,className:Pt.walletSettingPwd,children:"\u8bbe\u7f6e\u652f\u4ed8\u5bc6\u7801"})]})]})]})]})},r.state={list:[],paymentType:"wallet",imageShow:!1},r}return f()(n,[{key:"componentDidMount",value:function(){var e=u()(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.initState(),document.addEventListener("keydown",this.handleKeyDown),n=null===(t=this.props)||void 0===t?void 0:t.user,r=n.id){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.props.payBox.getWalletInfo(r);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),J.a.error({content:"\u83b7\u53d6\u7528\u6237\u94b1\u5305\u4fe1\u606f\u5931\u8d25",duration:1e3});case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"renderPwdItem",value:function(){var e=this.state.list,t=(void 0===e?[]:e).map((function(e,t){return Object(i.jsx)("div",{className:"".concat(Pt.payListItem),children:"\u25cf"},t)}));if(t.length<6)for(var n=!1,r=t.length;r<6;r++)n||(n=!0),t.push(Object(i.jsx)("div",{className:"".concat(Pt.payListItem)},r));return t}},{key:"render",value:function(){var e,t=null===(e=this.props)||void 0===e?void 0:e.payBox,n=t.options,r=void 0===n?{}:n,o=(t.qrCodeTimeout,r.amount),a=void 0===o?0:o;return Object(i.jsx)("div",{children:Object(i.jsxs)("div",{className:Pt.payconfirmWrapper,children:[Object(i.jsx)("div",{className:Pt.payTitle,children:"\u652f\u4ed8"}),Object(i.jsxs)("div",{className:Pt.payMoney,children:["\u652f\u4ed8\u91d1\u989d\uff1a ",Object(i.jsxs)("span",{className:Pt.payM,children:["\uffe5",this.transMoneyToFixed(a)]})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:Pt.payTab_top,children:Object(i.jsxs)(ge.a.Group,{value:this.props.payBox.payWay,onChange:this.handleChangePaymentType,children:[this.props.site.isWechatPayOpen&&"none"!==this.props.site.wechatEnv&&Object(i.jsx)(ge.a,{name:"weixin",className:"".concat(Pt.payTab," "),children:"\u5fae\u4fe1\u652f\u4ed8"}),Object(i.jsx)(ge.a,{name:"wallet",className:"".concat(Pt.payTab),children:"\u94b1\u5305\u652f\u4ed8"})]})}),Object(i.jsx)(Y.a,{className:Pt.payLine}),Object(i.jsx)("div",{className:Pt.payTab_bottom,children:this.renderDiffPaymementContent()})]}),Object(i.jsx)("div",{onClick:this.onClose,className:Pt.paymentCloseBtn,children:Object(i.jsx)(N.a,{name:"CloseOutlined",size:12})})]})})}}]),n}(x.Component))||At)||At)||At)||At,Dt=(n("rB9j"),n("UxlC"),"_QHrisVZ9fi1NwXppdsJH"),It="_2llHaHh8bcIgRc-JxzIbvW",Bt="_3nOLATwJVHZ7u2eaLva0-i",Ht="_2LH25uiurQ_ArYoV0mStoO",Ut="_38L9WP--LldPBCVVXHS1m3",qt="_2knxvJvjKxRh3NpDsV27Zy",Vt=n("DetZ"),Ft=n.n(Vt);function Wt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var zt,Xt=Object(j.c)("user")(Lt=Object(j.c)("payBox")(Lt=Object(j.d)(Lt=function(e){g()(n,e);var t=Wt(n);function n(e){var r;return v()(this,n),(r=t.call(this,e)).initState=function(){r.setState({payPassword:null,isSubmit:!1})},r.handleCancel=function(){r.props.payBox.step=M.f.PAYWAY,r.initState()},r.handleSetPwd=function(e){r.setState({payPassword:e.target.value.replace(/\D/g,"")})},r.handleSubmit=Object($.a)(u()(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.state.isSubmit){e.next=2;break}return e.abrupt("return");case 2:r.setState({isSubmit:!0}),t=r.state.payPassword,n=r.props.user.id,r.props.payBox.password=t,r.props.payBox.setPayPassword(n).then((function(e){J.a.success({content:"\u8bbe\u7f6e\u5bc6\u7801\u6210\u529f",hasMask:!1,duration:1e3}),r.props.user.updateUserInfo(n),r.props.payBox.step=M.f.PAYWAY,r.props.payBox.visible=!0,r.initState()})).catch((function(e){console.log(e),J.a.error({content:"\u8bbe\u7f6e\u5931\u8d25\u8bf7\u91cd\u65b0\u8bbe\u7f6e",hasMask:!1,duration:1e3}),r.initState()}));case 7:case"end":return e.stop()}}),e)}))),500),r.state={payPassword:null,isSubmit:!1},r}return f()(n,[{key:"render",value:function(){var e=this.state,t=(e.list,e.payPassword),n=e.isSubmit;return Object(i.jsxs)("div",{className:Dt,children:[Object(i.jsxs)("div",{className:It,children:[Object(i.jsx)("div",{className:Bt,children:"\u8bbe\u7f6e\u652f\u4ed8\u5bc6\u7801"}),Object(i.jsx)("div",{className:qt,onClick:this.handleCancel,children:Object(i.jsx)(N.a,{name:"CloseOutlined",size:12})})]}),Object(i.jsx)(Ft.a,{type:"number",maxLength:6,value:t,onChange:this.handleSetPwd,mode:"password",className:Ht,placeholder:"\u8bf7\u8f93\u5165\u652f\u4ed8\u5bc6\u7801"}),Object(i.jsx)(R.a,{onClick:this.handleSubmit,disabled:!t||6!==t.length||n,type:"primary",className:Ut,children:"\u8bbe\u7f6e\u652f\u4ed8\u5bc6\u7801"})]})}}]),n}(x.Component))||Lt)||Lt)||Lt,Yt=n("n4oF"),Kt="_3CgVzJEE5KgjW1EJ9r1OZY";function Gt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var Qt,Zt=Object(j.c)("payBox")(zt=Object(j.d)(zt=function(e){g()(n,e);var t=Gt(n);function n(){var e;v()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onClose=function(){e.props.payBox.visible&&(e.props.payBox.visible=!1)},e}return f()(n,[{key:"render",value:function(){return!Object(Yt.a)()&&Object(i.jsxs)(Le.a,{visible:this.props.payBox.visible,position:"center",maskClosable:!0,onClose:this.onClose,className:Kt,children:[this.props.payBox.step===M.f.SURE&&Object(i.jsx)(Mt,{}),this.props.payBox.step===M.f.PAYWAY&&Object(i.jsx)(Nt,{}),(this.props.payBox.step===M.f.WALLET_PASSWORD||this.props.payBox.step===M.f.SET_PASSWORD)&&Object(i.jsx)(Xt,{})]})}}]),n}(S.a.Component))||zt)||zt;function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function en(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var tn=new(function(e){g()(n,e);var t=en(n);function n(){return v()(this,n),t.apply(this,arguments)}return n}(T.a)),nn=Object(j.c)("site")(Qt=Object(j.c)("payBox")(Qt=Object(j.c)("user")(Qt=Object(j.d)(Qt=function(e){g()(n,e);var t=en(n);function n(e){var r;return v()(this,n),(r=t.call(this,e)).createPayBox=u()(a.a.mark((function e(){var t,n,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{data:{}},r.props.payBox.clear(),r.props.user.id){e.next=6;break}return J.a.error({content:"\u9700\u8981\u767b\u5f55\u540e\u624d\u53ef\u4ee5\u8fdb\u884c\u652f\u4ed8",duration:2e3}),Ce.a.saveAndLogin(),e.abrupt("return");case 6:if(!(Number(Object(k.a)(t,"data.amount",0))<.1)){e.next=9;break}return J.a.error({content:"\u6700\u5c0f\u652f\u4ed8\u91d1\u989d\u5fc5\u987b\u5927\u4e8e 0.1 \u5143"}),e.abrupt("return");case 9:r.props.payBox.options=$t({},t.data),n=function(){},r.props.payBox.isAnonymous=t.isAnonymous||!1,r.props.payBox.onSuccess=t.success||n,r.props.payBox.onFailed=t.failed||n,r.props.payBox.onCompleted=t.completed||n,r.props.payBox.onOrderCreated=t.orderCreated||n,r.props.payBox.visible=!0,r.props.payBox.currentPage=t.currentPage||{};case 18:case"end":return e.stop()}}),e)}))),r.createPayBox=r.createPayBox.bind(h()(r)),tn.on("createPayBox",r.createPayBox),r}return f()(n,[{key:"render",value:function(){var e=this.props.site.platform;return"pc"===e?Object(i.jsx)(Zt,{}):"h5"===e?Object(i.jsx)(wt,{options:this.props.payBox.options}):null}}]),n}(x.Component))||Qt)||Qt)||Qt)||Qt;nn.createPayBox=function(e){return tn.emit("createPayBox",e)}},uPFr:function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"g",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"j",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return f}));var r=5e4,i={product:"product",follow:"follow",emoji:"emoji",topic:"topic"},o={file:0,image:1,audio:1,video:1,message:4,answer:5},a={text:100,image:101,voice:102,video:103,goods:104,qa:105,redPacket:106,reward:107,file:108,emoji:99,paid:112,paidPost:113,paidAttachment:114,at:115,topic:116,draft:117,saveDraft:118,abandonDraft:119,anonymity:10001,vote:109,iframe:10002},s=["image/*"],c=["video/mp4","video/x-m4v","video/*"],l=["*/*"],u={create:"create",edit:"edit",draft:"draft"},d=["WAV","MP3","M4A"],f=["PPTX","PPT","POT","POTX","PPS","PPSX","DPS","DPT","PPTM","POTM","PPSM","DOC","DOT","WPS","WPT","DOCX","DOTX","DOCM","DOTM","XLS","XLT","ET","ETT","XLSX","XLTX","CSV","XLSB","XLSM","XLTM","ETS","PDF","LRC","C","CPP","H","ASM","S","JAVA","ASP","BAT","BAS","PRG","CMD","RTF","TXT","LOG","XML","HTM","HTML"]},uYGS:function(e,t,n){"use strict";var r=n("nKUr"),i=(n("q1tI"),n("Qais")),o=n.n(i),a=n("MCNy"),s=n.n(a),c=n("kMSe"),l=n("TSYQ"),u=n.n(l),d={wrapper:"_2xF1OKl9Oe2Ks7p38lWALj",h5:"_1vn67wQlblQvNHJ4U8vjU4",wrapper__delete:"_1w7HTfGS74OCb3OoVrsXkx",richtext:"_1gGbtsSORL7-0NfqsbThQ9"};t.a=Object(c.c)("threadPost")(Object(c.d)((function(e){var t=e.content,n=e.whiteList,i=void 0===n?["bilibili","youku","iqiyi","music.163.com","qq.com","em.iq.com","xigua","myqcloud.com"]:n,a=e.isDeleteShow,c=void 0!==a&&a,l=e.threadPost,f=e.h5,p=Object(r.jsx)(o.a,{className:d.richtext,content:t,iframeWhiteList:i,onClick:function(){},onImgClick:function(){},onLinkClick:function(){},transformer:function(e){return e}});if(!c)return p;var h=f?d.h5:d.pc;return Object(r.jsxs)("div",{id:"dzq-post-video",className:u()(d.wrapper,h),children:[p,Object(r.jsx)("div",{className:d.wrapper__delete,onClick:function(){return l.setPostData({iframe:{}})},children:Object(r.jsx)(s.a,{name:"DeleteOutlined"})})]})})))},uhBA:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,r,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||e,o),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function c(e,t){0===--e._eventsCount?e._events=new o:delete e._events[t]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),l.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},l.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},l.prototype.emit=function(e,t,n,r,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var c,l,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,o),!0;case 6:return u.fn.call(u.context,t,n,r,o,a),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var f,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,r);break;default:if(!c)for(f=1,c=new Array(d-1);f<d;f++)c[f-1]=arguments[f];u[l].fn.apply(u[l].context,c)}}return!0},l.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return c(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||c(this,o);else{for(var s=0,l=[],u=a.length;s<u;s++)(a[s].fn!==t||r&&!a[s].once||n&&a[s].context!==n)&&l.push(a[s]);l.length?this._events[o]=1===l.length?l[0]:l:c(this,o)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&c(this,t)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,e.exports=l},uy83:function(e,t,n){var r=n("0Dky");e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},vNgL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectValue=function(e){return function(){return(0,r.isCallable)(e)?e.apply(void 0,arguments):e}};var r=n("uScP")},vgmO:function(e,t,n){(function(t){var n;n="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},e.exports=n}).call(this,n("ntbh"))},waxf:function(e,t,n){"use strict";var r=n("67WC"),i=n("tycR").filter,o=n("SEBh"),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("filter",(function(e){for(var t=i(a(this),e,arguments.length>1?arguments[1]:void 0),n=o(this,this.constructor),r=0,c=t.length,l=new(s(n))(c);c>r;)l[r]=t[r++];return l}))},wi0z:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UploadWebAdapter=void 0;t.UploadWebAdapter={}},x2xJ:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("lSNA")),o=r(n("lwsE")),a=r(n("W8MJ")),s=r(n("7W2i")),c=r(n("a1gu")),l=r(n("Nsbk")),u=r(n("q1tI")),d=n("GDuN"),f=n("Nsua"),p=n("KhEo");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var v=function(e){(0,s.default)(n,e);var t=m(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,a.default)(n,[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props),t=this.RenderComponent;return u.default.createElement(t,e,this.props.children)}}]),n}((0,d.baseComponentFactory)({viewAdapter:f.DividerViewAdapter,logicalAdapter:p.DividerLogicalAdapter}));t.default=v},ypFw:function(e,t,n){"use strict";var r=n("67WC"),i=n("1Y/n").left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){return i(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},yqws:function(e,t){e.exports=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],o=2&r.flags[2],a=8&r.flags[2],s=16&r.flags[2],c=32&r.flags[2],l=65536&r.flags[0],u=131072&r.flags[0];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),o&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),a&&(r.defaultSampleDuration=n.getUint32(t),t+=4),s&&(r.defaultSampleSize=n.getUint32(t),t+=4),c&&(r.defaultSampleFlags=n.getUint32(t)),l&&(r.durationIsEmpty=!0),!i&&u&&(r.baseDataOffsetIsMoof=!0),r}},zSZm:function(e,t,n){"use strict";var r=n("67WC"),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){for(var e,t=this,n=i(t).length,r=a(n/2),o=0;o<r;)e=t[o],t[o++]=t[--n],t[n]=e;return t}))},zZWi:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n("nKUr"),i=n("o0o1"),o=n.n(i),a=n("lSNA"),s=n.n(a),c=(n("ls82"),n("yXPU")),l=n.n(c),u=n("lwsE"),d=n.n(u),f=n("W8MJ"),p=n.n(f),h=n("7W2i"),m=n.n(h),v=n("a1gu"),b=n.n(v),g=n("Nsbk"),y=n.n(g),_=n("q1tI"),w=n.n(_),O=n("kMSe"),x=n("n4oF"),S=n("lN2P");function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var i=y()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}function k(e){var t;return Object(O.c)("user")(t=Object(O.d)(t=function(t){m()(i,t);var n=T(i);function i(e){return d()(this,i),n.call(this,e)}return p()(i,null,[{key:"getInitialProps",value:function(){var t=l()(o.a.mark((function t(n,r){var i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}throw Error("CheckLoginStatus\u5fc5\u987b\u524d\u7f6e\u4f7f\u7528HOCFetchSiteData");case 2:if(t.prev=2,i={},!Object(x.a)()){t.next=9;break}if(!e.getInitialProps){t.next=9;break}return t.next=8,e.getInitialProps(n);case 8:i=t.sent;case 9:return t.abrupt("return",E({},i));case 12:return t.prev=12,t.t0=t.catch(2),console.log("err",t.t0),t.abrupt("return",{});case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e,n){return t.apply(this,arguments)}}()}]),p()(i,[{key:"componentDidMount",value:function(){this.props.user.isLogin()||S.a.saveAndLogin()}},{key:"componentDidUpdate",value:function(){this.props.user.isLogin()||S.a.saveAndLogin()}},{key:"render",value:function(){return this.props.user.isLogin()?Object(r.jsx)(e,E({},this.props)):null}}]),i}(w.a.Component))||t)||t}},zyNV:function(e,t){e.exports=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}}},[["SwMc",1,0,3,5,4,9,2]]]);